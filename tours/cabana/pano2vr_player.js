//////////////////////////////////////////////////////////////////////
// Pano2VR 6.0 beta3/16902 HTML5/CSS3 & WebGL Panorama Player       //
// License: Pablo Weisbek                                           //
// (c) 2018, Garden Gnome Software, http://ggnome.com               //
//////////////////////////////////////////////////////////////////////

function G(){var p="perspective",e=["Webkit","Moz","O","ms","Ms"],h;for(h=0;h<e.length;h++)"undefined"!==typeof document.documentElement.style[e[h]+"Perspective"]&&(p=e[h]+"Perspective");"undefined"!==typeof document.documentElement.style[p]?"webkitPerspective"in document.documentElement.style?(p=document.createElement("style"),e=document.createElement("div"),h=document.head||document.getElementsByTagName("head")[0],p.textContent="@media (-webkit-transform-3d) {#ggswhtml5{height:5px}}",h.appendChild(p),
e.id="ggswhtml5",document.documentElement.appendChild(e),h=5===e.offsetHeight,p.parentNode.removeChild(p),e.parentNode.removeChild(e)):h=!0:h=!1;return h}function N(){var p;if(p=!!window.WebGLRenderingContext)try{var e=document.createElement("canvas");e.width=100;e.height=100;var h=e.getContext("webgl");h||(h=e.getContext("experimental-webgl"));p=!!h}catch(b){p=!1}return p}
var __extends=this&&this.__extends||function(p,e){function h(){this.constructor=p}for(var b in e)e.hasOwnProperty(b)&&(p[b]=e[b]);p.prototype=null===e?Object.create(e):(h.prototype=e.prototype,new h)},ggP2VR;
(function(p){var e=function(){function b(a){this.g=null;this.fg=this.Rk=this.ob=!1;this.eb=!0;this.ib=this.Da=this.ua=0;this.f=70;this.Sa=0;this.autoplay=this.kg=!1;this.id="";this.i=this.pan=0;this.g=a;this.cd=this.Fc=100;this.sd=1}b.prototype.Kb=function(a){var d;if(d=a.getAttributeNode("id"))this.id=d.nodeValue.toString();if(d=a.getAttributeNode("pan"))this.pan=Number(d.nodeValue);if(d=a.getAttributeNode("tilt"))this.i=Number(d.nodeValue)};b.prototype.lm=function(a){var d="",c=this.g,b=!0;if(c.df){var l=
new p.va(0,0,-100);l.ua(-this.i*Math.PI/180);l.Da(this.pan*Math.PI/180);l.Da(-c.pan.c*Math.PI/180);l.ua(c.i.c*Math.PI/180);l.ib(c.O.c*Math.PI/180);.01<=l.z&&(b=!1)}c.yc&&(d+="perspective("+a+"px) ");d=d+("translate3d(0px,0px,"+a+"px) ")+("rotateZ("+c.O.c.toFixed(10)+"deg) ");d+="rotateX("+c.i.c.toFixed(10)+"deg) ";d+="rotateY("+(-c.pan.c).toFixed(10)+"deg) ";d+="rotateY("+this.pan.toFixed(10)+"deg) ";d+="rotateX("+(-this.i).toFixed(10)+"deg) ";a=1E4;var l=this.b.videoWidth,g=this.b.videoHeight;if(0==
l||0==g)l=640,g=480;0<this.Fc&&(l=this.Fc);0<this.cd&&(g=this.cd);0<l&&0<g&&(this.b.width=l,this.b.height=g,this.b.style.width=l+"px",this.b.style.height=g+"px");0<this.f&&(a=l/(2*Math.tan(this.f/2*Math.PI/180)));d+="translate3d(0px,0px,"+(-a).toFixed(10)+"px) ";d+="rotateZ("+this.ib.toFixed(10)+"deg) ";d+="rotateY("+(-this.Da).toFixed(10)+"deg) ";d+="rotateX("+this.ua.toFixed(10)+"deg) ";this.sd&&1!=this.sd&&(d+="scaleY("+this.sd+") ");d+="translate3d("+-l/2+"px,"+-g/2+"px,0px) ";this.b.style[c.Ua+
"Origin"]="0% 0%";this.ob&&(d="",1==this.Sa&&(d+="scale("+Math.min(c.o.width/l,c.o.height/g)+") "),d+="translate3d("+-l/2+"px,"+-g/2+"px,0px) ");this.ho!=d&&(this.ho=d,this.b.style[c.Ua]=d,this.b.style.visibility=b&&this.eb?"visible":"hidden",this.fg&&this.Rk==this.ob&&(this.b.style[c.ad]="all 0s linear 0s"),this.Rk=this.ob)};b.prototype.zf=function(a){this.b&&(this.b.style.visibility=a?"visible":"hidden")};b.prototype.Ie=function(){var a=this.g;a.Y?(this.b.style.left=a.o.width/2+"px",this.b.style.top=
a.o.height/2+"px"):(this.b.style.left=a.margin.left+a.o.width/2+"px",this.b.style.top=a.margin.top+a.o.height/2+"px")};return b}();p.iq=e;var h=function(b){function a(a){b.call(this,a);this.Xj=this.uj=this.th=this.Ff=this.wl=this.Ij=this.ha=!1;this.Pf=this.Eb=null;this.we=this.Pg=0;this.ji=this.tj=this.ye=!1;this.url=[];this.loop=0;this.level=1;this.$b=0;this.mode=1;this.uh=10;this.Ef=this.rb=0;this.la=1;this.Sc=this.Bc=this.Ac=this.Rc=0}__extends(a,b);a.prototype.Wl=function(){this.ha&&this.ji?this.ji=
!1:(!this.ha&&this.g.df&&(this.Cd(),this.addElement()),0==this.loop?this.ha?(this.Eb=null,this.Vc()):this.b.play():0<this.Yc?(this.Yc--,this.ha||(this.b.currentTime=0),this.th&&(this.bd&&0==this.bd.gain.value||0==this.sc.gain.value&&0==this.vc.gain.value&&0==this.tc.gain.value&&0==this.uc.gain.value)||(this.ha?(this.Eb=null,this.Vc()):this.b.play())):this.ha&&(this.Eb=null,this.ye=!1))};a.prototype.gh=function(){this.Xj=!1;var a=this.g.Ba;a&&(this.ha||(this.source=a.createMediaElementSource(this.b)),
2==this.mode||3==this.mode||5==this.mode?(this.Se=a.createChannelSplitter(2),this.sc=a.createGain(),this.tc=a.createGain(),this.uc=a.createGain(),this.vc=a.createGain(),this.Sf=a.createChannelMerger(2),this.ha||this.source.connect(this.Se),this.Se.connect(this.sc,0),this.Se.connect(this.tc,0),this.Se.connect(this.uc,1),this.Se.connect(this.vc,1),this.sc.connect(this.Sf,0,0),this.tc.connect(this.Sf,0,1),this.uc.connect(this.Sf,0,0),this.vc.connect(this.Sf,0,1),this.Sf.connect(a.destination)):(this.bd=
a.createGain(),this.ha||this.source.connect(this.bd),this.bd.connect(a.destination)))};a.prototype.Lg=function(){var a=this.g.Ba;this.ob||this.uj||(this.sc.gain.setValueAtTime(this.Rc,a.currentTime),this.vc.gain.setValueAtTime(this.Sc,a.currentTime),this.tc.gain.setValueAtTime(this.Ac,a.currentTime),this.uc.gain.setValueAtTime(this.Bc,a.currentTime))};a.prototype.si=function(){if(!this.Xj){var a=this.g,c=this.g.Ba;if(this.b||this.ha){var b,l=this.pan-a.pan.c;for(b=this.i-a.i.c;-180>l;)l+=360;for(;180<
l;)l-=360;var g=this.$b,k=this.uh;0==k&&(k=.01);0>k&&(k=a.f.c);this.Nb||(this.Nb=new p.va,this.Nb.wk(this.pan,this.i));0!=this.mode&&1!=this.mode||!c||this.bd&&this.bd.gain.setValueAtTime(this.level*a.V*this.la,c.currentTime);if(2==this.mode&&c){var t=.5*Math.cos(l*Math.PI/180)+.5;this.Rc=Math.sqrt(t)*this.la*this.level*a.V;this.Sc=Math.sqrt(t)*this.la*this.level*a.V;this.Ac=Math.sqrt(1-t)*this.la*this.level*a.V;this.Bc=Math.sqrt(1-t)*this.la*this.level*a.V;this.Lg()}if(3==this.mode){0>l?l<-this.rb?
l+=this.rb:l=0:l=l>this.rb?l-this.rb:0;var m=this.level;b=Math.abs(b);b=b<this.Ef?0:b-this.Ef;var h=1-b/k;if(Math.abs(l)>k||0>h)t=m*g*a.V,c?(this.Rc=t*this.la,this.Sc=t*this.la,this.Bc=this.Ac=0,this.Lg()):this.b.volume=m*g*a.V;else if(t=1-Math.abs(l/k),c){var e=m*(g+(1-g)*h*t)*a.V,t=m*g*a.V;0<=l?(this.Rc=e*this.la,this.Sc=t*this.la):(this.Rc=t*this.la,this.Sc=e*this.la);2*Math.abs(l)<k?(t=1-Math.abs(2*l)/k,e=m*(g+(1-g)*h*t)*a.V,t=.5*m*(1-g)*h*(1-t)*a.V,0<=l?(this.Sc=e*this.la,this.Bc=t*this.la,this.Ac=
0):(this.Rc=e*this.la,this.Ac=t*this.la,this.Bc=0)):(t=1-(Math.abs(2*l)-k)/k,e=.5*m*(1-g)*h*t*a.V,0<=l?(this.Bc=e*this.la,this.Ac=0):(this.Ac=e*this.la,this.Bc=0));this.Lg()}else this.b.volume=m*(g+(1-g)*h*t)*a.V}4==this.mode&&(Math.abs(l)<this.rb&&Math.abs(b)<this.Ef?this.Ff||(this.Ff=!0,this.Yc=this.loop-1,this.ha?this.ye||this.Vc():this.b.play()):this.Ff=!1);5==this.mode&&(b=180*Math.acos(a.Ni.Xh(this.Nb))/Math.PI,b<this.rb?c?(this.Rc=this.level*a.V*this.la,this.Sc=this.level*a.V*this.la,this.Bc=
this.Ac=0,this.Lg()):this.b.volume=this.level*a.V:c?(b<this.rb+k?(0>l?l=l>-this.rb?0:l+this.rb:l=l<this.rb?0:l-this.rb,e=1-Math.max(b-this.rb,0)/k,t=Math.max(1-Math.abs(l)*Math.cos(this.i*Math.PI/180)/k,0),0<l?(this.Rc=this.level*(e*(1-this.$b)+this.$b)*a.V*this.la,this.Sc=this.level*(e*t*(1-this.$b)+this.$b)*a.V*this.la,this.Ac=0,this.Bc=this.level*e*(1-t)*a.V*this.la):(this.Rc=this.level*(e*t*(1-this.$b)+this.$b)*a.V*this.la,this.Sc=this.level*(e*(1-this.$b)+this.$b)*a.V*this.la,this.Ac=this.level*
e*(1-t)*a.V*this.la,this.Bc=0)):(e=this.level*this.$b*a.V,this.Rc=e*this.la,this.Sc=e*this.la,this.Bc=this.Ac=0),this.Lg()):(b-=this.rb,b<k&&0<k?(t=1-Math.abs(b/k),this.b.volume=this.level*(g+(1-g)*t)*a.V):this.b.volume=g*a.V));6==this.mode&&(b=180*Math.acos(a.Ni.Xh(this.Nb))/Math.PI,Math.abs(b)<this.rb?this.Ff||(this.Ff=!0,this.Yc=this.loop-1,this.ha?this.ye||this.Vc():this.b.play()):this.Ff=!1)}}};a.prototype.jk=function(){var a=this;a.Eb=this.g.Ba.createBufferSource();a.Eb.addEventListener("ended",
function(){a.Wl()},!1);2==a.mode||3==a.mode||5==a.mode?a.Eb.connect(a.Se):a.Eb.connect(a.bd)};a.prototype.Qo=function(a){var c=this,b=this.g.Ba;c.jk();this.g.M("createBufferSoundSource()");b.decodeAudioData(a,function(a){c.Pf=a;c.Eb.buffer=a;c.g.M("audio Data decoded");c.tj&&(c.Vc(),c.tj=!1)})};a.prototype.Vc=function(){var a=this.g.Ba,c=this.we;this.Pf?(null==this.Eb&&(this.jk(),this.Eb.buffer=this.Pf),this.Pg=a.currentTime-c,this.we=0,this.ye=!0,this.ji=!1,this.Eb.start(0,c),this.g.M("buffer Source started")):
(this.g.M("bufferSoundPlay() -> no audio buffer -> playWhenReady"),this.tj=!0)};a.prototype.Ei=function(){var a=this.g.Ba.currentTime-this.Pg;this.Re();this.we=a};a.prototype.Re=function(){this.Eb&&this.ye&&(this.ji=!0,this.Eb.disconnect(),this.Eb.stop(0),this.Eb=null);this.Pg=this.we=0;this.ye=!1};a.prototype.Pm=function(){var a=this.g.Ba;return this.we?this.we:this.Pg?a.currentTime-this.Pg:0};a.prototype.Qm=function(a){this.Re();this.we=a;this.Vc()};a.prototype.addElement=function(){var a=-1,c=
this,b=this.g,l=this.g.Ba;try{for(var g=!1,k=0;k<b.N.length;k++)b.N[k].id==c.id&&(a=k,null==b.N[k].b&&!b.N[k].ha||b.N[k].url.join()!=c.url.join()||b.N[k].loop!=c.loop||b.N[k].mode!=c.mode||(g=!0,b.N[k].pan=c.pan,b.N[k].i=c.i,b.N[k].level=c.level,b.N[k].$b=c.$b,b.N[k].uh=c.uh,b.N[k].rb=c.rb,b.N[k].Ef=c.Ef));if(g)b.M("Keep playing "+c.id);else{if(0<=a){var t=b.N[a];if(null!=t.b||t.ha)if(l&&b.La.enabled)b.La.Tg.push(t),1!=b.C.Oa&&2!=b.C.Oa&&b.La.tk(t);else{try{t.ha?t.Ei():t.b.pause()}catch(e){b.M(e)}try{t.Cd()}catch(e){b.M(e)}}}if(l&&
b.Hc&&(2==this.mode||3==this.mode||5==this.mode)){if(0<c.url.length){c.ha=!0;c.gh();var m=new XMLHttpRequest;m.open("GET",b.hc(c.url[0]),!0);m.responseType="arraybuffer";m.onload=function(){c.Qo(m.response)};m.send();c.th=!1}}else{c.b=document.createElement("audio");c.b.crossOrigin=b.crossOrigin;c.b.setAttribute("class","ggmedia");b.cf&&c.b.setAttribute("id",b.cf+c.id);for(k=0;k<c.url.length;k++)g=void 0,g=document.createElement("source"),""!=c.url[k]&&"#"!=c.url[k]&&(g.crossOrigin=b.crossOrigin,
g.setAttribute("src",b.hc(c.url[k])),c.b.appendChild(g));c.b.volume=c.level*b.V;0<c.b.childNodes.length&&(b.T.appendChild(c.b),c.b.addEventListener("ended",function(){c.Wl()},!1),l&&(c.gh(),c.th=!1,0==c.loop&&c.source.mediaElement&&(c.source.mediaElement.loop=!0)))}1<=c.loop&&(c.Yc=c.loop-1);0<=a?b.N[a]=c:b.N.push(c);c.si();-1!=this.g.Nc.indexOf(c.id)||-1!=this.g.Nc.indexOf("_main")&&-1==this.g.$d.indexOf(c.id)||(1!=c.mode&&2!=c.mode&&3!=c.mode&&5!=c.mode||!(0<=c.loop)||l&&b.La.enabled||(c.ha||(c.b.autoplay=
!0),c.autoplay=!0),0==c.mode&&0<=c.loop&&(c.autoplay=!0))}}catch(e){this.g.M(e)}};a.prototype.Cd=function(){try{this.g.M("Remove Snd:"+this.id),this.ha||(this.g.T.removeChild(this.b),this.b=null)}catch(a){this.g.M(a)}};a.prototype.Kb=function(a){b.prototype.Kb.call(this,a);var c;(c=a.getAttributeNode("url"))&&this.url.push(c.nodeValue.toString());if(c=a.getAttributeNode("level"))this.level=Number(c.nodeValue);if(c=a.getAttributeNode("loop"))this.loop=Number(c.nodeValue);if(c=a.getAttributeNode("mode"))this.mode=
Number(c.nodeValue);if(c=a.getAttributeNode("nodechangekeep"))this.wl=1==Number(c.nodeValue);if(c=a.getAttributeNode("field"))this.uh=Number(c.nodeValue);if(c=a.getAttributeNode("ambientlevel"))this.$b=Number(c.nodeValue);if(c=a.getAttributeNode("pansize"))this.rb=Number(c.nodeValue);if(c=a.getAttributeNode("tiltsize"))this.Ef=Number(c.nodeValue);for(a=a.firstChild;a;)"source"==a.nodeName&&(c=a.getAttributeNode("url"))&&this.url.push(c.nodeValue.toString()),a=a.nextSibling};return a}(e);p.Em=h;h=
function(b){function a(a){b.call(this,a);this.poster="";this.ib=this.Da=this.ua=0;this.f=50;this.Sa=0;this.kd=this.kg=!1}__extends(a,b);a.prototype.oe=function(){1!=this.Sa&&4!=this.Sa||this.gg(!this.ob);2==this.Sa&&this.g.Cl(this.id)};a.prototype.gg=function(a){var c=this.g,b=c.Ba;if(1==this.Sa||4==this.Sa)if(this.ob=a,this.g.Db)(c=c.ga)&&c.activateSound(this.id,this.ob?1:0);else{if(this.ob)this.b.style.pointerEvents="auto",this.b.style.cursor="pointer",this.b.style.zIndex=(c.dh+8E4).toString(),
this.b.style[this.g.ad]="all 1s ease 0s",this.g.ic(this.id)||c.xe(this.id);else{this.b.style.pointerEvents="none";this.b.style.cursor="default";this.b.style.zIndex=c.dh.toString();this.b.style[this.g.ad]="all 1s ease 0s";this.uj=!0;var l=this;setTimeout(function(){l.uj=!1},1E3)}if(b&&(2==this.mode||3==this.mode||5==this.mode)){var b=b.currentTime,g=this.sc.gain.value,k=this.vc.gain.value,t=this.tc.gain.value,m=this.uc.gain.value;this.ob?(this.sc.gain.linearRampToValueAtTime(g,b),this.sc.gain.linearRampToValueAtTime(this.level*
c.V,b+1),this.vc.gain.linearRampToValueAtTime(k,b),this.vc.gain.linearRampToValueAtTime(this.level*c.V,b+1),this.tc.gain.linearRampToValueAtTime(t,b),this.tc.gain.linearRampToValueAtTime(0,b+1),this.uc.gain.linearRampToValueAtTime(m,b),this.uc.gain.linearRampToValueAtTime(0,b+1)):(this.sc.gain.linearRampToValueAtTime(g,b),this.sc.gain.linearRampToValueAtTime(this.Rc,b+1),this.vc.gain.linearRampToValueAtTime(k,b),this.vc.gain.linearRampToValueAtTime(this.Sc,b+1),this.tc.gain.linearRampToValueAtTime(t,
b),this.tc.gain.linearRampToValueAtTime(this.Ac,b+1),this.uc.gain.linearRampToValueAtTime(m,b),this.uc.gain.linearRampToValueAtTime(this.Bc,b+1))}this.fg=!0;this.g.mm()}2==this.Sa&&(a?this.g.xe(this.id):this.g.sj(this.id))};a.prototype.hg=function(){this.fg=!1;this.b.style[this.g.ad]="none"};a.prototype.$p=function(){0==this.loop?this.b.play():0<this.Yc?(this.Yc--,this.b.currentTime=0,this.b.play()):this.el=!1};a.prototype.Kb=function(a){b.prototype.Kb.call(this,a);var c;if(c=a.getAttributeNode("poster"))this.poster=
String(c.nodeValue);if(c=a.getAttributeNode("rotx"))this.ua=Number(c.nodeValue);if(c=a.getAttributeNode("roty"))this.Da=Number(c.nodeValue);if(c=a.getAttributeNode("rotz"))this.ib=Number(c.nodeValue);if(c=a.getAttributeNode("fov"))this.f=Number(c.nodeValue);if(c=a.getAttributeNode("width"))this.Fc=Number(c.nodeValue);if(c=a.getAttributeNode("height"))this.cd=Number(c.nodeValue);this.sd=(c=a.getAttributeNode("stretch"))?Number(c.nodeValue):1;if(c=a.getAttributeNode("clickmode"))this.Sa=Number(c.nodeValue);
if(c=a.getAttributeNode("handcursor"))this.kg=1==Number(c.nodeValue);if(c=a.getAttributeNode("startmutedmobile"))this.Ij=1==Number(c.nodeValue)};a.prototype.addElement=function(){var a=this,c=this.g;try{a.b=document.createElement("video");a.b.setAttribute("class","ggmedia");a.b.crossOrigin=c.crossOrigin;a.b.hidden=!0;a.b.addEventListener("click",function(a){a.stopPropagation()});c.cf&&a.b.setAttribute("id",c.cf+a.id);if(c.Yg)a.b.setAttribute("playsinline","playsinline"),a.b.setAttribute("style","display: none; max-width:none;");
else if(a.b.setAttribute("style","max-width:none;pointer-events:none;"),a.b.setAttribute("playsinline","playsinline"),1==a.Sa||4==a.Sa)a.b.addEventListener(c.tm(),function(){a.hg()},!1),a.b.addEventListener("transitionend",function(){a.hg()},!1);var b;for(b=0;b<a.url.length;b++){var l=void 0,l=document.createElement("source");l.crossOrigin=c.crossOrigin;l.setAttribute("src",c.hc(a.url[b]));a.b.appendChild(l)}""!=a.poster&&(a.b.poster=c.hc(a.poster),0>a.loop&&(a.b.a="none"));a.b.volume=a.level*c.V;
1<=a.loop&&(a.Yc=a.loop-1);(1==a.mode||2==a.mode||3==a.mode||5==a.mode)&&0<=a.loop&&(a.b.autoplay=!0,a.el=!0,a.autoplay=!0,(this.g.Hc||this.g.Rd)&&this.g.Yf&&this.Ij&&a.b.setAttribute("muted","muted"));c.J.push(this);c.Yg?c.T.appendChild(a.b):(a.b.style.position="absolute",a.Fc&&(a.b.width=a.Fc),a.cd&&(a.b.height=a.cd),c.D.appendChild(a.b),(this.g.Hc||this.g.Rd)&&this.g.Yf&&this.Ij?this.Xj=!0:a.gh());a.b.addEventListener("ended",function(){a.$p()},!1)}catch(g){c.M(g)}};a.prototype.registerElement=
function(a,c){this.kd=!0;this.b=c;this.id=a;this.level=1;this.g.J.push(this)};a.prototype.Cd=function(){var a=this.g;a.Yg&&(a.H.deleteTexture(this.nc),this.nc=0,a.T.removeChild(this.b));a.nm&&a.D.removeChild(this.b);this.b=null};return a}(h);p.Yj=h;h=function(b){function a(a){b.call(this,a);this.url="";this.ib=this.Da=this.ua=0;this.f=50;this.Sa=0;this.kg=!1;this.cd=this.Fc=100;this.sd=1}__extends(a,b);a.prototype.Kb=function(a){b.prototype.Kb.call(this,a);var c;if(c=a.getAttributeNode("url"))this.url=
c.nodeValue.toString();if(c=a.getAttributeNode("rotx"))this.ua=Number(c.nodeValue);if(c=a.getAttributeNode("roty"))this.Da=Number(c.nodeValue);if(c=a.getAttributeNode("rotz"))this.ib=Number(c.nodeValue);if(c=a.getAttributeNode("fov"))this.f=Number(c.nodeValue);if(c=a.getAttributeNode("width"))this.Fc=Number(c.nodeValue);if(c=a.getAttributeNode("height"))this.cd=Number(c.nodeValue);this.sd=(c=a.getAttributeNode("stretch"))?Number(c.nodeValue):1;if(c=a.getAttributeNode("clickmode"))this.Sa=Number(c.nodeValue);
if(c=a.getAttributeNode("handcursor"))this.kg=1==Number(c.nodeValue);for(a=a.firstChild;a;)"source"==a.nodeName&&(c=a.getAttributeNode("url"))&&(this.url=c.nodeValue.toString()),a=a.nextSibling};a.prototype.hg=function(){this.fg=!1;this.b.style[this.g.ad]="none"};a.prototype.oe=function(){1!==this.Sa&&4!==this.Sa||this.gg(!this.ob)};a.prototype.gg=function(a){var c=this.g;if(1===this.Sa||4===this.Sa)this.ob=a,this.g.Db?(a=this.g.ga)&&a.activateSound(this.id,this.ob?1:0):(this.ob?(this.b.style.pointerEvents=
"auto",this.b.style.cursor="pointer",this.b.style.zIndex=(c.dh+8E4).toString()):(this.b.style.pointerEvents="none",this.b.style.cursor="default",this.b.style.zIndex=c.dh.toString()),this.b.style[c.ad]="all 1s ease 0s",this.fg=!0,c.hm())};a.prototype.addElement=function(){var a=this,c=this.g;try{a.b=document.createElement("img");a.b.setAttribute("style","-webkit-user-drag:none; max-width:none; pointer-events:none;");a.b.setAttribute("class","ggmedia");a.b.hidden=!0;a.b.addEventListener("click",function(a){a.stopPropagation()});
c.cf&&a.b.setAttribute("id",c.cf+a.id);a.b.ondragstart=function(){return!1};if(1===a.Sa||4===a.Sa)a.b.addEventListener(c.tm(),function(){a.hg()},!1),a.b.addEventListener("transitionend",function(){a.hg()},!1);a.b.setAttribute("src",c.hc(a.url));a.Fc&&(a.b.width=a.Fc);a.cd&&(a.b.height=a.cd);c.Xa.push(a);a.b.style.position="absolute";c.D.appendChild(a.b)}catch(b){c.M("Error addimage:"+b)}};a.prototype.Cd=function(){this.g.D.removeChild(this.b);this.b=null};return a}(e);p.Cm=h;e=function(b){function a(a){b.call(this,
a);this.alpha=this.ek=50;this.type=0;this.color=16777215}__extends(a,b);a.prototype.Kb=function(a){b.prototype.Kb.call(this,a);var c;if(c=a.getAttributeNode("blinding"))this.ek=Number(c.nodeValue);if(c=a.getAttributeNode("alpha"))this.alpha=Number(c.nodeValue);if(c=a.getAttributeNode("type"))this.type=Number(c.nodeValue);if(c=a.getAttributeNode("color"))this.color=1*Number(c.nodeValue)};return a}(e);p.Dm=e;e=function(){function b(a){this.type="empty";this.Vl=this.id=this.target=this.description=this.title=
this.url="";this.bh=100;this.jg=20;this.wi=!1;this.b=null;this.lb=this.pa=this.i=this.pan=0;this.ec=a.A.ec;this.bc=a.A.bc;this.dc=a.A.dc;this.ac=a.A.ac;this.af=a.A.af;this.$g=[]}b.prototype.Xe=function(){this.id=this.id;this.pan=this.pan;this.tilt=this.i;this.url=this.url;this.target=this.target;this.title=this.title;this.description=this.description;this.skinid=this.Vl;this.obj=this.b};b.prototype.Kb=function(a){var d;if(d=a.getAttributeNode("url"))this.url=d.nodeValue.toString();if(d=a.getAttributeNode("target"))this.target=
d.nodeValue.toString();if(d=a.getAttributeNode("title"))this.title=d.nodeValue.toString();if(d=a.getAttributeNode("description"))this.description=d.nodeValue.toString();if(d=a.getAttributeNode("id"))this.id=d.nodeValue.toString();if(d=a.getAttributeNode("skinid"))this.Vl=d.nodeValue.toString();if(d=a.getAttributeNode("width"))this.bh=Number(d.nodeValue);if(d=a.getAttributeNode("height"))this.jg=Number(d.nodeValue);if(d=a.getAttributeNode("wordwrap"))this.wi=1==Number(d.nodeValue);d=a.getAttributeNode("pan");
this.pan=1*(d?Number(d.nodeValue):0);d=a.getAttributeNode("tilt");this.i=1*(d?Number(d.nodeValue):0);if(d=a.getAttributeNode("bordercolor"))this.ec=1*Number(d.nodeValue);if(d=a.getAttributeNode("backgroundcolor"))this.bc=1*Number(d.nodeValue);if(d=a.getAttributeNode("borderalpha"))this.dc=1*Number(d.nodeValue);if(d=a.getAttributeNode("backgroundalpha"))this.ac=1*Number(d.nodeValue);if(d=a.getAttributeNode("handcursor"))this.af=1==Number(d.nodeValue);for(a=a.firstChild;a;){if("vertex"==a.nodeName){var c=
{pan:0,i:0};d=a.getAttributeNode("pan");c.pan=1*(d?Number(d.nodeValue):0);d=a.getAttributeNode("tilt");c.i=1*(d?Number(d.nodeValue):0);this.$g.push(c)}a=a.nextSibling}this.Xe()};return b}();p.Gh=e})(ggP2VR||(ggP2VR={}));
(function(p){var e=function(){function e(b,a){this.x=b;this.y=a}e.prototype.Ya=function(b,a){this.x=b;this.y=a};e.prototype.vd=function(b,a,d){var c=a.y-b.y;this.x=b.x+(a.x-b.x)*d;this.y=b.y+c*d};e.prototype.Om=function(b,a,d,c,f){var l;l=new e;l.vd(b,d,f);b=new e;b.vd(d,c,f);d=new e;d.vd(c,a,f);a=new e;a.vd(l,b,f);l=new e;l.vd(b,d,f);b=new e;b.vd(a,l,f);this.x=b.x;this.y=b.y};e.prototype.Bi=function(b,a,d,c,f){var l=new e,g=.5,k=.25,t;do l.Om(b,a,d,c,g),t=l.x-f,g=0<t?g-k:g+k,k/=2;while(.01<Math.abs(t));
this.x=l.x;this.y=l.y};return e}();p.qc=e})(ggP2VR||(ggP2VR={}));
(function(p){var e=function(){function e(b,a,d,c,f){this.x=b;this.y=a;this.z=d;this.nd=c;this.Nb=f}e.prototype.Ya=function(b,a,d,c,f){this.x=b;this.y=a;this.z=d;this.nd=c;this.Nb=f};e.prototype.toString=function(){return"("+this.x+","+this.y+","+this.z+") - ("+this.nd+","+this.Nb+")"};e.prototype.ua=function(b){var a=Math.sin(b);b=Math.cos(b);var d=this.y,c=this.z;this.y=b*d-a*c;this.z=a*d+b*c};e.prototype.Vo=function(){var b=this.y;this.y=-this.z;this.z=b};e.prototype.Uo=function(){var b=this.y;
this.y=this.z;this.z=-b};e.prototype.Da=function(b){var a=Math.sin(b);b=Math.cos(b);var d=this.x,c=this.z;this.x=b*d+a*c;this.z=-a*d+b*c};e.prototype.Wo=function(){var b=this.x;this.x=-this.z;this.z=b};e.prototype.ib=function(b){var a=Math.sin(b);b=Math.cos(b);var d=this.x,c=this.y;this.x=b*d-a*c;this.y=a*d+b*c};e.prototype.Nl=function(){var b=this.x;this.x=-this.y;this.y=b};e.prototype.Dd=function(b){return this.ua(b*Math.PI/180)};e.prototype.ze=function(b){return this.Da(b*Math.PI/180)};e.prototype.Ae=
function(b){return this.ib(b*Math.PI/180)};e.prototype.clone=function(){return new e(this.x,this.y,this.z,this.nd,this.Nb)};e.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};e.prototype.normalize=function(){var b=this.length();0<b&&(b=1/b,this.x*=b,this.y*=b,this.z*=b)};e.prototype.Xh=function(b){return this.x*b.x+this.y*b.y+this.z*b.z};e.prototype.wk=function(b,a){var d;d=Math.cos(a*Math.PI/180);this.x=d*Math.sin(b*Math.PI/180);this.y=Math.sin(a*Math.PI/180);
this.z=d*Math.cos(b*Math.PI/180)};e.prototype.Km=function(){return 180*Math.atan2(-this.x,-this.z)/Math.PI};e.prototype.Lm=function(){return 180*Math.asin(this.y/this.length())/Math.PI};e.prototype.vd=function(b,a,d){this.x=b.x*d+a.x*(1-d);this.y=b.y*d+a.y*(1-d);this.z=b.z*d+a.z*(1-d);this.nd=b.nd*d+a.nd*(1-d);this.Nb=b.Nb*d+a.Nb*(1-d)};return e}();p.va=e})(ggP2VR||(ggP2VR={}));
(function(p){var e=function(){function e(){this.Rl()}e.prototype.Rl=function(){this.Sb=1;this.jc=this.Tb=this.Bb=0;this.Ub=1;this.Vb=this.Gb=this.kc=0;this.Hb=1};e.prototype.clone=function(b){this.Sb=b.Sb;this.Bb=b.Bb;this.Tb=b.Tb;this.jc=b.jc;this.Ub=b.Ub;this.kc=b.kc;this.Gb=b.Gb;this.Vb=b.Vb;this.Hb=b.Hb};e.prototype.kp=function(b){var a=Math.cos(b);b=Math.sin(b);this.Sb=1;this.jc=this.Tb=this.Bb=0;this.Ub=a;this.kc=-b;this.Gb=0;this.Vb=b;this.Hb=a};e.prototype.lp=function(b){var a=Math.cos(b);
b=Math.sin(b);this.Sb=a;this.Bb=0;this.Tb=b;this.jc=0;this.Ub=1;this.kc=0;this.Gb=-b;this.Vb=0;this.Hb=a};e.prototype.mp=function(b){var a=Math.cos(b);b=Math.sin(b);this.Sb=a;this.Bb=-b;this.Tb=0;this.jc=b;this.Ub=a;this.Vb=this.Gb=this.kc=0;this.Hb=1};e.prototype.hp=function(b){this.kp(b*Math.PI/180)};e.prototype.ip=function(b){this.lp(b*Math.PI/180)};e.prototype.jp=function(b){this.mp(b*Math.PI/180)};e.prototype.Dd=function(b){this.Kc||(this.Kc=new e,this.Sd=new e);this.Kc.hp(b);this.Sd.clone(this);
this.multiply(this.Kc,this.Sd)};e.prototype.ze=function(b){this.Kc||(this.Kc=new e,this.Sd=new e);this.Kc.ip(b);this.Sd.clone(this);this.multiply(this.Kc,this.Sd)};e.prototype.Ae=function(b){this.Kc||(this.Kc=new e,this.Sd=new e);this.Kc.jp(b);this.Sd.clone(this);this.multiply(this.Kc,this.Sd)};e.prototype.multiply=function(b,a){this.Sb=b.Sb*a.Sb+b.Bb*a.jc+b.Tb*a.Gb;this.Bb=b.Sb*a.Bb+b.Bb*a.Ub+b.Tb*a.Vb;this.Tb=b.Sb*a.Tb+b.Bb*a.kc+b.Tb*a.Hb;this.jc=b.jc*a.Sb+b.Ub*a.jc+b.kc*a.Gb;this.Ub=b.jc*a.Bb+
b.Ub*a.Ub+b.kc*a.Vb;this.kc=b.jc*a.Tb+b.Ub*a.kc+b.kc*a.Hb;this.Gb=b.Gb*a.Sb+b.Vb*a.jc+b.Hb*a.Gb;this.Vb=b.Gb*a.Bb+b.Vb*a.Ub+b.Hb*a.Vb;this.Hb=b.Gb*a.Tb+b.Vb*a.kc+b.Hb*a.Hb};e.prototype.xo=function(b){var a,d,c;a=b.x;d=b.y;c=b.z;b.x=a*this.Sb+d*this.Bb+c*this.Tb;b.y=a*this.jc+d*this.Ub+c*this.kc;b.z=a*this.Gb+d*this.Vb+c*this.Hb};return e}();p.xl=e})(ggP2VR||(ggP2VR={}));
(function(p){p.$={create:function(e){var h;"undefined"!=typeof Float32Array?h=new Float32Array(16):h=Array(16);e&&(h[0]=e[0],h[1]=e[1],h[2]=e[2],h[3]=e[3],h[4]=e[4],h[5]=e[5],h[6]=e[6],h[7]=e[7],h[8]=e[8],h[9]=e[9],h[10]=e[10],h[11]=e[11],h[12]=e[12],h[13]=e[13],h[14]=e[14],h[15]=e[15]);return h},set:function(e,h){h[0]=e[0];h[1]=e[1];h[2]=e[2];h[3]=e[3];h[4]=e[4];h[5]=e[5];h[6]=e[6];h[7]=e[7];h[8]=e[8];h[9]=e[9];h[10]=e[10];h[11]=e[11];h[12]=e[12];h[13]=e[13];h[14]=e[14];h[15]=e[15];return h},qe:function(e){e[0]=
1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e},multiply:function(e,h,b){b||(b=e);var a=e[0],d=e[1],c=e[2],f=e[3],l=e[4],g=e[5],k=e[6],t=e[7],m=e[8],x=e[9],p=e[10],q=e[11],u=e[12],r=e[13],w=e[14];e=e[15];var z=h[0],n=h[1],C=h[2],A=h[3],y=h[4],B=h[5],D=h[6],E=h[7],F=h[8],H=h[9],I=h[10],J=h[11],K=h[12],L=h[13],M=h[14];h=h[15];b[0]=z*a+n*l+C*m+A*u;b[1]=z*d+n*g+C*x+A*r;b[2]=z*c+n*k+C*p+A*w;b[3]=z*f+n*t+C*q+A*e;b[4]=y*a+B*l+D*m+
E*u;b[5]=y*d+B*g+D*x+E*r;b[6]=y*c+B*k+D*p+E*w;b[7]=y*f+B*t+D*q+E*e;b[8]=F*a+H*l+I*m+J*u;b[9]=F*d+H*g+I*x+J*r;b[10]=F*c+H*k+I*p+J*w;b[11]=F*f+H*t+I*q+J*e;b[12]=K*a+L*l+M*m+h*u;b[13]=K*d+L*g+M*x+h*r;b[14]=K*c+L*k+M*p+h*w;b[15]=K*f+L*t+M*q+h*e;return b},translate:function(e,h,b){var a=h[0],d=h[1];h=h[2];if(!b||e==b)return e[12]=e[0]*a+e[4]*d+e[8]*h+e[12],e[13]=e[1]*a+e[5]*d+e[9]*h+e[13],e[14]=e[2]*a+e[6]*d+e[10]*h+e[14],e[15]=e[3]*a+e[7]*d+e[11]*h+e[15],e;var c=e[0],f=e[1],l=e[2],g=e[3],k=e[4],t=e[5],
m=e[6],x=e[7],p=e[8],q=e[9],u=e[10],r=e[11];b[0]=c;b[1]=f;b[2]=l;b[3]=g;b[4]=k;b[5]=t;b[6]=m;b[7]=x;b[8]=p;b[9]=q;b[10]=u;b[11]=r;b[12]=c*a+k*d+p*h+e[12];b[13]=f*a+t*d+q*h+e[13];b[14]=l*a+m*d+u*h+e[14];b[15]=g*a+x*d+r*h+e[15];return b},scale:function(e,h,b){var a=h[0],d=h[1];h=h[2];if(!b||e==b)return e[0]*=a,e[1]*=a,e[2]*=a,e[3]*=a,e[4]*=d,e[5]*=d,e[6]*=d,e[7]*=d,e[8]*=h,e[9]*=h,e[10]*=h,e[11]*=h,e;b[0]=e[0]*a;b[1]=e[1]*a;b[2]=e[2]*a;b[3]=e[3]*a;b[4]=e[4]*d;b[5]=e[5]*d;b[6]=e[6]*d;b[7]=e[7]*d;b[8]=
e[8]*h;b[9]=e[9]*h;b[10]=e[10]*h;b[11]=e[11]*h;b[12]=e[12];b[13]=e[13];b[14]=e[14];b[15]=e[15];return b},rotate:function(e,h,b,a){var d=b[0],c=b[1];b=b[2];var f=Math.sqrt(d*d+c*c+b*b);if(!f)return null;1!=f&&(f=1/f,d*=f,c*=f,b*=f);var l=Math.sin(h),g=Math.cos(h),k=1-g;h=e[0];var f=e[1],t=e[2],m=e[3],x=e[4],p=e[5],q=e[6],u=e[7],r=e[8],w=e[9],z=e[10],n=e[11],C=d*d*k+g,A=c*d*k+b*l,y=b*d*k-c*l,B=d*c*k-b*l,D=c*c*k+g,E=b*c*k+d*l,F=d*b*k+c*l,d=c*b*k-d*l,c=b*b*k+g;a?e!=a&&(a[12]=e[12],a[13]=e[13],a[14]=e[14],
a[15]=e[15]):a=e;a[0]=h*C+x*A+r*y;a[1]=f*C+p*A+w*y;a[2]=t*C+q*A+z*y;a[3]=m*C+u*A+n*y;a[4]=h*B+x*D+r*E;a[5]=f*B+p*D+w*E;a[6]=t*B+q*D+z*E;a[7]=m*B+u*D+n*E;a[8]=h*F+x*d+r*c;a[9]=f*F+p*d+w*c;a[10]=t*F+q*d+z*c;a[11]=m*F+u*d+n*c;return a},nn:function(e,h,b,a,d,c,f){f||(f=p.$.create());var l=h-e,g=a-b,k=c-d;f[0]=2*d/l;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=2*d/g;f[6]=0;f[7]=0;f[8]=(h+e)/l;f[9]=(a+b)/g;f[10]=-(c+d)/k;f[11]=-1;f[12]=0;f[13]=0;f[14]=-(c*d*2)/k;f[15]=0;return f},perspective:function(e,h,b,a,d){e=
b*Math.tan(e*Math.PI/360);h=e*h;return p.$.nn(-h,h,-e,e,b,a,d)},mq:function(e,h,b,a,d,c,f){f||(f=p.$.create());var l=h-e,g=a-b,k=c-d;f[0]=2/l;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=2/g;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=-2/k;f[11]=0;f[12]=-(e+h)/l;f[13]=-(a+b)/g;f[14]=-(c+d)/k;f[15]=1;return f}}})(ggP2VR||(ggP2VR={}));
(function(p){var e=function(){function e(b){this.ma=p.$.create();this.qb=p.$.create();this.dd=0;this.Ta=[];this.og=!1;this.Kj=this.Wi=this.yj=1;this.Ue=1E6;this.nh=[!1,!1,!1,!1,!1,!1];this.ii=!1;this.Ri=[];this.Zj=8;this.qo=new p.xl;this.Nd=[];this.g=b;if(b.Hc||b.Rd)b.Rg=2}e.prototype.mg=function(){var b=this.g.H;if(b){var a=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\n\t\t\t\t\tuniform sampler2D uSampler;\n\t\t\t\t\tvoid main(void) {\n\t\t\t\t\t\tgl_FragColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n\t\t\t\t\t}");
b.compileShader(a);b.getShaderParameter(a,b.COMPILE_STATUS)||(console&&console.log(b.getShaderInfoLog(a)),alert(b.getShaderInfoLog(a)),a=null);var d=b.createShader(b.VERTEX_SHADER);this.Ec(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\n\t\t\t\tattribute vec2 aTextureCoord;\n\t\t\t\tuniform mat4 uMVMatrix;\n\t\t\t\tuniform mat4 uPMatrix;\n\t\t\t\tuniform float uZoffset;\n\t\t\t\tvarying vec2 vTextureCoord;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tgl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n\t\t\t\t\tgl_Position.z += uZoffset;\n\t\t\t\t\tvTextureCoord = aTextureCoord;\n\t\t\t\t}");
this.F=b.createProgram();this.hf(this.F,d,a);this.F.Z=b.getAttribLocation(this.F,"aVertexPosition");b.enableVertexAttribArray(this.F.Z);this.F.Aa=b.getAttribLocation(this.F,"aTextureCoord");b.enableVertexAttribArray(this.F.Aa);this.F.Ud=b.getUniformLocation(this.F,"uPMatrix");this.F.Dg=b.getUniformLocation(this.F,"uMVMatrix");this.F.tf=b.getUniformLocation(this.F,"uSampler");this.F.xi=b.getUniformLocation(this.F,"uZoffset");a=b.createShader(b.VERTEX_SHADER);this.Ec(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\n\t\t\t\tuniform vec2 uCanvasDimensions;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tvec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n\t\t\t\t\tgl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, 0.0, 1.0);\n\t\t\t\t}");
d=b.createShader(b.FRAGMENT_SHADER);this.Ec(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nuniform vec3 uColor;\n\t\t\t\tuniform float uAlpha;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tgl_FragColor = vec4(uColor, uAlpha);\n\t\t\t\t}");this.zd=b.createProgram();this.hf(this.zd,a,d);this.zd.Z=b.getAttribLocation(this.zd,"aVertexPosition");b.enableVertexAttribArray(this.zd.Z);d=b.createShader(b.VERTEX_SHADER);this.Ec(d,"precision highp float;\n\t\t\t\tattribute vec3 aVertexPosition;\n\t\t\t\tvarying vec2 vTextureCoord;\n\t\t\t\tuniform vec2 uCanvasDimensions;\n\t\t\t\tuniform vec4 uRect;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tvec2 pos = vec2(uRect.x + uRect.z*aVertexPosition.x,uRect.y + uRect.w*aVertexPosition.y);\n\t\t\t\t\tvec2 pointNorm = (pos / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n\t\t\t\t\tgl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, 1.0, 1.0);\n\t\t\t\t\tvTextureCoord.s=aVertexPosition.x;\n\t\t\t\t\tvTextureCoord.t=1.0-aVertexPosition.y;\n\t\t\t\t}");
a=b.createShader(b.FRAGMENT_SHADER);this.Ec(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\n\t\t\t\tuniform sampler2D uSampler;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tgl_FragColor = texture2D(uSampler,vTextureCoord);\n\t\t\t\t}");this.Zf=b.createProgram();this.hf(this.Zf,d,a)}};e.prototype.Ch=function(){var b=this.g,a=b.H,d,c;a?(d=a.createShader(a.FRAGMENT_SHADER),c=this.$i(13),this.Ec(d,c),c=a.createShader(a.VERTEX_SHADER),
this.Ec(c,"precision highp float;\nattribute vec3 aVertexPosition;\nuniform vec2 uCanvasDimensions;\nvarying vec2 dst;\nuniform vec2 dstSize;\nuniform float zOffset;\nvoid main(void) {\n vec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, zOffset, 1.0);\n dst.x= -1.0 + 2.0*((aVertexPosition.x + 0.5) / uCanvasDimensions.x);\n dst.y= (-1.0 * uCanvasDimensions.y + 2.0*(aVertexPosition.y + 0.5)) / uCanvasDimensions.x;\n}\n"),
this.Hl=a.createProgram(),this.hf(this.Hl,c,d),d=a.createShader(a.FRAGMENT_SHADER),c=this.$i(4),this.Ec(d,c),c=a.createShader(a.VERTEX_SHADER),this.Ec(c,"precision highp float;\nattribute vec3 aVertexPosition;\nuniform vec2 uCanvasDimensions;\nvarying vec2 dst;\nuniform vec2 dstSize;\nuniform float zOffset;\nvoid main(void) {\n vec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, zOffset, 1.0);\n dst.x= -1.0 + 2.0*((aVertexPosition.x + 0.5) / uCanvasDimensions.x);\n dst.y= (-1.0 * uCanvasDimensions.y + 2.0*(aVertexPosition.y + 0.5)) / uCanvasDimensions.x;\n}\n"),
this.Il=a.createProgram(),this.hf(this.Il,c,d),d=a.createShader(a.FRAGMENT_SHADER),c=this.$i(b.s.format),this.Ec(d,c),c=a.createShader(a.VERTEX_SHADER),this.Ec(c,"precision highp float;\nattribute vec3 aVertexPosition;\nuniform vec2 uCanvasDimensions;\nvarying vec2 dst;\nuniform vec2 dstSize;\nvoid main(void) {\n vec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, 0.0, 1.0);\n dst.x= -1.0 + 2.0*((aVertexPosition.x + 0.5) / uCanvasDimensions.x);\n dst.y= (-1.0 * uCanvasDimensions.y + 2.0*(aVertexPosition.y + 0.5)) / uCanvasDimensions.x;\n}\n"),
this.Jl=a.createProgram(),this.hf(this.Jl,c,d),this.Zh||(this.Zh=a.createBuffer())):this.g.M("No WebGL to initRemapShader!")};e.prototype.Ec=function(b,a){var d=this.g.H;d.shaderSource(b,a);d.compileShader(b);d.getShaderParameter(b,d.COMPILE_STATUS)||(console&&console.log(d.getShaderInfoLog(b)),O&&alert(d.getShaderInfoLog(b)))};e.prototype.hf=function(b,a,d){var c=this.g.H;c.attachShader(b,a);c.attachShader(b,d);c.linkProgram(b);c.getProgramParameter(b,c.LINK_STATUS)||(alert("Could not initialise shader program"),
console&&console.log(c.getError()));c.useProgram(b)};e.prototype.$i=function(b){var a=this.g,d;d="#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#define M_PI 3.14159265358979323846\nvarying vec2 dst;\nuniform vec2 srcScale;\nuniform vec2 srcOffset;\nuniform float rectDstDistance;\nuniform float fisheyeDistance;\nuniform float stereoDistance;\nuniform float directionBlend;\nuniform mat4 matRotate; // = mat4( 1.0,0.0,0.0,0.0, 0.0,1.0,0.0,0.0, 0.0,0.0,1.0,0.0, 0.0,0.0,0.0,1.0 );\nconst float rectSrcDistance = 1.0;\nuniform vec2 tonemap;\n";
d=(13==b?d+"uniform samplerCube cubeTexture;":d+"uniform sampler2D tileTexture;\n")+"void main()\n{\n";d+="vec4 direction;\n";d+="vec2 src;\n";d+="vec2 srcCord;\n";d+="vec2 texc;\n";var c=this.Nk(a.ra());a.ra()!=a.lc&&0!=a.lc?(a=this.Nk(a.lc),d+="vec4 direction1,direction2;\n",d+=c.replace("direction=","direction1="),d+=a.replace("direction=","direction2="),d+="direction=normalize(mix(direction1, direction2,1.0-directionBlend));\n"):d+=c;d+="direction=direction*matRotate;\n";13==b&&(d+="direction.z=-direction.z;",
d+="gl_FragColor = textureCube(cubeTexture, direction.xyz);");4==b&&(d+="float iz=1.0/(direction.z * rectSrcDistance);\n",d+="src.x=-direction.x*iz;\n",d+="src.y= direction.y*iz;\n",d+="texc=src * srcScale + srcOffset;\n",d+="if (",d+="(direction.z<0.0) && ",d+="(texc.x>=0.0) && (texc.x<=1.0) && (texc.y>=0.0) && (texc.y<=1.0)) {\n",d+="  gl_FragColor = texture2D(tileTexture, texc);\n",d+="} else {\n",d+="  discard;\n",d+="}\n");1==b&&(d+="src.x=atan(float(-direction.x), float(-direction.z));",d+=
"src.y=asin(direction.y);\n",d+="texc=src * srcScale + srcOffset;\n",d+="gl_FragColor = texture2D(tileTexture, texc);\n");14==b&&(d+="vec2 cf;\n",d+="if ((direction.z<0.0) && (direction.z<=-abs(direction.x)) && (direction.z<=-abs(direction.y))) {\n",d+="  src.x=-direction.x/direction.z;\n",d+="  src.y=+direction.y/direction.z;\n",d+="  cf.x=1.0;cf.y=3.0;\n",d+="}\n",d+="if ((direction.x>=0.0) && (direction.x>=abs(direction.y)) && (direction.x>=abs(direction.z))) {\n",d+="  src.x=+direction.z/direction.x;\n",
d+="  src.y=-direction.y/direction.x;\n",d+="  cf.x=3.0;cf.y=3.0;\n",d+="}\n",d+="if ((direction.z>=0.0) && (direction.z>=abs(direction.x)) && (direction.z>=abs(direction.y))) {\n",d+="  src.x=-direction.x/direction.z;\n",d+="  src.y=-direction.y/direction.z;\n",d+="  cf.x=5.0;cf.y=3.0;\n",d+="}\n",d+="if ((direction.x<=0.0) && (direction.x<=-abs(direction.y)) && (direction.x<=-abs(direction.z))) {\n",d+="  src.x=+direction.z/direction.x;\n",d+="  src.y=+direction.y/direction.x;\n",d+="  cf.x=1.0;cf.y=1.0;\n",
d+="}\n",d+="if ((direction.y>=0.0) && (direction.y>=abs(direction.x)) && (direction.y>=abs(direction.z))) {\n",d+="  src.x=+direction.x/direction.y;\n",d+="  src.y=-direction.z/direction.y;\n",d+="  cf.x=5.0;cf.y=1.0;\n",d+="}\n",d+="if ((direction.y<=0.0) && (direction.y<=-abs(direction.x)) && (direction.y<=-abs(direction.z))) {\n",d+="  src.x=-direction.x/direction.y;\n",d+="  src.y=-direction.z/direction.y;\n",d+="  cf.x=3.0;cf.y=1.0;\n",d+="}\n",d+="texc.x=(cf.x+src.x*srcScale.x) / 6.0;\n",d+=
"texc.y=(cf.y+src.y*srcScale.y) / 4.0;\n",d+="gl_FragColor = texture2D(tileTexture, texc);\n");return d+="}\n"};e.prototype.Nk=function(b){var a="";switch(b){case 4:a+="direction.x=dst.x*rectDstDistance;\ndirection.y=dst.y*rectDstDistance;\ndirection.z=-1.0;\n";break;case 12:a+="float r,ph,ro;\nr=length(dst.xy)*0.5;\nro=atan(float(dst.x),float(-dst.y));\nph=r / fisheyeDistance;\ndirection.x= sin(ph) * sin(ro);\ndirection.y=-sin(ph) * cos(ro);\ndirection.z=-cos(ph);\n";break;case 9:a+="float n;\nvec2 ind;\nind=dst*stereoDistance;\nn=1.0 + ind.x*ind.x + ind.y*ind.y;\ndirection.x=2.0*ind.x/n;\ndirection.y=2.0*ind.y/n;\ndirection.z=(n-2.0)/n;\n"}return a+
"direction.w=0.0;\ndirection=normalize(direction);\n"};e.prototype.Xk=function(b){var a,d,c,f,l=this.g,g=this.g.H;this.Mi=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,this.Mi);var k=[-1,-1,1,1,-1,1,1,1,1,-1,1,1];for(a=0;12>a;a++)2>a%3&&(k[a]*=b);g.bufferData(g.ARRAY_BUFFER,new Float32Array(k),g.STATIC_DRAW);this.ge=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,this.ge);var t=[1,0,0,0,0,1,1,1];g.bufferData(g.ARRAY_BUFFER,new Float32Array(t),g.STATIC_DRAW);this.Xc=g.createBuffer();g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,
this.Xc);var e=[0,1,2,0,2,3];g.bufferData(g.ELEMENT_ARRAY_BUFFER,new Uint16Array(e),g.STATIC_DRAW);var k=[],e=[],t=[],x=new p.va;for(b=0;6>b;b++){c=b%3;f=3>b?1:0;for(d=0;4>d;d++){x.x=-1;x.y=-1;x.z=1;for(a=0;a<d;a++)x.Nl();t.push((0>x.x?.33:0)+.33*c,(0>x.y?0:.5)+.5*f);if(4>b)for(a=0;a<b;a++)x.Wo();else 5==b?x.Vo():x.Uo();k.push(x.x,x.y,x.z)}a=4*b;e.push(0+a,1+a,2+a,0+a,2+a,3+a)}l.s.Vj=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,l.s.Vj);g.bufferData(g.ARRAY_BUFFER,new Float32Array(k),g.STATIC_DRAW);
l.s.ki=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,l.s.ki);g.bufferData(g.ARRAY_BUFFER,new Float32Array(t),g.STATIC_DRAW);l.s.fj=g.createBuffer();g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,l.s.fj);g.bufferData(g.ELEMENT_ARRAY_BUFFER,new Uint16Array(e),g.STATIC_DRAW);this.jo=g.createBuffer();this.io=g.createBuffer()};e.prototype.bj=function(b){var a=this;return function(){try{if(b.Bo)return;var d=a.g.H;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,1);var c=!1;null!=b.se&&b.se.complete?b.Sk||(d.bindTexture(d.TEXTURE_2D,
b),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,b.se),c=b.Sk=!0):null!=b.mf&&b.mf.complete&&(d.bindTexture(d.TEXTURE_2D,b),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,b.mf),c=!0);c&&(b.loaded=!0);d.bindTexture(d.TEXTURE_2D,null);d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,0)}catch(f){a.g.M(f)}a.g.update(2)}};e.prototype.Yk=function(){var b,a,d=this.g,c=d.H;if(this.Ta)for(;0<this.Ta.length;)c.deleteTexture(this.Ta.pop());this.Ta=[];for(var f=0;6>f;f++)a=c.createTexture(),this.dd++,
a.mf=null,a.se=null,a.Sk=!1,c.bindTexture(c.TEXTURE_2D,a),c.texImage2D(c.TEXTURE_2D,0,c.RGB,1,1,0,c.RGB,c.UNSIGNED_BYTE,null),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),d.Ve[f]&&(b=new Image,b.crossOrigin=d.crossOrigin,b.src=d.hc(d.Ve[f]),a.mf=b,b.addEventListener&&b.addEventListener("load",this.bj(a),!1),d.Ob.push(b)),this.Ta.push(a);for(f=0;6>f;f++)d.oh[f]&&
(b=new Image,b.crossOrigin=d.crossOrigin,b.src=d.hc(d.oh[f]),b.addEventListener?b.addEventListener("load",this.bj(this.Ta[f]),!1):b.onload=this.bj(this.Ta[f]),this.Ta[f].se=b,d.Ob.push(b));for(f=0;f<d.J.length;f++)d.J[f].kd||(d.J[f].nc=c.createTexture(),d.dd++,c.bindTexture(c.TEXTURE_2D,d.J[f].nc),c.texImage2D(c.TEXTURE_2D,0,c.RGB,1,1,0,c.RGB,c.UNSIGNED_BYTE,null),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,
c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE));d.s.nc=c.createTexture();d.dd++;c.bindTexture(c.TEXTURE_2D,d.s.nc);c.texImage2D(c.TEXTURE_2D,0,c.RGB,1,1,0,c.RGB,c.UNSIGNED_BYTE,null);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.bindTexture(c.TEXTURE_2D,null)};e.prototype.gq=function(){var b=this.g;if(b.o.width!=b.D.offsetWidth||b.o.height!=b.D.offsetHeight)b.o.width=b.D.offsetWidth,
b.o.height=b.D.offsetHeight;b.ke&&(b.Gc(0),b.Pc());if(b.H){var a=b.H;this.pi();a.clear(a.DEPTH_BUFFER_BIT);a.useProgram(this.F);this.Af(0);a.uniform1i(this.F.tf,0);a.enableVertexAttribArray(this.F.Z);a.enableVertexAttribArray(this.F.Aa);a.bindBuffer(a.ARRAY_BUFFER,this.ge);a.vertexAttribPointer(this.F.Aa,2,a.FLOAT,!1,0,0);a.activeTexture(a.TEXTURE0);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.Xc);a.uniform1f(this.F.xi,1E-4);a.vertexAttribPointer(this.F.Z,3,a.FLOAT,!1,0,0);p.$.qe(this.qb);p.$.perspective(b.Rb(),
b.pb.width/b.pb.height,.1,100,this.qb);a.uniformMatrix4fv(this.F.Ud,!1,this.qb);for(b=0;6>b;b++)this.Af(b),a.bindBuffer(a.ARRAY_BUFFER,this.Mi),a.vertexAttribPointer(this.F.Z,3,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,this.ge),a.vertexAttribPointer(this.F.Aa,2,a.FLOAT,!1,0,0),6<=this.Ta.length&&this.Ta[b].loaded&&(a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,this.Ta[b]),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.Xc),a.uniform1i(this.F.tf,0),a.uniformMatrix4fv(this.F.Dg,!1,this.ma),a.uniformMatrix4fv(this.F.Ud,
!1,this.qb),a.drawElements(a.TRIANGLES,6,a.UNSIGNED_SHORT,0))}};e.prototype.pi=function(){var b=this.g;if(b.h.pf&&6<b.h.pf.length){var a=parseInt(b.h.pf);b.H.clearColor((a>>16&255)/255,(a>>8&255)/255,(a>>0&255)/255,1)}};e.prototype.Af=function(b,a){void 0===a&&(a=1);var d=this.g;p.$.qe(this.ma);p.$.rotate(this.ma,a*-d.O.c*Math.PI/180,[0,0,1]);p.$.rotate(this.ma,a*-d.i.c*Math.PI/180,[1,0,0]);-1==a?p.$.rotate(this.ma,-d.pan.c*Math.PI/180,[0,1,0]):p.$.rotate(this.ma,(180-d.pan.c)*Math.PI/180,[0,1,0]);
d.Za&&(p.$.rotate(this.ma,-d.Za.pitch*Math.PI/180,[1,0,0]),p.$.rotate(this.ma,d.Za.O*Math.PI/180,[0,0,1]));4>b?p.$.rotate(this.ma,-Math.PI/2*b,[0,1,0]):p.$.rotate(this.ma,Math.PI/2*(5==b?1:-1),[1,0,0])};e.prototype.Jp=function(b){var a=this;return function(){a.Ri.push(b)}};e.prototype.cn=function(b){this.g.Ea=!0;this.g.Zc=!0;b.loaded=!0;b.zj=0;b.Wd=0;var a=this.g.H;this.qk();a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,1);if(null!=b.h&&b.h.complete){b.fb=a.createTexture();this.g.dd++;a.bindTexture(a.TEXTURE_2D,
b.fb);try{a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,b.h)}catch(d){a.texImage2D(a.TEXTURE_2D,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,new Uint8Array([128,128,128,250])),this.g.M(d)}}this.g.update(2)};e.prototype.qk=function(){this.g.Mb&&this.g.Mb--};e.prototype.dn=function(){if(0<this.Ri.length){var b=this.Ri.shift();this.cn(b)}};e.prototype.yo=function(b){var a=this;return function(){a.g.Ea=!0;a.g.Zc=!0;var d=a.g.h;try{if(null!=b&&b.complete){var c=d.I[d.I.length-1],f=d.Ja;c.height=c.width=
b.width-2*f;c.L=c.da=1;for(var l=0;6>l;l++){var g=new p.Qd;g.K=document.createElement("canvas");a.g.Y?(g.K.width=c.width+2*f,g.K.height=c.height+2*f):(g.K.width=d.G+2*f,g.K.height=d.G+2*f);g.Pa=g.K.getContext("2d");g.K.style[a.g.Ua+"Origin"]="0% 0%";g.K.style.overflow="hidden";g.K.style.position="absolute";g.h=b;var k=c.width+2*f,t=c.height+2*f;g.Pa&&g.Pa.drawImage(b,0,l*t,k,t,0,0,k,t);if(a.g.Y&&a.g.H){var e=a.g.H;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1);g.fb=e.createTexture();a.g.dd++;e.bindTexture(e.TEXTURE_2D,
g.fb);try{e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,g.K)}catch(x){a.g.M(x)}e.bindTexture(e.TEXTURE_2D,null);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0)}a.g.Qc&&(g.K.Pd=-1,a.g.D.insertBefore(g.K,a.g.D.firstChild));c.U[l]=g}c.loaded=!0}}catch(x){a.g.M(x)}a.g.update(2)}};e.prototype.dm=function(b){var a=this;return function(){a.g.Ea=!0;a.g.Zc=!0;a.qk();b.h=null}};e.prototype.eq=function(){var b=this.g,a=b.h,d=b.h.I;b.ke&&(b.Gc(0),b.Pc());if(b.H){var c=b.H;c.useProgram(this.F);this.pi();c.clear(c.DEPTH_BUFFER_BIT);
c.enable(c.DEPTH_TEST);p.$.qe(this.qb);p.$.perspective(b.Rb(),b.pb.width/b.pb.height,.1,100,this.qb);c.uniformMatrix4fv(this.F.Ud,!1,this.qb);b.jm();b.mj();var f=b.Ui(),l;l=d.length-1;for(b.oc=0;l>=f;){var g=d[l],k=1;l==d.length-1&&0==a.Ja&&(k=a.G/(a.G-.5));for(var e=0;6>e;e++){var m;m=b.mb.cb[e];var x=m.kf;if(m.eb&&0<x.Kf&&0<x.ah&&0<x.scale||g.cache){m.Ea=!1;var h;m.Qe[l]||(m.Qe[l]={Wa:0,xb:0,zb:0,Ab:0});h=m.Qe[l];g.cache?(h.Wa=0,h.xb=0,h.zb=g.L-1,h.Ab=g.da-1):b.Ok(g,x,h);for(var x=!0,q=h.xb;q<=
h.Ab;q++)for(var u=h.Wa;u<=h.zb;u++){var r=u+q*g.L+e*g.L*g.da,w=g.U[r];w||(w=g.U[r]=new p.Qd);this.sh()?w.h||(w.Wd?w.Wd--:(this.Mh(w,g,b.Ee(e,l,u,q)),b.Ea=!0)):b.oc++;if(w.fb){if(!w.$e){r=.5*l+1;w.$e=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,w.$e);var z=[-1,-1,1,1,-1,1,1,1,1,-1,1,1];z[3]=u*a.G-a.Ja;z[0]=Math.min((u+1)*a.G,g.width)+a.Ja;z[7]=q*a.G-a.Ja;z[1]=Math.min((q+1)*a.G,g.height)+a.Ja;z[4]=z[1];z[6]=z[3];z[9]=z[0];z[10]=z[7];for(var n=0;12>n;n++)z[n]=0==n%3?k*r*(-2*z[n]/g.width+1):1==n%3?
k*r*(-2*z[n]/g.height+1):r;c.bufferData(c.ARRAY_BUFFER,new Float32Array(z),c.STATIC_DRAW)}}else x=!1;w.visible=m.eb}h.kj=x}}l--}for(e=0;6>e;e++)if(m=b.mb.cb[e],m.eb)for(x=m.kf,this.Af(e),c.uniform1i(this.F.tf,0),c.uniformMatrix4fv(this.F.Ud,!1,this.qb),c.uniformMatrix4fv(this.F.Dg,!1,this.ma),c.enableVertexAttribArray(this.F.Z),c.enableVertexAttribArray(this.F.Aa),c.bindBuffer(c.ARRAY_BUFFER,this.ge),c.vertexAttribPointer(this.F.Aa,2,c.FLOAT,!1,0,0),c.activeTexture(c.TEXTURE0),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,
this.Xc),c.useProgram(this.F),l=f;l<=d.length-1;){g=d[l];if(m.eb&&0<x.Kf&&m.Qe[l]&&0<=m.Qe[l].Wa){h=m.Qe[l];for(q=h.xb;q<=h.Ab;q++)for(u=h.Wa;u<=h.zb;u++)r=u+q*g.L+e*g.L*g.da,(w=g.U[r])&&w.fb&&(c.uniform1f(this.F.xi,1E-4*(u%2+q%2*2)),c.bindBuffer(c.ARRAY_BUFFER,w.$e),c.vertexAttribPointer(this.F.Z,3,c.FLOAT,!1,0,0),c.bindTexture(c.TEXTURE_2D,w.fb),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,
c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0)),w.visible=m.eb;h.kj&&(l=d.length)}l++}this.Aj();b.Zc=!1}};e.prototype.sh=function(){return this.g.Mb<this.g.Rg};e.prototype.Mh=function(b,a,d){var c=this.g;c.ej++;b.h=new Image;b.zj++;b.Wd=1<<b.zj;b.h.onload=this.Jp(b);b.h.onerror=this.dm(b);b.h.onabort=this.dm(b);b.h.crossOrigin=c.crossOrigin;b.h.setAttribute("src",d);c.M("load "+d);a.cache&&c.Ob.push(b.h);c.Mb++};e.prototype.sm=
function(){var b=this.g,a=b.h;b.ke&&(b.Gc(0),b.Pc());if(b.H){var d=b.H;this.pi();O&&d.clearColor(.2,0,0,1);d.clear(d.DEPTH_BUFFER_BIT);d.disable(d.DEPTH_TEST);d.disable(d.CULL_FACE);d.bindBuffer(d.ARRAY_BUFFER,this.Zh);var c=[0,0];c[2]=b.o.width;c[3]=0;c[4]=b.o.width;c[5]=b.o.height;c[6]=0;c[7]=b.o.height;d.bufferData(d.ARRAY_BUFFER,new Float32Array(c),d.STATIC_DRAW);this.g.oc=0;if(!this.wc||this.og)0<a.I.length?this.an():this.bn();b.s.gd?this.Io():(d.enable(d.DEPTH_TEST),d.depthRange(0,1),d.depthFunc(d.LESS),
this.ii=!1,0<a.I.length&&this.fq(),this.wc&&!this.ii&&this.Ho())}};e.prototype.up=function(b,a,d,c,f,l,g){var k=this.g,e=k.h,m=k.o,x=d*e.G/a.width,h=(d+1)*e.G/a.width;d=c*e.G/a.height;a=(c+1)*e.G/a.height;1<h&&(f*=2,h=1);1<a&&(f*=2,a=1);f=Math.min(this.Zj,f);var h=(h-x)/f,q=(a-d)/f;c=a=0;var u,r,e={x:0,y:0},w={x:0,y:0},z=0;b.Bh=0;var n=k.Eg,C=new p.va,A=this.qo;A.Rl();4>l?A.ze(-90*l):A.Dd(5==l?90:-90);k.Za&&(A.Ae(k.Za.O),A.Dd(-k.Za.pitch));A.ze(-k.pan.c);A.Dd(k.i.c);A.Ae(k.O.c);for(l=0;l<=f;l++)for(var y=
0;y<=f;y++)u=2*(x+y*h)-1,r=2*(d+l*q)-1,C.x=1*u,C.y=1*r,C.z=-1,C.normalize(),A.xo(C),u=this.Lk(C,e,k.ra()),0!=k.lc&&1>n&&(u=u&&this.Lk(C,w,k.lc),e.x=e.x*n+w.x*(1-n),e.y=e.y*n+w.y*(1-n)),u?-1E10<e.x&&1E10>e.x&&-1E10<e.y&&1E10>e.y?-2<e.x&&2>e.x&&-2<e.y&&2>e.y&&(a+=e.x,c+=e.y,z++):e.x=NaN:e.x=NaN,b.ed[b.Bh++]=e.x,b.ed[b.Bh++]=e.y;0<z?(a/=z,c/=z):g=0;for(d=0;d<b.Bh;d+=2)e.x=b.ed[d],e.y=b.ed[d+1],k=e.x-a,x=e.y-c,e.x+=k*g,e.y+=x*g,b.ed[d]=m.width/2+e.x*m.width/2,b.ed[d+1]=m.height/2-e.y*m.width/2;this.vp(b,
f)};e.prototype.Lk=function(b,a,d){var c=!0;switch(d){case 0:case 4:d=1/(b.z*this.yj);a.x=-b.x*d;a.y=b.y*d;0<b.z&&(c=!1);break;case 9:1==b.z&&(c=!1);d=1/((1-b.z)*this.Kj);a.x=b.x*d;a.y=-b.y*d;break;case 12:if(d=Math.sqrt(b.x*b.x+b.y*b.y),0==d)a.x=0,a.y=0;else{var f=2*this.Wi*Math.acos(-b.z)/d;if(2<d)return!1;a.x=f*b.x;a.y=-f*b.y}}return c};e.prototype.vp=function(b,a){for(var d=this.g,c=[],f,l=b.td=0;l<a;l++)for(var g=0;g<a;g++){c[0]=l+g*(a+1);c[1]=l+1+g*(a+1);c[2]=l+(g+1)*(a+1);c[3]=l+1+(g+1)*(a+
1);f=!0;for(var k=0;4>k;k++)isNaN(b.ed[2*c[0]])&&(f=!1);if(f){for(var e=!1,m=!1,x=!1,h=!1,k=0;4>k;k++){var p=b.ed[2*c[k]];p<d.o.width&&(m=!0);0<=p&&(e=!0);p=b.ed[2*c[k]+1];p<d.o.height&&(x=!0);0<=p&&(h=!0)}if(f=f&&m&&e&&x&&h)b.pe[b.td++]=c[0],b.pe[b.td++]=c[3],b.pe[b.td++]=c[2],b.pe[b.td++]=c[0],b.pe[b.td++]=c[1],b.pe[b.td++]=c[3]}}};e.prototype.fq=function(){var b=this.g,a=b.h,d=b.h.I;b.ke&&(b.Gc(0),b.Pc());if(b.H){var c=b.H,f=this.Il;c.useProgram(f);this.Rj(f);c.enable(c.CULL_FACE);c.cullFace(c.FRONT);
c.enable(c.DEPTH_TEST);p.$.qe(this.qb);p.$.perspective(b.Rb(),b.pb.width/b.pb.height,.1,100,this.qb);c.uniformMatrix4fv(c.getUniformLocation(f,"uPMatrix"),!1,this.qb);this.g.oc=0;b.mj();var l=b.Ui(),g,k=0;g=d.length-1;for(var e={},m=d[g];m.nf&&0<g;)g--,m=d[g];for(var x=g,h=x,q=0;6>q;q++)for(var u=0;u<m.da;u++)for(var r=0;r<m.L;r++){var w=r+u*m.L+q*m.L*m.da;e[w]=1}for(;g>=l;){var z={},m=d[g],n=null;0<g&&(n=d[g-1]);var C;C=!0;for(var A in e)if(e.hasOwnProperty(A)){var w=Number(A),y=m.U[w],q=Number(Math.floor(w/
(m.L*m.da))),u=Math.floor((w-q*m.L*m.da)/m.L),r=Math.floor(w-(u*m.L+q*m.L*m.da)),B;if(6<=q)console.log("Grrr...");else if(B=this.g.mb.cb[q],B.Ea=!1,y||(y=m.U[w]=new p.Qd,b.M("create "+w)),this.up(y,m,r,u,Math.max(1,this.Zj>>x-g),q,-(0!=b.lc)?.3:.1),y.visible=0<y.td||m.cache,y.Ih=3,y.sg=Date.now(),y.visible&&!y.fb&&(C=!1,this.sh()?y.h||(y.Wd?y.Wd--:(this.Mh(y,m,b.Ee(q,g,r,u)),b.Ea=!0)):this.g.oc++),n&&(y.visible||n.cache)){var y=(r*a.G+1)/m.width,r=Math.min(1,(r+1)*a.G-1/m.width),D=(u*a.G+1)/m.height,
u=Math.min(1,(u+1)*a.G-1/m.height),w=a.G/n.width;B=a.G/n.height;var E=D,D=Math.floor(D*n.height/a.G);do{var F=y,H=Math.floor(y*n.width/a.G);do{var I=H+D*n.L+q*n.L*n.da;H<n.L&&D<n.da?z[I]=1:b.M("Grrrr");H++;F+=w}while(F<r);D++;E+=B}while(E<u)}}C&&(h=g,20>b.f.c&&g<this.Ue&&(this.ii=!0));e=z;g--}this.Aj();c.uniform1i(c.getUniformLocation(f,"tileTexture"),0);c.activeTexture(c.TEXTURE0);g=l;for(l=-1;g<=Math.min(h,this.Ue-1);){m=d[g];for(A in m.U)if(m.U.hasOwnProperty(A)){e=Number(A);y=m.U[e];q=Math.floor(e/
(m.L*m.da));u=Math.floor((e-q*m.L*m.da)/m.L);r=Math.floor(e-(u*m.L+q*m.L*m.da));l!=q&&(l=q,this.ri(q,f));if(k>b.te){b.M("Excided painted tiles");this.ii=!1;break}y.fb&&(e=q=a.G,r==m.L-1&&(q=m.width-a.G*r),u==m.da-1&&(e=m.height-a.G*u),q=(q+2*a.Ja)/a.G,e=(e+2*a.Ja)/a.G,c.bindTexture(c.TEXTURE_2D,y.fb),c.uniform2f(c.getUniformLocation(f,"uCanvasDimensions"),b.o.width,b.o.height),x=c.getUniformLocation(f,"srcScale"),c.uniform2f(x,.5*m.width/a.G/q,.5*m.height/a.G/e),x=c.getUniformLocation(f,"srcOffset"),
c.uniform2f(x,(.5*m.width+a.Ja-a.G*r)/a.G/q,-(.5*m.height+a.Ja-a.G*u)/a.G/e+1),x=c.getUniformLocation(f,"zOffset"),c.uniform1f(x,(g+1)/(d.length+5)),q=c.getAttribLocation(f,"aVertexPosition"),c.disableVertexAttribArray(0),c.disableVertexAttribArray(1),c.disableVertexAttribArray(2),c.enableVertexAttribArray(q),c.activeTexture(c.TEXTURE0),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,
c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.bindBuffer(c.ARRAY_BUFFER,this.jo),c.vertexAttribPointer(q,2,c.FLOAT,!1,0,0),c.bufferData(c.ARRAY_BUFFER,new Float32Array(y.ed),c.DYNAMIC_DRAW),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.io),c.bufferData(c.ELEMENT_ARRAY_BUFFER,new Uint16Array(y.pe),c.DYNAMIC_DRAW),c.drawElements(c.TRIANGLES,y.td,c.UNSIGNED_SHORT,0),k++)}g++}c.disable(c.CULL_FACE);c.cullFace(c.FRONT_AND_BACK);b.Zc=!1}};e.prototype.ri=function(b,a){var d=
this.g.H;p.$.qe(this.ma);this.Af(b,-1);d.uniformMatrix4fv(d.getUniformLocation(a,"matRotate"),!1,this.ma)};e.prototype.Io=function(){var b=this.g;if(b.H){var a=b.H,d,c=this.Jl;a.useProgram(c);this.ri(0,c);a.uniform2f(a.getUniformLocation(c,"uCanvasDimensions"),b.o.width,b.o.height);1==b.s.format&&(d=a.getUniformLocation(c,"srcScale"),a.uniform2f(d,-.5/Math.PI,(b.s.Yi?-1:1)/Math.PI));14==b.s.format&&(d=a.getUniformLocation(c,"srcScale"),a.uniform2f(d,1-2*b.s.Oe/(b.s.width/3),1-2*b.s.Oe/(b.s.height/
2)));d=a.getUniformLocation(c,"srcOffset");a.uniform2f(d,.5,.5);this.Rj(c);d=a.getUniformLocation(c,"cubeTexture");a.uniform1i(d,0);d=a.getAttribLocation(c,"aVertexPosition");a.disableVertexAttribArray(0);a.disableVertexAttribArray(1);a.disableVertexAttribArray(2);a.enableVertexAttribArray(d);a.bindBuffer(a.ARRAY_BUFFER,this.Zh);a.vertexAttribPointer(d,2,a.FLOAT,!1,0,0);a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,b.s.nc);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.Xc);a.drawElements(a.TRIANGLES,6,a.UNSIGNED_SHORT,0)}};e.prototype.Rj=function(b){var a=this.g,d=a.H,c=this.g.o,f=c.width/c.height;switch(a.f.mode){case 1:f=1;break;case 2:f=c.width/Math.sqrt(c.width*c.width+c.height*c.height);break;case 3:4*c.height/3<c.width&&(f=4/3)}c=d.getUniformLocation(b,"rectDstDistance");
this.yj=Math.tan(Math.min(a.f.c,179)/2*Math.PI/180)*f;d.uniform1f(c,this.yj);c=d.getUniformLocation(b,"fisheyeDistance");this.Wi=180/(a.f.c*Math.PI*f);d.uniform1f(c,this.Wi);c=d.getUniformLocation(b,"stereoDistance");this.Kj=Math.tan(Math.min(a.f.c,359)/4*Math.PI/180)*f;d.uniform1f(c,this.Kj);c=d.getUniformLocation(b,"directionBlend");d.uniform1f(c,a.Eg)};e.prototype.Ho=function(){var b=this.g,a=b.H,d=this.Hl;a.useProgram(d);a.enable(a.DEPTH_TEST);this.ri(0,d);a.uniform2f(a.getUniformLocation(d,"uCanvasDimensions"),
b.o.width,b.o.height);b=a.getUniformLocation(d,"srcScale");a.uniform2f(b,1,1);b=a.getUniformLocation(d,"srcOffset");a.uniform2f(b,0,0);b=a.getUniformLocation(d,"zOffset");a.uniform1f(b,.9999);this.Rj(d);this.ri(0,d);b=a.getUniformLocation(d,"cubeTexture");a.uniform1i(b,0);d=a.getAttribLocation(d,"aVertexPosition");a.disableVertexAttribArray(0);a.disableVertexAttribArray(1);a.disableVertexAttribArray(2);a.enableVertexAttribArray(d);a.bindBuffer(a.ARRAY_BUFFER,this.Zh);a.vertexAttribPointer(d,2,a.FLOAT,
!1,0,0);a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_CUBE_MAP,this.wc);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MAG_FILTER,a.LINEAR);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.Xc);a.drawElements(a.TRIANGLES,6,a.UNSIGNED_SHORT,0)};e.prototype.bn=function(){for(var b=this.g,a=b.H,d=[1,3,5,
4,0,2],c=!0,f=!0,l=!1,g=0;6>g;g++)this.Ta[g].se.complete?this.nh[g]||(l=!0):c=!1,this.Ta[g].mf.complete||(f=!1);if(f||c)if(!f||c||!this.wc||l){g=Math.round(b.pc/b.Df);f=(b.pc-g)/2;b.M("paint cube single - isMain: "+c+" overlap: "+f);this.Ue=0;this.wc||(this.wc=a.createTexture());b.dd++;a.bindTexture(a.TEXTURE_CUBE_MAP,this.wc);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,
1);l=document.createElement("canvas");l.width=g;l.height=g;for(var k=l.getContext("2d"),g=0;6>g;g++){var e=d[g];this.Ta[e].se.complete?this.nh[e]||(k.drawImage(this.Ta[e].se,-f,-f),a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+g,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,l),this.nh[e]=!0):(k.drawImage(this.Ta[e].mf,-f,-f,b.pc,b.pc),a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+g,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,l))}this.og=!c}};e.prototype.an=function(){var b=this.g,a=this.g.h,d=b.h.I,c=b.H,f,l;f=d.length-1;if(!(0>
f)){d[f].nf&&f--;var g=512;b.ng&&(g=256);!b.sf&&2<=b.devicePixelRatio&&(g=512);for((l=c.getParameter(c.MAX_CUBE_MAP_TEXTURE_SIZE))&&l<g&&(g=l);0<f&&d[f-1].width<=g;)f--;var k,g=d[f];if(0!=g.L&&(l=f,k=this.Ym(f),this.og&&k&&(this.og=!1),k||(f=d.length-1,g=d[f],k||(g.nf?(k=g.loaded,this.lj(f-1)&&(--f,k=!0)):k=this.lj(f)),this.og=!0),this.lj(l),k&&this.Ue>f)){g=d[f];b.M("paint cube level "+f);this.Ue=f;d=b.h.Ja;f=0<d||1<g.L||1<g.da;var e,m;f&&(m=document.createElement("canvas"),m.width=g.width,m.height=
g.height,2048>g.width&&(1500<g.width?(m.width=2048,m.height=2048):700<g.width?(m.width=1024,m.height=1024):(m.width=512,m.height=512)),e=m.getContext("2d"));this.wc=c.createTexture();b.dd++;c.bindTexture(c.TEXTURE_CUBE_MAP,this.wc);c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,1);l=[1,3,5,4,0,2];a=a.G;for(k=0;6>k;k++){for(var h=0;h<g.da;h++)for(var p=0;p<g.L;p++){var q=p+
h*g.L+l[k]*g.L*g.da,u=g.U[q],r=u.h;u.K&&(r=u.K);r?f?(q=m.width/g.width,e.drawImage(r,q*(p*a-d),q*(h*a-d),q*r.width,q*r.height)):c.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+k,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,r):(b.M("WTF?!"),b.M(q),b.M(u))}f&&c.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+k,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,m)}}}};e.prototype.lj=function(b){var a=this.g,d=a.h.I[b];if(0==d.L)return!1;var c=!0;d.cache=!0;for(var f=0;6>f;f++)for(var l=0;l<d.da;l++)for(var g=0;g<d.L;g++){var k=g+l*d.L+f*d.L*d.da,
e=d.U[k];e||(e=d.U[k]=new p.Qd);this.sh()?e.h||(e.Wd?e.Wd--:(this.Mh(e,d,a.Ee(f,b,g,l)),a.Ea=!0)):this.g.oc++;e.fb||(c=!1,a.Ea=!0)}c&&(d.loaded=!0);return c};e.prototype.Ym=function(b){b=this.g.h.I[b];if(0==b.L)return!1;for(var a=0;6>a;a++)for(var d=0;d<b.da;d++)for(var c=0;c<b.L;c++){var f=b.U[c+d*b.L+a*b.L*b.da];if(!f||!f.fb)return!1}return b.loaded=!0};e.prototype.ready=function(){return null!=this.wc};e.prototype.Aj=function(){for(var b=this.g,a=b.h.I,d=b.H,c=Date.now(),f=a.length-1;0<=f;f--){var l=
a[f];if(!l.cache)for(var g in l.U)if(l.U.hasOwnProperty(g)){var k=l.U[g];0<k.Ih&&k.Ih--;k.visible||0<k.Ih?(k.visible&&(k.sg=c),k=this.Nd.indexOf(k),-1!==k&&this.Nd.splice(k,1)):-1===this.Nd.indexOf(k)&&(k.level=l,this.Nd.push(k))}}if(this.Nd.length>1.1*b.bm)for(this.Nd.sort(function(a,c){return c.sg-a.sg});this.Nd.length>b.bm;)k=this.Nd.pop(),k.fb&&(d.deleteTexture(k.fb),b.dd--,k.fb=0),k.h=null,k.$e&&(d.deleteBuffer(k.$e),k.$e=0),g=k.level.U.indexOf(k),b.M("delete "+g+" "+(c-k.sg)),delete k.level.U[g]};
e.prototype.Yp=function(){var b=this.g;if(b.H){var a=this.g.H;a.disable(a.DEPTH_TEST);var d;for(d=0;d<b.J.length;d++){var c=b.J[d];if(!c.kd){p.$.qe(this.ma);p.$.rotate(this.ma,-b.O.c*Math.PI/180,[0,0,1]);p.$.rotate(this.ma,-b.i.c*Math.PI/180,[1,0,0]);p.$.rotate(this.ma,(180-b.pan.c)*Math.PI/180,[0,1,0]);p.$.rotate(this.ma,c.pan*Math.PI/180,[0,1,0]);p.$.rotate(this.ma,-c.i*Math.PI/180,[1,0,0]);p.$.translate(this.ma,[0,0,1]);p.$.rotate(this.ma,c.ib*Math.PI/180,[0,0,1]);p.$.rotate(this.ma,-c.Da*Math.PI/
180,[0,1,0]);p.$.rotate(this.ma,c.ua*Math.PI/180,[1,0,0]);var f=Math.tan(c.f/2*Math.PI/180),l=c.be;l||(l=16/9);p.$.scale(this.ma,[f,f/l,1]);p.$.translate(this.ma,[0,0,-1]);a.bindBuffer(a.ARRAY_BUFFER,this.Mi);a.vertexAttribPointer(this.F.Z,3,a.FLOAT,!1,0,0);a.bindBuffer(a.ARRAY_BUFFER,this.ge);a.vertexAttribPointer(this.F.Aa,2,a.FLOAT,!1,0,0);a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,c.nc);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,
a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.Xc);a.uniform1i(this.F.tf,0);a.uniformMatrix4fv(this.F.Dg,!1,this.ma);a.uniformMatrix4fv(this.F.Ud,!1,this.qb);a.drawElements(a.TRIANGLES,6,a.UNSIGNED_SHORT,0)}}a.enable(a.DEPTH_TEST)}};e.prototype.Xp=function(){var b=this.g,a;if(b.o.width!=b.D.offsetWidth||b.o.height!=b.D.offsetHeight)b.o.width=b.D.offsetWidth,b.o.height=
b.D.offsetHeight;b.ke&&(b.Gc(0),b.Pc());if(b.H){var d=b.H;d.useProgram(this.F);p.$.qe(this.qb);p.$.perspective(b.Rb(),b.pb.width/b.pb.height,.1,100,this.qb);d.uniformMatrix4fv(this.F.Ud,!1,this.qb);this.Af(0);d.uniform1i(this.F.tf,0);d.uniformMatrix4fv(this.F.Ud,!1,this.qb);d.uniformMatrix4fv(this.F.Dg,!1,this.ma);d.enableVertexAttribArray(this.F.Z);d.enableVertexAttribArray(this.F.Aa);d.bindBuffer(d.ARRAY_BUFFER,this.ge);d.vertexAttribPointer(this.F.Aa,2,d.FLOAT,!1,0,0);d.activeTexture(d.TEXTURE0);
d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,this.Xc);d.uniform1f(this.F.xi,1E-4);d.vertexAttribPointer(this.F.Z,3,d.FLOAT,!1,0,0);d.bindTexture(d.TEXTURE_2D,b.s.nc);for(a=0;1>a;a++)this.Af(0),d.bindBuffer(d.ARRAY_BUFFER,b.s.Vj),d.vertexAttribPointer(this.F.Z,3,d.FLOAT,!1,0,0),d.bindBuffer(d.ARRAY_BUFFER,b.s.ki),d.vertexAttribPointer(this.F.Aa,2,d.FLOAT,!1,0,0),d.activeTexture(d.TEXTURE0),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,b.s.fj),d.uniform1i(this.F.tf,0),d.uniformMatrix4fv(this.F.Dg,!1,this.ma),d.uniformMatrix4fv(this.F.Ud,
!1,this.qb),d.drawElements(d.TRIANGLES,36,d.UNSIGNED_SHORT,0)}};e.prototype.Wp=function(){var b=this.g,a=b.H,d=b.s;if(0<b.J.length)for(var c=0;c<b.J.length;c++){var f=b.J[c];if(!f.kd&&f.el&&f.Ah!=f.b.currentTime&&(f.Ah=f.b.currentTime,!f.be&&0<f.b.videoHeight&&(f.be=f.b.videoWidth/f.b.videoHeight),b.Yg))try{f.nc&&(a.bindTexture(a.TEXTURE_2D,f.nc),a.texImage2D(a.TEXTURE_2D,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,f.b),b.update())}catch(g){b.M(g)}}if(d.b&&(c=Number(d.b.currentTime),d.Ah!=c)){d.Ah=c;try{var l=
0<d.b.readyState;b.df&&d.gd&&(l=l&&0<d.b.currentTime);d.nc&&d.Fh&&l&&(d.gd=!0,d.width=d.b.videoWidth,d.height=d.b.videoHeight,a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,b.s.Yi),a.bindTexture(a.TEXTURE_2D,d.nc),a.texImage2D(a.TEXTURE_2D,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,d.b),d.am=!0,b.update())}catch(g){b.M(g)}}};e.prototype.yl=function(){var b,a,d=this.g,c=this.g.H;d.wa.style.visibility="hidden";d.A.qg!=d.A.mode&&(d.A.qg=d.A.mode);if((0<=d.A.mode||0<d.A.jb.length)&&!d.C.Sg){var f=1;0>=d.A.mode&&(f=0);3==d.A.mode&&
(f=d.A.pa);for(b=0;b<d.P.length;b++){var l=d.P[b];if("poly"==l.type){var g=l.Vd,k=f;2==d.A.mode&&(k=l.pa);var e=d.A.jb.indexOf(l.id);-1!=e&&(k=d.A.Lb[e]);if(0<g.length){e=[];for(a=0;a<g.length;a++)e.push(g[a].mc),e.push(g[a].Jb),e.push(0);c.useProgram(this.zd);c.enable(c.BLEND);c.blendFuncSeparate(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,c.SRC_ALPHA,c.ONE);c.disable(c.DEPTH_TEST);g=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,g);c.bufferData(c.ARRAY_BUFFER,new Float32Array(e),c.STATIC_DRAW);c.uniform2f(c.getUniformLocation(this.zd,
"uCanvasDimensions"),d.o.width,d.o.height);g=c.getUniformLocation(this.zd,"uColor");a=l.ec;c.uniform3f(g,(a>>16&255)/255,(a>>8&255)/255,(a&255)/255);var m=c.getUniformLocation(this.zd,"uAlpha");c.uniform1f(m,l.dc*k);c.vertexAttribPointer(this.zd.Z,3,c.FLOAT,!1,0,0);c.drawArrays(c.LINE_LOOP,0,e.length/3);a=l.bc;c.uniform3f(g,(a>>16&255)/255,(a>>8&255)/255,(a&255)/255);c.uniform1f(m,l.ac*k);c.enable(c.STENCIL_TEST);c.clearStencil(0);c.clear(c.STENCIL_BUFFER_BIT);c.colorMask(!1,!1,!1,!1);c.stencilFunc(c.ALWAYS,
1,1);c.stencilOp(c.INCR,c.INCR,c.INCR);c.drawArrays(c.TRIANGLE_FAN,0,e.length/3);c.colorMask(!0,!0,!0,!0);c.stencilFunc(c.EQUAL,1,1);c.stencilOp(c.ZERO,c.ZERO,c.ZERO);c.drawArrays(c.TRIANGLE_FAN,0,e.length/3);c.disable(c.BLEND);c.enable(c.DEPTH_TEST);c.disable(c.STENCIL_TEST);c.useProgram(this.F)}}}}};e.prototype.Qj=function(){var b=this.g,a=b.h;if(b.o.width!=b.D.offsetWidth||b.o.height!=b.D.offsetHeight)b.o.width=b.D.offsetWidth,b.o.height=b.D.offsetHeight;b.ke&&(b.Gc(0),b.Pc());if(b.H){var d=b.H;
this.pi();d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT);d.disable(d.DEPTH_TEST);d.disable(d.CULL_FACE);d.useProgram(this.Zf);var c=d.getUniformLocation(this.Zf,"uRect");d.uniform2f(d.getUniformLocation(this.Zf,"uCanvasDimensions"),b.o.width,b.o.height);d.activeTexture(d.TEXTURE0);var f;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,this.Xc);f=d.getAttribLocation(this.Zf,"aVertexPosition");d.disableVertexAttribArray(0);d.disableVertexAttribArray(1);d.disableVertexAttribArray(2);d.enableVertexAttribArray(f);
d.bindBuffer(d.ARRAY_BUFFER,this.ge);d.vertexAttribPointer(f,2,d.FLOAT,!1,0,0);b.oc=0;var l,g;g=100/b.f.c;l=a.width/a.height;f=b.o.height*g*l;g*=b.o.height;l=(b.pan.c/100/l-.5)*f+b.o.width/2;for(var k=(b.i.c/100-.5)*g+b.o.height/2,e,m,h,v=0;a.I.length>=v+2&&a.I[v+1].width>f;)v++;var q,u;u=[];for(q=a.I.length-1;q>=v;){var r=a.I[q],w;r.cache?(w={Wa:0,xb:0},w.zb=r.L-1,w.Ab=r.da-1):(w={},e=-k/g*(r.height/b.h.G),m=(-l+b.o.width)/f*(r.width/b.h.G),h=(-k+b.o.height)/g*(r.height/b.h.G),w.Wa=Math.min(Math.max(0,
Math.floor(-l/f*(r.width/b.h.G))),r.L-1),w.xb=Math.min(Math.max(0,Math.floor(e)),r.da-1),w.zb=Math.min(Math.max(0,Math.floor(m)),r.L-1),w.Ab=Math.min(Math.max(0,Math.floor(h)),r.da-1));u[q]=w;var z=!0;for(m=w.xb;m<=w.Ab;m++)for(e=w.Wa;e<=w.zb;e++){h=e+m*r.L;var n=r.U[h];n||(n=new p.Qd,r.U[h]=n);this.sh()?n.h||(this.Mh(n,r,b.Ee(0,q,e,m)),b.Ea=!0):this.g.oc++;n.h&&n.h.complete||(z=!1);n.visible=!0}w.kj=z;q--}for(q=a.I.length-1;q>=v;){r=a.I[q];if(u[q]&&0<=u[q].Wa)for(w=u[q],m=w.xb;m<=w.Ab;m++)for(e=
w.Wa;e<=w.zb;e++)h=e+m*r.L,(n=r.U[h])&&n.h&&n.h.complete&&(d.uniform4f(c,l+(-a.Ja+a.G*e)*f/r.width,k+(-a.Ja+a.G*m)*g/r.height,n.h.width*f/r.width,n.h.height*g/r.height),n&&n.fb&&(d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,this.Xc),d.bindTexture(d.TEXTURE_2D,n.fb),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),
d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0)));q--}this.Aj()}};e.prototype.$h=function(){var b=this.g.H;if(b&&this.Ta)for(;0<this.Ta.length;){var a=this.Ta.pop();a.Bo=!0;b.deleteTexture(a)}this.wc&&(b.deleteTexture(this.wc),this.wc=null);this.Ue=1E6;this.nh=[!1,!1,!1,!1,!1,!1]};return e}();p.Fm=e})(ggP2VR||(ggP2VR={}));
(function(p){var e=function(){return function(){this.kf={$f:1,ag:1,xg:0,yg:0,Kf:0,ah:0,scale:1};this.eb=!0;this.Qe=[]}}(),h=function(){function b(){var a;this.cb=Array(6);for(a=0;6>a;a++)this.cb[a]=new e}b.prototype.Zm=function(a,d,c,b){for(var l=0;6>l;l++){var g;if(g=this.cb[l]){var k;k=[];k.push(new p.va(-1,-1,-1,0,0));k.push(new p.va(1,-1,-1,1,0));k.push(new p.va(1,1,-1,1,1));k.push(new p.va(-1,1,-1,0,1));for(var e=0;e<k.length;e++)4>l?k[e].Da(-Math.PI/2*l):k[e].ua(Math.PI/2*(4===l?-1:1)),b&&(k[e].ib(b.O*
Math.PI/180),k[e].ua(-b.pitch*Math.PI/180)),k[e].Da(-a*Math.PI/180),k[e].ua(d*Math.PI/180),k[e].ib(c*Math.PI/180);g.eb=0<k.length}}};return b}();p.Bm=h})(ggP2VR||(ggP2VR={}));
(function(p){p.Am=function(){return function(){this.I=[];this.pf="0x000000";this.Dl=!1;this.pl=this.ol=.4;this.G=512;this.Ja=1;this.jj=0;this.ql="";this.Ll=this.height=this.width=0}}();p.Pl=function(){return function(){this.height=this.width=0;this.nf=this.cache=!1;this.da=this.L=0;this.loaded=!1;this.U=[]}}();p.Qd=function(){return function(){this.loaded=this.visible=!1;this.Wd=this.zj=0;this.ed=[];this.Bh=0;this.pe=[];this.Ih=this.sg=this.td=0}}()})(ggP2VR||(ggP2VR={}));
(function(p){p.wm=function(){return function(e,h){this.g=e;this.Ca=h;var b,a,d=this.__div=document.createElement("div");b=document.createElement("img");b.setAttribute("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA5xJREFUeNqclmlIVFEUx997TjrplFQW2WKBBSYtRFlpWUILSSsRZRQIBdGHCFqIoKIvQRsUFRJC9LEgaSFbMMpcWi1pLzOLsjItKms0U5t5/c/wH7nc5o2jF374xrv87z33nHOPaRsRtbFgDpgJxoD+wATfwDNQDK6CyrCr5OcbhgiGIRsUAZt4QTWoIFXgp9JfAhY7rgdBl8NeBoLDYBloA+dBOagFTcDHcVEgDgwBGWA+OAcugvXgvb5wKMGJoAAMp9BpUA96EBf/Btsf8BI8AWfAErAcpHHDZeriliY2AVwDg8AucAQ0Ag+I4XhTm2Oxz8PT46KMbTx5EZjuJDgAnAVusJUm9DhYwalFcc59sIXXIaceFkowDySBPTRPL20xm+b7zYXa+N3CPrWJ6GuwGySA40HLBHc/GywFhbS5R1lEBrZy7FQwiSaX9pmnqeAYt+KUcew7BVZw/QKTq0ocpYPVvDOXItZCk2xgDIZqL8BR8Ab0VDbr4yZOgLeIwzQx6WiQxcCt1+6sld66L4yYtFSwF4yg2dU7/cEwGW9YVkAwmycp1dzdpvgm0DcCh4kHmxWzBls0uBX4qqmZJ4KzePm1IeJLgjmlC16aDKZpp5Q168B3o6wsSwTHgU+MIUs74RSj6y1d+212HKimJlUE+tFRfJpYtOKNXWmJTASqWf2Bu/R6+4TKHOrOzG4IhptjWgHbGkZvepQ6SQK7oRuCXzjX1DJavBEX1ygfT8FgBqpfm1zRDcEKbR2bsZlkJCdXieB1ZhZ5YtqVgXIPN+m9kbY6hpdb+d9fPncJRmZmqQheZkemJmgxyxykl3XWJEkcAl7N21s7PDcl5ZJ0PAa3wVwmWtVbZafPwQ7wLozYB7ATPNJO56d/LAikP9u+66KNJS1d4IOZp7wU0hfLukUyzgwm70T2N/DOxIy/eFdqawa5DL2NEGwP5k15Ja4woz9glvcomd9NzyvkFcQo5gomaLfm5c0svnKZ2k7q7+FauvR2MJKZR3+sY5WgtvkdG6JyELGhNHMTXyGfLviRJ5Tcd4Dlhle7086Sgp8CqVxDkn4OqHaqacr5ekjy3Q/W0FRNNGmoMtamdzdxsytZC0lqXKhEgWPVVgImg2NgFT1MHOoOk3yLEtgWN5TEOYvoIFI1rGM19//2wpAD7imF7lfwENwAxaASNCj90pcLLKdC2Iyw1M9gnEplMEp5kOU1f8WwKGJm8oUr9f8JMAAVMDM6HSDa9QAAAABJRU5ErkJggg%3D%3D");
b.setAttribute("style","position: absolute;width: 28px; height: 28px;top: -14px;left: -14px; "+e.Ia+"user-select: none;");b.ondragstart=function(){return!1};d.appendChild(b);b="position:absolute;"+(e.Ia+"user-select: none;");b+=e.Ia+"touch-callout: none;";b+=e.Ia+"tap-highlight-color: rgba(0,0,0,0);";e.fd&&!e.Y&&(b+=e.Ia+"transform: translateZ(9999999px);");d.setAttribute("style",b);d.onclick=function(){e.uf(h);e.rj(h.url,h.target);e.ia.hotspotProxyClick&&e.ia.hotspotProxyClick(h.id)};d.ondblclick=
function(){e.ia.hotspotProxyDoubleClick&&e.ia.hotspotProxyDoubleClick(h.id)};var c=e.A.Oj;c.enabled&&(a=document.createElement("div"),b="position:absolute;top:\t 20px;",b=c.wi?b+"white-space: pre-wrap;":b+"white-space: nowrap;",b+=e.Ia+"transform-origin: 50% 50%;",a.setAttribute("style",b+"visibility: hidden;overflow: hidden;padding: 0px 1px 0px 1px;font-size: 13px;"),a.style.color=this.g.ea(c.Pj,c.Nj),c.background?a.style.backgroundColor=this.g.ea(c.bc,c.ac):a.style.backgroundColor="transparent",
a.style.border="solid "+this.g.ea(c.ec,c.dc)+" "+c.Di+"px",a.style.borderRadius=c.Ci+"px",a.style.textAlign="center",0<c.width?(a.style.left=-c.width/2+"px",a.style.width=c.width+"px"):a.style.width="auto",a.style.height=0<c.height?c.height+"px":"auto",a.style.overflow="hidden",a.innerHTML=h.title,d.onmouseover=function(){0==c.width&&(a.style.left=-a.offsetWidth/2+"px");a.style.visibility="inherit";e.ia.hotspotProxyOver&&e.ia.hotspotProxyOver(h.id)},d.onmouseout=function(){a.style.visibility="hidden";
e.ia.hotspotProxyOut&&e.ia.hotspotProxyOut(h.id)},d.appendChild(a))}}()})(ggP2VR||(ggP2VR={}));(function(p){p.Dc=function(){return function(){this.value=this.time=0;this.Uj="";this.fe=this.ee=this.Tc=this.de=this.sb=this.type=this.ub=0;this.hh=""}}();p.rl=function(){return function(){this.Qp=this.Jm=this.length=0}}();p.hl=function(){return function(){}}()})(ggP2VR||(ggP2VR={}));
(function(p){var e=function(){function e(b){this.g=b;this.enabled=!1;this.Qf=1;this.Pe=0;this.type="crossdissolve";this.Zb=this.Oa=this.zc=0;this.Lf=5;this.ae=1;this.Mf=!1;this.De=this.Ce=this.Jj=0;this.Hd=70;this.vm=0;this.vb=this.um=1;this.fh=this.eh=.5;this.ce=this.vi=this.Oh=this.Hh=!1;this.Pi=1}e.prototype.mg=function(){var b=this.g.H,a=b.createShader(b.VERTEX_SHADER);b.shaderSource(a,"attribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nvarying vec2 vTextureCoord;\nuniform bool uZoomIn;\nuniform float uZoomFactor;\nuniform vec2 uZoomCenter;\nvoid main(void) {\n\t gl_Position = vec4(aVertexPosition, 1.0);\n\t if(!uZoomIn) {\n\t \n\t   vTextureCoord = aTextureCoord;\n\t }\n\t else {\n\t   vTextureCoord = (aTextureCoord - vec2(0.5, 0.5)) * (1.0/uZoomFactor) + uZoomCenter;\n\t }\n}\n");
b.compileShader(a);b.getShaderParameter(a,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(a)),a=null);var d=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform float uAlpha;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, uAlpha);\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);this.oa=b.createProgram();b.attachShader(this.oa,a);b.attachShader(this.oa,d);b.linkProgram(this.oa);b.getProgramParameter(this.oa,b.LINK_STATUS)||alert("Could not initialise shaders");this.oa.Z=b.getAttribLocation(this.oa,"aVertexPosition");b.enableVertexAttribArray(this.oa.Z);this.oa.Aa=b.getAttribLocation(this.oa,"aTextureCoord");b.enableVertexAttribArray(this.oa.Aa);d=b.createShader(b.FRAGMENT_SHADER);
b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform float uColorPercent;\nuniform float uAlpha;\nuniform vec3 uDipColor;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n gl_FragColor = vec4(textureColor.x * (1.0 - uColorPercent) + uDipColor.x * uColorPercent, textureColor.y * (1.0 - uColorPercent) + uDipColor.y * uColorPercent, textureColor.z * (1.0 - uColorPercent) + uDipColor.z * uColorPercent, uAlpha);\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);this.Ra=b.createProgram();b.attachShader(this.Ra,a);b.attachShader(this.Ra,d);b.linkProgram(this.Ra);b.getProgramParameter(this.Ra,b.LINK_STATUS)||alert("Could not initialise shaders");this.Ra.Z=b.getAttribLocation(this.Ra,"aVertexPosition");b.enableVertexAttribArray(this.Ra.Z);this.Ra.Aa=b.getAttribLocation(this.Ra,"aTextureCoord");b.enableVertexAttribArray(this.Ra.Aa);d=b.createShader(b.FRAGMENT_SHADER);
b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform bool uRound;\nuniform float uRadius;\nuniform vec2 uRectDim;\nuniform vec2 uIrisCenter;\nuniform float uSoftEdge;\nuniform sampler2D uSampler;\nvoid main(void) {\n float alpha = 0.0;\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n if (uRound) {\n\t  vec2 diff = uIrisCenter - gl_FragCoord.xy;\n\t   float distFromCenter = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n\t   if (distFromCenter > uRadius) {\n      alpha = 1.0;\n    } else {\n      alpha = 1.0 - ((uRadius - distFromCenter) / uSoftEdge);\n    };\n }\n else {\n    float alphaFromLeft = 1.0 - ((gl_FragCoord.x -(uIrisCenter.x - uRectDim.x)) / uSoftEdge);\n    float alphaFromRight = 1.0 - (((uIrisCenter.x + uRectDim.x) - gl_FragCoord.x) / uSoftEdge);\n    float alphaFromTop = 1.0 - ((gl_FragCoord.y -(uIrisCenter.y - uRectDim.y)) / uSoftEdge);\n    float alphaFromBottom = 1.0 - (((uIrisCenter.y + uRectDim.y) - gl_FragCoord.y) / uSoftEdge);\n    alpha = max(max(alphaFromLeft, alphaFromRight), max(alphaFromTop, alphaFromBottom));\n }\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, alpha);\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);this.Ha=b.createProgram();b.attachShader(this.Ha,a);b.attachShader(this.Ha,d);b.linkProgram(this.Ha);b.getProgramParameter(this.Ha,b.LINK_STATUS)||alert("Could not initialise shaders");this.Ha.Z=b.getAttribLocation(this.Ha,"aVertexPosition");b.enableVertexAttribArray(this.Ha.Z);this.Ha.Aa=b.getAttribLocation(this.Ha,"aTextureCoord");b.enableVertexAttribArray(this.Ha.Aa);d=b.createShader(b.FRAGMENT_SHADER);
b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform float uPercent;\nuniform int uDirection;\nuniform vec2 uCanvasDimensions;\nuniform float uSoftEdge;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n float alpha = 0.0;\n if (uDirection == 1) {\n\t if (gl_FragCoord.x > uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((uPercent - gl_FragCoord.x) / uSoftEdge);\n  }\n }\n if (uDirection == 2) {\n\t if (gl_FragCoord.x < uCanvasDimensions.x - uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((gl_FragCoord.x - (uCanvasDimensions.x - uPercent)) / uSoftEdge);\n  }\n }\n if (uDirection == 3) {\n\t if (gl_FragCoord.y < uCanvasDimensions.y - uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((gl_FragCoord.y - (uCanvasDimensions.y - uPercent)) / uSoftEdge);\n  }\n }\n if (uDirection == 4) {\n\t if (gl_FragCoord.y > uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((uPercent - gl_FragCoord.y) / uSoftEdge);\n  }\n }\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, alpha);\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);this.Na=b.createProgram();b.attachShader(this.Na,a);b.attachShader(this.Na,d);b.linkProgram(this.Na);b.getProgramParameter(this.Na,b.LINK_STATUS)||alert("Could not initialise shaders");this.Na.Z=b.getAttribLocation(this.Na,"aVertexPosition");b.enableVertexAttribArray(this.Na.Z);this.Na.Aa=b.getAttribLocation(this.Na,"aTextureCoord");b.enableVertexAttribArray(this.Na.Aa)};e.prototype.Gc=function(){var b=
this.g.H;if(!b)return!1;if(this.Yb=b.createFramebuffer()){b.bindFramebuffer(b.FRAMEBUFFER,this.Yb);this.Yb.width=1024;this.Yb.height=1024;this.He=b.createTexture();b.bindTexture(b.TEXTURE_2D,this.He);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,this.Yb.width,this.Yb.height,0,b.RGBA,b.UNSIGNED_BYTE,null);var a=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,a);b.renderbufferStorage(b.RENDERBUFFER,
b.DEPTH_COMPONENT16,this.Yb.width,this.Yb.height);b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,this.He,0);b.framebufferRenderbuffer(b.FRAMEBUFFER,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,a);b.bindTexture(b.TEXTURE_2D,null);b.bindRenderbuffer(b.RENDERBUFFER,null);b.bindFramebuffer(b.FRAMEBUFFER,null);this.hb=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,this.hb);b.bufferData(b.ARRAY_BUFFER,new Float32Array([-1,-1,0,1,-1,0,-1,1,0,1,1,0]),b.STATIC_DRAW);this.hb.Ic=3;this.hb.Td=4;this.qf=
b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,this.qf);b.bufferData(b.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,1,1]),b.STATIC_DRAW);return!0}return!1};e.prototype.zl=function(b){var a=this.g.H,d=this.g.pb;if(this.Id){a.useProgram(this.oa);a.bindBuffer(a.ARRAY_BUFFER,this.hb);a.vertexAttribPointer(this.oa.Z,this.hb.Ic,a.FLOAT,!1,0,0);a.bindBuffer(a.ARRAY_BUFFER,this.qf);a.vertexAttribPointer(this.oa.Aa,2,a.FLOAT,!1,0,0);a.enableVertexAttribArray(this.oa.Z);a.enableVertexAttribArray(this.oa.Aa);a.activeTexture(a.TEXTURE0);
a.bindTexture(a.TEXTURE_2D,this.He);var d=1+(this.vb-1)*b,c=a.getUniformLocation(this.oa,"uAlpha");a.uniform1f(c,1);c=a.getUniformLocation(this.oa,"uZoomIn");a.uniform1i(c,1);var c=a.getUniformLocation(this.oa,"uZoomCenter"),f=.5+(this.eh-.5)*Math.sqrt(b),l=.5+(this.fh-.5)*Math.sqrt(b);0>f-.5/d&&(f=.5/d);0>l-.5/d&&(l=.5/d);1<f+.5/d&&(f=1-.5/d);1<l+.5/d&&(l=1-.5/d);a.uniform2f(c,f,l);f=a.getUniformLocation(this.oa,"uZoomFactor");a.uniform1f(f,d);a.uniform1i(a.getUniformLocation(this.oa,"uSampler"),
0);a.drawArrays(a.TRIANGLE_STRIP,0,this.hb.Td);a.useProgram(this.g.na.F)}else{this.g.Vg();a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.SRC_ALPHA,a.ONE);a.enable(a.BLEND);a.disable(a.DEPTH_TEST);f=.5+(this.eh-.5);l=.5+(this.fh-.5);0>f-.5/this.vb&&(f=.5/this.vb);0>l-.5/this.vb&&(l=.5/this.vb);1<f+.5/this.vb&&(f=1-.5/this.vb);1<l+.5/this.vb&&(l=1-.5/this.vb);if("crossdissolve"==this.type)a.useProgram(this.oa),a.bindBuffer(a.ARRAY_BUFFER,this.hb),a.vertexAttribPointer(this.oa.Z,this.hb.Ic,
a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,this.qf),a.vertexAttribPointer(this.oa.Aa,2,a.FLOAT,!1,0,0),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,this.He),c=a.getUniformLocation(this.oa,"uAlpha"),a.uniform1f(c,1-b),c=a.getUniformLocation(this.oa,"uZoomIn"),a.uniform1i(c,1==this.Oa||2==this.Oa?1:0),c=a.getUniformLocation(this.oa,"uZoomCenter"),a.uniform2f(c,f,l),f=a.getUniformLocation(this.oa,"uZoomFactor"),a.uniform1f(f,this.vb),a.uniform1i(a.getUniformLocation(this.oa,"uSampler"),0);
else if("diptocolor"==this.type)a.useProgram(this.Ra),a.bindBuffer(a.ARRAY_BUFFER,this.hb),a.vertexAttribPointer(this.Ra.Z,this.hb.Ic,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,this.qf),a.vertexAttribPointer(this.Ra.Aa,2,a.FLOAT,!1,0,0),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,this.He),a.uniform1f(a.getUniformLocation(this.Ra,"uColorPercent"),Math.min(2*b,1)),c=a.getUniformLocation(this.Ra,"uAlpha"),a.uniform1f(c,1-Math.max(2*(b-.5),0)),a.uniform3f(a.getUniformLocation(this.Ra,"uDipColor"),
(this.Pe>>16&255)/255,(this.Pe>>8&255)/255,(this.Pe&255)/255),c=a.getUniformLocation(this.Ra,"uZoomIn"),a.uniform1i(c,1==this.Oa||2==this.Oa?1:0),c=a.getUniformLocation(this.Ra,"uZoomCenter"),a.uniform2f(c,f,l),f=a.getUniformLocation(this.Ra,"uZoomFactor"),a.uniform1f(f,this.vb),a.uniform1i(a.getUniformLocation(this.Ra,"uSampler"),0);else if("irisround"==this.type||"irisroundcenter"==this.type||"irisrectangular"==this.type||"irisrectangularcenter"==this.type){a.useProgram(this.Ha);a.bindBuffer(a.ARRAY_BUFFER,
this.hb);a.vertexAttribPointer(this.Ha.Z,this.hb.Ic,a.FLOAT,!1,0,0);a.bindBuffer(a.ARRAY_BUFFER,this.qf);a.vertexAttribPointer(this.Ha.Aa,2,a.FLOAT,!1,0,0);a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,this.He);var g;1==this.Oa||2==this.Oa||"irisroundcenter"==this.type||"irisrectangularcenter"==this.type?g=c=.5:(c=this.eh,g=this.fh);var e=c*d.width,t=g*d.height,e=Math.max(e,d.width-e),t=Math.max(t,d.height-t);"irisround"==this.type||"irisroundcenter"==this.type?a.uniform1f(a.getUniformLocation(this.Ha,
"uRadius"),(Math.sqrt(e*e+t*t)+this.zc)*b):(e>t?(t=d.height/d.width*e+this.zc,e+=this.zc):(e=d.width/d.height*t+this.zc,t+=this.zc),a.uniform2f(a.getUniformLocation(this.Ha,"uRectDim"),e*b,t*b));b=a.getUniformLocation(this.Ha,"uSoftEdge");a.uniform1f(b,this.zc);a.uniform1i(a.getUniformLocation(this.Ha,"uRound"),"irisround"==this.type||"irisroundcenter"==this.type?1:0);a.uniform2f(a.getUniformLocation(this.Ha,"uIrisCenter"),c*d.width,g*d.height);c=a.getUniformLocation(this.Ha,"uZoomIn");a.uniform1i(c,
1==this.Oa||2==this.Oa?1:0);c=a.getUniformLocation(this.Ha,"uZoomCenter");a.uniform2f(c,f,l);f=a.getUniformLocation(this.Ha,"uZoomFactor");a.uniform1f(f,this.vb);a.uniform1i(a.getUniformLocation(this.Ha,"uSampler"),0)}else if("wipeleftright"==this.type||"wiperightleft"==this.type||"wipetopbottom"==this.type||"wipebottomtop"==this.type||"wiperandom"==this.type)a.useProgram(this.Na),a.bindBuffer(a.ARRAY_BUFFER,this.hb),a.vertexAttribPointer(this.Na.Z,this.hb.Ic,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,
this.qf),a.vertexAttribPointer(this.Na.Aa,2,a.FLOAT,!1,0,0),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,this.He),a.uniform1f(a.getUniformLocation(this.Na,"uPercent"),3>this.Pi?b*(d.width+this.zc):b*(d.height+this.zc)),b=a.getUniformLocation(this.Na,"uSoftEdge"),a.uniform1f(b,this.zc),a.uniform1i(a.getUniformLocation(this.Na,"uDirection"),this.Pi),a.uniform2f(a.getUniformLocation(this.Na,"uCanvasDimensions"),d.width,d.height),c=a.getUniformLocation(this.Na,"uZoomIn"),a.uniform1i(c,1==this.Oa||
2==this.Oa?1:0),c=a.getUniformLocation(this.Na,"uZoomCenter"),a.uniform2f(c,f,l),f=a.getUniformLocation(this.Na,"uZoomFactor"),a.uniform1f(f,this.vb),a.uniform1i(a.getUniformLocation(this.Na,"uSampler"),0);a.drawArrays(a.TRIANGLE_STRIP,0,this.hb.Td);a.useProgram(this.g.na.F);a.disable(a.BLEND);a.enable(a.DEPTH_TEST)}};return e}();p.ym=e})(ggP2VR||(ggP2VR={}));
(function(p){var e=function(){function e(b){this.Tg=[];this.g=b;this.enabled=!1;this.ub=2;this.mk=!1}e.prototype.tk=function(b){if(2==b.mode||3==b.mode||5==b.mode){var a=this.g.Ba.currentTime,d=b.vc.gain.value,c=b.tc.gain.value,f=b.uc.gain.value;b.sc.gain.linearRampToValueAtTime(b.sc.gain.value,a);b.sc.gain.linearRampToValueAtTime(0,a+this.ub);b.vc.gain.linearRampToValueAtTime(d,a);b.vc.gain.linearRampToValueAtTime(0,a+this.ub);b.tc.gain.linearRampToValueAtTime(c,a);b.tc.gain.linearRampToValueAtTime(0,
a+this.ub);b.uc.gain.linearRampToValueAtTime(f,a);b.uc.gain.linearRampToValueAtTime(0,a+this.ub)}else a=this.g.Ba.currentTime,b.bd.gain.linearRampToValueAtTime(b.bd.gain.value,a),b.bd.gain.linearRampToValueAtTime(0,a+this.ub);b.th=!0;setTimeout(function(){b.Cd()},1E3*this.ub+5)};e.prototype.Fp=function(){for(var b=0;b<this.g.N.length;b++){var a=this.g.N[b];-1==this.g.Nc.indexOf(a.id)&&(-1==this.g.Nc.indexOf("_main")||-1!=this.g.$d.indexOf(a.id))&&!this.g.ic(a.id)&&-1<a.loop&&4!=a.mode&&6!=a.mode&&
(a.ha?a.Vc():(a.b.play(),a.b.currentTime=0))}};e.prototype.kn=function(){for(var b=(this.g.Ba.currentTime-this.Bp)/this.ub,b=Math.min(1,b),a=0;a<this.g.N.length;a++){var d=this.g.N[a];this.g.ic(d.id)&&1>d.la&&(d.la=b)}1==b&&clearInterval(this.Ap)};return e}();p.zm=e})(ggP2VR||(ggP2VR={}));
(function(p){var e=function(){function e(b){this.wg=[];this.Wc=null;this.Wb=[];this.Pb=[];this.Xb=[];this.Gj=!0;this.g=b;this.$m()}e.prototype.mg=function(){var b=this.g.H,a=b.createShader(b.VERTEX_SHADER);b.shaderSource(a,"attribute vec3 aVertexPosition;\nvoid main(void) {\n gl_Position = vec4(aVertexPosition, 1.0);\n}\n");b.compileShader(a);b.getShaderParameter(a,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(a)),a=null);var d=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec4 vColor;\nuniform vec2 uCanvasDimensions;\nuniform vec2 uFlareCenterPosition;\nuniform float uBlindingValue;\nuniform float uAspectRatio;\nvoid main(void) {\n float canvasDiag = sqrt( (uCanvasDimensions.x * uCanvasDimensions.x) + (uCanvasDimensions.y * uCanvasDimensions.y) );\n vec2 diff = uFlareCenterPosition - gl_FragCoord.xy;\n diff.y = diff.y * uAspectRatio;\n float distFromFlarePoint = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n float factor = (distFromFlarePoint / canvasDiag) / 10.0;\n gl_FragColor = vec4(1.0, 1.0, 1.0, pow(((1.0 - factor) * 0.8) * uBlindingValue, 2.0));\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);this.cc=b.createProgram();b.attachShader(this.cc,a);b.attachShader(this.cc,d);b.linkProgram(this.cc);b.getProgramParameter(this.cc,b.LINK_STATUS)||alert("Could not initialise shaders");this.cc.Z=b.getAttribLocation(this.cc,"aVertexPosition");b.enableVertexAttribArray(this.cc.Z);d=b.createShader(b.VERTEX_SHADER);a=b.createShader(b.VERTEX_SHADER);b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\nvarying vec4 vColor;\nuniform vec2 uCirclePosition;\nuniform float uCircleRadius;\nuniform vec2 uCanvasDimensions2;\nuniform float uAspectRatio;\nvoid main(void) {\n vec2 circleOnScreen = aVertexPosition.xy * uCircleRadius + uCirclePosition;\n circleOnScreen.y = circleOnScreen.y / uAspectRatio;\n vec2 circleNorm = (circleOnScreen / uCanvasDimensions2) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(circleNorm.x, circleNorm.y, 0.0, 1.0);\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);b.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\nvarying vec4 vColor;\nuniform vec2 uCirclePosition;\nuniform float uCircleRadius;\nuniform vec2 uCanvasDimensions2;\nuniform float uAspectRatio;\nvoid main(void) {\n vec2 circleOnScreen = aVertexPosition.xy * uCircleRadius + uCirclePosition;\n circleOnScreen.y = circleOnScreen.y / uAspectRatio;\n vec2 circleNorm = (circleOnScreen / uCanvasDimensions2) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(circleNorm.x, circleNorm.y, 0.0, 1.0);\n}\n");
b.compileShader(a);b.getShaderParameter(a,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(a)),d=null);var c=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(c,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec4 vColor;\nuniform vec2 uCircleTexturePosition;\nuniform vec3 uCircleColor;\nuniform float uCircleRadius;\nuniform float uCircleAlpha;\nuniform float uCircleSoftness;\nuniform float uAspectRatio;\nvoid main(void) {\n vec2 diff = uCircleTexturePosition - gl_FragCoord.xy;\n diff.y = diff.y * uAspectRatio;\n float distFromCircleCenter = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n float softnessDistance = uCircleRadius * (1.0 - uCircleSoftness);\n if (distFromCircleCenter > uCircleRadius)\n {\n\t  gl_FragColor = vec4(uCircleColor, 0.0);\n }\n else if (distFromCircleCenter <= (softnessDistance))\n {\n\t  float factor = distFromCircleCenter / softnessDistance;\n\t  gl_FragColor = vec4(uCircleColor, pow((1.0 - (0.2 * factor)) * uCircleAlpha, 1.8));\n }\n else\n {\n\t  float factor = (distFromCircleCenter - softnessDistance) / (uCircleRadius - softnessDistance);\n\t  gl_FragColor = vec4(uCircleColor, pow((0.8 - (0.8 * factor)) * uCircleAlpha, 1.8));\n }\n}\n");
b.compileShader(c);b.getShaderParameter(c,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(c)),c=null);this.qa=b.createProgram();b.attachShader(this.qa,d);b.attachShader(this.qa,c);b.linkProgram(this.qa);b.getProgramParameter(this.qa,b.LINK_STATUS)||alert("Could not initialise shaders");this.qa.Z=b.getAttribLocation(this.qa,"aVertexPosition");b.enableVertexAttribArray(this.qa.Z);d=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec4 vColor;\nuniform vec2 uRingTexturePosition;\nuniform float uRingRadius;\nuniform float uRingAlpha;\nuniform float uAspectRatio;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec2 diff = uRingTexturePosition - gl_FragCoord.xy;\n diff.y = diff.y * uAspectRatio;\n float distFromRingCenter = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n float factor = distFromRingCenter / uRingRadius;\n if (distFromRingCenter > uRingRadius)\n {\n\t gl_FragColor = vec4(1.0, 1.0, 1.0, 0.0);\n }\n else\n {\n vec4 textureColor = texture2D(uSampler, vec2(factor / uAspectRatio, 0.5));\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, uRingAlpha);\n }\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);this.tb=b.createProgram();b.attachShader(this.tb,a);b.attachShader(this.tb,d);b.linkProgram(this.tb);b.getProgramParameter(this.tb,b.LINK_STATUS)||alert("Could not initialise shaders");this.tb.Z=b.getAttribLocation(this.tb,"aVertexPosition")};e.prototype.Gc=function(){var b=this.g.H;this.rd=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,this.rd);b.bufferData(b.ARRAY_BUFFER,new Float32Array([-1,-1,0,1,
-1,0,1,1,0,-1,1,0]),b.STATIC_DRAW);this.rd.Ic=3;this.rd.Td=4;this.Ye=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,this.Ye);for(var a=[0,0,0],d=2*Math.PI/6,c=Math.PI/180*35,f=1,l=c;l<=c+2*Math.PI;l+=d)a.push(Math.sin(l)),a.push(-Math.cos(l)),a.push(0),f++;b.bufferData(b.ARRAY_BUFFER,new Float32Array(a),b.STATIC_DRAW);this.Ye.Ic=3;this.Ye.Td=f;this.Ml=b.createTexture();b.bindTexture(b.TEXTURE_2D,this.Ml);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,
b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);a=document.createElement("canvas");a.width=100;a.height=1;d=a.getContext("2d");d.width=100;d.height=1;c=d.createLinearGradient(0,0,100,0);c.addColorStop(0,this.g.ea(16777215,0));c.addColorStop(.88,this.g.ea(0,0));c.addColorStop(.9,this.g.ea(16654848,1));c.addColorStop(.92,this.g.ea(16776448,1));c.addColorStop(.94,this.g.ea(4849466,1));c.addColorStop(.96,this.g.ea(131071,
1));c.addColorStop(.98,this.g.ea(8190,1));c.addColorStop(1,this.g.ea(0,0));d.fillStyle=c;d.fillRect(0,0,100,1);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,a)};e.prototype.To=function(){for(;0<this.wg.length;)this.wg.pop()};e.prototype.$m=function(){var b=[],a=[],d=[],c;c={m:14,alpha:.2,color:11390415,j:.27};b.push(c);c={m:20,alpha:.25,color:11390415,j:.4};b.push(c);c={m:10,alpha:.2,color:12442332,j:.6};b.push(c);c={m:15,alpha:.2,color:11390415,j:.8};b.push(c);c={m:10,alpha:.2,color:12442332,
j:1.5};b.push(c);c={m:15,alpha:.2,color:11390415,j:1.8};b.push(c);c={m:8,alpha:.2,color:12575203,v:.8,j:.7};a.push(c);c={m:7,alpha:.4,color:12575203,v:.5,j:1.6};a.push(c);c={m:5,alpha:.4,color:12575203,v:.6,j:.9};a.push(c);c={m:8,alpha:.3,color:12575203,v:.4,j:1.1};a.push(c);this.Wb.push(b);this.Pb.push(a);this.Xb.push(d);b=[];a=[];d=[];c={m:30,alpha:.3,color:11390415,j:.5};b.push(c);c={m:10,alpha:.3,color:11390415,j:1};b.push(c);c={m:20,alpha:.3,color:11390415,j:1.3};b.push(c);c={m:10,alpha:.3,color:11390415,
j:1.5};b.push(c);c={m:15,alpha:.3,color:11390415,j:1.8};b.push(c);c={m:10,alpha:.3,color:15506856,v:.8,j:.7};a.push(c);c={m:20,alpha:.5,color:15506856,v:.5,j:1.6};a.push(c);c={m:5,alpha:.5,color:15506856,v:.6,j:.9};a.push(c);c={m:60,alpha:.4,color:15506856,v:.2,j:1.1};a.push(c);d.push({m:220,alpha:.035,j:2});this.Wb.push(b);this.Pb.push(a);this.Xb.push(d);b=[];a=[];d=[];c={m:30,alpha:.5,color:15465727,j:.5};b.push(c);c={m:40,alpha:.28,color:15726842,j:.8};b.push(c);c={m:25,alpha:.32,color:15726842,
j:1.1};b.push(c);c={m:15,alpha:.25,color:15726842,j:1.35};b.push(c);c={m:10,alpha:.28,color:15465727,j:1.65};b.push(c);c={m:10,alpha:.45,color:15465727,v:.8,j:.7};a.push(c);c={m:7,alpha:.5,color:15465727,v:.4,j:.9};a.push(c);c={m:40,alpha:.4,color:15465727,v:.3,j:.38};a.push(c);c={m:50,alpha:.4,color:15465727,v:.5,j:1.25};a.push(c);c={m:18,alpha:.2,color:15465727,v:.5,j:1.25};a.push(c);c={m:10,alpha:.34,color:15726842,v:.8,j:1.5};a.push(c);c={m:38,alpha:.37,color:15465727,v:.3,j:-.5};a.push(c);this.Wb.push(b);
this.Pb.push(a);this.Xb.push(d);b=[];a=[];d=[];c={m:16,alpha:.5,color:16363159,j:.1};b.push(c);c={m:26,alpha:.3,color:16091819,j:.32};b.push(c);c={m:29,alpha:.2,color:16091819,j:1.32};b.push(c);c={m:20,alpha:.18,color:16363159,j:1.53};b.push(c);c={m:27,alpha:.13,color:16425092,j:1.6};b.push(c);c={m:20,alpha:.1,color:16091819,j:1.75};b.push(c);c={m:12,alpha:.45,color:16312238,v:.45,j:.2};a.push(c);c={m:8,alpha:.25,color:16434209,v:.7,j:.33};a.push(c);c={m:9,alpha:.25,color:16091819,v:.4,j:.7};a.push(c);
c={m:7,alpha:.2,color:16091819,v:.4,j:.85};a.push(c);c={m:60,alpha:.23,color:16091819,v:.55,j:1.05};a.push(c);c={m:37,alpha:.1,color:16091819,v:.55,j:1.22};a.push(c);c={m:10,alpha:.25,color:16363159,v:.65,j:1.38};a.push(c);c={m:7,alpha:.2,color:16434209,v:.5,j:1.45};a.push(c);c={m:3,alpha:.2,color:16416033,v:.5,j:1.78};a.push(c);c={m:6,alpha:.18,color:16434209,v:.45,j:1.9};a.push(c);c={m:4,alpha:.14,color:16766514,v:.45,j:2.04};a.push(c);c={m:30,alpha:.14,color:16766514,v:.8,j:.04};a.push(c);this.Wb.push(b);
this.Pb.push(a);this.Xb.push(d);b=[];a=[];d=[];c={m:9,alpha:.3,color:14346999,v:.3,j:.3};a.push(c);c={m:5,alpha:.5,color:14148072,v:.8,j:.6};a.push(c);c={m:3,alpha:.37,color:14346999,v:.66,j:.8};a.push(c);c={m:45,alpha:.2,color:14346999,v:.36,j:1.2};a.push(c);c={m:13,alpha:.2,color:14346999,v:.36,j:1.23};a.push(c);c={m:11,alpha:.2,color:14148072,v:.36,j:1.28};a.push(c);c={m:27,alpha:.16,color:14346999,v:.36,j:1.55};a.push(c);c={m:6,alpha:.36,color:14148072,v:.8,j:1.7};a.push(c);this.Wb.push(b);this.Pb.push(a);
this.Xb.push(d);b=[];a=[];d=[];c={m:24,alpha:.2,color:15186464,j:.2};b.push(c);c={m:7,alpha:.26,color:15186464,j:.35};b.push(c);c={m:23,alpha:.18,color:15186464,j:.65};b.push(c);c={m:13,alpha:.2,color:15186464,j:.8};b.push(c);c={m:11,alpha:.15,color:15186464,j:1.4};b.push(c);c={m:15,alpha:.11,color:15451904,j:1.6};b.push(c);c={m:6,alpha:.45,color:15579138,v:.45,j:.22};a.push(c);c={m:3,alpha:.3,color:15451904,v:.25,j:.4};a.push(c);c={m:4,alpha:.2,color:15451904,v:.25,j:.45};a.push(c);c={m:65,alpha:.17,
color:15186464,v:.25,j:.5};a.push(c);c={m:5,alpha:.45,color:15579138,v:.45,j:.88};a.push(c);c={m:140,alpha:.18,color:15579138,v:.32,j:.95};a.push(c);c={m:12,alpha:.22,color:15579138,v:.32,j:1.1};a.push(c);c={m:8,alpha:.32,color:15451904,v:.72,j:1.2};a.push(c);c={m:55,alpha:.2,color:15451904,v:.45,j:1.33};a.push(c);c={m:4,alpha:.3,color:15451904,v:.25,j:1.42};a.push(c);this.Wb.push(b);this.Pb.push(a);this.Xb.push(d);b=[];a=[];d=[];c={m:16,alpha:.4,color:10933495,j:.32};b.push(c);c={m:14,alpha:.3,color:11007484,
j:.36};b.push(c);c={m:10,alpha:.3,color:4037331,j:.58};b.push(c);c={m:14,alpha:.22,color:8835068,j:.68};b.push(c);c={m:10,alpha:.27,color:11007484,j:.82};b.push(c);c={m:11,alpha:.27,color:10867450,j:1};b.push(c);c={m:9,alpha:.2,color:6158332,j:1.05};b.push(c);c={m:10,alpha:.17,color:10867450,j:1.78};b.push(c);c={m:10,alpha:.3,color:4037331,j:-.23};b.push(c);c={m:8,alpha:.45,color:8835068,v:.45,j:.175};a.push(c);c={m:7,alpha:.4,color:12574715,v:.55,j:.46};a.push(c);c={m:3,alpha:.3,color:10867450,v:.35,
j:.5};a.push(c);c={m:60,alpha:.37,color:4031699,v:.75,j:.75};a.push(c);c={m:3,alpha:.25,color:4031699,v:.25,j:.75};a.push(c);c={m:3,alpha:.2,color:6158332,v:.25,j:.9};a.push(c);c={m:7,alpha:.45,color:8835068,v:.45,j:1.3};a.push(c);c={m:32,alpha:.22,color:8835068,v:.75,j:1.62};a.push(c);c={m:9,alpha:.45,color:4031699,v:.65,j:1.6};a.push(c);c={m:8,alpha:.25,color:4031699,v:.65,j:1.83};a.push(c);c={m:7,alpha:.4,color:12574715,v:.55,j:-.18};a.push(c);this.Wb.push(b);this.Pb.push(a);this.Xb.push(d);b=
[];a=[];d=[];c={m:16,alpha:.4,color:16389120,j:.32};b.push(c);c={m:26,alpha:.22,color:16389120,j:.4};b.push(c);c={m:26,alpha:.25,color:16389120,j:.65};b.push(c);c={m:18,alpha:.3,color:16389120,j:1.23};b.push(c);c={m:14,alpha:.26,color:16389120,j:1.33};b.push(c);c={m:17,alpha:.18,color:16389120,j:1.7};b.push(c);c={m:30,alpha:.16,color:16389120,j:2.15};b.push(c);c={m:100,alpha:.25,color:16389120,v:.22,j:1.45};a.push(c);c={m:7,alpha:.5,color:15628151,v:.3,j:1.5};a.push(c);c={m:3,alpha:.5,color:15628151,
v:.3,j:1.52};a.push(c);c={m:4,alpha:.5,color:16389120,v:.3,j:1.745};a.push(c);c={m:9,alpha:.22,color:16389120,v:.3,j:1.8};a.push(c);this.Wb.push(b);this.Pb.push(a);this.Xb.push(d);b=[];a=[];d=[];c={m:16,alpha:.4,color:10933495,j:.32};b.push(c);c={m:14,alpha:.3,color:11007484,j:.36};b.push(c);c={m:10,alpha:.3,color:4037331,j:.58};b.push(c);c={m:14,alpha:.22,color:8835068,j:.68};b.push(c);c={m:10,alpha:.27,color:11007484,j:.82};b.push(c);c={m:11,alpha:.27,color:10867450,j:1};b.push(c);c={m:9,alpha:.2,
color:6158332,j:1.05};b.push(c);c={m:10,alpha:.17,color:10867450,j:1.78};b.push(c);c={m:10,alpha:.3,color:4037331,j:-.23};b.push(c);c={m:8,alpha:.45,color:8835068,v:.45,j:.175};a.push(c);c={m:7,alpha:.4,color:12574715,v:.55,j:.46};a.push(c);c={m:3,alpha:.3,color:10867450,v:.35,j:.5};a.push(c);c={m:60,alpha:.37,color:4031699,v:.75,j:.75};a.push(c);c={m:3,alpha:.25,color:4031699,v:.25,j:.75};a.push(c);c={m:3,alpha:.2,color:6158332,v:.25,j:.9};a.push(c);c={m:7,alpha:.45,color:8835068,v:.45,j:1.3};a.push(c);
c={m:32,alpha:.22,color:8835068,v:.75,j:1.62};a.push(c);c={m:9,alpha:.45,color:4031699,v:.65,j:1.6};a.push(c);c={m:8,alpha:.25,color:4031699,v:.65,j:1.83};a.push(c);c={m:7,alpha:.4,color:12574715,v:.55,j:-.18};a.push(c);this.Wb.push(b);this.Pb.push(a);this.Xb.push(d);b=[];a=[];d=[];c={m:16,alpha:.4,color:16389120,j:.32};b.push(c);c={m:26,alpha:.22,color:16389120,j:.4};b.push(c);c={m:26,alpha:.25,color:16389120,j:.65};b.push(c);c={m:18,alpha:.3,color:16389120,j:1.23};b.push(c);c={m:14,alpha:.26,color:16389120,
j:1.33};b.push(c);c={m:17,alpha:.18,color:16389120,j:1.7};b.push(c);c={m:30,alpha:.16,color:16389120,j:2.15};b.push(c);c={m:100,alpha:.25,color:16389120,v:.22,j:1.45};a.push(c);c={m:7,alpha:.5,color:15628151,v:.3,j:1.5};a.push(c);c={m:3,alpha:.5,color:15628151,v:.3,j:1.52};a.push(c);c={m:4,alpha:.5,color:16389120,v:.3,j:1.745};a.push(c);c={m:9,alpha:.22,color:16389120,v:.3,j:1.8};a.push(c);this.Wb.push(b);this.Pb.push(a);this.Xb.push(d);b=[];a=[];d=[];c={m:24,alpha:.2,color:15186464,j:.2};b.push(c);
c={m:7,alpha:.26,color:15186464,j:.35};b.push(c);c={m:23,alpha:.18,color:15186464,j:.65};b.push(c);c={m:13,alpha:.2,color:15186464,j:.8};b.push(c);c={m:11,alpha:.15,color:15186464,j:1.4};b.push(c);c={m:15,alpha:.11,color:15451904,j:1.6};b.push(c);c={m:6,alpha:.45,color:15579138,v:.45,j:.22};a.push(c);c={m:3,alpha:.3,color:15451904,v:.25,j:.4};a.push(c);c={m:4,alpha:.2,color:15451904,v:.25,j:.45};a.push(c);c={m:65,alpha:.17,color:15186464,v:.25,j:.5};a.push(c);c={m:5,alpha:.45,color:15579138,v:.45,
j:.88};a.push(c);c={m:140,alpha:.18,color:15579138,v:.32,j:.95};a.push(c);c={m:12,alpha:.22,color:15579138,v:.32,j:1.1};a.push(c);c={m:8,alpha:.32,color:15451904,v:.72,j:1.2};a.push(c);c={m:55,alpha:.2,color:15451904,v:.45,j:1.33};a.push(c);c={m:4,alpha:.3,color:15451904,v:.25,j:1.42};a.push(c);this.Wb.push(b);this.Pb.push(a);this.Xb.push(d)};e.prototype.Fo=function(){if(this.Gj){var b=this.g.H,a,d,c,f=new p.va(0,0,-100),l=this.g.pd(),g,e,t=0,m=0,h=!1;if(this.g.Y)g=this.g.pb.width,e=this.g.pb.height,
this.g.C.Sg&&(g=this.g.C.Yb.width,e=this.g.C.Yb.height);else{this.S||(this.S=this.Wc.getContext("2d"));if(this.S.width!==this.g.o.width||this.S.height!==this.g.o.height)this.S.width=this.g.o.width,this.S.height=this.g.o.height;this.S.clear?this.S.clear():this.S.clearRect(0,0,this.Wc.width,this.Wc.height);g=this.S.width;e=this.S.height}var v=Math.sqrt(g*g+e*e),q=v/800;for(d=0;d<this.wg.length;d++){var u=this.wg[d];f.Ya(0,0,-100);f.ua(-u.i*Math.PI/180);f.Da(u.pan*Math.PI/180);f.Da(-this.g.pan.c*Math.PI/
180);f.ua(this.g.i.c*Math.PI/180);f.ib(this.g.O.c*Math.PI/180);if(-.01>f.z){var m=-l/f.z,t=f.x*m,m=f.y*m,r=Math.max(g,e);Math.abs(t)<r/2+100&&Math.abs(m)<r/2+100&&(h=!0,t+=g/2,m+=e/2)}if(h){this.g.Y&&(b.blendFunc(b.SRC_ALPHA,b.DST_ALPHA),b.enable(b.BLEND),b.disable(b.DEPTH_TEST));var r=g/2,w=e/2;c=Math.sqrt((r-t)*(r-t)+(w-m)*(w-m));var z=v/2,w=g>e?g:e,r=u.ek/100*((z-c)/z);0>r&&(r=0);if(this.g.Y){b.useProgram(this.cc);b.bindBuffer(b.ARRAY_BUFFER,this.g.C.hb);b.vertexAttribPointer(this.cc.Z,this.g.C.hb.Ic,
b.FLOAT,!1,0,0);var n=b.getUniformLocation(this.cc,"uCanvasDimensions");b.uniform2f(n,b.drawingBufferWidth,b.drawingBufferHeight);b.uniform2f(b.getUniformLocation(this.cc,"uFlareCenterPosition"),b.drawingBufferWidth/g*t,e-b.drawingBufferHeight/e*m);b.uniform1f(b.getUniformLocation(this.cc,"uBlindingValue"),r);n=b.getUniformLocation(this.cc,"uAspectRatio");b.uniform1f(n,this.g.C.Sg?b.drawingBufferWidth/b.drawingBufferHeight:b.drawingBufferWidth/b.drawingBufferHeight/(g/e));b.drawArrays(b.TRIANGLE_STRIP,
0,this.g.C.hb.Td)}else n=this.S.createRadialGradient(t,m,1,t,m,w),n.addColorStop(0,"rgba(255, 255, 255, "+r+")"),n.addColorStop(.5,"rgba(255, 255, 255, "+.8*r+")"),n.addColorStop(1,"rgba(255, 255, 255, "+.6*r+")"),this.S.fillStyle=n,this.S.fillRect(0,0,this.S.width,this.S.height);if(0!=Number(u.type)&&!this.g.C.Sg){var r=g/2-t,w=e/2-m,C=1,A=Number(u.type)-1;c<.35*z&&(C=c/(.35*z),C*=C);c>.7*z&&(C=(z-c)/(.3*z));C*=u.alpha/100;if(0<this.Wb[A].length)for(c=0;c<this.Wb[A].length;c++){var y=this.Wb[A][c],
z=y.m*q;a=y.alpha*C;0>a&&(a=0);var B=y.color;if(8==A||9==A||10==A)B=u.color;if(this.g.Y)b.useProgram(this.qa),b.bindBuffer(b.ARRAY_BUFFER,this.Ye),b.vertexAttribPointer(this.qa.Z,this.Ye.Ic,b.FLOAT,!1,0,0),n=b.getUniformLocation(this.qa,"uCanvasDimensions2"),b.uniform2f(n,b.drawingBufferWidth,b.drawingBufferHeight),b.uniform2f(b.getUniformLocation(this.qa,"uCirclePosition"),b.drawingBufferWidth/g*(t+r*y.j),b.drawingBufferWidth/g*(e-(m+w*y.j))),b.uniform2f(b.getUniformLocation(this.qa,"uCircleTexturePosition"),
b.drawingBufferWidth/g*(t+r*y.j),e-(m+w*y.j)),b.uniform1f(b.getUniformLocation(this.qa,"uCircleRadius"),z),b.uniform3f(b.getUniformLocation(this.qa,"uCircleColor"),(B>>16&255)/255,(B>>8&255)/255,(B&255)/255),b.uniform1f(b.getUniformLocation(this.qa,"uCircleAlpha"),a),b.uniform1f(b.getUniformLocation(this.qa,"uCircleSoftness"),.1),n=b.getUniformLocation(this.qa,"uAspectRatio"),b.uniform1f(n,b.drawingBufferWidth/b.drawingBufferHeight/(g/e)),b.drawArrays(b.TRIANGLE_FAN,0,this.Ye.Td);else{this.S.save();
this.S.translate(t+r*y.j,m+w*y.j);n=this.S.createRadialGradient(0,0,1,0,0,1.1*z);n.addColorStop(0,this.g.ea(B,a));n.addColorStop(.65,this.g.ea(B,.9*a));n.addColorStop(.8,this.g.ea(B,.7*a));n.addColorStop(1,this.g.ea(B,.2*a));this.S.beginPath();var B=2*Math.PI/6,y=Math.PI/180*35,D=!0;for(a=y;a<=y+2*Math.PI;a+=B)D?(this.S.moveTo(z*Math.sin(a),z*Math.cos(a)),D=!1):this.S.lineTo(z*Math.sin(a),z*Math.cos(a));this.S.closePath();this.S.fillStyle=n;this.S.fill();this.S.restore()}}if(0<this.Pb[A].length)for(c=
0;c<this.Pb[A].length;c++){y=this.Pb[A][c];z=y.m*q;a=y.alpha*C;0>a&&(a=0);B=y.color;if(8==A||9==A||10==A)B=u.color;this.g.Y?(b.useProgram(this.qa),b.bindBuffer(b.ARRAY_BUFFER,this.rd),b.vertexAttribPointer(this.qa.Z,this.rd.Ic,b.FLOAT,!1,0,0),n=b.getUniformLocation(this.qa,"uCanvasDimensions2"),b.uniform2f(n,b.drawingBufferWidth,b.drawingBufferHeight),n=b.getUniformLocation(this.qa,"uCirclePosition"),b.uniform2f(n,b.drawingBufferWidth/g*(t+r*y.j),b.drawingBufferWidth/g*(e-(m+w*y.j))),n=b.getUniformLocation(this.qa,
"uCircleTexturePosition"),b.uniform2f(n,b.drawingBufferWidth/g*(t+r*y.j),e-(m+w*y.j)),n=b.getUniformLocation(this.qa,"uCircleRadius"),b.uniform1f(n,z),b.uniform3f(b.getUniformLocation(this.qa,"uCircleColor"),(B>>16&255)/255,(B>>8&255)/255,(B&255)/255),b.uniform1f(b.getUniformLocation(this.qa,"uCircleAlpha"),a),b.uniform1f(b.getUniformLocation(this.qa,"uCircleSoftness"),y.v),n=b.getUniformLocation(this.qa,"uAspectRatio"),b.uniform1f(n,b.drawingBufferWidth/b.drawingBufferHeight/(g/e)),b.drawArrays(b.TRIANGLE_FAN,
0,this.rd.Td)):(this.S.save(),this.S.translate(t+r*y.j,m+w*y.j),n=this.S.createRadialGradient(0,0,1,0,0,z),n.addColorStop(0,this.g.ea(B,a)),n.addColorStop(1-y.v,this.g.ea(B,.8*a)),n.addColorStop(1,this.g.ea(B,0)),this.S.beginPath(),this.S.arc(0,0,z,0,2*Math.PI,!1),this.S.closePath(),this.S.fillStyle=n,this.S.fill(),this.S.restore())}if(0<this.Xb[A].length)for(c=0;c<this.Xb[A].length;c++)u=this.Xb[A][c],z=u.m*q,a=u.alpha*C,0>a&&(a=0),this.g.Y?(b.useProgram(this.tb),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,
this.Ml),b.bindBuffer(b.ARRAY_BUFFER,this.rd),b.vertexAttribPointer(this.tb.Z,this.rd.Ic,b.FLOAT,!1,0,0),n=b.getUniformLocation(this.tb,"uCanvasDimensions2"),b.uniform2f(n,g,e),n=b.getUniformLocation(this.tb,"uCirclePosition"),b.uniform2f(n,t+r*u.j,e-(m+w*u.j)),n=b.getUniformLocation(this.tb,"uRingTexturePosition"),b.uniform2f(n,b.drawingBufferWidth/g*(t+r*u.j),e-(m+w*u.j)),n=b.getUniformLocation(this.tb,"uCircleRadius"),b.uniform1f(n,z),b.uniform2f(b.getUniformLocation(this.tb,"uRingPosition"),t+
r*u.j,e-(m+w*u.j)),b.uniform1f(b.getUniformLocation(this.tb,"uRingRadius"),z),b.uniform1f(b.getUniformLocation(this.tb,"uRingAlpha"),a),n=b.getUniformLocation(this.tb,"uAspectRatio"),b.uniform1f(n,b.drawingBufferWidth/b.drawingBufferHeight/(g/e)),b.uniform1i(b.getUniformLocation(this.tb,"uSampler"),0),b.drawArrays(b.TRIANGLE_FAN,0,this.rd.Td)):(this.S.save(),this.S.translate(t+r*u.j,m+w*u.j),n=this.S.createRadialGradient(0,0,0,0,0,z),n.addColorStop(0,this.g.ea(16777215,0)),n.addColorStop(.88,this.g.ea(0,
0)),n.addColorStop(.9,this.g.ea(16654848,a)),n.addColorStop(.92,this.g.ea(16776448,a)),n.addColorStop(.94,this.g.ea(4849466,a)),n.addColorStop(.96,this.g.ea(131071,a)),n.addColorStop(.98,this.g.ea(8190,a)),n.addColorStop(1,this.g.ea(0,0)),this.S.beginPath(),this.S.arc(0,0,z,0,2*Math.PI,!1),this.S.closePath(),this.S.fillStyle=n,this.S.fill(),this.S.restore())}this.g.Y&&(b.useProgram(this.g.na.F),b.disable(b.BLEND),b.enable(b.DEPTH_TEST))}}}};return e}();p.xm=e})(ggP2VR||(ggP2VR={}));var O=!1;
(function(p){var e=function(){return function(){this.f=this.i=this.pan=0}}(),h=function(){function b(a,d){this.pan={c:0,Qa:0,min:0,max:360,d:0,qj:0,Cc:0};this.i={c:0,Qa:0,min:-90,max:90,d:0,Cc:0};this.O={c:0,Qa:0,min:-180,max:180,d:0};this.rc={pan:0,i:-90,O:0,f:170,Cb:9};this.f={c:70,Qa:70,min:1,Bg:0,max:170,nj:360,oj:270,lf:0,d:0,mode:0,Yl:0,pk:0};this.Za={O:0,pitch:0};this.o={width:10,height:10};this.gb=0;this.Ni=new p.va;this.crossOrigin="anonymous";this.Ka=this.Vh=4;this.dd=this.dh=this.Eg=this.lc=
0;this.X={start:{x:0,y:0},ca:{x:0,y:0},yd:{x:0,y:0},c:{x:0,y:0},ba:{x:0,y:0}};this.R={Va:!1,vk:0,startTime:0,start:{x:0,y:0},ca:{x:0,y:0},yd:{x:0,y:0},c:{x:0,y:0},ba:{x:0,y:0}};this.Yf=!0;this.za={enabled:!0,ca:{x:0,y:0},ba:{x:0,y:0},Bj:0,f:{active:!1,gc:0}};this.ud={alpha:0,beta:0,gamma:0,orientation:0,Al:0};this.ig={alpha:0,beta:0,gamma:0,orientation:0};this.s={src:[],Oe:4,width:640,height:480,gd:!1,Fh:!1,Zl:!1,je:"loop",b:HTMLVideoElement=null,am:!1,nc:WebGLTexture=null,Vj:WebGLBuffer=null,ki:WebGLBuffer=
null,fj:WebGLBuffer=null,format:1,Ah:0,Yi:1};this.Jh=0;this.ga=this.wa=this.Fa=this.T=this.fc=this.$a=this.D=null;this.le="pano";this.Xi="flashcontainer";this.Oi="";this.control=null;this.Ob=[];this.Ea=!1;this.Vf=1;this.ka=null;this.Jd=this.Le=this.bf=!1;this.Nf=0;this.od=.02;this.zi=0;this.Ai=!1;this.yi=this.ih=this.Of=this.Ke=this.dk=0;this.ck=-1;this.Ib="";this.rf=this.yc=!1;this.Wh=0;this.oh=[];this.Ve=[];this.Df=this.pc=1;this.Rf=1024;this.sf=!1;this.te=200;this.Mb=0;this.Rg=5;this.oc=0;this.bm=
50;this.ej=this.cm=0;this.l={enabled:!1,timeout:5,active:!1,Qg:!1,speed:.4,mi:0,Th:0,pj:!0,Zg:!1,If:!1,jh:"",Kd:"Animation01",Ne:!1,Ph:!1,Mj:!1,startTime:0,hd:0,vh:!1,ph:!1,Lh:0,xd:0,ug:0,vg:0,tg:0,ml:0};this.u={active:!1,Je:!1,speed:.1,pan:0,i:0,O:0,f:70,Hd:70,ug:0,vg:0,nl:0,tg:0,Cb:0,Hg:0,ij:0,Tj:!1,Cg:!1,bk:0,ak:0};this.gf={pan:-1,i:-1,f:-1};this.kl=0;this.ia=null;this.Jf={};this.ui={};this.qh=[];this.Nh={};this.jf={};this.zg={};this.A={mode:1,qg:-1,pa:0,lb:0,Uc:.05,ec:255,dc:1,bc:255,ac:.3,af:!0,
Oj:{enabled:!0,width:180,height:20,Pj:0,Nj:1,background:!0,bc:16777215,ac:1,ec:0,dc:1,Ci:3,Di:1,wi:!0},jb:[],Lb:[],Mc:[],gi:[]};this.ya=null;this.P=[];this.N=[];this.J=[];this.Xa=[];this.Fe=[];this.Ma=[];this.xa=[];this.Nc=[];this.$d=[];this.Be=[];this.V=1;this.na=this.Ad=this.Qb=this.Md=null;this.Wf={};this.ld={};this.hi={};this.h=new p.Am;this.Eo={target:0,current:0,Uc:.01,en:2,Si:0,rh:!1,Nm:!1};this.margin={left:0,top:0,right:0,bottom:0};this.B={re:!1,po:!1,yb:!1,jd:!1,wd:!0,Zk:!1,Xl:1,Ol:!1,Qi:!0,
Uf:!0,mh:!1,lg:!1,Ql:!0,sensitivity:8};this.Ag=[];this.Zc=!0;this.sa={x:0,y:0};this.Yg=this.Db=this.Wg=this.Qc=this.Y=!1;this.ti=this.nm=!0;this.dj=!1;this.ke=!0;this.Hf=this.cj=!1;this.om=!0;this.Ia=this.Ld="";this.ad="transition";this.Ua="transform";this.qd="perspective";this.sk="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYBgeACDAAADIAAE3iTbkAAAAAElFTkSuQmCC";this.pb={width:0,height:0};this.zk=new p.va;this.yk=
new p.va;this.Ak=new p.va;this.Bk=new p.va;this.xk=new p.va;this.ef=!1;this.ll=this.bb="";this.Wj=[];this.oi=[];this.ng=this.al=this.Rd=this.bl=this.Hc=this.gj=this.Cj=this.fd=this.df=this.$k=this.hj=this.cl=this.dl=this.gl=!1;this.Xg=!0;this.ai=this.Dh=!1;this.Vk=[];this.devicePixelRatio=1;this.fa=this.C=null;this.kh=!1;this.La=null;this.wb={enabled:!1,speed:1,Ed:!1,Vi:!0};this.vl=!1;this.mb=new p.Bm;this.Sj=!1;this.Tf=function(a,d){if(0==a.length)return a;var b,g,e,t,m,h,v,q;q=[];b=d.Xh(a[0])-0;
for(t=0;t<a.length;t++){h=t;v=t+1;v==a.length&&(v=0);g=d.Xh(a[v])-0;if(0<=b&&0<=g)q.push(a[h]);else if(0<=b||0<=g)e=g/(g-b),0>e&&(e=0),1<e&&(e=1),m=new p.va,m.vd(a[h],a[v],e),0>b||q.push(a[h]),q.push(m);b=g}return q};this.Hj=0;this.Kh=-1;this.eg=function(a){return a?a.pageX||a.pageY?{x:a.pageX,y:a.pageY}:a.clientX||a.clientY?{x:a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,y:a.clientY+document.body.scrollTop+document.documentElement.scrollTop}:a.touches&&a.touches[0]?{x:a.touches[0].pageX,
y:a.touches[0].pageY}:{x:0,y:0}:{x:0,y:0}};this.Rh=1;this.ln=this.xh=this.il=this.Ti=this.xj=this.Yh=0;this.jl=!1;this.Od=!0;this.nb=new p.Gh(this);this.nb.af=!1;this.rk();this.uf(this.nb);this.checkLoaded=this.Ob;this.isLoaded=!1;d&&d.hasOwnProperty("useFlash")&&d.useFlash&&(this.Db=!0,this.Y=this.Qc=!1,d.hasOwnProperty("flashPlayerId")?this.le=d.flashPlayerId:this.le="pano",d.hasOwnProperty("flashContainerId")?this.Xi=d.flashContainerId:this.Xi=a+"flash");this.ta();this.Db||(this.Ga=new p.xm(this));
this.lk(a);this.Mm();this.userdata=this.Jf=this.Xf();this.emptyHotspot=this.nb;this.mouse=this.sa;this.C=new p.ym(this);this.La=new p.zm(this);this.na=new p.Fm(this);this.Pc()}b.prototype.Pk=function(){return"6.0 beta3/16902"};b.prototype.Li=function(){this.C.enabled=this.fa.enabled;this.C.type=this.fa.type;this.C.Oa=this.fa.zoomin;this.C.Zb=this.fa.zoomout;this.C.Qf=this.fa.blendtime;this.C.Mf=this.fa.zoomoutpause;this.C.Lf=this.fa.zoomfov;this.C.ae=this.fa.zoomspeed;this.C.Pe=this.fa.blendcolor;
this.C.zc=this.fa.softedge;this.fa=null};b.prototype.pp=function(a){this.fa={};this.fa.enabled=!0;this.fa.type=this.C.type;this.fa.zoomin=this.C.Oa;this.fa.zoomout=this.C.Zb;this.fa.blendtime=this.C.Qf;this.fa.zoomoutpause=this.C.Mf;this.fa.zoomfov=this.C.Lf;this.fa.zoomspeed=this.C.ae;this.fa.blendcolor=this.C.Pe;this.fa.softedge=this.C.zc;if(a.hasOwnProperty("type")){var d=a.type;if("cut"==d||"crossdissolve"==d||"diptocolor"==d||"irisround"==d||"irisrectangular"==d||"wipeleftright"==d||"wiperightleft"==
d||"wipetopbottom"==d||"wipebottomtop"==d||"wiperandom"==d)this.fa.type=d}a.hasOwnProperty("before")&&(d=Number(a.before),0==d||2==d)&&(this.fa.zoomin=d);a.hasOwnProperty("after")&&(d=Number(a.after),0==d||2==d||3==d||4==d)&&(this.fa.zoomout=d);a.hasOwnProperty("transitiontime")&&(d=Number(a.transitiontime),0<=d&&50>=d&&(this.fa.blendtime=d));a.hasOwnProperty("waitfortransition")&&(this.fa.zoomoutpause=1==a.waitfortransition);a.hasOwnProperty("zoomedfov")&&(d=Number(a.zoomedfov),.01<=d&&50>=d&&(this.fa.zoomfov=
d));a.hasOwnProperty("zoomspeed")&&(d=Number(a.zoomspeed),.01<=d&&99>=d&&(this.fa.zoomspeed=d));a.hasOwnProperty("dipcolor")&&(this.fa.blendcolor=a.dipcolor);a.hasOwnProperty("softedge")&&(a=Number(a.softedge),0<=a&&1E3>=a&&(this.fa.softedge=a));this.kh||this.Li()};b.prototype.Lc=function(a,d,c){var b=d?Number(d):0;if(0!=a&&4!=a&&12!=a&&9!=a)this.Jc("Unsupported projection type: "+a);else if(d&&0!==b&&4!==b&&12!==b&&9!==b)this.Jc("Unsupported projection2 type: "+b);else if(a==b&&(b=0),this.Eg=c?Number(c):
1,this.Ka!=a||this.lc!=b)this.Ka=a,this.lc=b,this.na.Ch()};b.prototype.ra=function(){return 0==this.Ka?4:this.Ka};b.prototype.Hi=function(a,d){if(0!=a&&4!=a&&12!=a&&9!=a)this.Jc("Unsupported projection type: "+a);else if(this.Y||0==a||4==a||this.Jc("Projection changes require WebGL!"),this.ra()!=a){var c={};c.pan=this.pan.c;c.tilt=this.i.c;c.fov=this.f.c;c.projection=a;c.timingFunction=3;c.speed=d;var b=this.dg(a);c.fov=Math.min(b,c.fov);this.Qh(c)}};b.prototype.addListener=function(a,d){(this.Wf[a]=
this.Wf[a]||[]).push(d)};b.prototype.ja=function(a,d){var c=this.Wf[a];if(c)for(var b=c.length,l=0;l<b;l++)try{c[l].apply(null,[d])}catch(g){this.Jc(g)}};b.prototype.removeEventListener=function(a,d){var c=this.Wf[a];if(c){var b,l;l=0;for(b=c.length;l<b;l++)if(c[l]===d){1===b?delete this.Wf[a]:c.splice(l,1);break}}};b.prototype.Im=function(a,d){return this.ld.hasOwnProperty(a)?!1:(this.ld[a]=d,!0)};b.prototype.ei=function(a,d){return this.ld.hasOwnProperty(a)&&(0==this.ld[a]&&"string"===typeof d||
1==this.ld[a]&&"number"===typeof d||2==this.ld[a]&&"boolean"===typeof d)?(this.hi[a]!=d&&(this.hi[a]=d,this.ja("varchanged_"+a,{value:d})),!0):!1};b.prototype.$n=function(a){if(this.hi.hasOwnProperty(a))return this.hi[a]};b.prototype.rk=function(){var a;this.devicePixelRatio=window.devicePixelRatio||1;this.gl=!!navigator.userAgent.match(/(Windows|Win)/g);this.dl=!!navigator.userAgent.match(/(Mac|Macintosh|Mac_powerpc)/g);this.cl=!!navigator.userAgent.match(/(Linux|Ubuntu)/g);this.hj=!!navigator.userAgent.match(/(MSIE)/g);
this.$k=!!navigator.userAgent.match(/(Edge|EdgA)/g);this.df=!!navigator.userAgent.match(/(Firefox)/g);if(this.fd=!!navigator.userAgent.match(/(Safari)/g))a=navigator.userAgent.indexOf("Safari"),this.Fd=navigator.userAgent.substring(a+7),a=navigator.userAgent.indexOf("Version"),-1!=a&&(this.Fd=navigator.userAgent.substring(a+8)),this.Fd=this.Fd.substring(0,this.Fd.indexOf(" ")),this.Fd=this.Fd.substring(0,this.Fd.indexOf(".")),this.Cj=!0;if(this.gj=!!navigator.userAgent.match(/(Chrome)/g))this.fd=
!1;this.Hc=!!navigator.userAgent.match(/(iPad|iPhone|iPod)/g);this.bl=!!navigator.userAgent.match(/(iPhone|iPod)/g);this.Rd=!!navigator.userAgent.match(/(android)/i);this.al=!!navigator.userAgent.match(/(IEMobile)/i);this.ng=this.Hc||this.Rd||this.al;/iP(hone|od|ad)/.test(navigator.platform)&&(a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),this.Vk=[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||"0",10)]);this.Dh=!window.requestAnimationFrame;a=["Webkit","Moz","O","ms","Ms"];this.Ia="";
this.ad="transition";this.Ua="transform";this.qd="perspective";for(var d=0;d<a.length;d++)"undefined"!==typeof document.documentElement.style[a[d]+"Transform"]&&(this.Ia="-"+a[d].toLowerCase()+"-",this.ad=a[d]+"Transition",this.Ua=a[d]+"Transform",this.qd=a[d]+"Perspective");this.dj=G();this.Y=N();this.Qc=this.dj;this.Y&&(this.Qc=!1);this.yc=!0;this.rf=!1;if(this.Hc||this.Rd)this.Sl(80),this.Rg=2;this.Jc("Pano2VR player "+this.Pk()+" - Prefix:"+this.Ia+", "+(this.dj?"CSS 3D available":"CSS 3D not available")+
", "+(this.Y?"WebGL available":"WebGL not available"));O&&this.M("Pano2VR Debug version!");try{window.AudioContext=window.AudioContext||window.webkitAudioContext,this.Ba=new AudioContext}catch(c){this.Ba=null}this.fd&&(!this.Cj||9>Number(this.Fd))&&(this.Ba=null);this.Xg=this.bl?this.fd&&this.Cj&&10<=Number(this.Fd)?!0:!1:!0};b.prototype.M=function(a){if(O){var d=document.getElementById("gg_debug");d&&(d.innerHTML=a.toString()+"<br />");window.console&&window.console.log(a)}};b.prototype.Jc=function(a){var d=
document.getElementById("gg_debug");d&&(d.innerHTML=a+"<br />");window.console&&window.console.log(a)};b.prototype.Sl=function(a){this.te=a};b.prototype.Yo=function(a){this.crossOrigin=a};b.prototype.$o=function(a){this.cf=a};b.prototype.Rn=function(){return this.Wh};b.prototype.Xo=function(a){this.Ld=a};b.prototype.rn=function(){return this.Ld};b.prototype.An=function(){return this.ng};b.prototype.Bn=function(){return this.ef};b.prototype.xn=function(){return this.l.active};b.prototype.ap=function(a){this.ng=
!!a};b.prototype.yh=function(){return this.isLoaded};b.prototype.zn=function(){return!this.isLoaded};b.prototype.pd=function(){return Number(this.o.height)/(2*Math.tan(Math.PI/180*(this.Rb()/2)))};b.prototype.Tl=function(a,d){this.isFullscreen&&(a=window.innerWidth,d=window.innerHeight);var c=a-this.margin.left-this.margin.right,b=d-this.margin.top-this.margin.bottom;if(!(10>c||10>b)){var l=window.devicePixelRatio||1;this.sf&&(l=1);this.D.style.width=c+"px";this.D.style.height=b+"px";this.D.style.left=
this.margin.left+"px";this.D.style.top=this.margin.top+"px";if(this.Y)try{this.$a&&(this.$a.style.position="absolute",this.$a.style.display="inline",this.$a.style.width=c+"px",this.$a.style.height=b+"px",this.$a.width=c*l,this.$a.height=b*l),this.H&&(this.pb.width=c*l,this.pb.height=b*l,this.H.viewport(0,0,this.H.drawingBufferWidth,this.H.drawingBufferHeight))}catch(g){alert(g)}this.fc&&(this.fc.style.width=a+"px",this.fc.style.height=d+"px",this.fc.width=a,this.fc.height=d);this.Fa&&(this.Fa.style.width=
a+"px",this.Fa.style.height=d+"px",this.wa.style.width=a+"px",this.wa.style.height=d+"px",this.wa.width=a,this.wa.height=d,this.wa.style.left=this.margin.left+"px",this.wa.style.top=this.margin.top+"px",this.ka&&this.ka!=this.Fa&&(this.ka.style.width=a+"px",this.ka.style.height=d+"px"));this.Ga&&(c=this.Ga.Wc,c.style.width=a+"px",c.style.height=d+"px",c.width=a,c.height=d,c.style.left=this.margin.left+"px",c.style.top=this.margin.top+"px");this.bf&&(this.Ea=!0);c=this.D.offsetWidth;b=this.D.offsetHeight;
if(this.o.width!=c||this.o.height!=b)this.o.width=c,this.o.height=b;this.Zp();this.ka&&this.ka.ggUpdateSize&&this.ka.ggUpdateSize(a,d);this.ja("sizechanged",{bh:a,jg:d})}};b.prototype.Ie=function(){this.Sj=!0};b.prototype.Pc=function(){this.Tl(this.Md.offsetWidth,this.Md.offsetHeight)};b.prototype.fo=function(){var a={width:0,height:0};a.width=this.o.width;a.height=this.o.height;return a};b.prototype.ne=function(){var a={x:0,y:0},d=this.D;if(d.offsetParent){do a.x+=d.offsetLeft,a.y+=d.offsetTop,d=
d.offsetParent;while(d)}return a};b.prototype.np=function(a){this.ia=a};b.prototype.cp=function(a,d,c,b){this.margin.left=a;this.margin.top=d;this.margin.right=c;this.margin.bottom=b;this.ia=this.skinObj;this.Ie()};b.prototype.Vm=function(a){0==a&&(this.B.wd=!1);1==a&&(this.B.wd=!0);2==a&&(this.B.wd=!this.B.wd);this.ja("viewmodechanged",{})};b.prototype.co=function(){return 1==this.B.wd?1:0};b.prototype.hk=function(a,d){this.A.mode=1==d&&0<this.A.mode?0:Math.round(a);this.update();this.ga&&(this.ga.changePolygonMode(a,
d),this.ga.update());this.ja("polymodechanged",{})};b.prototype.Ul=function(a){var d=this.A.jb.indexOf(a);-1==d?(this.A.jb.push(a),this.A.Lb.push(0),this.A.Mc.push(1)):this.A.Mc[d]=1;this.update()};b.prototype.Tk=function(a){var d=this.A.jb.indexOf(a);-1!=d&&(this.A.Mc[d]=0,this.A.gi.push(a),this.update())};b.prototype.Lp=function(a){var d=this.A.jb.indexOf(a);-1==d||-1!=d&&0==this.A.Mc[d]?this.Ul(a):this.Tk(a);this.update()};b.prototype.Tm=function(a,d,c,b,l){for(var g=0;g<this.P.length;g++){var e=
this.P[g];"poly"!=e.type||e.id!=a&&""!=a||(e.bc=d,e.ac=c,e.ec=b,e.dc=l)}""==a&&(this.A.bc=d,this.A.ac=c,this.A.ec=b,this.A.dc=l);this.update()};b.prototype.Rm=function(a){this.Ga&&(this.Ga.Gj=0==a?!0:1==a?!1:!this.Ga.Gj,this.update())};b.prototype.Tn=function(){return this.A.mode};b.prototype.Wm=function(){this.ja("viewstatechanged",{})};b.prototype.eo=function(){return 0};b.prototype.Hn=function(a){return(a=this.Nh[a])?a.type:"web"};b.prototype.Gn=function(a){return(a=this.Nh[a])?a:{}};b.prototype.Mn=
function(a,d){var c=[];a||(a=this.bb);this.jf[a]&&this.jf[a][d]&&(c.push(this.jf[a][d].y),c.push(this.jf[a][d].x));return c};b.prototype.Nn=function(a,d){var c=[];a||(a=this.bb);this.zg[a]&&this.zg[a][d]&&(c.push(this.zg[a][d].x),c.push(this.zg[a][d].y));return c};b.prototype.Fn=function(a){var d=[],c;for(c in this.Nh)d.push(c);for(c=0;c<d.length;c++)if(this.jf[a][d[c]])return d[c];return""};b.prototype.Wk=function(a,d,c){a=Math.atan2(a+1,c);var b=Math.atan2(d+1,c);d=Math.sin(a);c=Math.sin(b);a=Math.cos(a);
b=Math.cos(b);this.zk.Ya(0,0,-1);this.yk.Ya(a,0,-d);this.Ak.Ya(-a,0,-d);this.Bk.Ya(0,b,-c);this.xk.Ya(0,-b,-c)};b.prototype.Ki=function(a){a=this.Tf(a,this.zk);a=this.Tf(a,this.yk);a=this.Tf(a,this.Ak);a=this.Tf(a,this.Bk);return a=this.Tf(a,this.xk)};b.prototype.gm=function(a){if(!this.yc&&this.oo!=a){this.oo=a;var d;d=this.margin.left+this.o.width/2+"px ";d+=this.margin.top+this.o.height/2+"px ";this.Fa.style[this.qd]=a+"px";this.Fa.style[this.qd+"Origin"]=d;this.D.style[this.qd]=a+"px";this.D.style[this.qd+
"Origin"]=d}};b.prototype.xp=function(){return this.C.Ge||this.C.Id||this.Y&&(4!=this.Ka||0!=this.lc)?!1:!0};b.prototype.Ug=function(){var a,d=new p.va(0,0,-100),c=this.pd(),b,l,g;l=100/this.f.c;g=this.h.width/this.h.height;b=this.o.height*l*g;l*=this.o.height;for(var e=this.xp(),t=0;t<this.P.length;t++){var m=this.P[t],h,v;"point"==m.type&&(a=!1,2==this.gb?(h=(this.pan.c-m.pan)/100/g*b,v=(this.i.c-m.i)/100*l,Math.abs(h)<this.o.width/2+500&&Math.abs(v)<this.o.height/2+500&&(a=!0)):(d.Ya(0,0,-100),
d.ua(-m.i*Math.PI/180),d.Da(m.pan*Math.PI/180),d.Da(-this.pan.c*Math.PI/180),d.ua(this.i.c*Math.PI/180),d.ib(this.O.c*Math.PI/180),.01>d.z?(v=-c/d.z,h=d.x*v,v*=d.y,Math.abs(h)<this.o.width/2+500&&Math.abs(v)<this.o.height/2+500&&(a=!0)):v=h=0),m.mc=h+this.o.width/2,m.Jb=v+this.o.height/2,m.b&&m.b.__div&&("none"!=m.b.__div.style[this.ad]&&(m.b.__div.style[this.ad]="none"),m.b.ggUse3d?(this.yc||this.gm(c),m.b.__div.style.width="1px",m.b.__div.style.height="1px",a="",this.yc&&(a+="perspective("+c+"px) "),
a+="translate3d(0px,0px,"+c+"px) ",a+="rotateZ("+this.O.c.toFixed(10)+"deg) ",a+="rotateX("+this.i.c.toFixed(10)+"deg) ",a+="rotateY("+(-this.pan.c).toFixed(10)+"deg) ",a+="rotateY("+m.pan.toFixed(10)+"deg) ",a+="rotateX("+(-m.i).toFixed(10)+"deg) ",a+="translate3d(0px,0px,"+(-1*m.b.gg3dDistance).toFixed(10)+"px) ",m.b.__div.style[this.Ua+"Origin"]="0% 0%",m.b.__div.style[this.Ua]=a,m.b.__div.style.left=this.margin.left+this.o.width/2+"px",m.b.__div.style.top=this.margin.top+this.o.height/2+"px"):
a&&e?(m.b.__div.style.left=this.margin.left+h+this.o.width/2+"px",m.b.__div.style.top=this.margin.top+v+this.o.height/2+"px"):(m.b.__div.style.left="-1000px",m.b.__div.style.top="-1000px")));if("poly"==m.type){var q=[];if(2==this.gb)for(m.Vd=[],a=0;a<m.$g.length;a++)h=m.$g[a],q=(this.pan.c-h.pan)/100/g*b,h=(this.i.c-h.i)/100*l,q+=this.margin.left+this.o.width/2,h+=this.margin.top+this.o.height/2,m.Vd.push({mc:q,Jb:h});else{for(a=0;a<m.$g.length;a++)h=m.$g[a],d.Ya(0,0,-100),d.ua(-h.i*Math.PI/180),
d.Da(h.pan*Math.PI/180),d.Da(-this.pan.c*Math.PI/180),d.ua(this.i.c*Math.PI/180),d.ib(this.O.c*Math.PI/180),q.push(d.clone());q=this.Ki(q);if(0<q.length)for(a=0;a<q.length;a++)d=q[a],.1>d.z?(v=-c/d.z,h=this.o.width/2+d.x*v,v=this.o.height/2+d.y*v):v=h=0,d.mc=h,d.Jb=v;m.Vd=q}}}};b.prototype.tn=function(){for(var a=[],d=0;d<this.P.length;d++){var c=this.P[d];"point"==c.type&&c.b&&c.b.__div&&a.push(c.b.__div)}return a};b.prototype.ea=function(a,d){a=Number(a);isNaN(d)&&(d=0);0>d&&(d=0);1<d&&(d=1);return"rgba("+
(a>>16&255)+","+(a>>8&255)+","+(a&255)+","+d+")"};b.prototype.Go=function(){var a,d;if(this.wa&&(this.A.qg!=this.A.mode&&(this.A.qg=this.A.mode,this.wa.style.visibility=0<this.A.mode?"inherit":"hidden"),0<=this.A.mode||0<this.A.jb.length)){this.aa||(this.aa=this.wa.getContext("2d"));if(this.aa.width!=this.o.width||this.aa.height!=this.o.height)this.aa.width=this.o.width,this.aa.height=this.o.height;this.aa.clear?this.aa.clear():this.aa.clearRect(0,0,this.wa.width,this.wa.height);var c=1;0>=this.A.mode&&
(c=0);3==this.A.mode&&(c=this.A.pa);for(a=0;a<this.P.length;a++){d=this.P[a];var b=c;if("poly"==d.type){var l=d.Vd;2==this.A.mode&&(b=d.pa);var g=this.A.jb.indexOf(d.id);-1!=g&&(b=this.A.Lb[g]);this.aa.fillStyle=this.ea(d.bc,d.ac*b);this.aa.strokeStyle=this.ea(d.ec,d.dc*b);if(0<l.length){this.aa.beginPath();for(d=0;d<l.length;d++)b=l[d],0==d?this.aa.moveTo(b.mc,b.Jb):this.aa.lineTo(b.mc,b.Jb);this.aa.closePath();this.aa.stroke();this.aa.fill()}}}}};b.prototype.Uk=function(a,d,c){var b,l,g=!1;b=0;
for(l=a.length-1;b<a.length;l=b++){var e=a[b];l=a[l];e.Jb>c!=l.Jb>c&&d<(l.mc-e.mc)*(c-e.Jb)/(l.Jb-e.Jb)+e.mc&&(g=!g)}return g};b.prototype.Ji=function(a,d){var c=-1;if((0<=this.A.mode||0<this.A.jb.length)&&this.lo())for(var b=0;b<this.P.length;b++){var l=this.P[b];"poly"==l.type&&l.Vd&&0<l.Vd.length&&(-1!=this.A.mode||-1!=this.A.jb.indexOf(l.id))&&this.Uk(l.Vd,a,d)&&(c=b,l.mc=a,l.Jb=d)}return 0<=c?this.P[c]:!1};b.prototype.lo=function(){return 4==this.ra()&&0==this.lc};b.prototype.Rb=function(){var a=
0,d=this.ra(),c=this.o;switch(this.f.mode){case 0:a=this.f.c/2;break;case 1:a=4==d?180*Math.atan(c.height/c.width*Math.tan(this.f.c/2*Math.PI/180))/Math.PI:c.height/c.width*this.f.c/2;break;case 2:a=Math.sqrt(c.width*c.width+c.height*c.height);a=4==d?180*Math.atan(c.height/a*Math.tan(this.f.c/2*Math.PI/180))/Math.PI:c.height/a*this.f.c/2;break;case 3:a=4*c.height/3>c.width?this.f.c/2:4==d?180*Math.atan(4*c.height/(3*c.width)*Math.tan(this.f.c/2*Math.PI/180))/Math.PI:4*c.height/(3*c.width)*(this.f.c/
2)}return 2*a};b.prototype.vn=function(a,d){a||(a=this.Rb());d||(d=this.ra());return 4==d?180*Math.atan(this.be()*Math.tan(a/2*Math.PI/180))/Math.PI:a*this.be()};b.prototype.be=function(){return this.o.width/this.o.height};b.prototype.Mg=function(a){a/=2;var d,c=this.ra();switch(this.f.mode){case 0:this.f.c=2*a;break;case 1:a=4==c?180*Math.atan(this.o.width/this.o.height*Math.tan(a*Math.PI/180))/Math.PI:this.o.width/this.o.height*a;this.f.c=2*a;break;case 2:d=Math.sqrt(this.o.width*this.o.width+this.o.height*
this.o.height);a=4==c?180*Math.atan(d/this.o.height*Math.tan(a*Math.PI/180))/Math.PI:d/this.o.height*a;this.f.c=2*a;break;case 3:4*this.o.height/3>this.o.width||(d=3*this.o.width/(4*this.o.height),a=4==c?180*Math.atan(d*Math.tan(a*Math.PI/180))/Math.PI:d*a),this.f.c=2*a}};b.prototype.lh=function(){var a=new e;a.pan=this.pan.c;a.i=this.i.c;a.f=this.f.c;this.Te(a);this.Te(a);this.Te(a);this.Hf&&0==this.gb||(this.pan.c=a.pan,this.i.c=a.i);this.f.c=a.f};b.prototype.Te=function(a){var d,c,b=this.o.width/
this.o.height;if(2==this.gb){0<this.f.Bg&&(d=this.pc,this.h.I&&0<this.h.I.length&&(d=this.h.I[0].height),this.f.min=100*this.o.height/(d*this.f.Bg));c=a.f/2;d=c*b;var l=this.h.width/this.h.height*50,b=this.B.Ql?2*Math.min(50,l/b):2*Math.max(50,l/b);a.f<this.f.min&&(a.f=this.f.min);a.f>b&&(a.f=b);50<c?a.i=0:(50<a.i+c&&(a.i=50-c),-50>a.i-c&&(a.i=-50+c));d>l?a.pan=0:(a.pan+d>l&&(a.pan=l-d,this.l.active&&(this.l.speed=-this.l.speed,this.pan.d=0)),a.pan-d<-l&&(a.pan=-l+d,this.l.active&&(this.l.speed=-this.l.speed,
this.pan.d=0)))}else{0<this.f.Bg&&(d=this.pc,this.h.I&&0<this.h.I.length&&(d=this.h.I[0].height),this.f.min=360*Math.atan2(this.o.height/2,d/2*this.f.Bg)/Math.PI);a.f<this.f.min&&(a.f=this.f.min);var l=this.f.max,e=179;c=this.Rb()/2;d=b*c;4==this.ra()?d=180*Math.atan(b*Math.tan(c*Math.PI/180))/Math.PI:9==this.ra()?(l=this.f.oj,e=355):12==this.ra()&&(l=this.f.nj,e=360);this.Y||(l=Math.max(160,l));a.f>l&&(a.f=l);12==this.ra()&&(2*d>e&&(a.f=e/b),c=this.Rb()/2,2*c>e&&(a.f=e),c=this.Rb()/2,d=b*c);2*c>
this.i.max-this.i.min&&180>this.i.max-this.i.min&&(c=(this.i.max-this.i.min)/2,this.Mg(2*c));90>this.i.max?a.i+c>this.i.max&&(a.i=this.i.max-c):a.i>this.i.max&&(a.i=this.i.max);-90<this.i.min?a.i-c<this.i.min&&(a.i=this.i.min+c):a.i<this.i.min&&(a.i=this.i.min);b=this.pan.max-this.pan.min;if(359.99>b){var l=90,e=Math.tan(c*Math.PI/180),k=Math.tan((Math.abs(a.i)+c)*Math.PI/180),k=Math.sqrt(k*k+1)/Math.sqrt(e*e+1);c=180*Math.atan(k*Math.tan(d*Math.PI/180))/Math.PI;2*c>b&&(k=Math.tan(b*Math.PI/360)/
Math.tan(d*Math.PI/180),b=k*Math.sqrt(e*e+1),k=Math.sqrt(b*b-1),l=180/Math.PI*Math.atan(k));a.pan+c>this.pan.max&&(a.pan=this.pan.max-c,this.l.active&&(this.l.speed=-this.l.speed,this.pan.d=0));a.pan-c<this.pan.min&&(a.pan=this.pan.min+c,this.l.active&&(this.l.speed=-this.l.speed,this.pan.d=0));a.i+d>l&&(a.i=l-d);a.i-d<-l&&(a.i=-l+d)}}};b.prototype.update=function(a){void 0===a&&(a=0);this.Ea=!0;a&&(this.Vf=Math.max(1*a,this.Vf))};b.prototype.Gk=function(){return this.ga?!!this.ga.isTileLoading:0<
this.Mb||0<this.oc};b.prototype.Vg=function(){var a=Date.now(),d;this.Db?this.ga&&(this.Sp(),2===this.gb?(this.lh(),this.Ug()):0===this.gb&&(d=this.pd(),this.Wk(this.o.width/2,this.o.height/2,d),this.Ug())):2===this.gb?(this.Ug(),this.Y?(this.na.Qj(),this.na.yl()):this.Qj()):0===this.gb&&(!this.Y||4==this.Ka&&0==this.lc?(d=this.pd(),this.Wk(this.o.width/2,this.o.height/2,d),this.Ug(),this.Yg?this.na.Yp():this.nm&&this.mm(),this.hm(),this.Y?(this.s.gd?14==this.s.format?this.na.Xp():this.na.sm():0<
this.h.I.length?this.na.eq():this.na.gq(),this.na.yl()):(this.Qc?0<this.h.I.length?this.Vp():this.Up():this.Wg&&this.Rp(),this.Go()),this.Ga&&this.Ga.Fo()):(this.na.sm(),this.Ug(),this.ko()));d=Date.now();50<d-a?(this.M("Time between frames: "+(d-a)),this.sf||(2<this.Hj?(this.sf=!0,this.M("disabling HighDPI rendering"),this.Pc()):this.Hj++)):this.Hj=0;this.bf&&this.h.Ll++};b.prototype.Up=function(){var a=!1;if(this.o.width!=this.D.offsetWidth||this.o.height!=this.D.offsetHeight)this.o.width=this.D.offsetWidth,
this.o.height=this.D.offsetHeight,this.D.style[this.Ua+"OriginX"]=this.o.width/2+"px",this.D.style[this.Ua+"OriginY"]=this.o.height/2+"px",a=!0;var d=Math.round(this.pd());this.rg==d&&!a||this.yc||(this.rg=d,this.D.style[this.qd]=d+"px");this.mb.Zm(this.pan.c,this.i.c,this.O.c,this.Za);for(a=0;6>a;a++){var c,b;if(c=this.mb.cb[a])b="",this.yc?(b+="translate3d("+this.o.width/2+"px,"+this.o.height/2+"px,0px) ",b+="perspective("+d+"px) ",b+="translate3d(0px,0px,"+d+"px) "):b+="translate3d("+this.o.width/
2+"px,"+this.o.height/2+"px,"+d+"px) ",b+="rotateZ("+Number(this.O.c).toFixed(10)+"deg) ",b+="rotateX("+Number(this.i.c).toFixed(10)+"deg) ",b+="rotateY("+Number(-this.pan.c).toFixed(10)+"deg) ",c.Qk&&(b+=c.Qk,c.eb||(b="translate3d(-10px,-10px,0px) scale(0.001,0.001)"),c.K.style[this.Ua]=b)}};b.prototype.Rp=function(){this.lh();var a;this.fc&&(a=this.fc.getContext("2d"));if(this.o.width!==this.D.offsetWidth||this.o.height!==this.D.offsetHeight)this.o.width=this.D.offsetWidth,this.o.height=this.D.offsetHeight;
if(a){var d=a.canvas.width/2,c=a.canvas.height/2,b=a.createRadialGradient(d,c,5,d,c,Math.max(d,c));b.addColorStop(0,"#333");b.addColorStop(1,"#fff");a.rect(0,0,a.canvas.width,a.canvas.height);a.fillStyle=b;a.fill();a.fillStyle="#f00";a.font="20px Helvetica";a.textAlign="center";a.fillText("Pan: "+this.pan.c.toFixed(1),d,c-60);a.fillText("Tilt: "+this.i.c.toFixed(1),d,c-30);a.fillText("Fov: "+this.f.c.toFixed(1),d,c+0);a.fillText("Node: "+this.Fk(),d,c+30);a.fillText("Title: "+this.Jf.title,d,c+60)}};
b.prototype.Sp=function(){this.lh();if(this.o.width!==this.D.offsetWidth||this.o.height!==this.D.offsetHeight)this.o.width=this.D.offsetWidth,this.o.height=this.D.offsetHeight;this.ga&&this.ga.setPan&&(this.ga.setPan(this.pan.c),this.ga.setTilt(this.i.c),this.ga.setFov(this.f.c))};b.prototype.Qj=function(){this.wa.style.visibility="inherit";this.aa||(this.aa=this.wa.getContext("2d"));if(this.aa.width!=this.o.width||this.aa.height!=this.o.height)this.aa.width=this.o.width,this.aa.height=this.o.height;
this.aa.clear?this.aa.clear():this.aa.clearRect(0,0,this.wa.width,this.wa.height);this.oc=0;var a,d,c;d=100/this.f.c;c=this.h.width/this.h.height;var b=this.o.height*d*c;d*=this.o.height;a=(this.pan.c/100/c-.5)*b+this.o.width/2;for(var l=(this.i.c/100-.5)*d+this.o.height/2,e,k,t,m,h=0;this.h.I.length>=h+2&&this.h.I[h+1].width>b;)h++;var v,q;q=[];for(v=this.h.I.length-1;v>=h;){c=this.h.I[v];var u;if(c.cache)u={Wa:0,xb:0},u.zb=c.L-1,u.Ab=c.da-1;else{u={};var r=-l/d*(c.height/this.h.G);e=(-a+this.o.width)/
b*(c.width/this.h.G);k=(-l+this.o.height)/d*(c.height/this.h.G);u.Wa=Math.min(Math.max(0,Math.floor(-a/b*(c.width/this.h.G))),c.L-1);u.xb=Math.min(Math.max(0,Math.floor(r)),c.da-1);u.zb=Math.min(Math.max(0,Math.floor(e)),c.L-1);u.Ab=Math.min(Math.max(0,Math.floor(k)),c.da-1)}q[v]=u;var w=!0;for(k=u.xb;k<=u.Ab;k++)for(e=u.Wa;e<=u.zb;e++)m=e+k*c.L,r=c.U[m],r||(r=new p.Qd,c.U[m]=r),this.Mb<this.Rg?r.h||(this.ej++,r.h=new Image,r.h.onload=this.Ip(),r.h.onerror=this.li(r),r.h.onabort=this.li(r),r.h.crossOrigin=
this.crossOrigin,r.h.setAttribute("src",this.Ee(0,v,e,k)),c.cache&&this.Ob.push(r.h),this.Mb++,this.Ea=!0):this.oc++,r.h&&r.h.complete||(w=!1),r.visible=!0;u.kj=w;v--}for(v=this.h.I.length-1;v>=h;){c=this.h.I[v];if(q[v]&&0<=q[v].Wa)for(u=q[v],k=u.xb;k<=u.Ab;k++)for(e=u.Wa;e<=u.zb;e++)m=e+k*c.L,(r=c.U[m])||(r=c.U[m]=new p.Qd),r.h&&r.h.complete&&this.aa.drawImage(r.h,a+(-this.h.Ja+this.h.G*e)*b/c.width,l+(-this.h.Ja+this.h.G*k)*d/c.height,r.h.width*b/c.width,r.h.height*d/c.height),r.visible=!0;v--}for(b=
0;b<this.h.I.length;b++)if(c=this.h.I[b],!c.cache)for(t in c.U)c.U.hasOwnProperty(t)&&(r=c.U[t],r.visible||(r.h=null,delete c.U[t]));if(0<=this.A.mode||0<this.A.jb.length)for(b=1,0>=this.A.mode&&(b=0),3==this.A.mode&&(b=this.A.pa),t=0;t<this.P.length;t++)if(c=this.P[t],a=b,"poly"==c.type&&(d=c.Vd,2==this.A.mode&&(a=c.pa),l=this.A.jb.indexOf(c.id),-1!=l&&(a=this.A.Lb[l]),0<d.length)){this.aa.fillStyle=this.ea(c.bc,c.ac*a);this.aa.strokeStyle=this.ea(c.ec,c.dc*a);this.aa.beginPath();for(c=0;c<d.length;c++)a=
d[c],0==c?this.aa.moveTo(a.mc,a.Jb):this.aa.lineTo(a.mc,a.Jb);this.aa.closePath();this.aa.stroke();this.aa.fill()}this.Zc=!1};b.prototype.Hp=function(a){var d=this;return function(){d.update();d.Zc=!0;a.loaded=!0;a.h&&!a.K&&d.D.appendChild(a.h);d.Mb&&d.Mb--;a.h&&a.Pa&&(a.Pa.drawImage(a.h,0,0),a.h=null)}};b.prototype.Ip=function(){var a=this;return function(){a.Ea=!0;a.Zc=!0;a.Mb&&a.Mb--}};b.prototype.li=function(a){var d=this;return function(){d.Ea=!0;d.Zc=!0;d.Mb&&d.Mb--;a.h=null}};b.prototype.Ok=
function(a,d,c){c.Wa=a.width/this.h.G*d.$f;c.xb=a.height/this.h.G*d.ag;c.zb=a.width/this.h.G*d.xg;c.Ab=a.height/this.h.G*d.yg;c.Wa=Math.min(Math.max(0,Math.floor(c.Wa)),a.L-1);c.xb=Math.min(Math.max(0,Math.floor(c.xb)),a.da-1);c.zb=Math.min(Math.max(0,Math.floor(c.zb)),a.L-1);c.Ab=Math.min(Math.max(0,Math.floor(c.Ab)),a.da-1)};b.prototype.gp=function(a){a=Math.round(a);this.yc=0<(a&1);this.rf=0<(a&2);this.ti=0<(a&4);this.sf=0<(a&8);4096<=a&&(this.Qc=0<(a&4096),this.Y=0<(a&8192),this.Wg=0<(a&32768))};
b.prototype.Wn=function(){var a=0;this.yc&&(a|=1);this.rf&&(a|=2);this.ti&&(a|=4);this.Qc&&(a|=4096);this.Y&&(a|=8192);this.Wg&&(a|=32768);return a};b.prototype.jm=function(){if(!(6>this.mb.cb.length))for(var a=0;6>a;a++){var d;d=this.mb.cb[a];var c;c=[];c.push(new p.va(-1,-1,-1,0,0));c.push(new p.va(1,-1,-1,1,0));c.push(new p.va(1,1,-1,1,1));c.push(new p.va(-1,1,-1,0,1));for(var b=0;4>b;b++)4>a?c[b].Da(-Math.PI/2*a):c[b].ua(Math.PI/2*(4==a?-1:1)),this.Za&&(c[b].ib(this.Za.O*Math.PI/180),c[b].ua(-this.Za.pitch*
Math.PI/180)),c[b].ze(-this.pan.c),c[b].Dd(this.i.c),c[b].Ae(this.O.c);c=this.Ki(c);d.eb=0<c.length;if(d.eb){d=d.kf;d.$f=c[0].nd;d.xg=c[0].nd;d.ag=c[0].Nb;d.yg=c[0].Nb;for(b=1;b<c.length;b++)d.$f=Math.min(d.$f,c[b].nd),d.xg=Math.max(d.xg,c[b].nd),d.ag=Math.min(d.ag,c[b].Nb),d.yg=Math.max(d.yg,c[b].Nb);d.Kf=d.xg-d.$f;d.ah=d.yg-d.ag;d.scale=Math.max(d.Kf,d.ah)}else d.kf.Kf=-1,d.kf.ah=-1}};b.prototype.mj=function(){for(var a=0;a<this.h.I.length;a++){var d=this.h.I[a],c;for(c in d.U)d.U.hasOwnProperty(c)&&
(d.U[c].visible=!1)}};b.prototype.Ui=function(){for(var a=0,d=Math.tan(Math.min(this.Rb(),175)*Math.PI/360),c=this.o.height/(2*d),c=c*(1+this.o.width/this.o.height*d/2),c=c*Math.pow(2,1<this.devicePixelRatio?this.h.pl:this.h.ol);this.h.I.length>=a+2&&!this.h.I[a+1].nf&&this.h.I[a+1].width>c;)a++;return a};b.prototype.Vp=function(){var a=!1,d,c,b;if(this.o.width!==this.D.offsetWidth||this.o.height!==this.D.offsetHeight)this.o.width=this.D.offsetWidth,this.o.height=this.D.offsetHeight,this.D.style[this.Ua+
"OriginX"]=this.o.width/2+"px",this.D.style[this.Ua+"OriginY"]=this.o.height/2+"px",a=!0;var l=Math.round(this.pd());if(this.rg!=l||a)this.rg=l,this.yc||(this.D.style[this.qd]=l+"px",this.D.style[this.qd+"Origin"]="50% 50%");this.oc=0;if(0<this.h.I.length){this.jm();this.mj();var e;e="";for(d=0;6>d;d++){var k;k=this.mb.cb[d];k.eb&&(e=e+d+",")}e=this.Ui();var t;for(t=this.h.I.length-1;t>=e;){var a=this.h.I[t],m=1;t==this.h.I.length-1&&0==this.h.Ja&&(m=this.h.G/(this.h.G-2));for(d=0;6>d;d++){k=this.mb.cb[d];
var h=k.kf;if(k.eb&&0<h.Kf&&0<h.ah&&0<h.scale||a.cache){k.Ea=!1;var v;v={};a.cache?(v.Wa=0,v.xb=0,v.zb=a.L-1,v.Ab=a.da-1):this.Ok(a,h,v);for(b=v.xb;b<=v.Ab;b++)for(c=v.Wa;c<=v.zb;c++){var q=c+b*a.L+d*a.L*a.da;(h=a.U[q])||(h=a.U[q]=new p.Qd);if(!h.K&&this.Mb<this.Rg){if(0<this.oi.length){h.K=this.oi.shift();for(q=this.D.firstChild;q&&q.Pd&&(-1==q.Pd||q.Pd>=t);)q=q.nextSibling;this.D.insertBefore(h.K,q);h.Pa=h.K.getContext("2d")}else if(this.cm<this.te){this.cm++;h.K=document.createElement("canvas");
h.K.width=this.h.G+2*this.h.Ja;h.K.height=this.h.G+2*this.h.Ja;h.Pa=h.K.getContext("2d");h.K.style[this.Ua+"Origin"]="0% 0%";h.K.style.overflow="hidden";h.K.style.position="absolute";for(q=this.D.firstChild;q&&q.Pd&&(-1==q.Pd||q.Pd>=t);)q=q.nextSibling;this.D.insertBefore(h.K,q)}h.K&&(this.ej++,h.h=new Image,h.h.crossOrigin=this.crossOrigin,h.h.style[this.Ua+"Origin"]="0% 0%",h.h.style.position="absolute",h.h.style.overflow="hidden",h.K.Pd=t,h.h.onload=this.Hp(h),h.h.onerror=this.li(h),h.h.onabort=
this.li(h),h.h.setAttribute("src",this.Ee(d,t,c,b)),a.cache&&this.Ob.push(h.h),this.Mb++,this.Ea=!0)}else this.oc++;if(h.K){q="";this.yc?(q+="translate3d("+this.o.width/2+"px,"+this.o.height/2+"px,0px) ",q+=" perspective("+l+"px) ",q+="translate3d(0px,0px,"+l+"px) "):q+="translate3d("+this.o.width/2+"px,"+this.o.height/2+"px,"+l+"px) ";q+="rotateZ("+Number(this.O.c).toFixed(10)+"deg) ";q+="rotateX("+Number(this.i.c).toFixed(10)+"deg) ";q+="rotateY("+Number(-this.pan.c).toFixed(10)+"deg) ";this.Za&&
(q+="rotateX("+Number(-this.Za.pitch).toFixed(10)+"deg) ",q+="rotateZ("+Number(this.Za.O).toFixed(10)+"deg) ");var q=4>d?q+("rotateY("+-90*d+"deg) "):q+("rotateX("+(4==d?-90:90)+"deg) "),u;this.rf?(u=this.Rf/this.h.G*(this.h.G/a.width)*(2*t+1),u=this.fd?2/Math.tan(this.f.c*Math.PI/360)*u:2*u,q+=" scale("+u*m*m+")"):u=1/(m*m);q+=" translate3d("+(1/m*c*this.h.G-this.h.Ja-a.width/2)+"px,";q+=1/m*b*this.h.G-this.h.Ja-a.width/2+"px,";q+=-a.width*u/2+"px)";k.eb&&(h.visible=!0,h.K?h.K.style[this.Ua]=q:h.h&&
(h.h.style[this.Ua]=q))}}}}t--}for(l=0;l<this.h.I.length;l++){var a=this.h.I[l],r;for(r in a.U)a.U.hasOwnProperty(r)&&(h=a.U[r],!h.visible&&h.K&&(a.cache?h.K?h.K.style[this.Ua]="translate3d(-10px,-10px,0px) scale(0.001,0.001)":h.h&&(h.h.style[this.Ua]=""):(h.Pa&&h.Pa.clearRect(0,0,h.Pa.canvas.width,h.Pa.canvas.height),this.oi.push(h.K),h.K?(e="translate3d(-10px,-10px,0px) scale(0.001,0.001)",h.K.style[this.Ua]=e,h.K.Pd=-1):h.loaded&&this.D.removeChild(h.h),h.K=null,h.h=null,h.Pa=null,delete a.U[r])))}this.Zc=
!1}};b.prototype.hm=function(){var a=Math.round(this.pd());this.yc||this.gm(a);for(var d=0;d<this.Xa.length;d++){var c;c=this.Xa[d];c.lm(a);c.b.hidden=!1}};b.prototype.mm=function(){for(var a=Math.round(this.pd()),d=0;d<this.J.length;d++){var c;c=this.J[d];c.kd||(c.lm(a),c.b.hidden=!1)}};b.prototype.ko=function(){for(var a=0;a<this.Xa.length;a++){var d;d=this.Xa[a];d.zf(!1)}for(a=0;a<this.J.length;a++)d=this.J[a],d.kd||d.zf(!1)};b.prototype.Zp=function(){for(var a=0;a<this.J.length;a++){var d;d=this.J[a];
d.kd||d.Ie()}for(a=0;a<this.Xa.length;a++)d=this.Xa[a],d.Ie()};b.prototype.Gc=function(a){this.ke=!1;try{a?this.$a=a:this.$a=document.createElement("canvas");var d=this.Md.offsetWidth-this.margin.left-this.margin.right,c=this.Md.offsetHeight-this.margin.top-this.margin.bottom;if(100>d||100>c)c=d=100;var b=window.devicePixelRatio||1;this.sf&&(b=1);this.D.style.width=d+"px";this.D.style.height=c+"px";this.$a.style.width=d+"px";this.$a.style.height=c+"px";this.$a.width=d*b;this.$a.height=c*b;this.$a.style.display=
"none";this.$a.style.nq="none";this.D.insertBefore(this.$a,this.D.firstChild);a={stencil:!0,depth:!0};a.alpha=this.fd?!0:!1;this.Hc&&10<=this.Vk[0]&&(a.antialias=!1,a.alpha=!1);this.H=this.$a.getContext("webgl",a);this.H||(this.H=this.$a.getContext("experimental-webgl",a));if(this.H){var l=this.H;this.pb.width=d*b;this.pb.height=c*b;l.clearColor(0,0,0,0);l.enable(this.H.DEPTH_TEST);l.viewport(0,0,500,500);l.clear(l.COLOR_BUFFER_BIT|l.DEPTH_BUFFER_BIT);4096<=l.getParameter(l.MAX_TEXTURE_SIZE)&&!this.ng&&
(this.te=1<b?4*this.te:2*this.te);this.M("Max tile cnt: "+this.te);this.na.mg();this.na.Ch();this.na.Xk(this.Df);this.na.Yk();this.C&&(this.C.mg(),this.C.Gc());this.Ga&&(this.Ga.mg(),this.Ga.Gc())}}catch(e){this.M(e)}this.H?this.Y=!0:alert("Could not initialise WebGL!")};b.prototype.hc=function(a){return a?"{"==a.charAt(0)||"/"==a.charAt(0)||0<a.indexOf("://")||0==a.indexOf("javascript:")?a:this.Ld+a:this.Ld};b.prototype.Xd=function(a,d,c){var b=(new RegExp("%0*"+d,"i")).exec(a.toString());if(b){var b=
b.toString(),l=c.toString();for(b.charAt(b.length-1)!=d&&(l=(1+c).toString());l.length<b.length-1;)l="0"+l;a=a.replace(b,l)}return a};b.prototype.Ee=function(a,d,c,b){var l=this.h.jj-1-d,e=this.h.ql,k="x";switch(a){case 0:k="f";break;case 1:k="r";break;case 2:k="b";break;case 3:k="l";break;case 4:k="u";break;case 5:k="d"}for(var h=0;3>h;h++)e=this.Xd(e,"c",a),e=this.Xd(e,"s",k),e=this.Xd(e,"r",d),e=this.Xd(e,"l",l),e=this.Xd(e,"x",c),e=this.Xd(e,"y",b),e=this.Xd(e,"v",b),e=this.Xd(e,"h",c);return this.hc(e)};
b.prototype.zh=function(){return this.pan.c};b.prototype.Qn=function(){return this.u.pan};b.prototype.Jk=function(){for(var a=this.pan.c;-180>a;)a+=360;for(;180<a;)a-=360;return a};b.prototype.me=function(){for(var a=this.pan.c-this.pan.qj;-180>a;)a+=360;for(;180<a;)a-=360;return a};b.prototype.xf=function(a){this.ta();isNaN(a)||(this.pan.c=Number(a));this.update()};b.prototype.Dj=function(a){this.ta();isNaN(a)||(this.pan.c=Number(a)+this.pan.qj);this.update()};b.prototype.gk=function(a,d){isNaN(a)||
(this.xf(this.zh()+a),d&&(this.pan.d=a))};b.prototype.Sm=function(a,d){this.gk(a*this.wh(),d)};b.prototype.aj=function(){return this.i.c};b.prototype.Yn=function(){return this.u.i};b.prototype.yf=function(a){this.ta();isNaN(a)||(this.i.c=Number(a));this.update()};b.prototype.ik=function(a,d){this.yf(this.aj()+a);d&&(this.i.d=a)};b.prototype.Um=function(a,d){this.ik(a*this.wh(),d)};b.prototype.Ej=function(a){this.ta();isNaN(a)||(this.O.c=Number(a));this.update()};b.prototype.Xn=function(){return this.O.c};
b.prototype.cg=function(){return this.f.c};b.prototype.un=function(){return this.u.Hd};b.prototype.vf=function(a){this.ta();var d;switch(this.ra()){case 4:d=170;break;case 12:d=360;break;case 9:d=355;break;default:d=170}2==this.gb&&(d=9999999999);!isNaN(a)&&0<a&&a<d&&(d=this.f.c,this.f.c=Number(a),d!=this.f.c&&this.update())};b.prototype.fk=function(a,d){this.vf(this.cg()+a);d&&(this.f.d=a)};b.prototype.Gi=function(a,d){if(!isNaN(a)){var c;c=a/90*Math.cos(Math.min(this.f.c,90)*Math.PI/360);c=this.f.c*
Math.exp(c);this.vf(c);d&&(this.f.d=a)}};b.prototype.fp=function(a,d){this.ta();isNaN(a)||(this.pan.c=a);isNaN(d)||(this.i.c=d);this.update()};b.prototype.ci=function(a,d,c){this.ta();isNaN(a)||(this.pan.c=a);isNaN(d)||(this.i.c=d);isNaN(c)||this.vf(c);this.update()};b.prototype.Zo=function(){this.ci(this.pan.Qa,this.i.Qa,this.f.Qa)};b.prototype.bp=function(a){this.Jg(a);this.Kg(a);this.Ig(a)};b.prototype.Jg=function(a){this.B.yb=a};b.prototype.Ig=function(a){this.B.re=a};b.prototype.En=function(){return this.B.re};
b.prototype.Kg=function(a){this.B.jd=a};b.prototype.qp=function(a,d){void 0===d&&(d=!0);this.om=d;this.Hf==!a&&(this.Hf=!!a,this.Hf||(this.O.c=0),this.ja("gyrochanged",{}))};b.prototype.Zn=function(){return this.Hf};b.prototype.Pn=function(){return this.Rd?5:this.Hc?4:this.gl?1:this.dl?2:this.cl?3:0};b.prototype.sn=function(){return this.hj?5:this.$k?4:this.df?2:this.fd?3:this.gj?1:0};b.prototype.moveTo=function(a,d,c,b,l,e){this.ta();if("_blank"!==a&&""!==a){this.u.active=!0;this.u.Je=!1;this.u.Tj=
!1;var k=a.toString().split("/");1<k.length&&(a=Number(k[0]),b=Number(d),d=Number(k[1]),2<k.length&&(c=Number(k[2])));isNaN(a)?this.u.pan=this.pan.c:this.u.pan=Number(a);isNaN(d)?this.u.i=this.i.c:this.u.i=Number(d);!isNaN(c)&&0<c&&180>c?this.u.f=Number(c):this.u.f=this.f.c;this.u.speed=!isNaN(b)&&0<b?Number(b):1;isNaN(l)?this.u.O=this.O.c:this.u.O=Number(l);void 0!==e?!a||4!=e&&12!=e&&9!=e||(this.u.Cb=e):this.u.Cb=this.Ka}};b.prototype.Qh=function(a){this.ta();var d=0,c=0,b=70,l=4,e=0,k=1;a.hasOwnProperty("pan")&&
(d=Number(a.pan),this.u.pan=d);a.hasOwnProperty("tilt")&&(c=Number(a.tilt),this.u.i=c);a.hasOwnProperty("fov")&&(b=Number(a.fov),this.u.f=b);a.hasOwnProperty("projection")&&(l=Number(a.projection),this.u.Cb=l);a.hasOwnProperty("timingFunction")&&(e=Number(a.timingFunction));a.hasOwnProperty("speed")&&(k=Number(a.speed));0>=k?(this.ci(d,c,b),this.Lc(l)):(a=new p.hl,a.ab="__AutoMove",a.Bf=this.Jk(),a.Og=this.i.c,a.Gd=this.f.c,a.Ng=this.Ka,a.Oc=d,a.Yd=c,a.Cf=b,a.md=l,a.We=!1,a.he=!1,a.ie=!1,0==e&&(a.he=
!0),1==e&&(a.We=!0,a.he=!0),2==e&&(a.ie=!0),a.speed=k,this.u.ak=this.w,this.w=this.Ck(a),this.u.bk=(new Date).getTime(),this.u.Tj=!0,this.u.active=!0,this.u.Je=!1,this.u.pan=d,this.u.i=c,this.u.f=b,this.Jd=!1)};b.prototype.uo=function(a){this.moveTo(this.pan.Qa,this.i.Qa,this.f.Qa,a)};b.prototype.vo=function(a,d){var c={};c.pan=this.pan.Qa;c.tilt=this.i.Qa;c.fov=this.f.Qa;c.projection=this.Vh;c.timingFunction=d;c.speed=a;this.Qh(c)};b.prototype.Hm=function(a,d,c,b){var l=new p.Gh(this);l.type="point";
l.pan=d;l.i=c;l.id=a;l.b={};l.b.player=this;l.Xe();l.b.hotspot=l;l.b.__div=document.createElement("div");l.b.__div.appendChild(b);this.P.push(l);l.b.__div.style.position="absolute";l.b.__div.style.left="-1000px";l.b.__div.style.top="-1000px";this.Fa.insertBefore(l.b.__div,this.Fa.firstChild);this.Ea=!0};b.prototype.Tp=function(a,d,c){for(var b=0;b<this.P.length;b++){var l=this.P[b];l.id==a&&(l.pan=d,l.i=c,l.Xe())}this.Ea=!0};b.prototype.So=function(a){for(var d=-1,c,b=0;b<this.P.length;b++)c=this.P[b],
c.id==a&&(d=b);-1<d&&(c=this.P.splice(d,1).pop(),c.b&&c.b.__div&&this.Fa.removeChild(c.b.__div))};b.prototype.Sn=function(){for(var a=[],d=0;d<this.P.length;d++){var c=this.P[d];"point"==c.type&&a.push(String(c.id))}return a};b.prototype.wn=function(a){for(var d=0;d<this.P.length;d++){var c=this.P[d];if(c.id==a)return d={},d.id=a,d.pan=c.pan,d.tilt=c.i,c.b&&c.b.__div&&(d.div=c.b.__div),d}};b.prototype.rm=function(a,d){this.X.start.x=a;this.X.start.y=d;this.X.ca.x=a;this.X.ca.y=d;this.za.ca.x=a;this.za.ca.y=
d;this.xj++;this.pan.Cc=this.pan.c;this.i.Cc=this.i.c};b.prototype.pm=function(a,d){var c=this.Rb();this.pan.Cc+=a*c/this.o.height;this.i.Cc+=d*c/this.o.height;this.pan.c=this.pan.Cc;this.i.c=this.i.Cc};b.prototype.qm=function(a,d){this.X.c.x=a;this.X.c.y=d;this.X.ba.x=this.X.c.x-this.X.ca.x;this.X.ba.y=this.X.c.y-this.X.ca.y;this.B.wd&&(this.X.ca.x=this.X.c.x,this.X.ca.y=this.X.c.y,this.update())};b.prototype.ta=function(){this.l.active&&(this.l.active=!1,this.ja("autorotatechanged",{}),this.pan.d=
0,this.i.d=0,this.f.d=0);this.u.active&&(this.u.active=!1,this.pan.d=0,this.i.d=0,this.f.d=0);this.Le=this.u.Je=!1;this.l.Ph=!1;this.od=.02;this.Nf=0;this.l.If&&(this.l.enabled=this.l.Ne);this.ff=(new Date).getTime()};b.prototype.Cn=function(){return this.ff};b.prototype.Kk=function(a,d){a||(a=this.sa.x,d=this.sa.y);var c=this.o.height/(2*Math.tan(this.f.c*Math.PI/360)),b=a-this.o.width/2,l=d-this.o.height/2,e={};e.pan=180*Math.atan(b/c)/Math.PI;e.tilt=180*Math.atan(-l/Math.sqrt(b*b+c*c))/Math.PI;
return e};b.prototype.Un=function(a,d){var c,b;a||(a=this.sa.x,d=this.sa.y);if(2===this.gb)b=this.f.c/this.o.height,c=-(a-this.o.width/2)*b+this.pan.c,b=-(d-this.o.height/2)*b+this.i.c;else{b=new p.va(0,0,1);c=this.Kk(a,d);b.Dd(-c.tilt);b.ze(c.pan);b.Dd(-this.i.c);b.ze(-this.pan.c);b.Dd(-this.Za.pitch);b.Ae(this.Za.O);for(c=b.Km()-180;-180>c;)c+=360;b=b.Lm()}var l={};l.pan=c;l.tilt=b;return l};b.prototype.xc=function(a){return a==this.control||a&&void 0!==a.ggPermeableMap&&1==a.ggPermeableMap?!0:
a&&void 0!==a.ggPermeable&&0==a.ggPermeable?!1:a&&a.ggType&&("container"==a.ggType||"cloner"==a.ggType||"timer"==a.ggType)?!0:!1};b.prototype.Ii=function(a,d){var c=this.pd(),b,l,e;for(b=0;b<this.J.length+this.Xa.length;b++){var k;k=b<this.J.length?this.J[b]:this.Xa[b-this.J.length];if(k.ob)return k}for(b=0;b<this.J.length+this.Xa.length;b++)if(k=b<this.J.length?this.J[b]:this.Xa[b-this.J.length],!k.kd){var h=[],m=new p.va,x;e=l=void 0;0<k.f&&(l=Math.tan(k.f/2*Math.PI/180),e=0<k.Fc?l*k.cd/k.Fc:l,
k.sd&&1!=k.sd&&(e*=k.sd));for(x=0;4>x;x++){switch(x){case 0:m.Ya(-l,-e,0);break;case 1:m.Ya(l,-e,0);break;case 2:m.Ya(l,e,0);break;case 3:m.Ya(-l,e,0)}m.ua(k.ua*Math.PI/180);m.Da(-k.Da*Math.PI/180);m.ib(k.ib*Math.PI/180);m.z=m.z-1;m.ua(-k.i*Math.PI/180);m.Da(k.pan*Math.PI/180);m.Da(-this.pan.c*Math.PI/180);m.ua(this.i.c*Math.PI/180);m.ib(this.O.c*Math.PI/180);h.push(m.clone())}h=this.Ki(h);if(0<h.length){for(x=0;x<h.length;x++)m=h[x],.1>m.z?(e=-c/m.z,l=this.o.width/2+m.x*e,e=this.o.height/2+m.y*e):
e=l=0,m.mc=l,m.Jb=e;if(this.Uk(h,a,d))return k}}return null};b.prototype.Eh=function(){return document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement&&null!=document.msFullscreenElement||document.fullScreen};b.prototype.to=function(a){this.im(a);if(this.$c)this.$c.onclick();this.Qb=null;if(!this.B.yb){a=a?a:window.event;if(a.which||0==a.which||1==a.which){var d=(new Date).getTime();if(this.Ad){this.Qb=this.Ad;this.R.Va=!0;this.R.startTime=d;a.stopPropagation();return}if(this.xc(a.target)){var c;
(c=this.Ii(this.sa.x,this.sa.y))&&c.oe&&(this.Qb=c);this.rm(a.pageX,a.pageY);this.R.Va=!0;this.R.startTime=d;a.preventDefault();this.ta()}}this.X.ba.x=0;this.X.ba.y=0}};b.prototype.Gf=function(a,d){var c=this.A.Oj;c.enabled&&(this.Ca!=this.nb&&0<=a&&0<=d&&""!=this.Ca.title?(this.ya.innerHTML=this.Ca.title,this.ya.style.color=this.ea(c.Pj,c.Nj),c.background?this.ya.style.backgroundColor=this.ea(c.bc,c.ac):this.ya.style.backgroundColor="transparent",this.ya.style.border="solid "+this.ea(c.ec,c.dc)+
" "+c.Di+"px",this.ya.style.borderRadius=c.Ci+"px",this.ya.style.textAlign="center",0<c.width?(this.ya.style.left=a-c.width/2+this.margin.left+"px",this.ya.style.width=c.width+"px"):(this.ya.style.width="auto",this.ya.style.left=a-this.ya.offsetWidth/2+this.margin.left+"px"),this.ya.style.height=0<c.height?c.height+"px":"auto",this.ya.style.top=d+25+ +this.margin.top+"px",this.ya.style.visibility="inherit",this.ya.style.overflow="hidden"):(this.ya.style.visibility="hidden",this.ya.innerHTML=""))};
b.prototype.im=function(a){var d=this.ne();this.Eh()?(this.sa.x=a.pageX-this.margin.left,this.sa.y=a.pageY-this.margin.top):(this.sa.x=a.pageX-d.x,this.sa.y=a.pageY-d.y);return d};b.prototype.uf=function(a){a&&null!==a&&"object"==typeof a?this.Ca=a:this.Ca=this.nb;this.Ca.Xe&&this.Ca.Xe();this.hotspot=this.Ca};b.prototype.so=function(a){a=a?a:window.event;var d=this.im(a);if(!this.B.yb&&!this.Ad){this.l.active&&(this.l.Lh=(new Date).getTime());this.R.Va&&(a.preventDefault(),(a.which||0==a.which||
1==a.which)&&this.qm(a.pageX,a.pageY),this.ta());var c=!1;if(this.Ca==this.nb||"poly"==this.Ca.type){var b=this.nb;0<this.P.length&&this.xc(a.target)&&(b=this.Ji(this.sa.x,this.sa.y));this.bi(b);this.Gf(a.pageX-d.x,a.pageY-d.y);0!=b&&b!=this.nb&&(c=!0)}d=null;!c&&this.xc(a.target)&&(d=this.Ii(this.sa.x,this.sa.y));this.l.ph&&(this.l.ph=!1);this.Fa.style.cursor=this.Ca!=this.nb&&this.Ca.af&&c||d&&d.kg?"pointer":"default"}};b.prototype.bi=function(a){!1===a&&(a=this.nb);this.Ca!=a&&(this.Ca!=this.nb&&
(0<this.A.mode&&(this.Ca.lb=0),this.ia&&this.ia.hotspotProxyOut&&this.ia.hotspotProxyOut(this.Ca.id)),a!=this.nb?(this.uf(a),this.ia&&this.ia.hotspotProxyOver&&this.ia.hotspotProxyOver(this.Ca.id),0<this.A.mode&&(this.A.lb=1,this.Ca.lb=1)):(this.uf(this.nb),0<this.A.mode&&(this.A.lb=0)),this.ga&&this.ga.changeCurrentHotspot(this.Ca.id))};b.prototype.ro=function(a){a=a?a:window.event;this.Kh=-1;if(!this.B.yb&&(this.Qb&&(this.Qb.oe(),this.Qb.ob?this.Ad=this.Qb:this.Ad=null),this.R.Va)){this.ta();a.preventDefault();
this.R.Va=!1;a=(new Date).getTime();var d;d=Math.abs(this.X.start.x-this.X.ca.x)+Math.abs(this.X.start.y-this.X.ca.y);if(400>a-this.R.startTime&&0<=d&&20>d){var c=this.Ji(this.sa.x,this.sa.y);c&&this.em(c);d=Math.abs(this.X.yd.x-this.X.ca.x)+Math.abs(this.X.yd.y-this.X.ca.y);700>a-this.pg&&0<=d&&20>d?(c?this.fm(c):this.B.Qi&&this.ni(),this.pg=0):this.pg=a;this.X.yd.x=this.X.ca.x;this.X.yd.y=this.X.ca.y}}};b.prototype.sl=function(a){if(!this.B.jd&&(a=a?a:window.event,this.xc(a.target))){var d=a.detail?
-1*a.detail:a.wheelDelta/40;this.B.Zk&&(d=-d);a.axis&&(-1==this.Kh?this.Kh=a.axis:this.Kh!=a.axis&&(d=0));var c=0<d?1:-1;a.wheelDeltaX&&a.wheelDeltaY&&Math.abs(a.wheelDeltaX)>Math.abs(a.wheelDeltaY)&&(d=0);0!=d&&(this.Gi(c*this.B.Xl,!0),this.update());a.preventDefault();this.ta()}};b.prototype.Pp=function(a){a||(a=window.event);var d=a.touches,c=this.ne();this.sa.x=d[0].pageX-c.x;this.sa.y=d[0].pageY-c.y;this.Zd=this.Qb=null;this.Yf&&(this.Yf=!1,this.mn());if(!this.B.yb){var b=(new Date).getTime();
if(this.Ad)this.Qb=this.Ad,this.R.Va=!0,this.R.startTime=b,a.preventDefault();else{if(!this.R.Va&&d[0]){this.R.startTime=b;this.R.start.x=d[0].pageX;this.R.start.y=d[0].pageY;this.R.ca.x=d[0].pageX;this.R.ca.y=d[0].pageY;this.kb=d[0].target;if(this.xc(this.kb)){(b=this.Ii(this.sa.x,this.sa.y))&&b.oe&&(this.Qb=b);if(b=this.Ji(this.sa.x,this.sa.y))this.M(b),this.Zd=b,this.bi(b),b=this.eg(a),this.Gf(b.x-c.x,b.y-c.y);this.rm(d[0].pageX,d[0].pageY);this.R.vk=d[0].identifier;this.R.Va=!0;a.preventDefault();
this.ta()}if(this.kb){c=this.kb;for(b=!1;c&&c!=this.control;){if(c.onmouseover)c.onmouseover();c.onmousedown&&!b&&(c.onmousedown(),b=!0);c=c.parentNode}b&&a.preventDefault()}}1<d.length&&(this.R.Va=!1);!this.cj&&2==d.length&&d[0]&&d[1]&&this.xc(this.kb)&&(a=d[0].pageX-d[1].pageX,d=d[0].pageY-d[1].pageY,this.f.Yl=Math.sqrt(a*a+d*d),this.f.lf=this.f.c);this.X.ba.x=0;this.X.ba.y=0}}};b.prototype.mn=function(){this.Xg&&this.s.b&&(this.s.gd||this.s.b.play(),this.s.b.muted=!1);if(this.Hc&&this.Ba&&this.Ba.createOscillator){var a=
this.Ba.createOscillator(),b=this.Ba.createGain();a.frequency.value=30;a.type="sine";a.connect(b);b.connect(this.Ba.destination);b.gain.value=.01;a.start(0);setTimeout(function(){a.stop()},1E4)}for(b=0;b<this.N.length;b++){var c=this.N[b];(!this.ic(c.id)||c.ha)&&0<=c.loop&&c.autoplay&&(c.ha&&c.Re(),this.xe(c.id,c.loop))}for(b=0;b<this.J.length;b++)c=this.J[b],!this.ic(c.id)&&c.autoplay&&this.Xg&&this.xe(c.id,c.loop),this.ic(c.id)&&c.autoplay&&this.Xg&&(c.gh(),c.b.muted=!1)};b.prototype.Op=function(a){a||
(a=window.event);var b=a.touches,c=this.ne();this.sa.x=b[0].pageX-c.x;this.sa.y=b[0].pageY-c.y;if(!this.B.yb){b[0]&&(this.R.ca.x=b[0].pageX,this.R.ca.y=b[0].pageY);if(this.kb){for(var f=this.kb,e=!1;f&&f!=this.control&&!e;)"scrollarea"==f.ggType&&(e=!0),"map"==f.ggType&&(e=!0),"text"==f.ggType&&(e=!0),f=f.parentNode;e||a.preventDefault()}if(this.R.Va){a.preventDefault();for(f=0;f<b.length;f++)if(b[f].identifier==this.R.vk){this.qm(b[f].pageX,b[f].pageY);break}this.Zd&&(f=this.eg(a),this.Gf(f.x-c.x,
f.y-c.y));this.ta()}2==b.length&&b[0]&&b[1]&&(this.R.Va=!1,!this.cj&&this.xc(this.kb)&&(this.B.jd||(c=b[0].pageX-b[1].pageX,b=b[0].pageY-b[1].pageY,this.f.pk=Math.sqrt(c*c+b*b),this.za.f.active=!0,this.za.f.gc=this.f.lf*Math.sqrt(this.f.Yl/this.f.pk),4==this.ra()&&this.za.f.gc>this.f.max&&(this.za.f.gc=this.f.max),this.za.f.gc<this.f.min&&(this.za.f.gc=this.f.min)),this.ta(),a.preventDefault()))}};b.prototype.Np=function(a){var b,c=this.ne(),f=!1;if(!this.B.yb){this.R.Va&&(a.preventDefault(),this.ta());
var e=(new Date).getTime(),g=!1;b=Math.abs(this.R.start.x-this.R.ca.x)+Math.abs(this.R.start.y-this.R.ca.y);if(0<=b&&20>b){f=!0;if(this.xc(this.kb)&&(a.preventDefault(),this.Qb))if(this.Qb.oe(),this.Qb.ob)this.Ad=this.Qb;else{this.Ad=null;return}if(this.kb){for(b=this.kb;b&&b!=this.control;)b.onclick&&(b.onclick(),g=!0,f=!1),b=b.parentNode;g&&a.preventDefault()}b=Math.abs(this.R.yd.x-this.R.ca.x)+Math.abs(this.R.yd.y-this.R.ca.y);if(700>e-this.pg&&0<=b&&20>b){if(this.xc(this.kb))if(a.preventDefault(),
this.Zd)this.fm(this.Zd);else if(this.B.Qi){var k=this;setTimeout(function(){k.ni()},1)}if(this.kb){for(b=this.kb;b&&b!=this.control;)b.ondblclick&&(b.ondblclick(),g=!0,f=!1),b=b.parentNode;g&&a.preventDefault()}this.pg=0}else this.pg=e;this.R.yd.x=this.R.ca.x;this.R.yd.y=this.R.ca.y}if(this.kb)for(b=this.kb;b&&b!=this.control;){if(b.onmouseout)b.onmouseout();if(b.onmouseup)b.onmouseup();b=b.parentNode}a=this.eg(a);this.Gf(a.x-c.x,a.y-c.y);this.Zd&&f&&this.em(this.Zd);this.kb=null;this.R.Va=!1;this.bi(this.nb);
this.Zd=null}};b.prototype.Mp=function(a){var b=this.ne();this.B.yb||(this.R.Va=!1);this.Zd=null;this.bi(this.nb);a=this.eg(a);this.Gf(a.x-b.x,a.y-b.y)};b.prototype.fl=function(){return null!=this.kb||this.R.Va};b.prototype.tl=function(a){!this.ue&&window.MSGesture&&(this.M("setup gesture"),this.ue=new MSGesture,this.ue.target=this.control);this.ue&&this.ue.addPointer(a.pointerId)};b.prototype.Ek=function(a){this.cj=!0;this.Rh=1;this.B.yb||this.B.jd||(a.touches?(this.kb=a.touches.target,this.xc(a.target)&&
(a.preventDefault(),this.f.lf=this.f.c,this.ta())):(a.preventDefault(),this.f.lf=this.f.c,this.ta()))};b.prototype.pn=function(a){this.B.yb||this.B.jd||!this.xc(a.target)||(a.preventDefault(),this.za.f.active=!0,this.za.f.gc=this.f.lf/Math.sqrt(a.scale),4==this.ra()&&this.za.f.gc>this.f.max&&(this.za.f.gc=this.f.max),this.update(),this.ta())};b.prototype.wo=function(a){this.B.yb||this.B.jd||(a.preventDefault(),1!=a.scale&&(this.za.f.active=!0,this.Rh*=a.scale,this.za.f.gc=this.f.lf/Math.sqrt(this.Rh),
4==this.ra()&&this.za.f.gc>this.f.max&&(this.za.f.gc=this.f.max),this.update(),this.ta()))};b.prototype.Dk=function(a){this.B.yb||this.B.jd||(this.za.f.active=!1,a.preventDefault(),this.ta(),this.ue&&this.ue.reset&&this.ue.reset())};b.prototype.mo=function(a){this.B.re||(this.isFullscreen&&a.preventDefault(),this.Jh=a.keyCode,this.ta())};b.prototype.no=function(a){this.Jh&&(this.Jh=0,a.preventDefault())};b.prototype.Co=function(){this.Jh=0};b.prototype.Uh=function(){this.isFullscreen&&(this.Eh()||
this.exitFullscreen(),this.Eh()&&(this.T.style.left="0px",this.T.style.top="0px"))};b.prototype.Do=function(a,b,c,f){f?(this.ig.alpha=a,this.ig.beta=b,this.ig.gamma=c,this.ig.gamma+=90):(this.ud.alpha=a,this.ud.beta=b,this.ud.gamma=c,this.ud.gamma+=90);this.ud.orientation=window.orientation?1*parseInt(""+window.orientation,10):0;c=new p.xl;a=this.ud;c.ze(-a.alpha);c.Ae(-a.beta);c.Dd(-a.gamma);c.Ae(90-a.orientation);1>c.Bb?-1<c.Bb?(b=180/Math.PI*Math.asin(-c.Bb),a=180/Math.PI*Math.atan2(c.Vb,c.Ub),
c=180/Math.PI*Math.atan2(c.Tb,c.Sb)):(b=0,a=90,c=-180/Math.PI*Math.atan2(-c.Gb,c.Hb)):(b=0,a=-90,c=180/Math.PI*Math.atan2(-c.Gb,c.Hb));this.Hf&&(this.fl()?this.ud.Al=this.zh()+c:(f=this.u.active,this.xf(-c+this.ud.Al),this.yf(a),this.om?this.Ej(b):this.Ej(0),this.u.active=f))};b.prototype.em=function(a){this.ia&&this.ia.hotspotProxyClick&&this.ia.hotspotProxyClick(a.id);""!=a.url&&(this.rj(a.url,a.target),this.Gf(-1,-1))};b.prototype.fm=function(a){this.ia&&this.ia.hotspotProxyDoubleClick&&this.ia.hotspotProxyDoubleClick(a.id)};
b.prototype.wh=function(){return Math.min(1,2*Math.tan(Math.PI*Math.min(this.f.c,90)/360))};b.prototype.Bl=function(){var a=this;setTimeout(function(){a.Bl()},100);9!=a.Yh||a.Dh||window.requestAnimationFrame(function(){a.Fg();a.Jc("restart recover timer")});10<a.Yh&&1<a.xj&&(a.Jc("recover timer - disabling requestAnimationFrame"),a.Dh=!0,a.Fg());a.Yh++};b.prototype.fi=function(a){var b={jq:{value:0,name:"pan"},kq:{value:1,name:"tilt"},hq:{value:2,name:"fov"}},c=0,f=0,e=0,g;for(g in b){var k=b[g],
h;for(h=Math.floor(a);!this.Ze(h,k.value)&&0<h;)h--;var m=this.Ze(h,k.value),x=this.Jn(m);if(x){h=new p.qc(m.time,m.value);var v=new p.qc(x.time,x.value),q=(a-m.time)/(x.time-m.time);if(0!=m.type||0!=x.type&&3!=x.type)if(3==m.type)h=m.value;else{var q=new p.qc,u=new p.qc,r=x.time-m.time;0==m.type?u.Ya(m.time+.3*r,m.value):u.Ya(m.ee,m.fe);0==x.type||3==x.type?q.Ya(x.time-.3*r,x.value):q.Ya(x.de,x.Tc);m=new p.qc;m.Bi(h,v,u,q,a);h=m.y}else m=new p.qc,m.vd(h,v,q),h=m.y}else h=m.value;switch(k.value){case 0:k=
this.pan.c;if(this.Jd){if(2!=this.gb){for(;360<h;)h-=360;for(;-360>h;)h+=360}c=h-k;2!=this.gb&&(180<c&&(c-=360),-180>c&&(c+=360));this.pan.c=this.pan.c+c*this.od}else this.pan.c=h;this.l.ug=this.pan.c;break;case 1:k=this.i.c;this.Jd?(f=h-k,this.i.c=this.i.c+f*this.od):this.i.c=h;this.l.vg=this.i.c;break;case 2:k=this.f.c,this.Jd?(e=h-k,this.f.c=this.f.c+e*this.od):this.f.c=h,this.l.tg=this.f.c}}b=this.ra();for(g=Math.floor(a);!this.Ze(g,3)&&0<g;)g--;g=this.Ze(g,3);k=a-g.time;this.Jd&&-1!=this.Of&&
this.ih+this.yi>a?(b=this.dg(this.Of),this.f.c>b?this.ih=a:(k=(a-this.ih)/this.yi,k=Math.min(1,k),this.Lc(this.Ka,this.Of,1-k))):(0==g.ub||k>g.ub-.3?this.Lc(g.value):(k/=g.ub,this.Lc(b,g.value,1-k)),this.l.ml=g.value);this.Jd&&(c=Math.sqrt(c*c+f*f+e*e),.3>c&&(this.Jd=!1,this.od=.02,this.Nf=0),0<this.Nf&&c>this.Nf&&(this.od+=.01,this.od=Math.min(this.od,1)),this.Nf=c);g=Math.floor(a);if(g!=this.ck)for(this.ck=g,a=this.qn(g),c=0;c<a.length;c++)f=a[c],e=f.hh,this.ld.hasOwnProperty(e)&&(0==this.ld[e]?
this.ei(e,f.Uj):1==this.ld[e]?this.ei(e,f.value):2==this.ld[e]&&this.ei(e,"true"==f.Uj));this.update()};b.prototype.Jo=function(a){var b,c=this.u.speed;this.u.ij&&(c=c*(a.getTime()-this.u.ij)/60,5<c&&(c=5),.2>c&&(c=.2));this.u.ij=a.getTime();this.l.vh&&(this.na.ready()||4==this.Ka)&&this.yh()&&(this.l.vh=!1,this.l.active=!0,this.wb.Ed=!0,this.wb.Vi=!1);if(this.u.active||0!=this.u.Cb&&this.na.ready()){if(this.u.Tj&&"__AutoMove"==this.w.ab)if(b=a.getTime()-this.u.bk,c=b/100,c>=this.w.length){if(this.fi(this.w.length),
this.xa.splice(this.xa.indexOf(this.w),1),this.u.active=!1,this.w=this.u.ak,this.u.Cb=0,this.ci(this.u.pan,this.u.i,this.u.f),this.pan.Cc=this.u.pan,this.i.Cc=this.u.i,this.u.Cg&&(this.u.Cg=!1,this.l.Ph=!0,this.l.active=!0,this.ja("autorotatechanged",{})),this.onMoveComplete)this.onMoveComplete()}else this.fi(c);else{this.pan.d=this.u.pan-this.pan.c;if(360==this.pan.max-this.pan.min){for(;-180>this.pan.d;)this.pan.d+=360;for(;180<this.pan.d;)this.pan.d-=360}this.i.d=this.u.i-this.i.c;this.O.d=this.u.O-
this.O.c;this.f.d=this.u.f-this.f.c;b=c*this.wh();var f=Math.sqrt(this.pan.d*this.pan.d+this.i.d*this.i.d+this.O.d*this.O.d+this.f.d*this.f.d),e=this.pan.c-this.u.ug,g=this.i.c-this.u.vg,k=this.O.c-this.u.nl,h=this.f.c-this.u.tg;100*Math.sqrt(e*e+g*g+k*k+h*h)<b&&0==this.u.Cb&&(this.u.Je=!0);this.u.ug=this.pan.c;this.u.vg=this.i.c;this.u.nl=this.O.c;this.u.tg=this.f.c;if(100*f<b||this.u.Je){if(this.pan.d=0,this.i.d=0,this.O.d=0,this.f.d=0,this.u.active&&(this.u.active=!1,this.pan.c=this.u.pan,this.i.c=
this.u.i,this.O.c=this.u.O,this.f.c=this.u.f,this.onMoveComplete))this.onMoveComplete()}else f=f>5*b?b/f:.2,this.pan.d*=f,this.i.d*=f,this.f.d*=f;this.pan.c+=this.pan.d;this.i.c+=this.i.d;this.O.c+=this.O.d;this.f.c+=this.f.d;0!=this.u.Cb&&(this.u.Cb!=this.Ka?(c=this.dg(this.u.Cb),this.cg()>c?(this.f.c+=-Math.max((2.5-1.7*Math.min(Math.sqrt(this.pan.d*this.pan.d+this.i.d*this.i.d+this.O.d*this.O.d)/b,1))*b,this.f.d)-this.f.d,this.u.f=this.f.c):(this.lc=this.Ka,this.Ka=this.u.Cb,this.M("New projection from Target:"+
this.Ka),this.Eg=this.u.Hg=0,this.na.Ch())):1>this.u.Hg?(this.u.Hg=Math.min(1,this.u.Hg+.05*c),this.Eg=this.u.Hg):(this.lc=0,this.u.Cb=0,this.na.Ch()))}this.ff=a.getTime();this.update()}else if(this.l.active){b=a.getTime()-this.l.startTime;this.l.Lh<this.l.startTime&&(this.l.Lh=this.l.startTime);if((this.l.If||this.wb.Ed)&&0<this.xa.length){c=b/100;f=!1;if(this.Ib!=this.w.ab||""!=this.w.Me&&this.l.Kd!=this.w.Me){for(b=0;b<this.xa.length;b++)if(""==this.Ib&&this.xa[b].Me==this.l.Kd||""!=this.Ib&&this.xa[b].ab==
this.Ib&&this.xa[b].Me==this.l.Kd){f=!0;this.w=this.xa[b];this.Ib=this.w.ab;break}!f&&0<this.xa.length&&this.xa[0].Me==this.l.Kd&&(f=!0,this.w=this.xa[0],this.Ib=this.w.ab)}else f=!0;if(f)if(b=(e=this.s.b&&this.s.gd)&&this.l.Mj&&!this.wb.Ed,this.Le){f=c;if(b)for(this.s.b.currentTime<this.dk&&this.Ai&&(this.zi++,this.Ai=!1),f=10*(this.zi*this.s.b.duration+this.s.b.currentTime),this.dk=this.s.b.currentTime,.05>this.s.b.duration-this.s.b.currentTime&&(this.Ai=!0);f>=10*this.Ke;)f-=10*this.Ke;if(!e&&
c>=this.w.length||e&&!b&&c>=this.w.length||e&&b&&(this.w.ab!=this.w.ul||this.w.Sh!=this.bb)&&c>=this.w.length){this.fi(this.w.length);this.l.xd=0;this.Le=!1;if(this.wb.Ed){this.wb.Ed=!1;this.wb.Vi=!0;this.l.active=this.C.ce;this.xa.splice(this.xa.indexOf(this.w),1);0<this.xa.length&&(this.w=this.xa[0]);this.Ib="";this.Jg(this.C.Oh);this.Kg(this.C.vi);this.Ig(this.C.Hh);this.C.ce=!1;this.ff=a.getTime();return}this.Ib=this.w.ul;if(this.Ib==this.w.ab&&this.bb==this.w.Sh){if(1<this.Ma.length&&0<this.l.Th){if(this.l.pj){b=
1E3;do c=this.Ma[Math.floor(Math.random()*this.Ma.length)];while(b--&&c==this.bb)}else c=this.Ik();this.ve("{"+c+"}");this.l.startTime=a.getTime();this.Le=!1;this.l.active=!0;this.C.ce=!0}}else this.ef&&this.w.Sh!=this.bb&&(this.ve("{"+this.w.Sh+"}",this.w.zo),this.C.enabled?(this.l.active=!1,this.C.ce=!0):this.l.active=!0),this.l.startTime=a.getTime()}else this.fi(f),this.l.xd=f}else if(c=this.w.W[0],f=this.w.W[1],e=this.w.W[2],g=this.w.W[3],3!=g.sb&&(g=0),this.l.Ph||this.u.Je||this.wb.Ed||b){if(this.Le=
!0,0<this.l.xd?this.l.startTime=a.getTime()-100*this.l.xd:this.l.startTime=a.getTime(),this.Jd=b){for(this.Ke=this.zi=0;this.Ke<this.w.length/10;)this.Ke+=this.s.b.duration;f=10*this.s.b.currentTime;for(b=Math.floor(f);!this.Ze(b,3)&&0<b;)b--;b=this.Ze(b,3);b.value==this.Ka?this.Of=-1:(this.Of=b.value,this.ih=f,this.yi=Math.max(5,b.time+b.ub-f))}}else{b={};if(0<this.l.xd)b.pan=this.l.ug,b.tilt=this.l.vg,b.fov=this.l.tg,b.projection=this.l.ml;else{for(b.pan=c.value;360<b.pan;)b.pan-=360;for(;-360>
b.pan;)b.pan+=360;b.tilt=f.value;b.fov=e.value;b.projection=g?g.value:4}b.timingFunction=3;b.speed=1;this.u.Cg=!0;this.Qh(b);this.l.active=!0}}else if(0<this.l.Th&&this.ef&&b>=1E3*this.l.Th){if(1<this.Ma.length){if(this.l.pj){b=1E3;do c=this.Ma[Math.floor(Math.random()*this.Ma.length)];while(b--&&c==this.bb)}else b=this.Ma.indexOf(this.bb),b++,b>=this.Ma.length&&(b=0),c=this.Ma[b];this.l.startTime=a.getTime();this.l.hd=a.getTime();this.l.timeout=0;this.ve("{"+c+"}");this.l.active=!0;this.C.ce=!0}}else b=
a.getTime(),f=c=1E3/60,0!=this.l.hd&&(f=b-this.l.hd),this.i.d=this.l.mi*(0-this.i.c)/100,this.f.d=this.l.mi*(this.f.Qa-this.f.c)/100,this.pan.d=.95*this.pan.d+-this.l.speed*this.wh()*.05,c=f/c,this.pan.c+=this.pan.d*c,this.i.c+=this.i.d*c,this.f.c+=this.f.d*c,this.l.hd=b,this.update();3E3<a.getTime()-this.l.Lh&&!this.l.ph&&(this.Fa.style.cursor="none",this.l.ph=!0)}else!this.wb.Vi&&1E3<a.getTime()-this.ff&&(this.xa.splice(this.xa.indexOf(this.w),1),this.w=this.bg(!1),this.Ib=this.w.ab,this.l.active=
!1,this.l.vh=!0),this.l.enabled&&!this.R.Va&&a.getTime()-this.ff>1E3*this.l.timeout&&(this.l.Qg&&this.yh()||!this.l.Qg)&&(this.l.active=!0,this.l.startTime=a.getTime(),this.l.hd=0,this.ja("autorotatechanged",{}),this.pan.d=0,this.i.d=0,this.f.d=0),!this.za.enabled||this.R.Va||0==this.pan.d&&0==this.i.d&&0==this.f.d||(this.pan.d*=.9,this.i.d*=.9,this.f.d*=.9,this.pan.c+=this.pan.d,this.i.c+=this.i.d,this.Gi(this.f.d),1E-4>this.pan.d*this.pan.d+this.i.d*this.i.d+this.f.d*this.f.d&&(this.pan.d=0,this.i.d=
0,this.f.d=0),this.update())};b.prototype.Lo=function(a){var b=this.C;if(b.Id){var c=a.getTime()-b.vm,c=c/(1E3*b.um);1<=c?(b.Id=!1,this.uk(),b.Jj=a.getTime(),this.$l(),b.Ge=!0,0==b.Zb||b.Mf||(4==b.Zb?(this.w=this.bg(!0,b.Ce,b.De,b.Hd),this.Ib=this.w.ab,this.l.active=!0,this.wb.Ed=!0):this.moveTo(b.Ce,b.De,b.Hd,b.ae,0,b.md))):b.zl(c)}else b.Ge&&(c=a.getTime()-b.Jj,c/=1E3*b.Qf,1<=c?(b.Ge=!1,this.ff=a.getTime(),this.update(),0!=b.Zb&&b.Mf&&(4==b.Zb?(this.w=this.bg(!0,b.Ce,b.De,b.Hd),this.Ib=this.w.ab,
this.l.active=!0,this.wb.Ed=!0):this.moveTo(b.Ce,b.De,b.Hd,b.ae,0,b.md)),4!=b.Zb&&(this.Jg(b.Oh),this.Kg(b.vi),this.Ig(b.Hh),this.l.active=b.ce,b.ce=!1),this.l.hd=0,this.fa&&this.Li(),this.kh=!1):b.zl(c));b=this.Eo;b.Nm&&(b.rh?a.getTime()-b.Si>=1E3*b.en&&(b.rh=!1):(b.current+=b.Uc,0>b.current&&(b.current=0,b.Uc=-b.Uc,b.rh=!0,b.Si=a.getTime()),1<b.current&&(b.current=1,b.Uc=-b.Uc,b.rh=!0,b.Si=a.getTime())))};b.prototype.Oo=function(){var a,b=this.A;if(0<b.jb.length){for(a=0;a<b.jb.length;a++)b.Mc[a]!=
b.Lb[a]&&(b.Mc[a]>b.Lb[a]?(b.Lb[a]+=.05,b.Mc[a]<b.Lb[a]&&(b.Lb[a]=b.Mc[a])):(b.Lb[a]-=.05,b.Mc[a]>b.Lb[a]&&(b.Lb[a]=b.Mc[a],-1!=b.gi.indexOf(b.jb[a])&&(b.gi.splice(b.gi.indexOf(b.jb[a]),1),b.jb.splice(a,1),b.Mc.splice(a,1),b.Lb.splice(a,1)))));this.update()}if(2==b.mode)for(a=0;a<this.P.length;a++){var c=this.P[a];"poly"==c.type&&c.lb!=c.pa&&(c.lb>c.pa?(c.pa+=b.Uc,c.lb<c.pa&&(c.pa=c.lb)):(c.pa-=b.Uc,c.lb>c.pa&&(c.pa=c.lb)),this.update())}3==b.mode&&b.lb!=b.pa&&(b.lb>b.pa?(b.pa+=b.Uc,b.lb<b.pa&&(b.pa=
b.lb)):(b.pa-=b.Uc,b.lb>b.pa&&(b.pa=b.lb)),this.update())};b.prototype.No=function(){var a=this.za;this.R.Va&&(this.B.wd?(a.ba.x=.4*(this.X.ca.x-a.ca.x),a.ba.y=.4*(this.X.ca.y-a.ca.y),a.ca.x+=a.ba.x,a.ca.y+=a.ba.y):(a.ba.x=.1*-this.X.ba.x*this.B.sensitivity/8,a.ba.y=.1*-this.X.ba.y*this.B.sensitivity/8),this.pm(a.ba.x,a.ba.y),this.update());a.f.active&&(this.fk(.4*(a.f.gc-this.f.c)),.001>Math.abs(a.f.gc-this.f.c)/this.f.c&&(a.f.active=!1),this.update());if(a.enabled&&(0!=a.ba.x||0!=a.ba.y)&&!this.R.Va){var b=
.9*(1-a.Bj);a.ba.x=b*a.ba.x;a.ba.y=b*a.ba.y;.01>a.ba.x*a.ba.x+a.ba.y*a.ba.y?(a.ba.x=0,a.ba.y=0):(this.pm(a.ba.x,a.ba.y),this.update())}};b.prototype.Ko=function(){if(this.B.Ol&&this.B.wd){var a=new e;a.pan=this.pan.c;a.i=this.i.c;a.f=this.f.c;this.Te(a);this.Te(a);this.Te(a);var b=a.pan-this.pan.c,c=a.i-this.i.c,a=a.f-this.f.c;if(0!=b||0!=c||0!=a){var f;f=.2+.9*Math.min((Math.abs(b)+Math.abs(c)+Math.abs(a))/Math.abs(Math.min(this.f.c,90))*.3,1);this.pan.c+=b*f;this.i.c+=c*f;this.f.c+=a*f;this.za.Bj=
.3;this.update()}else this.za.Bj=0}else this.lh();if(2!=this.gb){for(;360<this.pan.c;)this.pan.c-=360;for(;-360>this.pan.c;)this.pan.c+=360}};b.prototype.Mo=function(){if(!this.yh()&&this.bf&&5<this.h.Ll){var a,b=0,c=this.Ob.length;if(this.Wg)c=50,this.Ti<c&&this.Ti++,b=this.Ti;else for(a=0;a<c;a++)(this.Ob[a].complete&&this.Ob[a].src!=this.sk||""==this.Ob[a].src)&&b++;b==c?(this.Wh=1,this.isLoaded=!0,this.ka&&this.ka.ggLoaded&&this.ka.ggLoaded(),this.ja("imagesready",{}),this.l.Qg&&this.l.enabled&&
!this.u.active&&!this.C.Id&&(this.l.active=!0,this.l.startTime=(new Date).getTime(),this.l.hd=0)):this.Wh=b/(1*c)}};b.prototype.Fg=function(){var a=this;a.ai||(a.Dh?setTimeout(function(){a.ai=!1;a.Fg()},1E3/60):window.requestAnimationFrame(function(){a.ai=!1;a.Fg()}));a.ai=!0;this.xj=this.Yh=0;var b=new Date;this.xh++;120<=this.xh&&(this.M("F/s: "+Math.round(1E3*this.xh/(b.getTime()-this.il))),this.il=b.getTime(),this.xh=0);this.ja("timer",{});this.Y&&this.na.dn();this.Db&&""!==this.le&&!this.ga&&
document.hasOwnProperty(this.le)&&document[this.le].setPan&&0==this.ln--&&(this.ga=document[this.le],this.Qc=this.Y=!1,this.wa&&(this.wa.style.visibility="hidden"),this.ga.setLocked(!0),this.ga.setSlaveMode(!0),this.ga.readConfigString(this.Oi),this.Jc("Flash player '"+this.le+"' connected."));this.Sj&&(this.Pc(),this.Sj=!1);this.No();this.Mo();this.Jo(b);this.Ko();this.Lo(b);this.na.Wp();(0<=this.A.mode||0<this.A.jb.length)&&this.Oo();this.si();if(this.gf.pan!=this.pan.c||this.gf.i!=this.i.c||this.gf.f!=
this.f.c)this.gf.pan=this.pan.c,this.gf.i=this.i.c,this.gf.f=this.f.c,this.ja("positionchanged",{});this.kl!=this.Ka&&(this.kl=this.Ka,this.ja("projectionchanged",{}));this.Ea&&(0<this.Vf?this.Vf--:(this.Ea=!1,this.Vf=0),this.C.Ge||this.C.Id||this.Vg(),this.ja("repaint",{}));b=this.Gk();b!=this.jl&&(b?(this.ka&&this.ka.ggReLoadedLevels&&this.ka.ggReLoadedLevels(),this.ja("tilesrequested",{})):(a.ka&&a.ka.ggLoadedLevels&&a.ka.ggLoadedLevels(),this.ja("tilesready",{})),this.jl=b)};b.prototype.dg=function(a){switch(a){case 4:a=
Math.min(110,this.f.max);break;case 12:a=Math.min(270,this.f.nj);a=Math.min(360*this.be(),a);a=Math.min(360/this.be(),a);break;case 9:a=Math.min(270,this.f.oj);break;default:a=90}return a};b.prototype.km=function(){var a=this;setTimeout(function(){a.wf(!1)},10);setTimeout(function(){a.wf(!1)},100)};b.prototype.si=function(){this.Ni.wk(this.pan.c,this.i.c);for(var a=0;a<this.N.length+this.J.length;a++){var b;if(a<this.N.length)b=this.N[a];else if(b=this.J[a-this.N.length],b.kd)continue;b.si()}};b.a=
function(a){var b="",c,f,e,g,k,h=0;a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");do c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(h++)),f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(h++)),g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(h++)),k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(h++)),c=c<<2|f>>4,f=(f&15)<<4|g>>2,e=(g&3)<<6|k,b+=String.fromCharCode(c),
64!=g&&(b+=String.fromCharCode(f)),64!=k&&(b+=String.fromCharCode(e));while(h<a.length);return b};b.prototype.wp=function(a,d){var c,f,e=this;if(0!=e.Ag.length||!e.B.lg||e.B.Uf||e.B.mh)if(e.$c)e.T.removeChild(e.$c),e.$c=null;else{e.$c=document.createElement("div");var g=e.$c;c="left: "+a+"px;"+("top:\t "+d+"px;")+"z-index: 32000;";c+="position:relative;";c+="display: table;";c+="background-color: white;";c+="border: 1px solid lightgray;";c+="box-shadow: 1px 1px 3px #333;";c+="font-family: Verdana, Arial, Helvetica, sans-serif;";
c+="font-size: 9pt;";c+="opacity : 0.95;";g.setAttribute("style",c);g.setAttribute("class","gg_contextmenu");c=document.createElement("style");f=document.createTextNode(".gg_context_row:hover { background-color: #3399FF }");c.type="text/css";c.styleSheet?c.styleSheet.cssText=f.nodeValue:c.appendChild(f);g.appendChild(c);for(f=0;f<e.Ag.length;f++){var k=e.Ag[f],h=document.createElement("div");c="text-align: left;";c+="margin: 0;";c+="padding: 5px 20px;";c+="vertical-align: left;";h.setAttribute("style",
c);h.setAttribute("class","gg_context_row");c=document.createElement("a");c.href=k.url;c.target="_blank";c.innerHTML=k.text;c.setAttribute("style","color: black; text-decoration: none;");h.appendChild(c);g.appendChild(h)}0<e.Ag.length&&(!e.B.lg||e.B.Uf||e.B.mh)&&g.appendChild(document.createElement("hr"));if(e.B.mh&&e.Y){k=[];k.push({text:"Rectilinear Projection",Gg:4});k.push({text:"Stereographic Projection",Gg:9});k.push({text:"Fisheye Projection",Gg:12});for(f=0;f<k.length;f++){var h=k[f],m=document.createElement("div");
m.setAttribute("class","gg_context_row");c="text-align: left;";c+="margin: 0;";c=e.Ka==h.Gg?c+"padding: 5px 20px 5px 7px;":c+"padding: 5px 20px;";c+="vertical-align: left;";c+="cursor: pointer;";m.setAttribute("style",c);m.onclick=function(a){return function(){e.Hi(a,1);e.update()}}(h.Gg);e.Ka==h.Gg?m.innerHTML="&#10687; "+h.text:m.innerHTML=h.text;g.appendChild(m)}e.B.lg&&!e.B.Uf||g.appendChild(document.createElement("hr"))}e.B.Uf&&(f=document.createElement("div"),f.setAttribute("class","gg_context_row"),
c="text-align: left;margin: 0;padding: 5px 20px;",c+="vertical-align: left;",c+="cursor: pointer;",f.setAttribute("style",c),f.onclick=function(){e.ni()},f.innerHTML=e.Eh()?"Exit Fullscreen":"Enter Fullscreen",g.appendChild(f));c="<<U>>"+String(e.Ia);c=c.toUpperCase();e.B.lg&&"U"==c.charAt(2)||(f=document.createElement("div"),c="text-align: left;margin: 0;padding: 5px 20px;",c+="vertical-align: left;",f.setAttribute("style",c),f.setAttribute("class","gg_context_row"),c=document.createElement("a"),
c.href=b.a("aHR0cDovL3Bhbm8ydnIuY29tLw=="),c.target="_blank",c.innerHTML=b.a("Q3JlYXRlZCB3aXRoIFBhbm8yVlI="),c.setAttribute("style","color: black; text-decoration: none;"),f.appendChild(c),g.appendChild(f));e.T.insertBefore(e.$c,e.T.firstChild);g.onclick=function(){e.$c&&(e.T.removeChild(e.$c),e.$c=null)};g.oncontextmenu=g.onclick}};b.prototype.Mm=function(){var a=this,b;b=a.Fa;a.control=b;a.control=b;a.km();setTimeout(function(){a.Fg()},10);setTimeout(function(){a.Bl()},200);setTimeout(function(){a.Ie();
a.Vg()},10);b.addEventListener&&(b.addEventListener("touchstart",function(b){a.Pp(b)},!1),b.addEventListener("touchmove",function(b){a.Op(b)},!1),b.addEventListener("touchend",function(b){a.Np(b)},!1),b.addEventListener("touchcancel",function(b){a.Mp(b)},!1),b.addEventListener("pointerdown",function(b){a.tl(b)},!1),b.addEventListener("MSPointerDown",function(b){a.tl(b)},!1),b.addEventListener("MSGestureStart",function(b){a.Ek(b)},!1),b.addEventListener("MSGestureEnd",function(b){a.Dk(b)},!1),b.addEventListener("MSGestureChange",
function(b){a.wo(b)},!1),b.addEventListener("gesturestart",function(b){a.Ek(b)},!1),b.addEventListener("gesturechange",function(b){a.pn(b)},!1),b.addEventListener("gestureend",function(b){a.Dk(b)},!1),b.addEventListener("mousedown",function(b){a.to(b)},!1),b.addEventListener("mousemove",function(b){a.so(b)},!1),document.addEventListener("mouseup",function(b){a.ro(b)},!1),b.addEventListener("mousewheel",function(b){a.sl(b)},!1),b.addEventListener("DOMMouseScroll",function(b){a.sl(b)},!1),document.addEventListener("keydown",
function(b){a.mo(b)},!1),document.addEventListener("keyup",function(b){a.no(b)},!1),window.addEventListener("orientationchange",function(){a.km()},!1),window.addEventListener("resize",function(){a.Ie()},!1),window.addEventListener("blur",function(){a.Co()},!1),a.T.addEventListener("webkitfullscreenchange",function(){a.Uh()},!1),document.addEventListener("mozfullscreenchange",function(){a.Uh()},!1),window.addEventListener("webkitfullscreenchange",function(){a.Uh()},!1),document.addEventListener("MSFullscreenChange",
function(){a.Uh()},!1));b.oncontextmenu=function(b){void 0===b&&(b=window.event);if(b.target&&!a.xc(b.target))return!0;if(!b.ctrlKey){b=a.eg(b);var d=a.ne();a.wp(b.x-d.x,b.y-d.y);return!1}return!0};window.addEventListener("deviceorientation",function(b){a.Do(b.alpha,b.beta,b.gamma,b.absolute)})};b.prototype.$j=function(){for(var a=0;a<this.P.length;a++)if("point"==this.P[a].type&&(this.ia&&this.ia.addSkinHotspot?(this.P[a].Xe(),this.P[a].b=new this.ia.addSkinHotspot(this.P[a])):this.P[a].b=new p.wm(this,
this.P[a]),this.P[a].b.__div.style.left="-1000px",this.P[a].b.__div.style.top="-1000px",this.P[a].b&&this.P[a].b.__div)){var b=this.Fa.firstChild;b?this.Fa.insertBefore(this.P[a].b.__div,b):this.Fa.appendChild(this.P[a].b.__div)}};b.prototype.tm=function(){var a,b=document.createElement("fakeelement"),c={OTransition:"oTransitionEnd",MSTransition:"msTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",transition:"transitionEnd"};for(a in c)if(void 0!==b.style[a])return c[a]};
b.prototype.Fb=function(a){var b=[];"#"==a.substr(0,1)&&(a=a.substr(1));a=new RegExp(a,"");for(var c=0;c<this.N.length;c++)a.test(this.N[c].id)&&b.push(this.N[c]);for(c=0;c<this.J.length;c++)a.test(this.J[c].id)&&b.push(this.J[c]);for(c=0;c<this.Xa.length;c++)a.test(this.Xa[c].id)&&b.push(this.Xa[c]);return b};b.prototype.In=function(a){if("_videopanorama"==a)return this.s.b;a=this.Fb(a);return 0<a.length?a[0].b:null};b.prototype.Gl=function(a,b){var c=this;b.addEventListener("ended",function(a){c.ja("videoended",
{video:a.target})});b.addEventListener("pause",function(a){c.ja("videopaused",{video:a.target})});b.addEventListener("play",function(a){c.ja("videostarted",{video:a.target})});for(var f=0;f<this.J.length;f++)if(this.J[f].id==a)return this.J[f].b=b,this.J[f];f=new p.Yj(this);f.registerElement(a,b);return f};b.prototype.ic=function(a){if(this.Db){var b=this.ga;if(b)return b.isPlaying(a)}else{if("_main"===a)return!0;a=this.Fb(a);if(0<a.length)return a[0].ha?a[0].ye:!a[0].b.ended&&!a[0].b.paused}return!1};
b.prototype.xe=function(a,b){if(this.Db){var c=this.ga;c&&c.playSound(a,b)}else try{for(var c=this.Fb(a),f=0;f<c.length;f++){var e=c[f];this.op(e.id);e.Yc=b&&!isNaN(Number(b))?Number(b)-1:e.loop-1;-1==e.Yc&&(e.Yc=1E7);this.M(e.b);this.ic(a)&&this.Lj(a);e.ha?e.Vc():e.b.play()}}catch(g){this.M(g)}};b.prototype.Cl=function(a,b){for(var c=this.Fb(a),f=0;f<c.length;f++){var e=c[f];this.ic(e.id)?this.sj(e.id):this.xe(e.id,b)}};b.prototype.Po=function(a,b){for(var c=this.Fb(a),f=0;f<c.length;f++){var e=
c[f];this.ic(e.id)?this.Lj(e.id):this.xe(e.id,b)}};b.prototype.sj=function(a){if(this.Db){var b=this.ga;b&&b.pauseSound(a)}else try{if("_main"==a){this.di(a);for(b=0;b<this.N.length;b++)this.N[b].ha?this.N[b].Ei():this.N[b].b.pause();for(b=0;b<this.J.length;b++)this.J[b].b.pause()}else for(var c=this.Fb(a),b=0;b<c.length;b++){var f=c[b];this.di(f.id);f.ha?f.Ei():f.b.pause()}}catch(e){this.M(e)}};b.prototype.Gm=function(a,b){for(var c=this.Fb(a),f=0;f<c.length;f++){var e=c[f];0==b||1==b?e.gg&&e.gg(1==
b):2==b&&e.oe&&e.oe()}};b.prototype.Lj=function(a){var b;if(this.Db)(b=this.ga)&&b.stopSound(a);else try{if("_main"===a){this.di(a);for(b=0;b<this.N.length;b++)this.N[b].ha?this.N[b].Re():(this.N[b].b.pause(),this.N[b].b.currentTime=0);for(b=0;b<this.J.length;b++)this.J[b].b.pause(),this.J[b].b.currentTime=0}else{var c=this.Fb(a);for(b=0;b<c.length;b++){var f=c[b];this.di(f.id);f.ha?f.Re():f.b&&f.b.pause&&(f.b.pause(),f.b.currentTime=0,this.df&&(f.Cd(),f.addElement()))}}}catch(e){this.M(e)}};b.prototype.di=
function(a){-1==this.Nc.indexOf(a)&&this.Nc.push(a);var b=this.$d.indexOf(a);-1!=b&&this.$d.splice(b,1);"_main"==a&&(this.$d=[])};b.prototype.op=function(a){-1!=this.Nc.indexOf("_main")&&-1==this.$d.indexOf(a)&&this.$d.push(a);a=this.Nc.indexOf(a);-1!=a&&this.Nc.splice(a,1)};b.prototype.yp=function(a){a=this.Fb(a);return 0<a.length?(a=a[0],a.ha?a.Pm():a.b?a.b.currentTime:0):0};b.prototype.zp=function(a,b){var c=this.Fb(a);0<c.length&&(c=c[0],c.ha?(0>b&&(b=0),b>c.Pf.duration&&(b=c.Pf.duration-.1),
c.Qm(b)):c.b&&(0>b&&(b=0),b>c.b.duration&&(b=c.b.duration-.1),c.b.currentTime=b))};b.prototype.tp=function(a,b){if(this.Db){var c=this.ga;c&&c.setVolume(a,b)}else try{var f=Number(b);1<f&&(f=1);0>f&&(f=0);"_videopanorama"===a&&this.s.b&&(this.s.b.volume=f);if("_main"===a){this.V=f;for(c=0;c<this.N.length;c++)this.N[c].b.volume=this.N[c].level*this.V;for(c=0;c<this.J.length;c++)this.J[c].b.volume=this.J[c].level*this.V;this.s.b&&(this.s.b.volume=this.V)}else{var e=this.Fb(a);this.M(e);for(c=0;c<e.length;c++){var g=
e[c];g.b&&null!=g.b.volume&&(g.b.volume=f*this.V);g.level=f}}}catch(k){this.M(k)}};b.prototype.Xm=function(a,b){if(this.Db){var c=this.ga;c&&c.changeVolume(a,b)}else try{var f;"_videopanorama"===a&&this.s.b&&(this.s.b.volume=this.s.b.volume+Number(b));if("_main"===a){c=this.V;c+=Number(b);1<c&&(c=1);0>c&&(c=0);this.V=c;for(f=0;f<this.N.length;f++)this.N[f].b.volume=this.N[f].level*this.V;for(f=0;f<this.J.length;f++)this.J[f].b.volume=this.J[f].level*this.V;this.s.b&&(this.s.b.volume=this.V)}else{var e=
this.Fb(a);for(f=0;f<e.length;f++){var g=e[f],c=g.level,c=c+Number(b);1<c&&(c=1);0>c&&(c=0);g.level=c;g.b&&null!=g.b.volume&&(g.b.volume=c*this.V)}}}catch(k){this.M(k)}};b.prototype.ep=function(a,b){for(var c=this.Fb(a),f=0;f<c.length;f++){var e=c[f];0==b?(e.zf(!1),e.eb=!1):1==b?(e.zf(!0),e.eb=!0):2==b&&e.b&&("visible"==e.b.style.visibility?(e.zf(!1),e.eb=!1):(e.zf(!0),e.eb=!0))}};b.prototype.$l=function(){try{for(var a=this,b=!1,c=!1,f=0;f<this.N.length;f++){var e=this.N[f];-1==e.loop||this.ic(e.id)||
-1!=this.Nc.indexOf(e.id)||-1!=this.Nc.indexOf("_main")&&-1==this.$d.indexOf(e.id)||(this.Ba&&this.La.enabled&&4!=e.mode&&6!=e.mode?this.La.mk?(e.ha?e.Vc():(e.b.play(),e.b.currentTime=0),e.la=0,c=!0):b=!0:4==e.mode||6==e.mode||"_background"==e.id&&this.ic(e.id)||(e.ha?e.Vc():(e.b.play(),e.b.currentTime&&(e.b.currentTime=0))))}b&&setTimeout(function(){a.La.Fp()},1E3*this.La.ub);c&&(this.La.Bp=this.Ba.currentTime,this.La.Ap=setInterval(function(){a.La.kn()},10))}catch(g){this.M(g)}};b.prototype.uk=
function(){for(var a=0;a<this.La.Tg.length;a++)this.La.tk(this.La.Tg[a])};b.prototype.Kl=function(){for(var a;0<this.P.length;)a=this.P.pop(),a.b&&(this.Fa.removeChild(a.b.__div),delete a.b),a.b=null;this.ja("hotspotsremoved",{})};b.prototype.Fj=function(a){this.dh=a;0!=a?this.T.style.zIndex=a.toString():this.T.style.zIndex="auto";this.Ga&&this.Ga.Wc&&(this.Ga.Wc.zIndex=(a+4).toString());this.Fa.style.zIndex=(a+4).toString();this.wa.style.zIndex=(a+3).toString();this.ya.style.zIndex=(a+5).toString();
for(var b=0;b<this.J.length+this.Xa.length;b++){var c;c=b<this.J.length?this.J[b]:this.Xa[b-this.J.length];c.b&&(c.b.style.zIndex=(a+(c.ob?8E4:0)).toString())}};b.prototype.wf=function(a){var b=this.isFullscreen!==a;this.isFullscreen!==a&&(this.isFullscreen=a,this.update(100));if(this.isFullscreen){if(this.ti)try{this.T.webkitRequestFullScreen?this.T.webkitRequestFullScreen():this.T.mozRequestFullScreen?this.T.mozRequestFullScreen():this.T.msRequestFullscreen?this.T.msRequestFullscreen():this.T.requestFullScreen?
this.T.requestFullScreen():this.T.requestFullscreen&&this.T.requestFullscreen()}catch(c){this.M(c)}this.T.style.position="absolute";a=this.ne();this.T.style.left=window.pageXOffset-a.x+this.margin.left+"px";this.T.style.top=window.pageYOffset-a.y+this.margin.top+"px";this.Fj(10);document.body.style.overflow="hidden";b&&(this.ka&&this.ka.ggEnterFullscreen&&this.ka.ggEnterFullscreen(),this.ja("fullscreenenter",{}))}else{if(this.ti)try{document.webkitIsFullScreen?document.webkitCancelFullScreen():document.mozFullScreen?
document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.fullScreen&&(document.cancelFullScreen?document.cancelFullScreen():document.exitFullscreen&&document.exitFullscreen())}catch(c){this.M(c)}this.T.style.position="relative";this.T.style.left="0px";this.T.style.top="0px";this.Fj(0);document.body.style.overflow="";b&&(this.ka&&this.ka.ggExitFullscreen&&this.ka.ggExitFullscreen(),this.ja("fullscreenexit",{}))}this.Ie()};b.prototype.ni=function(){this.wf(!this.isFullscreen)};
b.prototype.gn=function(){this.wf(!0)};b.prototype.exitFullscreen=function(){this.wf(!1)};b.prototype.yn=function(){return this.isFullscreen};b.prototype.Dp=function(a,b,c){this.l.Kd=this.l.jh;this.l.If=this.l.Zg;this.l.enabled=!0;this.l.Ne=this.l.enabled;this.l.active=!0;this.l.hd=0;var f=new Date;this.l.xd=0;this.l.startTime=f.getTime();a&&0!=a&&(this.l.speed=a);b&&(this.l.timeout=b);c&&(this.l.mi=c);this.ja("autorotatechanged",{})};b.prototype.Gp=function(){this.l.active=!1;this.l.enabled=!1;this.l.Ne=
this.l.enabled;this.Le=this.l.Ph=!1;this.u.active&&this.u.Cg&&(this.u.active=!1,this.u.Cg=!1,this.u.Cb=0);this.ja("autorotatechanged",{})};b.prototype.Kp=function(){this.l.enabled=!this.l.active;this.l.Ne=this.l.enabled;this.l.active=this.l.enabled;this.l.hd=0;if(this.l.enabled){var a=new Date;this.l.xd=0;this.l.startTime=a.getTime();this.l.Kd=this.l.jh;this.l.If=this.l.Zg}this.ja("autorotatechanged",{})};b.prototype.Cp=function(a){this.Ib="";a&&""!=a&&(this.l.Kd=a);this.l.Ne=this.l.enabled;this.l.If=
!0;this.l.enabled=!0;this.l.active=!0;this.l.hd=0;a=new Date;this.l.xd=0;this.l.startTime=a.getTime();this.ja("autorotatechanged",{})};b.prototype.lk=function(a){if(this.Md=document.getElementById(a)){this.Md.innerHTML="";this.T=document.createElement("div");this.T.onselectstart=function(){return!1};O&&this.T.setAttribute("id","viewport");a="top:\t0px;left: 0px;position:relative;-ms-touch-action: none;touch-action: none;text-align: left;"+(this.Ia+"user-select: none;");this.T.setAttribute("style",
a);this.Md.appendChild(this.T);this.D=document.createElement("div");a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;-ms-touch-action: none;touch-action: none;"+(this.Ia+"user-select: none;");O&&this.D.setAttribute("id","viewer");this.D.setAttribute("style",a);this.T.appendChild(this.D);if(this.Db){var b=document.createElement("div");a="top:\t0px;left: 0px;width:  100%;height: 100%;overflow: hidden;position:absolute;-ms-touch-action: none;touch-action: none;"+
(this.Ia+"user-select: none;");b.setAttribute("id",this.Xi);b.setAttribute("style",a);this.D.appendChild(b)}this.Ga&&(this.Ga.Wc=document.createElement("canvas"),O&&this.Ga.Wc.setAttribute("id","lensflarecanvas"),a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;"+(this.Ia+"user-select: none;"),a+=this.Ia+"pointer-events: none;",this.Ga.Wc.setAttribute("style",a),this.T.appendChild(this.Ga.Wc));this.Fa=document.createElement("div");O&&this.Fa.setAttribute("id",
"hotspots");a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;";this.hj&&(a+="background-image: url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7);");this.fd&&!this.Y&&(a+=this.Ia+"transform: translateZ(9999999px);");a+=this.Ia+"user-select: none;";this.Fa.setAttribute("style",a);this.T.appendChild(this.Fa);this.wa=document.createElement("canvas");O&&this.wa.setAttribute("id","hotspotcanvas");a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;"+
(this.Ia+"user-select: none;");a+=this.Ia+"pointer-events: none;";this.wa.setAttribute("style",a);this.T.appendChild(this.wa);this.ya=document.createElement("div");O&&this.ya.setAttribute("id","hotspottext");this.ya.setAttribute("style","top:\t0px;left: 0px;position:absolute;padding: 3px;visibility: hidden;");this.ya.innerHTML=" Hotspot text!";this.T.appendChild(this.ya);this.divSkin=this.ka=this.Fa;this.Fj(0)}else alert("container not found!")};b.prototype.nk=function(a){this.Ea=!0;return function(){a.Pa&&
(a.h&&a.h.complete?(a.loaded=!0,a.Pa.drawImage(a.h,0,0,a.width,a.height),a.h=null,a.Bd=null):a.Bd&&a.Bd.complete&&!a.loaded&&(a.Pa.drawImage(a.Bd,0,0,a.width,a.height),a.Bd=null))}};b.prototype.kk=function(a){var b,c,f,e=128;this.h.pf&&(this.D.style.backgroundColor=this.h.pf.replace("0x","#"));a?(e=this.Rf,this.Df=1):this.pc>e&&(e=this.pc);for(f=0;6>f;f++){c=this.mb.cb[f];a?(c.width=this.Rf,c.height=this.Rf):(c.K=document.createElement("canvas"),c.K.width=this.pc,c.K.height=this.pc,c.width=this.pc,
c.height=this.pc,c.Pa=c.K.getContext("2d"));b="position:absolute;";b+="left: 0px;";b+="top: 0px;";b+="width: "+e+"px;";b+="height: "+e+"px;";a&&(b+="outline: 1px solid transparent;");b+=this.Ia+"transform-origin: 0% 0%;";b+="-webkit-user-select: none;";b+=this.Ia+"transform: ";var g;g="";var k=1;this.rf&&(k=100);g=4>f?g+("rotateY("+-90*f+"deg)"):g+("rotateX("+(4==f?-90:90)+"deg)");this.rf&&(g+=" scale("+k+")");g+=" translate3d("+-e/2+"px,"+-e/2+"px,"+-e*k/(2*this.Df)+"px)";b+=g+";";c.Qk=g;a||(c.K.setAttribute("style",
b),this.D.insertBefore(c.K,this.D.firstChild))}if(!a){for(f=0;6>f;f++)c=this.mb.cb[f],""!=this.Ve[f]&&(c.Bd=new Image,c.Bd.crossOrigin=this.crossOrigin,c.Bd.onload=this.nk(c),c.Bd.setAttribute("src",this.hc(this.Ve[f])),this.Ob.push(c.Bd));for(f=0;6>f;f++)c=this.mb.cb[f],c.loaded=!1,c.h=new Image,c.h.crossOrigin=this.crossOrigin,c.h.onload=this.nk(c),c.h.setAttribute("src",this.hc(this.oh[f])),this.Ob.push(c.h)}};b.prototype.$h=function(){var a;this.za.ba.x=0;this.za.ba.y=0;if(this.Qc){for(a=0;a<
this.mb.cb.length;a++)this.mb.cb[a].K&&this.mb.cb[a].K.setAttribute&&(this.mb.cb[a].K.setAttribute("src",this.sk),this.D.removeChild(this.mb.cb[a].K));if(this.h.I){for(a=0;a<this.h.I.length;a++){var b=this.h.I[a],c;for(c in b.U)if(b.U.hasOwnProperty(c)){var f=b.U[c];f.visible=!1;f.K&&(f.Pa&&f.Pa.clearRect(0,0,f.Pa.canvas.width,f.Pa.canvas.height),this.oi.push(f.K));f.h&&delete f.h;f.fb&&(this.H.deleteTexture(f.fb),this.dd--);f.Pa=null;f.K=null;f.h=null}delete b.U}delete this.h.I;this.h.I=null}}this.na.$h();
c=[];for(a=0;a<this.J.length;a++)b=this.J[a],b.kd?c.push(b):b.Cd();for(a=0;a<this.Xa.length;a++)this.Xa[a].Cd();this.A.qg=-1;this.wa.style.visibility="hidden";this.gb=0;b=[];this.Be=[];this.La.Tg=[];for(a=0;a<this.N.length;a++)f=this.N[a],b.push(f),0==f.mode||f.wl||this.Be.push(f);this.N=b;this.J=c;this.Xa=[];this.s.b&&(this.T.removeChild(this.s.b),this.s.b=null,a=this.Fb("_videopanorama"),0<a.length&&(a[0].b=null));this.s.gd=!1;this.s.Fh=!1};b.prototype.Mk=function(){var a=1,b=-1!=navigator.userAgent.indexOf("Mac");
window.devicePixelRatio&&b&&(a=window.devicePixelRatio);return{bh:screen.width*a,jg:screen.height*a}};b.prototype.Hk=function(){var a=this.Mk();return a.bh>a.jg?a.bh:a.jg};b.prototype.wj=function(a,b){var c=(new DOMParser).parseFromString(a,"text/xml");this.Oi=a;this.Fl(c,b);this.ga&&(this.M("Apply to Flash player"),this.ga.readConfigString(this.Oi),this.ga.setLocked(!0),this.ga.setSlaveMode(!0))};b.prototype.El=function(a,b,c){try{var f;f=new XMLHttpRequest;f.open("GET",a,!1);f.send(null);if(f.responseXML){var e=
a.lastIndexOf("/");0<=e&&(this.Ld=a.substr(0,e+1));2<=arguments.length&&null!=b&&(this.Ld=b);this.wj(f.responseText,c)}else alert("Error loading panorama XML")}catch(g){alert("Error:"+g)}};b.prototype.Ro=function(a,b,c,f){var e;e=new XMLHttpRequest;var g=this;e.onload=function(k){if(4<=e.readyState)if(e.responseXML){var h=a.lastIndexOf("/");0<=h&&(g.Ld=a.substr(0,h+1));3<=arguments.length&&null!=c&&(g.Ld=c);g.wj(e.responseText,f);b&&b()}else alert("Error loading panorama XML");else console.error("Wrong state loading XML:"+
e.statusText)};e.onerror=function(){console.error("Error loading XML:"+e.statusText)};e.open("GET",a,!0);e.send(null)};b.prototype.Fi=function(a){var b="";"{"==a.charAt(0)&&(b=a.substr(1,a.length-2));a={oldNodeId:this.bb,nodeId:b};this.ja("beforechangenodeid",a);""!=this.bb&&-1==this.Wj.indexOf(this.bb)&&this.Wj.push(this.bb);this.ll=this.bb;this.bb=b;this.M("change active node: "+b);this.ia&&this.ia.changeActiveNode&&this.ia.changeActiveNode("{"+b+"}");this.ja("changenodeid",a)};b.prototype.Fk=function(){return this.bb};
b.prototype.Ik=function(){if(0<this.Ma.length){var a;a=this.Ma.indexOf(this.bb);a++;a>=this.Ma.length&&(a=0);return this.Ma[a]}return""};b.prototype.Vn=function(){if(0<this.Ma.length){var a;a=this.Ma.indexOf(this.bb);a--;0>a&&(a=this.Ma.length-1);return this.Ma[a]}return""};b.prototype.Dn=function(){return this.ll};b.prototype.Ao=function(a){return-1!=this.Wj.indexOf(a)};b.prototype.Fl=function(a,b){var c=a.firstChild;this.Fe=[];this.Ma=[];this.qh=[];for(var f=c.firstChild;f;){if("map"==f.nodeName){var e=
[],g=f.getAttributeNode("title");g&&(e.title=g.nodeValue.toString());g=f.getAttributeNode("type");e.type=g.nodeValue.toString();"web"==e.type?(g=f.getAttributeNode("mapprovider"),e.mapprovider=g.nodeValue.toString(),g=f.getAttributeNode("mapstyle"),e.mapstyle=g.nodeValue.toString(),(g=f.getAttributeNode("mapurltemplate"))&&(e.mapurltemplate=g.nodeValue.toString()),(g=f.getAttributeNode("mapmaxzoom"))&&(e.mapmaxzoom=Number(g.nodeValue)),(g=f.getAttributeNode("mapkey"))&&(e.mapkey=g.nodeValue.toString())):
(g=f.getAttributeNode("width"),e.width=Number(g.nodeValue),g=f.getAttributeNode("height"),e.height=Number(g.nodeValue),g=f.getAttributeNode("zoomlevels"),e.zoomlevels=Number(g.nodeValue),g=f.getAttributeNode("tileformat"),e.tileformat=g.nodeValue.toString(),g=f.getAttributeNode("bgcolor"),e.bgcolor=g.nodeValue.toString(),g=f.getAttributeNode("transparent"),e.transparent=1==g.nodeValue,g=f.getAttributeNode("floorplannorth"),e.floorplannorth=Number(g.nodeValue));g=f.getAttributeNode("id");this.Nh[g.nodeValue.toString()]=
e}f=f.nextSibling}if("tour"==c.nodeName){this.ef=!0;f="";(g=c.getAttributeNode("start"))&&(f=g.nodeValue.toString());this.hasOwnProperty("startNode")&&this.startNode&&(f=String(this.startNode),this.startNode="");this.hasOwnProperty("startView")&&this.startView&&("object"===typeof this.startView&&null!==this.startView?b=this.startView:""!=this.startView&&(b=String(this.startView)),this.startView="");for(var e=c.firstChild,k="",c="";e;){if("panorama"==e.nodeName){if(g=e.getAttributeNode("id"))k=g.nodeValue.toString(),
""==f&&(f=k),""==c&&(c=k),this.Fe[k]=e,this.Ma.push(k);for(g=e.firstChild;g;){if("userdata"==g.nodeName){var h=this.Xf(g);this.ui[k]=h;h.customnodeid&&(this.qh[h.customnodeid]=k);this.jf[k]=this.hn(g);this.zg[k]=this.jn(g)}g=g.nextSibling}}if("masternode"==e.nodeName)for(g=e.firstChild;g;)"userdata"==g.nodeName&&(h=this.Xf(g),this.ui._master=h),g=g.nextSibling;e=e.nextSibling}this.Fe.hasOwnProperty(f)||(g=this.qh[f])&&(f=g);this.Fe.hasOwnProperty(f)||(this.Jc("Start node "+f+" not found!"),f=c);this.bb=
f;this.vj(this.Fe[f],b);this.Fi("{"+f+"}")}else this.ef=!1,this.vj(c,b),this.Fi(""),this.Ma.push("")};b.prototype.vj=function(a,b){this.Kl();this.Ga&&this.Ga.To();this.uf(this.nb);this.$h();this.rg=0;for(var c=a.firstChild,f,e,g=0;c;){if("view"==c.nodeName){if(f=c.getAttributeNode("fovmode"))this.f.mode=Number(f.nodeValue);f=c.getAttributeNode("pannorth");this.pan.qj=1*(f?f.nodeValue:0);for(var k=c.firstChild;k;){"start"==k.nodeName&&(f=k.getAttributeNode("pan"),this.pan.c=Number(f?f.nodeValue:0),
this.pan.Qa=this.pan.c,f=k.getAttributeNode("tilt"),this.i.c=Number(f?f.nodeValue:0),this.i.Qa=this.i.c,f=k.getAttributeNode("roll"),this.O.c=Number(f?f.nodeValue:0),this.O.Qa=this.O.c,f=k.getAttributeNode("fov"),this.f.c=Number(f?f.nodeValue:70),this.f.Qa=this.f.c,f=k.getAttributeNode("projection"),this.Vh=Number(f?f.nodeValue:4),this.Lc(this.Vh));"min"==k.nodeName&&(f=k.getAttributeNode("pan"),this.pan.min=1*(f?f.nodeValue:0),f=k.getAttributeNode("tilt"),this.i.min=1*(f?f.nodeValue:-90),f=k.getAttributeNode("fov"),
this.f.min=1*(f?f.nodeValue:5),1E-20>this.f.min&&(this.f.min=1E-20),f=k.getAttributeNode("fovpixel"),this.f.Bg=1*(f?f.nodeValue:0));if("max"==k.nodeName){f=k.getAttributeNode("pan");this.pan.max=1*(f?f.nodeValue:0);f=k.getAttributeNode("tilt");this.i.max=1*(f?f.nodeValue:90);f=k.getAttributeNode("fov");this.f.max=1*(f?f.nodeValue:120);180<=this.f.max&&(this.f.max=179.9);if(f=k.getAttributeNode("fovstereographic"))this.f.oj=1*f.nodeValue;if(f=k.getAttributeNode("fovfisheye"))this.f.nj=1*f.nodeValue;
if(f=k.getAttributeNode("scaletofit"))this.B.Ql=1==f.nodeValue}if("flyin"==k.nodeName){if(f=k.getAttributeNode("projection"))this.rc.Cb=Number(f.nodeValue);if(f=k.getAttributeNode("pan"))this.rc.pan=parseFloat(f.nodeValue);if(f=k.getAttributeNode("tilt"))this.rc.i=parseFloat(f.nodeValue);if(f=k.getAttributeNode("fov"))this.rc.f=parseFloat(f.nodeValue)}k=k.nextSibling}}if("autorotate"==c.nodeName){if(f=c.getAttributeNode("speed"))this.l.speed=1*f.nodeValue;if(f=c.getAttributeNode("delay"))this.l.timeout=
1*f.nodeValue;if(f=c.getAttributeNode("returntohorizon"))this.l.mi=1*f.nodeValue;if(f=c.getAttributeNode("nodedelay"))this.l.Th=1*f.nodeValue;if(f=c.getAttributeNode("noderandom"))this.l.pj=1==f.nodeValue;this.Od&&(this.l.enabled=!0,this.l.Ne=!0,this.l.active=!1);this.l.xd=0;if(f=c.getAttributeNode("startloaded"))this.l.Qg=1==f.nodeValue,this.l.Qg&&(this.l.active=!1);if(f=c.getAttributeNode("useanimation"))this.l.Zg=1==f.nodeValue,this.l.If=this.l.Zg;if(f=c.getAttributeNode("syncanimationwithvideo"))this.l.Mj=
1==f.nodeValue}if("animation"==c.nodeName){if(f=c.getAttributeNode("syncanimationwithvideo"))this.l.Mj=1==f.nodeValue;if(f=c.getAttributeNode("useinautorotation"))this.l.Zg=1==f.nodeValue;if(f=c.getAttributeNode("animsequence"))this.l.jh=f.nodeValue,this.Od&&(this.l.Kd=this.l.jh);this.xa=[];for(k=c.firstChild;k;){if("clip"==k.nodeName){this.w=new p.rl;if(f=k.getAttributeNode("animtitle"))this.w.Me=f.nodeValue.toString();if(f=k.getAttributeNode("cliptitle"))this.w.ab=f.nodeValue.toString();if(f=k.getAttributeNode("nodeid"))this.w.lq=
f.nodeValue.toString();if(f=k.getAttributeNode("length"))this.w.length=Number(f.nodeValue);if(f=k.getAttributeNode("animtype"))this.w.Jm=Number(f.nodeValue);if(f=k.getAttributeNode("nextcliptitle"))this.w.ul=f.nodeValue.toString();if(f=k.getAttributeNode("nextclipnodeid"))this.w.Sh=f.nodeValue.toString();if(f=k.getAttributeNode("nextclipstartview"))this.w.zo=f.nodeValue.toString();if(f=k.getAttributeNode("transitiontype"))this.w.Qp=Number(f.nodeValue);var h=k.firstChild;for(this.w.W=[];h;){if("keyframe"==
h.nodeName){var m=new p.Dc;if(f=h.getAttributeNode("time"))m.time=Number(f.nodeValue);if(f=h.getAttributeNode("value"))m.value=Number(f.nodeValue);if(f=h.getAttributeNode("valuestring"))m.Uj=f.nodeValue.toString();if(f=h.getAttributeNode("transitiontime"))m.ub=Number(f.nodeValue);f=h.getAttributeNode("type");var x=0;f&&(m.type=Number(f.nodeValue),x=Number(f.nodeValue));if(f=h.getAttributeNode("property"))m.sb=Number(f.nodeValue);if(f=h.getAttributeNode("additionaltrackid"))m.hh=f.nodeValue.toString();
if(1==x||2==x){if(f=h.getAttributeNode("bezierintime"))m.de=Number(f.nodeValue);if(f=h.getAttributeNode("bezierinvalue"))m.Tc=Number(f.nodeValue);if(f=h.getAttributeNode("bezierouttime"))m.ee=Number(f.nodeValue);if(f=h.getAttributeNode("bezieroutvalue"))m.fe=Number(f.nodeValue)}this.w.W.push(m)}h=h.nextSibling}this.xa.push(this.w)}k=k.nextSibling}}"input"==c.nodeName&&(e||(e=c));if(e)for(h=0;6>h;h++)f=e.getAttributeNode("prev"+h+"url"),this.Ve[h]=f?String(f.nodeValue):"";"altinput"==c.nodeName&&(k=
0,(f=c.getAttributeNode("screensize"))&&(k=1*f.nodeValue),0<k&&k<=this.Hk()&&k>g&&(g=k,e=c));if("control"==c.nodeName&&this.Od){if(f=c.getAttributeNode("simulatemass"))this.za.enabled=1==f.nodeValue;if(f=c.getAttributeNode("rubberband"))this.B.Ol=1==f.nodeValue;if(f=c.getAttributeNode("locked"))this.B.yb=1==f.nodeValue;f&&(this.B.re=1==f.nodeValue);if(f=c.getAttributeNode("lockedmouse"))this.B.yb=1==f.nodeValue;if(f=c.getAttributeNode("lockedkeyboard"))this.B.re=1==f.nodeValue;if(f=c.getAttributeNode("lockedkeyboardzoom"))this.B.po=
1==f.nodeValue;if(f=c.getAttributeNode("lockedwheel"))this.B.jd=1==f.nodeValue;if(f=c.getAttributeNode("invertwheel"))this.B.Zk=1==f.nodeValue;if(f=c.getAttributeNode("speedwheel"))this.B.Xl=1*f.nodeValue;if(f=c.getAttributeNode("invertcontrol"))this.B.wd=1==f.nodeValue;if(f=c.getAttributeNode("sensitivity"))this.B.sensitivity=1*f.nodeValue,1>this.B.sensitivity&&(this.B.sensitivity=1);if(f=c.getAttributeNode("dblclickfullscreen"))this.B.Qi=1==f.nodeValue;if(f=c.getAttributeNode("contextfullscreen"))this.B.Uf=
1==f.nodeValue;if(f=c.getAttributeNode("contextprojections"))this.B.mh=1==f.nodeValue;if(f=c.getAttributeNode("hideabout"))this.B.lg=1==f.nodeValue;for(k=c.firstChild;k;)"menulink"==k.nodeName&&(h={text:"",url:""},f=k.getAttributeNode("text"),h.text=f.nodeValue,f=k.getAttributeNode("url"),h.url=f.nodeValue,this.Ag.push(h)),k=k.nextSibling}if("transition"==c.nodeName&&this.Od){if(f=c.getAttributeNode("enabled"))this.C.enabled=1==f.nodeValue;if(f=c.getAttributeNode("blendtime"))this.C.Qf=f.nodeValue;
if(f=c.getAttributeNode("blendcolor"))this.C.Pe=f.nodeValue.toString();if(f=c.getAttributeNode("type"))this.C.type=f.nodeValue.toString();if(f=c.getAttributeNode("softedge"))this.C.zc=1*f.nodeValue;if(f=c.getAttributeNode("zoomin"))this.C.Oa=f.nodeValue;if(f=c.getAttributeNode("zoomout"))this.C.Zb=f.nodeValue;if(f=c.getAttributeNode("zoomfov"))this.C.Lf=f.nodeValue;if(f=c.getAttributeNode("zoomspeed"))this.C.ae=f.nodeValue;if(f=c.getAttributeNode("zoomoutpause"))this.C.Mf=1==f.nodeValue;"cut"==this.C.type&&
(this.C.Qf=0)}if("soundstransition"==c.nodeName){if(f=c.getAttributeNode("enabled"))this.La.enabled=1==f.nodeValue;if(f=c.getAttributeNode("transitiontime"))this.La.ub=1*f.nodeValue;if(f=c.getAttributeNode("crossfade"))this.La.mk=1==f.nodeValue}if("flyintransition"==c.nodeName){if(f=c.getAttributeNode("enabled"))this.wb.enabled=1==f.nodeValue&&this.Y;if(f=c.getAttributeNode("speed"))this.wb.speed=1*f.nodeValue}"userdata"==c.nodeName&&(this.userdata=this.Jf=this.Xf(c));if("hotspots"==c.nodeName)for(k=
c.firstChild;k;){if("label"==k.nodeName&&this.Od){h=this.A.Oj;if(f=k.getAttributeNode("enabled"))h.enabled=1==f.nodeValue;if(f=k.getAttributeNode("width"))h.width=1*f.nodeValue;if(f=k.getAttributeNode("height"))h.height=1*f.nodeValue;if(f=k.getAttributeNode("textcolor"))h.Pj=1*f.nodeValue;if(f=k.getAttributeNode("textalpha"))h.Nj=1*f.nodeValue;if(f=k.getAttributeNode("background"))h.background=1==f.nodeValue;if(f=k.getAttributeNode("backgroundalpha"))h.ac=1*f.nodeValue;if(f=k.getAttributeNode("backgroundcolor"))h.bc=
1*f.nodeValue;if(f=k.getAttributeNode("border"))h.Di=1*f.nodeValue;if(f=k.getAttributeNode("bordercolor"))h.ec=1*f.nodeValue;if(f=k.getAttributeNode("borderalpha"))h.dc=1*f.nodeValue;if(f=k.getAttributeNode("borderradius"))h.Ci=1*f.nodeValue;if(f=k.getAttributeNode("wordwrap"))h.wi=1==f.nodeValue}if("polystyle"==k.nodeName&&this.Od){if(f=k.getAttributeNode("mode"))this.A.mode=1*f.nodeValue;if(f=k.getAttributeNode("bordercolor"))this.A.ec=1*f.nodeValue;if(f=k.getAttributeNode("backgroundcolor"))this.A.bc=
1*f.nodeValue;if(f=k.getAttributeNode("borderalpha"))this.A.dc=1*f.nodeValue;if(f=k.getAttributeNode("backgroundalpha"))this.A.ac=1*f.nodeValue;if(f=k.getAttributeNode("handcursor"))this.A.af=1==f.nodeValue}f=void 0;"hotspot"==k.nodeName&&(f=new p.Gh(this),f.type="point",f.Kb(k),this.P.push(f));"polyhotspot"==k.nodeName&&(f=new p.Gh(this),f.type="poly",f.Kb(k),this.P.push(f));k=k.nextSibling}if("sounds"==c.nodeName||"media"==c.nodeName)for(k=c.firstChild;k;){if("sound"==k.nodeName&&!this.vl)for(f=
new p.Em(this),f.Kb(k),this.Db||f.addElement(),h=0;h<this.Be.length;h++)m=this.Be[h],f.id==m.id&&f.url.join()==m.url.join()&&f.loop==m.loop&&f.mode==m.mode&&(this.Be.splice(h,1),h--);"video"==k.nodeName&&(f=new p.Yj(this),f.Kb(k),this.Db||f.addElement());"image"==k.nodeName&&(f=new p.Cm(this),f.Kb(k),this.Db||f.addElement());"lensflare"==k.nodeName&&this.Ga&&(f=new p.Dm(this),f.Kb(k),this.Ga.wg.push(f));k=k.nextSibling}c=c.nextSibling}for(h=0;h<this.Be.length;h++){c=this.Be[h];if(this.Ba&&this.La.enabled&&
this.ic(c.id))this.La.Tg.push(c);else{try{c.ha?c.Re():c.b.pause()}catch(q){this.M(q)}c.Cd()}this.N.splice(this.N.indexOf(c))}1!=this.C.Oa&&2!=this.C.Oa&&this.uk();b&&("object"===typeof b&&null!==b?(b.hasOwnProperty("pan")&&this.xf(Number(b.pan)),b.hasOwnProperty("tilt")&&this.yf(Number(b.tilt)),b.hasOwnProperty("fov")&&this.vf(Number(b.fov)),b.hasOwnProperty("projection")&&this.Lc(Number(b.projection))):""!=b&&(c=b.toString().split("/"),4<c.length&&this.Lc(Number(c[4])),0<c.length&&(f=String(c[0]),
"N"==f.charAt(0)?this.Dj(Number(f.substr(1))):"S"==f.charAt(0)?this.Dj(-180+Number(f.substr(1))):this.xf(Number(f))),1<c.length&&this.yf(Number(c[1])),2<c.length&&this.vf(Number(c[2]))));if(e){for(h=0;6>h;h++)(f=e.getAttributeNode("tile"+h+"url"))&&(this.oh[h]=String(f.nodeValue)),f=e.getAttributeNode("tile"+h+"url1");for(h=0;6>h;h++)(f=e.getAttributeNode("prev"+h+"url"))&&(this.Ve[h]=String(f.nodeValue));if(f=e.getAttributeNode("tilesize"))this.pc=1*f.nodeValue;if(f=e.getAttributeNode("canvassize"))this.Rf=
Number(f.nodeValue);if(f=e.getAttributeNode("tilescale"))this.Df=1*f.nodeValue;if(f=e.getAttributeNode("leveltileurl"))this.h.ql=f.nodeValue;if(f=e.getAttributeNode("leveltilesize"))this.h.G=Number(f.nodeValue);if(f=e.getAttributeNode("levelbias"))this.h.ol=Number(f.nodeValue);if(f=e.getAttributeNode("levelbiashidpi"))this.h.pl=Number(f.nodeValue);f=e.getAttributeNode("overlap");this.Za.O=0;this.Za.pitch=0;f&&(this.h.Ja=Number(f.nodeValue));if(f=e.getAttributeNode("levelingroll"))this.Za.O=Number(f.nodeValue);
if(f=e.getAttributeNode("levelingpitch"))this.Za.pitch=Number(f.nodeValue);this.gb=0;(f=e.getAttributeNode("flat"))&&1==f.nodeValue&&(this.gb=2);f=e.getAttributeNode("width");this.h.width=1*(f?f.nodeValue:1);f=e.getAttributeNode("height");this.h.height=1*(f?f.nodeValue:this.h.width);this.s.src=[];this.h.I=[];for(k=e.firstChild;k;){if("preview"==k.nodeName){if(f=k.getAttributeNode("color"))this.h.pf=f.nodeValue;if(f=k.getAttributeNode("strip"))this.h.Dl=1==f.nodeValue}if("video"==k.nodeName){if(f=
k.getAttributeNode("format"))"3x2"==f.nodeValue&&(this.s.format=14),"equirectangular"==f.nodeValue&&(this.s.format=1);if(f=k.getAttributeNode("flipy"))this.s.Yi=Number(f.nodeValue);if(f=k.getAttributeNode("startmutedmobile"))this.s.Zl=1==f.nodeValue;if(f=k.getAttributeNode("bleed"))this.s.Oe=Number(f.nodeValue);if(f=k.getAttributeNode("endaction"))this.s.je=String(f.nodeValue);if(f=k.getAttributeNode("width"))this.s.width=Number(f.nodeValue);if(f=k.getAttributeNode("height"))this.s.height=Number(f.nodeValue);
for(h=k.firstChild;h;)"source"==h.nodeName&&(f=h.getAttributeNode("url"))&&this.s.src.push(f.nodeValue.toString()),h=h.nextSibling}if("level"==k.nodeName){e=new p.Pl;f=k.getAttributeNode("width");e.width=1*(f?f.nodeValue:1);f=k.getAttributeNode("height");e.height=1*(f?f.nodeValue:e.width);if(f=k.getAttributeNode("preload"))e.cache=1==f.nodeValue;if(f=k.getAttributeNode("preview"))e.nf=1==f.nodeValue;e.L=Math.floor((e.width+this.h.G-1)/this.h.G);e.da=Math.floor((e.height+this.h.G-1)/this.h.G);this.h.I.push(e)}k=
k.nextSibling}this.h.jj=this.h.I.length}this.bf=!0;this.Wg&&(this.Y=this.Qc=!1,this.fc||(this.M("dummy rendering"),this.fc=document.createElement("canvas"),this.fc.width=100,this.fc.height=100,this.fc.id="dummycanvas",this.D.appendChild(this.fc)),this.Pc());this.Y&&this.H&&(this.na.Xk(this.Df),this.na.Yk());this.Qc&&(0<this.h.I.length?this.kk(!0):this.kk(!1),this.rg=0);var v=this;0<this.h.I.length&&this.h.Dl&&0==this.gb&&(c=new Image,e=new p.Pl,e.nf=!0,e.cache=!0,e.L=e.da=0,e.height=e.width=0,this.h.I.push(e),
c.crossOrigin=this.crossOrigin,c.onload=this.na.yo(c),c.setAttribute("src",this.Ee(6,this.h.jj-1,0,0)));if(0<this.s.src.length&&this.Y)if(this.Xg){this.s.b=document.createElement("video");this.s.b.crossOrigin=this.crossOrigin;this.s.b.setAttribute("style","display:none; max-width:none;");this.s.b.setAttribute("playsinline","playsinline");(this.Hc||this.Rd)&&this.Yf&&this.s.Zl&&this.s.b.setAttribute("muted","muted");this.s.b.a=!0;this.s.b.volume=this.V;this.T.appendChild(this.s.b);this.s.gd=!1;this.s.am=
!1;this.s.b.oncanplay=function(){if(!v.s.gd){v.s.Fh=!0;var a,b,c,d,e,f,g=[],k=new p.va,l=v.H,h=v.s.b.videoWidth/3;v.s.width=v.s.b.videoWidth;v.s.height=v.s.b.videoHeight;for(a=0;6>a;a++)for(c=a%3*h+v.s.Oe,e=c+h-2*v.s.Oe,f=4,3>a&&(f+=h),d=f+h-2*v.s.Oe,b=0;4>b;b++){k.x=-1;k.y=-1;k.z=1;for(var m=0;m<b;m++)k.Nl();g.push((0<k.x?c:e)/(3*h),(0<k.y?d:f)/(2*h))}l.bindBuffer(l.ARRAY_BUFFER,v.s.ki);l.bufferData(l.ARRAY_BUFFER,new Float32Array(g),l.STATIC_DRAW)}};"exit"==this.s.je?this.s.b.onended=function(){v.s.Fh=
!1;v.s.gd=!1;v.T.removeChild(v.s.b);v.s.b=null;v.update()}:"stop"==this.s.je?v.s.b.onended=function(){v.update()}:"{"==this.s.je.charAt(0)?this.s.b.onended=function(){v.ve(v.s.je,"$fwd")}:this.s.b.loop=!0;for(h=0;h<this.s.src.length;h++)e=document.createElement("source"),e.setAttribute("src",this.hc(this.s.src[h])),this.s.b.appendChild(e);e=this.Fb("_videopanorama");0<e.length?e[0].b=this.s.b:this.Gl("_videopanorama",this.s.b);this.s.b.play()}else"{"==this.s.je.charAt(0)&&v.ve(v.s.je,"$fwd");this.$j();
this.C.Id||this.$l();this.update();this.Od&&(this.ka&&this.ka.ggViewerInit&&this.ka.ggViewerInit(),this.ja("configloaded",{}),this.wb.enabled&&0==this.gb&&this.Y&&(this.Lc(9),this.pan.c=this.rc.pan,this.i.c=this.rc.i,this.f.c=this.rc.f,this.Ka=this.rc.Cb,this.w=this.bg(!1),this.pan.c=this.w.W[0].value,this.i.c=this.w.W[1].value,this.f.c=this.w.W[2].value,3==this.w.W[3].sb&&this.Lc(this.w.W[3].value),this.Ib=this.w.ab,this.C.Oh=this.B.yb,this.C.vi=this.B.jd,this.C.Hh=this.B.re,this.l.active=!1,this.l.vh=
!0));this.Od=!1;this.Pc()};b.prototype.rj=function(a,b){0<a.length&&(".xml"==a.substr(a.length-4)||".swf"==a.substr(a.length-4)||"{"==a.charAt(0)?this.ve(this.hc(a),b):window.open(this.hc(a),b))};b.prototype.Ep=function(){this.bf=this.isLoaded=!1;this.checkLoaded=this.Ob=[];this.Wh=0;this.ka&&this.ka.ggReLoaded&&this.ka.ggReLoaded();this.ja("beforechangenode",{})};b.prototype.ve=function(a,b){if(""!=a&&"{}"!=a){this.Ep();this.ia&&this.ia.hotspotProxyOut&&this.ia.hotspotProxyOut(this.Ca.id);".swf"==
a.substr(a.length-4)&&(a=a.substr(0,a.length-4)+".xml");var c="",e=null;"object"===typeof b&&null!==b?e=b:b&&(c=b.toString());c=c.replace("$cur",this.pan.c+"/"+this.i.c+"/"+this.f.c+"//"+this.ra());c=c.replace("$(cur)",this.pan.c+"/"+this.i.c+"/"+this.f.c+"//"+this.ra());c=c.replace("$fwd","N"+this.me()+"/"+this.i.c+"/"+this.f.c+"//"+this.ra());c=c.replace("$(fwd)","N"+this.me()+"/"+this.i.c+"/"+this.f.c+"//"+this.ra());c=c.replace("$bwd","S"+this.me()+"/"+this.i.c+"/"+this.f.c+"//"+this.ra());c=
c.replace("$(bwd)","S"+this.me()+"/"+this.i.c+"/"+this.f.c+"//"+this.ra());c=c.replace("$ap",String(this.pan.c));c=c.replace("$(ap)",String(this.pan.c));c=c.replace("$an",String(this.me()));c=c.replace("$(an)",String(this.me()));c=c.replace("$at",String(this.i.c));c=c.replace("$(at)",String(this.i.c));c=c.replace("$af",String(this.f.c));c=c.replace("$(af)",String(this.f.c));c=c.replace("$ar",String(this.ra()));c=c.replace("$(ar)",String(this.ra()));if(""!=c){var l=c.split("/");3<l.length&&""!=l[3]&&
(this.startNode=l[3])}e=null!==e?e:c;this.ta();if("{"==a.charAt(0)){var l=a.substr(1,a.length-2),g=this.qh[l];g&&(l=g);var g=this.C,k=this.H;if(this.Fe[l]){this.kh=!0;if(this.C.enabled&&this.Y&&this.C.Yb){g.Ge||g.Id||(g.Oh=this.B.yb,g.vi=this.B.jd,g.Hh=this.B.re,this.Jg(!0),this.Kg(!0),this.Ig(!0));var h;"wipeleftright"==g.type?h=1:"wiperightleft"==g.type?h=2:"wipetopbottom"==g.type?h=3:"wipebottomtop"==g.type?h=4:"wiperandom"==g.type&&(h=Math.ceil(4*Math.random()));g.Pi=h;k.bindFramebuffer(k.FRAMEBUFFER,
g.Yb);k.viewport(0,0,g.Yb.width,g.Yb.height);k.clear(k.COLOR_BUFFER_BIT|k.DEPTH_BUFFER_BIT);g.Sg=!0;this.Vg();g.Sg=!1;k.bindFramebuffer(k.FRAMEBUFFER,null);k.viewport(0,0,this.pb.width,this.pb.height);h=new Date;this.Ca!=this.nb?(g.eh=this.Ca.mc/this.o.width,g.fh=1-this.Ca.Jb/this.o.height):(g.eh=.5,g.fh=.5);1!=g.Oa&&2!=g.Oa?(g.Jj=h.getTime(),g.Ge=!0):(g.vm=h.getTime(),g.Id=!0,g.vb=Math.sin(this.Rb()/2*Math.PI/180)/Math.sin(g.Lf/2*Math.PI/180),g.vb=Math.max(g.vb,1),g.um=1/g.ae*g.vb*.3)}this.vj(this.Fe[l],
e);this.Fi(a);g.enabled&&this.Y&&0!=g.Zb&&(g.Ce=this.zh(),g.De=this.aj(),g.Hd=this.Rb(),g.md=this.ra(),1==g.Zb||3==g.Zb?this.Mg(g.Lf):2==g.Zb?this.Mg(this.cg()+(this.cg()-g.Lf)):4==g.Zb&&(this.Lc(this.rc.Cb),this.xf(this.rc.pan),this.yf(this.rc.i),this.Mg(this.rc.f)),g.Mf||1==g.Oa||2==g.Oa||(4==g.Zb?(this.w=this.bg(!0,g.Ce,g.De,g.Hd),this.Ib=this.w.ab,this.l.active=!0,this.wb.Ed=!0):this.moveTo(g.Ce,g.De,g.Hd,g.ae,0,g.md)));this.ga&&this.ga.openNext(a,c);this.C.Id||this.C.Ge||(this.fa&&this.Li(),
this.kh=!1)}else{this.Jc("invalid node id: "+l);return}}else this.El(a,null,e);this.ja("changenode",{});this.update(5)}};b.prototype.Kn=function(){return this.bf?this.ef?this.Ma.slice(0):[""]:[]};b.prototype.Xf=function(a){var b,c;c=[];c.title="";c.description="";c.author="";c.datetime="";c.copyright="";c.source="";c.information="";c.comment="";c.latitude=0;c.longitude=0;c.customnodeid="";c.tags=[];if(a&&((b=a.getAttributeNode("title"))&&(c.title=b.nodeValue.toString()),(b=a.getAttributeNode("description"))&&
(c.description=b.nodeValue.toString()),(b=a.getAttributeNode("author"))&&(c.author=b.nodeValue.toString()),(b=a.getAttributeNode("datetime"))&&(c.datetime=b.nodeValue.toString()),(b=a.getAttributeNode("copyright"))&&(c.copyright=b.nodeValue.toString()),(b=a.getAttributeNode("source"))&&(c.source=b.nodeValue.toString()),(b=a.getAttributeNode("info"))&&(c.information=b.nodeValue.toString()),(b=a.getAttributeNode("comment"))&&(c.comment=b.nodeValue.toString()),(b=a.getAttributeNode("latitude"))&&(c.latitude=
Number(b.nodeValue)),(b=a.getAttributeNode("longitude"))&&(c.longitude=Number(b.nodeValue)),(b=a.getAttributeNode("customnodeid"))&&(c.customnodeid=b.nodeValue.toString()),b=a.getAttributeNode("tags"))){a=b.nodeValue.toString().split("|");for(b=0;b<a.length;b++)""==a[b]&&(a.splice(b,1),b--);c.tags=a}return c};b.prototype.hn=function(a){for(var b={},c=a.firstChild;c;){if("mapcoords"==c.nodeName){var e={x:0,y:0};a=c.getAttributeNode("x");e.x=Number(a.nodeValue);a=c.getAttributeNode("y");e.y=Number(a.nodeValue);
a=c.getAttributeNode("mapid");b[a.nodeValue.toString()]=e}c=c.nextSibling}return b};b.prototype.jn=function(a){for(var b={},c=a.firstChild;c;){if("mapcoords"==c.nodeName){var e={x:0,y:0};a=c.getAttributeNode("x_floorplan_percent");e.x=Number(a.nodeValue);a=c.getAttributeNode("y_floorplan_percent");e.y=Number(a.nodeValue);a=c.getAttributeNode("mapid");b[a.nodeValue.toString()]=e}c=c.nextSibling}return b};b.prototype.Zi=function(a){return a?this.ui[a]?this.ui[a]:this.Xf():this.Jf};b.prototype.Ln=function(a){a=
this.Zi(a);var b=[];""!=a.latitude&&0!=a.latitude&&0!=a.longitude&&(b.push(a.latitude),b.push(a.longitude));return b};b.prototype.On=function(a){return this.Zi(a).title};b.prototype.Ze=function(a,b){var c;for(c=0;c<this.w.W.length;c++)if(this.w.W[c].time==a&&this.w.W[c].sb==b)return this.w.W[c];return!1};b.prototype.Jn=function(a){var b,c=1E5,e=a,h=!1;for(b=0;b<this.w.W.length;b++)this.w.W[b].sb==a.sb&&this.w.W[b].time>a.time&&this.w.W[b].time<c&&(e=this.w.W[b],c=e.time,h=!0);return h?e:!1};b.prototype.qn=
function(a){for(var b=[],c=0;c<this.w.W.length;c++)if(this.w.W[c].time<=a&&4==this.w.W[c].sb){for(var e=!1,h=0;h<b.length;h++)if(b[h].hh==this.w.W[c].hh){b[h].time<this.w.W[c].time?b.splice(h,1):e=!0;break}e||b.push(this.w.W[c])}return b};b.prototype.bg=function(a,b,c,e){for(var h=0;h<this.xa.length;h++)if(this.xa[h].ab&&0==this.xa[h].ab.indexOf("__FlyIn"))return this.xa[h];h=new p.hl;h.ab="__FlyIn";h.Bf=this.pan.c;h.Og=this.i.c;h.Gd=this.f.c;h.Ng=this.Ka;h.md=this.Vh;a?(h.We=!1,h.he=!1,h.speed=this.C.ae,
h.Oc=b,h.Yd=c,h.Cf=e):(h.We=!0,h.he=!0,h.speed=this.wb.speed,h.Oc=this.pan.Qa,h.Yd=this.i.Qa,h.Cf=this.f.Qa);return this.Ck(h)};b.prototype.Ck=function(a){var b=new p.rl;b.ab=a.ab;b.Me="";b.W=[];for(var c=a.Ng!=a.md&&-1!=a.md;-180>a.Oc;)a.Oc=a.Oc+360;for(;180<a.Oc;)a.Oc=a.Oc-360;var e=a.Oc-a.Bf;if(360==this.pan.max-this.pan.min){for(;-180>e;)e+=360;for(;180<e;)e-=360}var h=a.Yd-a.Og,g=a.Cf-a.Gd,k=Math.round(Math.sqrt(e*e+h*h+g*g)/a.speed*.33);c&&(k=Math.max(10,k));b.length=k;var t,m;a.ie&&(t=Math.ceil(.7*
k),t=Math.min(15,t),t=Math.max(5,t),b.length=k+t,m=.33*t);var x=a.Cf,v=k,q=0,u=k-1;if(c){var r=a.Gd,w;4==a.md?w=120:w=this.dg(a.md);var z=a.Cf,g=z-a.Gd,n=new p.qc(0,a.Gd),C=new p.qc(k,z),A=new p.qc,y=new p.qc;y.Ya(k/3,a.Gd+g/3);A.Ya(2*k/3,z-g/3);if(r>w)for(;q<=k&&r>w;)r=new p.qc,r.Bi(n,C,y,A,q),r=r.y,q++;else q=1;q>=.8*k&&(v=q=Math.round(.8*k));0==q&&(q=1);var B;4==a.Ng?B=120:B=this.dg(a.Ng);w=a.Cf;if(w>B)for(;u>q&&w>B;)r=new p.qc,r.Bi(n,C,y,A,u),w=r.y,u--}n=new p.Dc;n.time=0;n.sb=0;n.value=a.Bf;
n.type=1;n.ee=k/3;n.fe=a.We?a.Bf:a.Bf+e/3;b.W.push(n);n=new p.Dc;n.time=0;n.sb=1;n.value=a.Og;n.type=1;n.ee=k/3;n.fe=a.We?a.Og:a.Og+h/3;b.W.push(n);n=new p.Dc;n.time=0;n.sb=2;n.value=a.Gd;n.type=1;n.ee=k/3;n.fe=a.We?a.Gd:a.Gd+g/3;b.W.push(n);n=new p.Dc;n.time=0;n.sb=3;n.value=a.Ng;n.type=0;n.ub=0;b.W.push(n);c&&(n=new p.Dc,n.time=q,n.sb=3,n.value=a.md,n.type=0,n.ub=u-q,b.W.push(n));n=new p.Dc;n.time=k;n.sb=0;n.value=a.Bf+e;n.type=1;n.de=2*k/3;a.he&&!a.ie?n.Tc=n.value:n.Tc=n.value-e/3;a.ie&&(n.ee=
k+m,n.fe=n.value+m/k*e);b.W.push(n);n=new p.Dc;n.time=k;n.sb=1;n.value=a.Yd;n.type=1;n.de=2*k/3;a.he&&!a.ie?n.Tc=a.Yd:n.Tc=a.Yd-h/3;a.ie&&(n.ee=k+m,n.fe=n.value+m/k*h);b.W.push(n);n=new p.Dc;n.time=v;n.sb=2;n.value=x;n.type=1;n.de=2*v/3;a.he?n.Tc=x:n.Tc=x-g/3;b.W.push(n);a.ie&&(n=new p.Dc,n.time=k+t,n.sb=0,n.value=a.Oc,n.type=1,n.de=k+t-m,n.Tc=a.Oc,b.W.push(n),n=new p.Dc,n.time=k+t,n.sb=1,n.value=a.Yd,n.type=1,n.de=k+t-m,n.Tc=a.Yd,b.W.push(n));this.xa.push(b);return b};b.prototype.bq=function(){this.s.b&&
this.s.b.play()};b.prototype.cq=function(){this.s.b&&(this.s.b.pause(),this.s.b.currentTime=0)};b.prototype.aq=function(){this.s.b&&this.s.b.pause()};b.prototype.sp=function(a){this.s.b&&(0>a&&(a=0),a>this.s.b.duration&&(a=this.s.b.duration-.1),this.s.b.currentTime=a,this.update())};b.prototype.bo=function(){return this.s.b?this.s.b.currentTime:0};b.prototype.ao=function(){if(this.s.b)return this.s.b};b.prototype.rp=function(a){if(this.s.b){var b=!this.s.b.paused&&!this.s.b.ended,c=this.s.b.currentTime;
this.s.b.pause();isNaN(parseInt(a,10))?this.s.b.src=String(a):this.s.b.src=this.s.src[parseInt(a,10)];b&&(this.s.b.onloadedmetadata=function(){this.currentTime=c;this.play();this.onloadedmetadata=null});this.s.b.currentTime=c}};b.prototype.fn=function(){this.vl=!0};return b}();p.a=h})(ggP2VR||(ggP2VR={}));window.ggHasHtml5Css3D=G;window.ggHasWebGL=N;window.pano2vrPlayer=ggP2VR.a;ggP2VR.a.prototype.getVersion=ggP2VR.a.prototype.Pk;ggP2VR.a.prototype.readConfigString=ggP2VR.a.prototype.wj;
ggP2VR.a.prototype.readConfigUrl=ggP2VR.a.prototype.El;ggP2VR.a.prototype.readConfigUrlAsync=ggP2VR.a.prototype.Ro;ggP2VR.a.prototype.readConfigXml=ggP2VR.a.prototype.Fl;ggP2VR.a.prototype.openUrl=ggP2VR.a.prototype.rj;ggP2VR.a.prototype.openNext=ggP2VR.a.prototype.ve;ggP2VR.a.prototype.setMargins=ggP2VR.a.prototype.cp;ggP2VR.a.prototype.addListener=ggP2VR.a.prototype.addListener;ggP2VR.a.prototype.on=ggP2VR.a.prototype.addListener;ggP2VR.a.prototype.removeEventListener=ggP2VR.a.prototype.removeEventListener;
ggP2VR.a.prototype.detectBrowser=ggP2VR.a.prototype.rk;ggP2VR.a.prototype.initWebGL=ggP2VR.a.prototype.Gc;ggP2VR.a.prototype.getPercentLoaded=ggP2VR.a.prototype.Rn;ggP2VR.a.prototype.setBasePath=ggP2VR.a.prototype.Xo;ggP2VR.a.prototype.getBasePath=ggP2VR.a.prototype.rn;ggP2VR.a.prototype.setViewerSize=ggP2VR.a.prototype.Tl;ggP2VR.a.prototype.getViewerSize=ggP2VR.a.prototype.fo;ggP2VR.a.prototype.setSkinObject=ggP2VR.a.prototype.np;ggP2VR.a.prototype.changeViewMode=ggP2VR.a.prototype.Vm;
ggP2VR.a.prototype.getViewMode=ggP2VR.a.prototype.co;ggP2VR.a.prototype.changePolygonMode=ggP2VR.a.prototype.hk;ggP2VR.a.prototype.setPolygonMode=ggP2VR.a.prototype.hk;ggP2VR.a.prototype.getPolygonMode=ggP2VR.a.prototype.Tn;ggP2VR.a.prototype.showOnePolyHotspot=ggP2VR.a.prototype.Ul;ggP2VR.a.prototype.hideOnePolyHotspot=ggP2VR.a.prototype.Tk;ggP2VR.a.prototype.changePolyHotspotColor=ggP2VR.a.prototype.Tm;ggP2VR.a.prototype.toggleOnePolyHotspot=ggP2VR.a.prototype.Lp;
ggP2VR.a.prototype.changeViewState=ggP2VR.a.prototype.Wm;ggP2VR.a.prototype.getViewState=ggP2VR.a.prototype.eo;ggP2VR.a.prototype.setRenderFlags=ggP2VR.a.prototype.gp;ggP2VR.a.prototype.getRenderFlags=ggP2VR.a.prototype.Wn;ggP2VR.a.prototype.setMaxTileCount=ggP2VR.a.prototype.Sl;ggP2VR.a.prototype.getVFov=ggP2VR.a.prototype.Rb;ggP2VR.a.prototype.setVFov=ggP2VR.a.prototype.Mg;ggP2VR.a.prototype.getHFov=ggP2VR.a.prototype.vn;ggP2VR.a.prototype.updatePanorama=ggP2VR.a.prototype.Vg;
ggP2VR.a.prototype.isTouching=ggP2VR.a.prototype.fl;ggP2VR.a.prototype.getIsMobile=ggP2VR.a.prototype.An;ggP2VR.a.prototype.setIsMobile=ggP2VR.a.prototype.ap;ggP2VR.a.prototype.getIsTour=ggP2VR.a.prototype.Bn;ggP2VR.a.prototype.getIsAutorotating=ggP2VR.a.prototype.xn;ggP2VR.a.prototype.getIsLoading=ggP2VR.a.prototype.zn;ggP2VR.a.prototype.getIsLoaded=ggP2VR.a.prototype.yh;ggP2VR.a.prototype.getIsTileLoading=ggP2VR.a.prototype.Gk;ggP2VR.a.prototype.getLastActivity=ggP2VR.a.prototype.Cn;
ggP2VR.a.prototype.getPan=ggP2VR.a.prototype.zh;ggP2VR.a.prototype.getPanNorth=ggP2VR.a.prototype.me;ggP2VR.a.prototype.getPanDest=ggP2VR.a.prototype.Qn;ggP2VR.a.prototype.getPanN=ggP2VR.a.prototype.Jk;ggP2VR.a.prototype.setPan=ggP2VR.a.prototype.xf;ggP2VR.a.prototype.setPanNorth=ggP2VR.a.prototype.Dj;ggP2VR.a.prototype.changePan=ggP2VR.a.prototype.gk;ggP2VR.a.prototype.changePanLog=ggP2VR.a.prototype.Sm;ggP2VR.a.prototype.getTilt=ggP2VR.a.prototype.aj;ggP2VR.a.prototype.getTiltDest=ggP2VR.a.prototype.Yn;
ggP2VR.a.prototype.setTilt=ggP2VR.a.prototype.yf;ggP2VR.a.prototype.changeTilt=ggP2VR.a.prototype.ik;ggP2VR.a.prototype.changeTiltLog=ggP2VR.a.prototype.Um;ggP2VR.a.prototype.getFov=ggP2VR.a.prototype.cg;ggP2VR.a.prototype.getFovDest=ggP2VR.a.prototype.un;ggP2VR.a.prototype.setFov=ggP2VR.a.prototype.vf;ggP2VR.a.prototype.changeFov=ggP2VR.a.prototype.fk;ggP2VR.a.prototype.changeFovLog=ggP2VR.a.prototype.Gi;ggP2VR.a.prototype.getRoll=ggP2VR.a.prototype.Xn;ggP2VR.a.prototype.setRoll=ggP2VR.a.prototype.Ej;
ggP2VR.a.prototype.setPanTilt=ggP2VR.a.prototype.fp;ggP2VR.a.prototype.setPanTiltFov=ggP2VR.a.prototype.ci;ggP2VR.a.prototype.setDefaultView=ggP2VR.a.prototype.Zo;ggP2VR.a.prototype.setLocked=ggP2VR.a.prototype.bp;ggP2VR.a.prototype.setLockedMouse=ggP2VR.a.prototype.Jg;ggP2VR.a.prototype.setLockedKeyboard=ggP2VR.a.prototype.Ig;ggP2VR.a.prototype.getLockedKeyboard=ggP2VR.a.prototype.En;ggP2VR.a.prototype.setLockedWheel=ggP2VR.a.prototype.Kg;ggP2VR.a.prototype.moveTo=ggP2VR.a.prototype.moveTo;
ggP2VR.a.prototype.moveToEx=ggP2VR.a.prototype.Qh;ggP2VR.a.prototype.moveToDefaultView=ggP2VR.a.prototype.uo;ggP2VR.a.prototype.moveToDefaultViewEx=ggP2VR.a.prototype.vo;ggP2VR.a.prototype.addHotspotElements=ggP2VR.a.prototype.$j;ggP2VR.a.prototype.playSound=ggP2VR.a.prototype.xe;ggP2VR.a.prototype.playPauseSound=ggP2VR.a.prototype.Cl;ggP2VR.a.prototype.playStopSound=ggP2VR.a.prototype.Po;ggP2VR.a.prototype.pauseSound=ggP2VR.a.prototype.sj;ggP2VR.a.prototype.activateSound=ggP2VR.a.prototype.Gm;
ggP2VR.a.prototype.soundGetTime=ggP2VR.a.prototype.yp;ggP2VR.a.prototype.soundSetTime=ggP2VR.a.prototype.zp;ggP2VR.a.prototype.setMediaVisibility=ggP2VR.a.prototype.ep;ggP2VR.a.prototype.isPlaying=ggP2VR.a.prototype.ic;ggP2VR.a.prototype.stopSound=ggP2VR.a.prototype.Lj;ggP2VR.a.prototype.setVolume=ggP2VR.a.prototype.tp;ggP2VR.a.prototype.changeVolume=ggP2VR.a.prototype.Xm;ggP2VR.a.prototype.removeHotspots=ggP2VR.a.prototype.Kl;ggP2VR.a.prototype.addHotspot=ggP2VR.a.prototype.Hm;
ggP2VR.a.prototype.updateHotspot=ggP2VR.a.prototype.Tp;ggP2VR.a.prototype.removeHotspot=ggP2VR.a.prototype.So;ggP2VR.a.prototype.setActiveHotspot=ggP2VR.a.prototype.uf;ggP2VR.a.prototype.getPointHotspotIds=ggP2VR.a.prototype.Sn;ggP2VR.a.prototype.getHotspot=ggP2VR.a.prototype.wn;ggP2VR.a.prototype.setFullscreen=ggP2VR.a.prototype.wf;ggP2VR.a.prototype.toggleFullscreen=ggP2VR.a.prototype.ni;ggP2VR.a.prototype.enterFullscreen=ggP2VR.a.prototype.gn;ggP2VR.a.prototype.exitFullscreen=ggP2VR.a.prototype.exitFullscreen;
ggP2VR.a.prototype.getIsFullscreen=ggP2VR.a.prototype.yn;ggP2VR.a.prototype.startAutorotate=ggP2VR.a.prototype.Dp;ggP2VR.a.prototype.stopAutorotate=ggP2VR.a.prototype.Gp;ggP2VR.a.prototype.toggleAutorotate=ggP2VR.a.prototype.Kp;ggP2VR.a.prototype.startAnimation=ggP2VR.a.prototype.Cp;ggP2VR.a.prototype.createLayers=ggP2VR.a.prototype.lk;ggP2VR.a.prototype.removePanorama=ggP2VR.a.prototype.$h;ggP2VR.a.prototype.getScreenResolution=ggP2VR.a.prototype.Mk;ggP2VR.a.prototype.getMaxScreenResolution=ggP2VR.a.prototype.Hk;
ggP2VR.a.prototype.getNodeIds=ggP2VR.a.prototype.Kn;ggP2VR.a.prototype.getNodeUserdata=ggP2VR.a.prototype.Zi;ggP2VR.a.prototype.getNodeLatLng=ggP2VR.a.prototype.Ln;ggP2VR.a.prototype.getNodeTitle=ggP2VR.a.prototype.On;ggP2VR.a.prototype.getCurrentNode=ggP2VR.a.prototype.Fk;ggP2VR.a.prototype.getNextNode=ggP2VR.a.prototype.Ik;ggP2VR.a.prototype.getPrevNode=ggP2VR.a.prototype.Vn;ggP2VR.a.prototype.getLastVisitedNode=ggP2VR.a.prototype.Dn;ggP2VR.a.prototype.getCurrentPointHotspots=ggP2VR.a.prototype.tn;
ggP2VR.a.prototype.getPositionAngles=ggP2VR.a.prototype.Un;ggP2VR.a.prototype.getPositionRawAngles=ggP2VR.a.prototype.Kk;ggP2VR.a.prototype.nodeVisited=ggP2VR.a.prototype.Ao;ggP2VR.a.prototype.setElementIdPrefix=ggP2VR.a.prototype.$o;ggP2VR.a.prototype.videoPanoPlay=ggP2VR.a.prototype.bq;ggP2VR.a.prototype.videoPanoStop=ggP2VR.a.prototype.cq;ggP2VR.a.prototype.videoPanoPause=ggP2VR.a.prototype.aq;ggP2VR.a.prototype.getVideoPanoTime=ggP2VR.a.prototype.bo;ggP2VR.a.prototype.setVideoPanoTime=ggP2VR.a.prototype.sp;
ggP2VR.a.prototype.getVideoPanoObject=ggP2VR.a.prototype.ao;ggP2VR.a.prototype.setVideoPanoSource=ggP2VR.a.prototype.rp;ggP2VR.a.prototype.getMediaObject=ggP2VR.a.prototype.In;ggP2VR.a.prototype.registerVideoElement=ggP2VR.a.prototype.Gl;ggP2VR.a.prototype.disableSoundLoading=ggP2VR.a.prototype.fn;ggP2VR.a.prototype.setCrossOrigin=ggP2VR.a.prototype.Yo;ggP2VR.a.prototype.setProjection=ggP2VR.a.prototype.Lc;ggP2VR.a.prototype.getProjection=ggP2VR.a.prototype.ra;
ggP2VR.a.prototype.changeProjection=ggP2VR.a.prototype.Hi;ggP2VR.a.prototype.changeProjectionEx=ggP2VR.a.prototype.Hi;ggP2VR.a.prototype.changeLensflares=ggP2VR.a.prototype.Rm;ggP2VR.a.prototype.setTransition=ggP2VR.a.prototype.pp;ggP2VR.a.prototype.getMapType=ggP2VR.a.prototype.Hn;ggP2VR.a.prototype.getMapDetails=ggP2VR.a.prototype.Gn;ggP2VR.a.prototype.getNodeMapCoords=ggP2VR.a.prototype.Mn;ggP2VR.a.prototype.getNodeMapCoordsInPercent=ggP2VR.a.prototype.Nn;
ggP2VR.a.prototype.getMapContainingNode=ggP2VR.a.prototype.Fn;ggP2VR.a.prototype.addVariable=ggP2VR.a.prototype.Im;ggP2VR.a.prototype.setVariableValue=ggP2VR.a.prototype.ei;ggP2VR.a.prototype.getVariableValue=ggP2VR.a.prototype.$n;ggP2VR.a.prototype.setUseGyro=ggP2VR.a.prototype.qp;ggP2VR.a.prototype.getUseGyro=ggP2VR.a.prototype.Zn;ggP2VR.a.prototype.getOS=ggP2VR.a.prototype.Pn;ggP2VR.a.prototype.getBrowser=ggP2VR.a.prototype.sn;
