//////////////////////////////////////////////////////////////////////
// Pano2VR 6.0 beta/16757 HTML5/CSS3 & WebGL Panorama Player        //
// License: Pablo Weisbek                                           //
// (c) 2018, Garden Gnome Software, http://ggnome.com               //
//////////////////////////////////////////////////////////////////////

function G(){var p="perspective",e=["Webkit","Moz","O","ms","Ms"],k;for(k=0;k<e.length;k++)"undefined"!==typeof document.documentElement.style[e[k]+"Perspective"]&&(p=e[k]+"Perspective");"undefined"!==typeof document.documentElement.style[p]?"webkitPerspective"in document.documentElement.style?(p=document.createElement("style"),e=document.createElement("div"),k=document.head||document.getElementsByTagName("head")[0],p.textContent="@media (-webkit-transform-3d) {#ggswhtml5{height:5px}}",k.appendChild(p),
e.id="ggswhtml5",document.documentElement.appendChild(e),k=5===e.offsetHeight,p.parentNode.removeChild(p),e.parentNode.removeChild(e)):k=!0:k=!1;return k}function N(){var p;if(p=!!window.WebGLRenderingContext)try{var e=document.createElement("canvas");e.width=100;e.height=100;var k=e.getContext("webgl");k||(k=e.getContext("experimental-webgl"));p=!!k}catch(b){p=!1}return p}
var __extends=this&&this.__extends||function(p,e){function k(){this.constructor=p}for(var b in e)e.hasOwnProperty(b)&&(p[b]=e[b]);p.prototype=null===e?Object.create(e):(k.prototype=e.prototype,new k)},ggP2VR;
(function(p){var e=function(){function b(a){this.g=null;this.Zf=this.Jk=this.lb=!1;this.Cb=this.Ka=this.Ba=0;this.f=70;this.Sa=0;this.autoplay=this.dg=!1;this.id="";this.i=this.pan=0;this.g=a;this.bd=this.Fc=100;this.rd=1}b.prototype.Ib=function(a){var d;if(d=a.getAttributeNode("id"))this.id=d.nodeValue.toString();if(d=a.getAttributeNode("pan"))this.pan=Number(d.nodeValue);if(d=a.getAttributeNode("tilt"))this.i=Number(d.nodeValue)};b.prototype.im=function(a){var d="",c=this.g,b=!0;if(c.cf){var h=
new p.ta(0,0,-100);h.Ba(-this.i*Math.PI/180);h.Ka(this.pan*Math.PI/180);h.Ka(-c.pan.c*Math.PI/180);h.Ba(c.i.c*Math.PI/180);h.Cb(c.O.c*Math.PI/180);.01<=h.z&&(b=!1)}c.yc&&(d+="perspective("+a+"px) ");d=d+("translate3d(0px,0px,"+a+"px) ")+("rotateZ("+c.O.c.toFixed(10)+"deg) ");d+="rotateX("+c.i.c.toFixed(10)+"deg) ";d+="rotateY("+(-c.pan.c).toFixed(10)+"deg) ";d+="rotateY("+this.pan.toFixed(10)+"deg) ";d+="rotateX("+(-this.i).toFixed(10)+"deg) ";a=1E4;var h=this.b.videoWidth,l=this.b.videoHeight;if(0==
h||0==l)h=640,l=480;0<this.Fc&&(h=this.Fc);0<this.bd&&(l=this.bd);0<h&&0<l&&(this.b.width=h,this.b.height=l,this.b.style.width=h+"px",this.b.style.height=l+"px");0<this.f&&(a=h/(2*Math.tan(this.f/2*Math.PI/180)));d+="translate3d(0px,0px,"+(-a).toFixed(10)+"px) ";d+="rotateZ("+this.Cb.toFixed(10)+"deg) ";d+="rotateY("+(-this.Ka).toFixed(10)+"deg) ";d+="rotateX("+this.Ba.toFixed(10)+"deg) ";this.rd&&1!=this.rd&&(d+="scaleY("+this.rd+") ");d+="translate3d("+-h/2+"px,"+-l/2+"px,0px) ";this.b.style[c.Va+
"Origin"]="0% 0%";this.lb&&(d="",1==this.Sa&&(d+="scale("+Math.min(c.m.width/h,c.m.height/l)+") "),d+="translate3d("+-h/2+"px,"+-l/2+"px,0px) ");this.co!=d&&(this.co=d,this.b.style[c.Va]=d,this.b.style.visibility=b?"visible":"hidden",this.Zf&&this.Jk==this.lb&&(this.b.style[c.$c]="all 0s linear 0s"),this.Jk=this.lb)};b.prototype.Pl=function(){this.b&&(this.b.style.visibility="hidden")};b.prototype.Ie=function(){var a=this.g;a.Y?(this.b.style.left=a.m.width/2+"px",this.b.style.top=a.m.height/2+"px"):
(this.b.style.left=a.margin.left+a.m.width/2+"px",this.b.style.top=a.margin.top+a.m.height/2+"px")};return b}();p.bq=e;var k=function(b){function a(a){b.call(this,a);this.Pj=this.mj=this.oh=this.zf=this.zj=this.ha=!1;this.If=this.Eb=null;this.xe=this.Lg=0;this.bi=this.lj=this.ze=!1;this.url=[];this.loop=0;this.level=1;this.$b=0;this.mode=1;this.ph=10;this.yf=this.ob=0;this.ja=1;this.Rc=this.Bc=this.Ac=this.Qc=0}__extends(a,b);a.prototype.Sl=function(){this.ha&&this.bi?this.bi=!1:(!this.ha&&this.g.cf&&
(this.Bd(),this.addElement()),0==this.loop?this.ha?(this.Eb=null,this.Uc()):this.b.play():0<this.Xc?(this.Xc--,this.ha||(this.b.currentTime=0),this.oh&&(this.ad&&0==this.ad.gain.value||0==this.sc.gain.value&&0==this.vc.gain.value&&0==this.tc.gain.value&&0==this.uc.gain.value)||(this.ha?(this.Eb=null,this.Uc()):this.b.play())):this.ha&&(this.Eb=null,this.ze=!1))};a.prototype.ah=function(){this.Pj=!1;var a=this.g.za;a&&(this.ha||(this.source=a.createMediaElementSource(this.b)),2==this.mode||3==this.mode||
5==this.mode?(this.Re=a.createChannelSplitter(2),this.sc=a.createGain(),this.tc=a.createGain(),this.uc=a.createGain(),this.vc=a.createGain(),this.Lf=a.createChannelMerger(2),this.ha||this.source.connect(this.Re),this.Re.connect(this.sc,0),this.Re.connect(this.tc,0),this.Re.connect(this.uc,1),this.Re.connect(this.vc,1),this.sc.connect(this.Lf,0,0),this.tc.connect(this.Lf,0,1),this.uc.connect(this.Lf,0,0),this.vc.connect(this.Lf,0,1),this.Lf.connect(a.destination)):(this.ad=a.createGain(),this.ha||
this.source.connect(this.ad),this.ad.connect(a.destination)))};a.prototype.Fg=function(){var a=this.g.za;this.lb||this.mj||(this.sc.gain.setValueAtTime(this.Qc,a.currentTime),this.vc.gain.setValueAtTime(this.Rc,a.currentTime),this.tc.gain.setValueAtTime(this.Ac,a.currentTime),this.uc.gain.setValueAtTime(this.Bc,a.currentTime))};a.prototype.ji=function(){if(!this.Pj){var a=this.g,c=this.g.za;if(this.b||this.ha){var b,h=this.pan-a.pan.c;for(b=this.i-a.i.c;-180>h;)h+=360;for(;180<h;)h-=360;var l=this.$b,
g=this.ph;0==g&&(g=.01);0>g&&(g=a.f.c);this.Lb||(this.Lb=new p.ta,this.Lb.pk(this.pan,this.i));0!=this.mode&&1!=this.mode||!c||this.ad&&this.ad.gain.setValueAtTime(this.level*a.V*this.ja,c.currentTime);if(2==this.mode&&c){var t=.5*Math.cos(h*Math.PI/180)+.5;this.Qc=Math.sqrt(t)*this.ja*this.level*a.V;this.Rc=Math.sqrt(t)*this.ja*this.level*a.V;this.Ac=Math.sqrt(1-t)*this.ja*this.level*a.V;this.Bc=Math.sqrt(1-t)*this.ja*this.level*a.V;this.Fg()}if(3==this.mode){0>h?h<-this.ob?h+=this.ob:h=0:h=h>this.ob?
h-this.ob:0;var m=this.level;b=Math.abs(b);b=b<this.yf?0:b-this.yf;var k=1-b/g;if(Math.abs(h)>g||0>k)t=m*l*a.V,c?(this.Qc=t*this.ja,this.Rc=t*this.ja,this.Bc=this.Ac=0,this.Fg()):this.b.volume=m*l*a.V;else if(t=1-Math.abs(h/g),c){var e=m*(l+(1-l)*k*t)*a.V,t=m*l*a.V;0<=h?(this.Qc=e*this.ja,this.Rc=t*this.ja):(this.Qc=t*this.ja,this.Rc=e*this.ja);2*Math.abs(h)<g?(t=1-Math.abs(2*h)/g,e=m*(l+(1-l)*k*t)*a.V,t=.5*m*(1-l)*k*(1-t)*a.V,0<=h?(this.Rc=e*this.ja,this.Bc=t*this.ja,this.Ac=0):(this.Qc=e*this.ja,
this.Ac=t*this.ja,this.Bc=0)):(t=1-(Math.abs(2*h)-g)/g,e=.5*m*(1-l)*k*t*a.V,0<=h?(this.Bc=e*this.ja,this.Ac=0):(this.Ac=e*this.ja,this.Bc=0));this.Fg()}else this.b.volume=m*(l+(1-l)*k*t)*a.V}4==this.mode&&(Math.abs(h)<this.ob&&Math.abs(b)<this.yf?this.zf||(this.zf=!0,this.Xc=this.loop-1,this.ha?this.ze||this.Uc():this.b.play()):this.zf=!1);5==this.mode&&(b=180*Math.acos(a.Fi.Rh(this.Lb))/Math.PI,b<this.ob?c?(this.Qc=this.level*a.V*this.ja,this.Rc=this.level*a.V*this.ja,this.Bc=this.Ac=0,this.Fg()):
this.b.volume=this.level*a.V:c?(b<this.ob+g?(0>h?h=h>-this.ob?0:h+this.ob:h=h<this.ob?0:h-this.ob,e=1-Math.max(b-this.ob,0)/g,t=Math.max(1-Math.abs(h)*Math.cos(this.i*Math.PI/180)/g,0),0<h?(this.Qc=this.level*(e*(1-this.$b)+this.$b)*a.V*this.ja,this.Rc=this.level*(e*t*(1-this.$b)+this.$b)*a.V*this.ja,this.Ac=0,this.Bc=this.level*e*(1-t)*a.V*this.ja):(this.Qc=this.level*(e*t*(1-this.$b)+this.$b)*a.V*this.ja,this.Rc=this.level*(e*(1-this.$b)+this.$b)*a.V*this.ja,this.Ac=this.level*e*(1-t)*a.V*this.ja,
this.Bc=0)):(e=this.level*this.$b*a.V,this.Qc=e*this.ja,this.Rc=e*this.ja,this.Bc=this.Ac=0),this.Fg()):(b-=this.ob,b<g&&0<g?(t=1-Math.abs(b/g),this.b.volume=this.level*(l+(1-l)*t)*a.V):this.b.volume=l*a.V));6==this.mode&&(b=180*Math.acos(a.Fi.Rh(this.Lb))/Math.PI,Math.abs(b)<this.ob?this.zf||(this.zf=!0,this.Xc=this.loop-1,this.ha?this.ze||this.Uc():this.b.play()):this.zf=!1)}}};a.prototype.ck=function(){var a=this;a.Eb=this.g.za.createBufferSource();a.Eb.addEventListener("ended",function(){a.Sl()},
!1);2==a.mode||3==a.mode||5==a.mode?a.Eb.connect(a.Re):a.Eb.connect(a.ad)};a.prototype.Mo=function(a){var c=this,b=this.g.za;c.ck();this.g.L("createBufferSoundSource()");b.decodeAudioData(a,function(a){c.If=a;c.Eb.buffer=a;c.g.L("audio Data decoded");c.lj&&(c.Uc(),c.lj=!1)})};a.prototype.Uc=function(){var a=this.g.za,c=this.xe;this.If?(null==this.Eb&&(this.ck(),this.Eb.buffer=this.If),this.Lg=a.currentTime-c,this.xe=0,this.ze=!0,this.bi=!1,this.Eb.start(0,c),this.g.L("buffer Source started")):(this.g.L("bufferSoundPlay() -> no audio buffer -> playWhenReady"),
this.lj=!0)};a.prototype.wi=function(){var a=this.g.za.currentTime-this.Lg;this.Qe();this.xe=a};a.prototype.Qe=function(){this.Eb&&this.ze&&(this.bi=!0,this.Eb.disconnect(),this.Eb.stop(0),this.Eb=null);this.Lg=this.xe=0;this.ze=!1};a.prototype.Lm=function(){var a=this.g.za;return this.xe?this.xe:this.Lg?a.currentTime-this.Lg:0};a.prototype.Mm=function(a){this.Qe();this.xe=a;this.Uc()};a.prototype.addElement=function(){var a=-1,c=this,b=this.g,h=this.g.za;try{for(var l=!1,g=0;g<b.N.length;g++)b.N[g].id==
c.id&&(a=g,null==b.N[g].b&&!b.N[g].ha||b.N[g].url.join()!=c.url.join()||b.N[g].loop!=c.loop||b.N[g].mode!=c.mode||(l=!0,b.N[g].pan=c.pan,b.N[g].i=c.i,b.N[g].level=c.level,b.N[g].$b=c.$b,b.N[g].ph=c.ph,b.N[g].ob=c.ob,b.N[g].yf=c.yf));if(l)b.L("Keep playing "+c.id);else{if(0<=a){var t=b.N[a];if(null!=t.b||t.ha)if(h&&b.La.enabled)b.La.Pg.push(t),1!=b.C.Oa&&2!=b.C.Oa&&b.La.lk(t);else{try{t.ha?t.wi():t.b.pause()}catch(e){b.L(e)}try{t.Bd()}catch(e){b.L(e)}}}if(h&&b.Ic&&(2==this.mode||3==this.mode||5==this.mode)){if(0<
c.url.length){c.ha=!0;c.ah();var m=new XMLHttpRequest;m.open("GET",b.hc(c.url[0]),!0);m.responseType="arraybuffer";m.onload=function(){c.Mo(m.response)};m.send();c.oh=!1}}else{c.b=document.createElement("audio");c.b.crossOrigin=b.crossOrigin;c.b.setAttribute("class","ggmedia");b.bf&&c.b.setAttribute("id",b.bf+c.id);for(g=0;g<c.url.length;g++)l=void 0,l=document.createElement("source"),""!=c.url[g]&&"#"!=c.url[g]&&(l.crossOrigin=b.crossOrigin,l.setAttribute("src",b.hc(c.url[g])),c.b.appendChild(l));
c.b.volume=c.level*b.V;0<c.b.childNodes.length&&(b.T.appendChild(c.b),c.b.addEventListener("ended",function(){c.Sl()},!1),h&&(c.ah(),c.oh=!1,0==c.loop&&c.source.mediaElement&&(c.source.mediaElement.loop=!0)))}1<=c.loop&&(c.Xc=c.loop-1);0<=a?b.N[a]=c:b.N.push(c);c.ji();-1!=this.g.Nc.indexOf(c.id)||-1!=this.g.Nc.indexOf("_main")&&-1==this.g.$d.indexOf(c.id)||(1!=c.mode&&2!=c.mode&&3!=c.mode&&5!=c.mode||!(0<=c.loop)||h&&b.La.enabled||(c.ha||(c.b.autoplay=!0),c.autoplay=!0),0==c.mode&&0<=c.loop&&(c.autoplay=
!0))}}catch(e){this.g.L(e)}};a.prototype.Bd=function(){try{this.g.L("Remove Snd:"+this.id),this.ha||(this.g.T.removeChild(this.b),this.b=null)}catch(a){this.g.L(a)}};a.prototype.Ib=function(a){b.prototype.Ib.call(this,a);var c;(c=a.getAttributeNode("url"))&&this.url.push(c.nodeValue.toString());if(c=a.getAttributeNode("level"))this.level=Number(c.nodeValue);if(c=a.getAttributeNode("loop"))this.loop=Number(c.nodeValue);if(c=a.getAttributeNode("mode"))this.mode=Number(c.nodeValue);if(c=a.getAttributeNode("field"))this.ph=
Number(c.nodeValue);if(c=a.getAttributeNode("ambientlevel"))this.$b=Number(c.nodeValue);if(c=a.getAttributeNode("pansize"))this.ob=Number(c.nodeValue);if(c=a.getAttributeNode("tiltsize"))this.yf=Number(c.nodeValue);for(a=a.firstChild;a;)"source"==a.nodeName&&(c=a.getAttributeNode("url"))&&this.url.push(c.nodeValue.toString()),a=a.nextSibling};return a}(e);p.Am=k;k=function(b){function a(a){b.call(this,a);this.poster="";this.Cb=this.Ka=this.Ba=0;this.f=50;this.Sa=0;this.hd=this.dg=!1}__extends(a,b);
a.prototype.pe=function(){1!=this.Sa&&4!=this.Sa||this.$f(!this.lb);2==this.Sa&&this.g.vl(this.id)};a.prototype.$f=function(a){var c=this.g,b=c.za;if(1==this.Sa||4==this.Sa)if(this.lb=a,this.g.Db)(c=c.ga)&&c.activateSound(this.id,this.lb?1:0);else{if(this.lb)this.b.style.pointerEvents="auto",this.b.style.cursor="pointer",this.b.style.zIndex=(c.Yg+8E4).toString(),this.b.style[this.g.$c]="all 1s ease 0s",this.g.ic(this.id)||c.ye(this.id);else{this.b.style.pointerEvents="none";this.b.style.cursor="default";
this.b.style.zIndex=c.Yg.toString();this.b.style[this.g.$c]="all 1s ease 0s";this.mj=!0;var h=this;setTimeout(function(){h.mj=!1},1E3)}if(b&&(2==this.mode||3==this.mode||5==this.mode)){var b=b.currentTime,l=this.sc.gain.value,g=this.vc.gain.value,t=this.tc.gain.value,m=this.uc.gain.value;this.lb?(this.sc.gain.linearRampToValueAtTime(l,b),this.sc.gain.linearRampToValueAtTime(this.level*c.V,b+1),this.vc.gain.linearRampToValueAtTime(g,b),this.vc.gain.linearRampToValueAtTime(this.level*c.V,b+1),this.tc.gain.linearRampToValueAtTime(t,
b),this.tc.gain.linearRampToValueAtTime(0,b+1),this.uc.gain.linearRampToValueAtTime(m,b),this.uc.gain.linearRampToValueAtTime(0,b+1)):(this.sc.gain.linearRampToValueAtTime(l,b),this.sc.gain.linearRampToValueAtTime(this.Qc,b+1),this.vc.gain.linearRampToValueAtTime(g,b),this.vc.gain.linearRampToValueAtTime(this.Rc,b+1),this.tc.gain.linearRampToValueAtTime(t,b),this.tc.gain.linearRampToValueAtTime(this.Ac,b+1),this.uc.gain.linearRampToValueAtTime(m,b),this.uc.gain.linearRampToValueAtTime(this.Bc,b+1))}this.Zf=
!0;this.g.jm()}2==this.Sa&&(a?this.g.ye(this.id):this.g.kj(this.id))};a.prototype.ag=function(){this.Zf=!1;this.b.style[this.g.$c]="none"};a.prototype.Up=function(){0==this.loop?this.b.play():0<this.Xc?(this.Xc--,this.b.currentTime=0,this.b.play()):this.Xk=!1};a.prototype.Ib=function(a){b.prototype.Ib.call(this,a);var c;if(c=a.getAttributeNode("poster"))this.poster=String(c.nodeValue);if(c=a.getAttributeNode("rotx"))this.Ba=Number(c.nodeValue);if(c=a.getAttributeNode("roty"))this.Ka=Number(c.nodeValue);
if(c=a.getAttributeNode("rotz"))this.Cb=Number(c.nodeValue);if(c=a.getAttributeNode("fov"))this.f=Number(c.nodeValue);if(c=a.getAttributeNode("width"))this.Fc=Number(c.nodeValue);if(c=a.getAttributeNode("height"))this.bd=Number(c.nodeValue);this.rd=(c=a.getAttributeNode("stretch"))?Number(c.nodeValue):1;if(c=a.getAttributeNode("clickmode"))this.Sa=Number(c.nodeValue);if(c=a.getAttributeNode("handcursor"))this.dg=1==Number(c.nodeValue);if(c=a.getAttributeNode("startmutedmobile"))this.zj=1==Number(c.nodeValue)};
a.prototype.addElement=function(){var a=this,c=this.g;try{a.b=document.createElement("video");a.b.setAttribute("class","ggmedia");a.b.crossOrigin=c.crossOrigin;a.b.hidden=!0;a.b.addEventListener("click",function(a){a.stopPropagation()});c.bf&&a.b.setAttribute("id",c.bf+a.id);if(c.Ug)a.b.setAttribute("playsinline","playsinline"),a.b.setAttribute("style","display: none; max-width:none;");else if(a.b.setAttribute("style","max-width:none;pointer-events:none;"),a.b.setAttribute("playsinline","playsinline"),
1==a.Sa||4==a.Sa)a.b.addEventListener(c.pm(),function(){a.ag()},!1),a.b.addEventListener("transitionend",function(){a.ag()},!1);var b;for(b=0;b<a.url.length;b++){var h=void 0,h=document.createElement("source");h.crossOrigin=c.crossOrigin;h.setAttribute("src",c.hc(a.url[b]));a.b.appendChild(h)}""!=a.poster&&(a.b.poster=c.hc(a.poster),0>a.loop&&(a.b.a="none"));a.b.volume=a.level*c.V;1<=a.loop&&(a.Xc=a.loop-1);(1==a.mode||2==a.mode||3==a.mode||5==a.mode)&&0<=a.loop&&(a.b.autoplay=!0,a.Xk=!0,a.autoplay=
!0,(this.g.Ic||this.g.Pd)&&this.g.Rf&&this.zj&&a.b.setAttribute("muted","muted"));c.J.push(this);c.Ug?c.T.appendChild(a.b):(a.b.style.position="absolute",a.Fc&&(a.b.width=a.Fc),a.bd&&(a.b.height=a.bd),c.D.appendChild(a.b),(this.g.Ic||this.g.Pd)&&this.g.Rf&&this.zj?this.Pj=!0:a.ah());a.b.addEventListener("ended",function(){a.Up()},!1)}catch(l){c.L(l)}};a.prototype.registerElement=function(a,c){this.hd=!0;this.b=c;this.id=a;this.level=1;this.g.J.push(this)};a.prototype.Bd=function(){var a=this.g;a.Ug&&
(a.H.deleteTexture(this.nc),this.nc=0,a.T.removeChild(this.b));a.km&&a.D.removeChild(this.b);this.b=null};return a}(k);p.Qj=k;k=function(b){function a(a){b.call(this,a);this.url="";this.Cb=this.Ka=this.Ba=0;this.f=50;this.Sa=0;this.dg=!1;this.bd=this.Fc=100;this.rd=1}__extends(a,b);a.prototype.Ib=function(a){b.prototype.Ib.call(this,a);var c;if(c=a.getAttributeNode("url"))this.url=c.nodeValue.toString();if(c=a.getAttributeNode("rotx"))this.Ba=Number(c.nodeValue);if(c=a.getAttributeNode("roty"))this.Ka=
Number(c.nodeValue);if(c=a.getAttributeNode("rotz"))this.Cb=Number(c.nodeValue);if(c=a.getAttributeNode("fov"))this.f=Number(c.nodeValue);if(c=a.getAttributeNode("width"))this.Fc=Number(c.nodeValue);if(c=a.getAttributeNode("height"))this.bd=Number(c.nodeValue);this.rd=(c=a.getAttributeNode("stretch"))?Number(c.nodeValue):1;if(c=a.getAttributeNode("clickmode"))this.Sa=Number(c.nodeValue);if(c=a.getAttributeNode("handcursor"))this.dg=1==Number(c.nodeValue);for(a=a.firstChild;a;)"source"==a.nodeName&&
(c=a.getAttributeNode("url"))&&(this.url=c.nodeValue.toString()),a=a.nextSibling};a.prototype.ag=function(){this.Zf=!1;this.b.style[this.g.$c]="none"};a.prototype.pe=function(){1!==this.Sa&&4!==this.Sa||this.$f(!this.lb)};a.prototype.$f=function(a){var c=this.g;if(1===this.Sa||4===this.Sa)this.lb=a,this.g.Db?(a=this.g.ga)&&a.activateSound(this.id,this.lb?1:0):(this.lb?(this.b.style.pointerEvents="auto",this.b.style.cursor="pointer",this.b.style.zIndex=(c.Yg+8E4).toString()):(this.b.style.pointerEvents=
"none",this.b.style.cursor="default",this.b.style.zIndex=c.Yg.toString()),this.b.style[c.$c]="all 1s ease 0s",this.Zf=!0,c.em())};a.prototype.addElement=function(){var a=this,c=this.g;try{a.b=document.createElement("img");a.b.setAttribute("style","-webkit-user-drag:none; max-width:none; pointer-events:none;");a.b.setAttribute("class","ggmedia");a.b.hidden=!0;a.b.addEventListener("click",function(a){a.stopPropagation()});c.bf&&a.b.setAttribute("id",c.bf+a.id);a.b.ondragstart=function(){return!1};if(1===
a.Sa||4===a.Sa)a.b.addEventListener(c.pm(),function(){a.ag()},!1),a.b.addEventListener("transitionend",function(){a.ag()},!1);a.b.setAttribute("src",c.hc(a.url));a.Fc&&(a.b.width=a.Fc);a.bd&&(a.b.height=a.bd);c.Ya.push(a);a.b.style.position="absolute";c.D.appendChild(a.b)}catch(b){c.L("Error addimage:"+b)}};a.prototype.Bd=function(){this.g.D.removeChild(this.b);this.b=null};return a}(e);p.ym=k;e=function(b){function a(a){b.call(this,a);this.alpha=this.Yj=50;this.type=0;this.color=16777215}__extends(a,
b);a.prototype.Ib=function(a){b.prototype.Ib.call(this,a);var c;if(c=a.getAttributeNode("blinding"))this.Yj=Number(c.nodeValue);if(c=a.getAttributeNode("alpha"))this.alpha=Number(c.nodeValue);if(c=a.getAttributeNode("type"))this.type=Number(c.nodeValue);if(c=a.getAttributeNode("color"))this.color=1*Number(c.nodeValue)};return a}(e);p.zm=e;e=function(){function b(a){this.type="empty";this.Rl=this.id=this.target=this.description=this.title=this.url="";this.Xg=100;this.cg=20;this.ni=!1;this.b=null;this.jb=
this.oa=this.i=this.pan=0;this.ec=a.w.ec;this.bc=a.w.bc;this.dc=a.w.dc;this.ac=a.w.ac;this.$e=a.w.$e;this.Vg=[]}b.prototype.We=function(){this.id=this.id;this.pan=this.pan;this.tilt=this.i;this.url=this.url;this.target=this.target;this.title=this.title;this.description=this.description;this.skinid=this.Rl;this.obj=this.b};b.prototype.Ib=function(a){var d;if(d=a.getAttributeNode("url"))this.url=d.nodeValue.toString();if(d=a.getAttributeNode("target"))this.target=d.nodeValue.toString();if(d=a.getAttributeNode("title"))this.title=
d.nodeValue.toString();if(d=a.getAttributeNode("description"))this.description=d.nodeValue.toString();if(d=a.getAttributeNode("id"))this.id=d.nodeValue.toString();if(d=a.getAttributeNode("skinid"))this.Rl=d.nodeValue.toString();if(d=a.getAttributeNode("width"))this.Xg=Number(d.nodeValue);if(d=a.getAttributeNode("height"))this.cg=Number(d.nodeValue);if(d=a.getAttributeNode("wordwrap"))this.ni=1==Number(d.nodeValue);d=a.getAttributeNode("pan");this.pan=1*(d?Number(d.nodeValue):0);d=a.getAttributeNode("tilt");
this.i=1*(d?Number(d.nodeValue):0);if(d=a.getAttributeNode("bordercolor"))this.ec=1*Number(d.nodeValue);if(d=a.getAttributeNode("backgroundcolor"))this.bc=1*Number(d.nodeValue);if(d=a.getAttributeNode("borderalpha"))this.dc=1*Number(d.nodeValue);if(d=a.getAttributeNode("backgroundalpha"))this.ac=1*Number(d.nodeValue);if(d=a.getAttributeNode("handcursor"))this.$e=1==Number(d.nodeValue);for(a=a.firstChild;a;){if("vertex"==a.nodeName){var c={pan:0,i:0};d=a.getAttributeNode("pan");c.pan=1*(d?Number(d.nodeValue):
0);d=a.getAttributeNode("tilt");c.i=1*(d?Number(d.nodeValue):0);this.Vg.push(c)}a=a.nextSibling}this.We()};return b}();p.Bh=e})(ggP2VR||(ggP2VR={}));
(function(p){var e=function(){function e(b,a){this.x=b;this.y=a}e.prototype.Za=function(b,a){this.x=b;this.y=a};e.prototype.ud=function(b,a,d){var c=a.y-b.y;this.x=b.x+(a.x-b.x)*d;this.y=b.y+c*d};e.prototype.Km=function(b,a,d,c,f){var h;h=new e;h.ud(b,d,f);b=new e;b.ud(d,c,f);d=new e;d.ud(c,a,f);a=new e;a.ud(h,b,f);h=new e;h.ud(b,d,f);b=new e;b.ud(a,h,f);this.x=b.x;this.y=b.y};e.prototype.ti=function(b,a,d,c,f){var h=new e,l=.5,g=.25,t;do h.Km(b,a,d,c,l),t=h.x-f,l=0<t?l-g:l+g,g/=2;while(.01<Math.abs(t));
this.x=h.x;this.y=h.y};return e}();p.qc=e})(ggP2VR||(ggP2VR={}));
(function(p){var e=function(){function e(b,a,d,c,f){this.x=b;this.y=a;this.z=d;this.md=c;this.Lb=f}e.prototype.Za=function(b,a,d,c,f){this.x=b;this.y=a;this.z=d;this.md=c;this.Lb=f};e.prototype.toString=function(){return"("+this.x+","+this.y+","+this.z+") - ("+this.md+","+this.Lb+")"};e.prototype.Ba=function(b){var a=Math.sin(b);b=Math.cos(b);var d=this.y,c=this.z;this.y=b*d-a*c;this.z=a*d+b*c};e.prototype.Ro=function(){var b=this.y;this.y=-this.z;this.z=b};e.prototype.Qo=function(){var b=this.y;
this.y=this.z;this.z=-b};e.prototype.Ka=function(b){var a=Math.sin(b);b=Math.cos(b);var d=this.x,c=this.z;this.x=b*d+a*c;this.z=-a*d+b*c};e.prototype.So=function(){var b=this.x;this.x=-this.z;this.z=b};e.prototype.Cb=function(b){var a=Math.sin(b);b=Math.cos(b);var d=this.x,c=this.y;this.x=b*d-a*c;this.y=a*d+b*c};e.prototype.Gl=function(){var b=this.x;this.x=-this.y;this.y=b};e.prototype.Cd=function(b){return this.Ba(b*Math.PI/180)};e.prototype.Ae=function(b){return this.Ka(b*Math.PI/180)};e.prototype.Be=
function(b){return this.Cb(b*Math.PI/180)};e.prototype.clone=function(){return new e(this.x,this.y,this.z,this.md,this.Lb)};e.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};e.prototype.normalize=function(){var b=this.length();0<b&&(b=1/b,this.x*=b,this.y*=b,this.z*=b)};e.prototype.Rh=function(b){return this.x*b.x+this.y*b.y+this.z*b.z};e.prototype.pk=function(b,a){var d;d=Math.cos(a*Math.PI/180);this.x=d*Math.sin(b*Math.PI/180);this.y=Math.sin(a*Math.PI/180);
this.z=d*Math.cos(b*Math.PI/180)};e.prototype.Gm=function(){return 180*Math.atan2(-this.x,-this.z)/Math.PI};e.prototype.Hm=function(){return 180*Math.asin(this.y/this.length())/Math.PI};e.prototype.ud=function(b,a,d){this.x=b.x*d+a.x*(1-d);this.y=b.y*d+a.y*(1-d);this.z=b.z*d+a.z*(1-d);this.md=b.md*d+a.md*(1-d);this.Lb=b.Lb*d+a.Lb*(1-d)};return e}();p.ta=e})(ggP2VR||(ggP2VR={}));
(function(p){var e=function(){function e(){this.Kl()}e.prototype.Kl=function(){this.Rb=1;this.jc=this.Sb=this.zb=0;this.Tb=1;this.Ub=this.Fb=this.kc=0;this.Gb=1};e.prototype.clone=function(b){this.Rb=b.Rb;this.zb=b.zb;this.Sb=b.Sb;this.jc=b.jc;this.Tb=b.Tb;this.kc=b.kc;this.Fb=b.Fb;this.Ub=b.Ub;this.Gb=b.Gb};e.prototype.fp=function(b){var a=Math.cos(b);b=Math.sin(b);this.Rb=1;this.jc=this.Sb=this.zb=0;this.Tb=a;this.kc=-b;this.Fb=0;this.Ub=b;this.Gb=a};e.prototype.gp=function(b){var a=Math.cos(b);
b=Math.sin(b);this.Rb=a;this.zb=0;this.Sb=b;this.jc=0;this.Tb=1;this.kc=0;this.Fb=-b;this.Ub=0;this.Gb=a};e.prototype.hp=function(b){var a=Math.cos(b);b=Math.sin(b);this.Rb=a;this.zb=-b;this.Sb=0;this.jc=b;this.Tb=a;this.Ub=this.Fb=this.kc=0;this.Gb=1};e.prototype.bp=function(b){this.fp(b*Math.PI/180)};e.prototype.cp=function(b){this.gp(b*Math.PI/180)};e.prototype.ep=function(b){this.hp(b*Math.PI/180)};e.prototype.Cd=function(b){this.Lc||(this.Lc=new e,this.Qd=new e);this.Lc.bp(b);this.Qd.clone(this);
this.multiply(this.Lc,this.Qd)};e.prototype.Ae=function(b){this.Lc||(this.Lc=new e,this.Qd=new e);this.Lc.cp(b);this.Qd.clone(this);this.multiply(this.Lc,this.Qd)};e.prototype.Be=function(b){this.Lc||(this.Lc=new e,this.Qd=new e);this.Lc.ep(b);this.Qd.clone(this);this.multiply(this.Lc,this.Qd)};e.prototype.multiply=function(b,a){this.Rb=b.Rb*a.Rb+b.zb*a.jc+b.Sb*a.Fb;this.zb=b.Rb*a.zb+b.zb*a.Tb+b.Sb*a.Ub;this.Sb=b.Rb*a.Sb+b.zb*a.kc+b.Sb*a.Gb;this.jc=b.jc*a.Rb+b.Tb*a.jc+b.kc*a.Fb;this.Tb=b.jc*a.zb+
b.Tb*a.Tb+b.kc*a.Ub;this.kc=b.jc*a.Sb+b.Tb*a.kc+b.kc*a.Gb;this.Fb=b.Fb*a.Rb+b.Ub*a.jc+b.Gb*a.Fb;this.Ub=b.Fb*a.zb+b.Ub*a.Tb+b.Gb*a.Ub;this.Gb=b.Fb*a.Sb+b.Ub*a.kc+b.Gb*a.Gb};e.prototype.uo=function(b){var a,d,c;a=b.x;d=b.y;c=b.z;b.x=a*this.Rb+d*this.zb+c*this.Sb;b.y=a*this.jc+d*this.Tb+c*this.kc;b.z=a*this.Fb+d*this.Ub+c*this.Gb};return e}();p.ql=e})(ggP2VR||(ggP2VR={}));
(function(p){p.$={create:function(e){var k;"undefined"!=typeof Float32Array?k=new Float32Array(16):k=Array(16);e&&(k[0]=e[0],k[1]=e[1],k[2]=e[2],k[3]=e[3],k[4]=e[4],k[5]=e[5],k[6]=e[6],k[7]=e[7],k[8]=e[8],k[9]=e[9],k[10]=e[10],k[11]=e[11],k[12]=e[12],k[13]=e[13],k[14]=e[14],k[15]=e[15]);return k},set:function(e,k){k[0]=e[0];k[1]=e[1];k[2]=e[2];k[3]=e[3];k[4]=e[4];k[5]=e[5];k[6]=e[6];k[7]=e[7];k[8]=e[8];k[9]=e[9];k[10]=e[10];k[11]=e[11];k[12]=e[12];k[13]=e[13];k[14]=e[14];k[15]=e[15];return k},re:function(e){e[0]=
1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e},multiply:function(e,k,b){b||(b=e);var a=e[0],d=e[1],c=e[2],f=e[3],h=e[4],l=e[5],g=e[6],t=e[7],m=e[8],v=e[9],p=e[10],q=e[11],u=e[12],r=e[13],x=e[14];e=e[15];var z=k[0],n=k[1],C=k[2],A=k[3],y=k[4],B=k[5],D=k[6],E=k[7],F=k[8],H=k[9],I=k[10],J=k[11],K=k[12],L=k[13],M=k[14];k=k[15];b[0]=z*a+n*h+C*m+A*u;b[1]=z*d+n*l+C*v+A*r;b[2]=z*c+n*g+C*p+A*x;b[3]=z*f+n*t+C*q+A*e;b[4]=y*a+B*h+D*m+
E*u;b[5]=y*d+B*l+D*v+E*r;b[6]=y*c+B*g+D*p+E*x;b[7]=y*f+B*t+D*q+E*e;b[8]=F*a+H*h+I*m+J*u;b[9]=F*d+H*l+I*v+J*r;b[10]=F*c+H*g+I*p+J*x;b[11]=F*f+H*t+I*q+J*e;b[12]=K*a+L*h+M*m+k*u;b[13]=K*d+L*l+M*v+k*r;b[14]=K*c+L*g+M*p+k*x;b[15]=K*f+L*t+M*q+k*e;return b},translate:function(e,k,b){var a=k[0],d=k[1];k=k[2];if(!b||e==b)return e[12]=e[0]*a+e[4]*d+e[8]*k+e[12],e[13]=e[1]*a+e[5]*d+e[9]*k+e[13],e[14]=e[2]*a+e[6]*d+e[10]*k+e[14],e[15]=e[3]*a+e[7]*d+e[11]*k+e[15],e;var c=e[0],f=e[1],h=e[2],l=e[3],g=e[4],t=e[5],
m=e[6],v=e[7],p=e[8],q=e[9],u=e[10],r=e[11];b[0]=c;b[1]=f;b[2]=h;b[3]=l;b[4]=g;b[5]=t;b[6]=m;b[7]=v;b[8]=p;b[9]=q;b[10]=u;b[11]=r;b[12]=c*a+g*d+p*k+e[12];b[13]=f*a+t*d+q*k+e[13];b[14]=h*a+m*d+u*k+e[14];b[15]=l*a+v*d+r*k+e[15];return b},scale:function(e,k,b){var a=k[0],d=k[1];k=k[2];if(!b||e==b)return e[0]*=a,e[1]*=a,e[2]*=a,e[3]*=a,e[4]*=d,e[5]*=d,e[6]*=d,e[7]*=d,e[8]*=k,e[9]*=k,e[10]*=k,e[11]*=k,e;b[0]=e[0]*a;b[1]=e[1]*a;b[2]=e[2]*a;b[3]=e[3]*a;b[4]=e[4]*d;b[5]=e[5]*d;b[6]=e[6]*d;b[7]=e[7]*d;b[8]=
e[8]*k;b[9]=e[9]*k;b[10]=e[10]*k;b[11]=e[11]*k;b[12]=e[12];b[13]=e[13];b[14]=e[14];b[15]=e[15];return b},rotate:function(e,k,b,a){var d=b[0],c=b[1];b=b[2];var f=Math.sqrt(d*d+c*c+b*b);if(!f)return null;1!=f&&(f=1/f,d*=f,c*=f,b*=f);var h=Math.sin(k),l=Math.cos(k),g=1-l;k=e[0];var f=e[1],t=e[2],m=e[3],v=e[4],p=e[5],q=e[6],u=e[7],r=e[8],x=e[9],z=e[10],n=e[11],C=d*d*g+l,A=c*d*g+b*h,y=b*d*g-c*h,B=d*c*g-b*h,D=c*c*g+l,E=b*c*g+d*h,F=d*b*g+c*h,d=c*b*g-d*h,c=b*b*g+l;a?e!=a&&(a[12]=e[12],a[13]=e[13],a[14]=e[14],
a[15]=e[15]):a=e;a[0]=k*C+v*A+r*y;a[1]=f*C+p*A+x*y;a[2]=t*C+q*A+z*y;a[3]=m*C+u*A+n*y;a[4]=k*B+v*D+r*E;a[5]=f*B+p*D+x*E;a[6]=t*B+q*D+z*E;a[7]=m*B+u*D+n*E;a[8]=k*F+v*d+r*c;a[9]=f*F+p*d+x*c;a[10]=t*F+q*d+z*c;a[11]=m*F+u*d+n*c;return a},jn:function(e,k,b,a,d,c,f){f||(f=p.$.create());var h=k-e,l=a-b,g=c-d;f[0]=2*d/h;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=2*d/l;f[6]=0;f[7]=0;f[8]=(k+e)/h;f[9]=(a+b)/l;f[10]=-(c+d)/g;f[11]=-1;f[12]=0;f[13]=0;f[14]=-(c*d*2)/g;f[15]=0;return f},perspective:function(e,k,b,a,d){e=
b*Math.tan(e*Math.PI/360);k=e*k;return p.$.jn(-k,k,-e,e,b,a,d)},gq:function(e,k,b,a,d,c,f){f||(f=p.$.create());var h=k-e,l=a-b,g=c-d;f[0]=2/h;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=2/l;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=-2/g;f[11]=0;f[12]=-(e+k)/h;f[13]=-(a+b)/l;f[14]=-(c+d)/g;f[15]=1;return f}}})(ggP2VR||(ggP2VR={}));
(function(p){var e=function(){function e(b){this.la=p.$.create();this.nb=p.$.create();this.cd=0;this.Ua=[];this.hg=!1;this.Bj=this.Oi=this.qj=1;this.Te=1E6;this.ih=[!1,!1,!1,!1,!1,!1];this.ai=!1;this.Ji=[];this.Rj=8;this.no=new p.ql;this.Md=[];this.g=b;if(b.Ic||b.Pd)b.Ng=2}e.prototype.fg=function(){var b=this.g.H;if(b){var a=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\n\t\t\t\t\tuniform sampler2D uSampler;\n\t\t\t\t\tvoid main(void) {\n\t\t\t\t\t\tgl_FragColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n\t\t\t\t\t}");
b.compileShader(a);b.getShaderParameter(a,b.COMPILE_STATUS)||(console&&console.log(b.getShaderInfoLog(a)),alert(b.getShaderInfoLog(a)),a=null);var d=b.createShader(b.VERTEX_SHADER);this.Ec(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\n\t\t\t\tattribute vec2 aTextureCoord;\n\t\t\t\tuniform mat4 uMVMatrix;\n\t\t\t\tuniform mat4 uPMatrix;\n\t\t\t\tuniform float uZoffset;\n\t\t\t\tvarying vec2 vTextureCoord;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tgl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n\t\t\t\t\tgl_Position.z += uZoffset;\n\t\t\t\t\tvTextureCoord = aTextureCoord;\n\t\t\t\t}");
this.F=b.createProgram();this.gf(this.F,d,a);this.F.Z=b.getAttribLocation(this.F,"aVertexPosition");b.enableVertexAttribArray(this.F.Z);this.F.ya=b.getAttribLocation(this.F,"aTextureCoord");b.enableVertexAttribArray(this.F.ya);this.F.Sd=b.getUniformLocation(this.F,"uPMatrix");this.F.ug=b.getUniformLocation(this.F,"uMVMatrix");this.F.sf=b.getUniformLocation(this.F,"uSampler");this.F.oi=b.getUniformLocation(this.F,"uZoffset");a=b.createShader(b.VERTEX_SHADER);this.Ec(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\n\t\t\t\tuniform vec2 uCanvasDimensions;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tvec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n\t\t\t\t\tgl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, 0.0, 1.0);\n\t\t\t\t}");
d=b.createShader(b.FRAGMENT_SHADER);this.Ec(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nuniform vec3 uColor;\n\t\t\t\tuniform float uAlpha;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tgl_FragColor = vec4(uColor, uAlpha);\n\t\t\t\t}");this.yd=b.createProgram();this.gf(this.yd,a,d);this.yd.Z=b.getAttribLocation(this.yd,"aVertexPosition");b.enableVertexAttribArray(this.yd.Z);d=b.createShader(b.VERTEX_SHADER);this.Ec(d,"precision highp float;\n\t\t\t\tattribute vec3 aVertexPosition;\n\t\t\t\tvarying vec2 vTextureCoord;\n\t\t\t\tuniform vec2 uCanvasDimensions;\n\t\t\t\tuniform vec4 uRect;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tvec2 pos = vec2(uRect.x + uRect.z*aVertexPosition.x,uRect.y + uRect.w*aVertexPosition.y);\n\t\t\t\t\tvec2 pointNorm = (pos / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n\t\t\t\t\tgl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, 1.0, 1.0);\n\t\t\t\t\tvTextureCoord.s=aVertexPosition.x;\n\t\t\t\t\tvTextureCoord.t=1.0-aVertexPosition.y;\n\t\t\t\t}");
a=b.createShader(b.FRAGMENT_SHADER);this.Ec(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\n\t\t\t\tuniform sampler2D uSampler;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tgl_FragColor = texture2D(uSampler,vTextureCoord);\n\t\t\t\t}");this.Sf=b.createProgram();this.gf(this.Sf,d,a)}};e.prototype.xh=function(){var b=this.g,a=b.H,d,c;a?(d=a.createShader(a.FRAGMENT_SHADER),c=this.Si(13),this.Ec(d,c),c=a.createShader(a.VERTEX_SHADER),
this.Ec(c,"precision highp float;\nattribute vec3 aVertexPosition;\nuniform vec2 uCanvasDimensions;\nvarying vec2 dst;\nuniform vec2 dstSize;\nuniform float zOffset;\nvoid main(void) {\n vec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, zOffset, 1.0);\n dst.x= -1.0 + 2.0*((aVertexPosition.x + 0.5) / uCanvasDimensions.x);\n dst.y= (-1.0 * uCanvasDimensions.y + 2.0*(aVertexPosition.y + 0.5)) / uCanvasDimensions.x;\n}\n"),
this.Al=a.createProgram(),this.gf(this.Al,c,d),d=a.createShader(a.FRAGMENT_SHADER),c=this.Si(4),this.Ec(d,c),c=a.createShader(a.VERTEX_SHADER),this.Ec(c,"precision highp float;\nattribute vec3 aVertexPosition;\nuniform vec2 uCanvasDimensions;\nvarying vec2 dst;\nuniform vec2 dstSize;\nuniform float zOffset;\nvoid main(void) {\n vec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, zOffset, 1.0);\n dst.x= -1.0 + 2.0*((aVertexPosition.x + 0.5) / uCanvasDimensions.x);\n dst.y= (-1.0 * uCanvasDimensions.y + 2.0*(aVertexPosition.y + 0.5)) / uCanvasDimensions.x;\n}\n"),
this.Bl=a.createProgram(),this.gf(this.Bl,c,d),d=a.createShader(a.FRAGMENT_SHADER),c=this.Si(b.s.format),this.Ec(d,c),c=a.createShader(a.VERTEX_SHADER),this.Ec(c,"precision highp float;\nattribute vec3 aVertexPosition;\nuniform vec2 uCanvasDimensions;\nvarying vec2 dst;\nuniform vec2 dstSize;\nvoid main(void) {\n vec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, 0.0, 1.0);\n dst.x= -1.0 + 2.0*((aVertexPosition.x + 0.5) / uCanvasDimensions.x);\n dst.y= (-1.0 * uCanvasDimensions.y + 2.0*(aVertexPosition.y + 0.5)) / uCanvasDimensions.x;\n}\n"),
this.Cl=a.createProgram(),this.gf(this.Cl,c,d),this.Th||(this.Th=a.createBuffer())):this.g.L("No WebGL to initRemapShader!")};e.prototype.Ec=function(b,a){var d=this.g.H;d.shaderSource(b,a);d.compileShader(b);d.getShaderParameter(b,d.COMPILE_STATUS)||(console&&console.log(d.getShaderInfoLog(b)),O&&alert(d.getShaderInfoLog(b)))};e.prototype.gf=function(b,a,d){var c=this.g.H;c.attachShader(b,a);c.attachShader(b,d);c.linkProgram(b);c.getProgramParameter(b,c.LINK_STATUS)||(alert("Could not initialise shader program"),
console&&console.log(c.getError()));c.useProgram(b)};e.prototype.Si=function(b){var a=this.g,d;d="#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#define M_PI 3.14159265358979323846\nvarying vec2 dst;\nuniform vec2 srcScale;\nuniform vec2 srcOffset;\nuniform float rectDstDistance;\nuniform float fisheyeDistance;\nuniform float stereoDistance;\nuniform float directionBlend;\nuniform mat4 matRotate; // = mat4( 1.0,0.0,0.0,0.0, 0.0,1.0,0.0,0.0, 0.0,0.0,1.0,0.0, 0.0,0.0,0.0,1.0 );\nconst float rectSrcDistance = 1.0;\nuniform vec2 tonemap;\n";
d=(13==b?d+"uniform samplerCube cubeTexture;":d+"uniform sampler2D tileTexture;\n")+"void main()\n{\n";d+="vec4 direction;\n";d+="vec2 src;\n";d+="vec2 srcCord;\n";d+="vec2 texc;\n";var c=this.Fk(a.qa());a.qa()!=a.lc&&0!=a.lc?(a=this.Fk(a.lc),d+="vec4 direction1,direction2;\n",d+=c.replace("direction=","direction1="),d+=a.replace("direction=","direction2="),d+="direction=normalize(mix(direction1, direction2,1.0-directionBlend));\n"):d+=c;d+="direction=direction*matRotate;\n";13==b&&(d+="direction.z=-direction.z;",
d+="gl_FragColor = textureCube(cubeTexture, direction.xyz);");4==b&&(d+="float iz=1.0/(direction.z * rectSrcDistance);\n",d+="src.x=-direction.x*iz;\n",d+="src.y= direction.y*iz;\n",d+="texc=src * srcScale + srcOffset;\n",d+="if (",d+="(direction.z<0.0) && ",d+="(texc.x>=0.0) && (texc.x<=1.0) && (texc.y>=0.0) && (texc.y<=1.0)) {\n",d+="  gl_FragColor = texture2D(tileTexture, texc);\n",d+="} else {\n",d+="  discard;\n",d+="}\n");1==b&&(d+="src.x=atan(float(-direction.x), float(-direction.z));",d+=
"src.y=asin(direction.y);\n",d+="texc=src * srcScale + srcOffset;\n",d+="gl_FragColor = texture2D(tileTexture, texc);\n");14==b&&(d+="vec2 cf;\n",d+="if ((direction.z<0.0) && (direction.z<=-abs(direction.x)) && (direction.z<=-abs(direction.y))) {\n",d+="  src.x=-direction.x/direction.z;\n",d+="  src.y=+direction.y/direction.z;\n",d+="  cf.x=1.0;cf.y=3.0;\n",d+="}\n",d+="if ((direction.x>=0.0) && (direction.x>=abs(direction.y)) && (direction.x>=abs(direction.z))) {\n",d+="  src.x=+direction.z/direction.x;\n",
d+="  src.y=-direction.y/direction.x;\n",d+="  cf.x=3.0;cf.y=3.0;\n",d+="}\n",d+="if ((direction.z>=0.0) && (direction.z>=abs(direction.x)) && (direction.z>=abs(direction.y))) {\n",d+="  src.x=-direction.x/direction.z;\n",d+="  src.y=-direction.y/direction.z;\n",d+="  cf.x=5.0;cf.y=3.0;\n",d+="}\n",d+="if ((direction.x<=0.0) && (direction.x<=-abs(direction.y)) && (direction.x<=-abs(direction.z))) {\n",d+="  src.x=+direction.z/direction.x;\n",d+="  src.y=+direction.y/direction.x;\n",d+="  cf.x=1.0;cf.y=1.0;\n",
d+="}\n",d+="if ((direction.y>=0.0) && (direction.y>=abs(direction.x)) && (direction.y>=abs(direction.z))) {\n",d+="  src.x=+direction.x/direction.y;\n",d+="  src.y=-direction.z/direction.y;\n",d+="  cf.x=5.0;cf.y=1.0;\n",d+="}\n",d+="if ((direction.y<=0.0) && (direction.y<=-abs(direction.x)) && (direction.y<=-abs(direction.z))) {\n",d+="  src.x=-direction.x/direction.y;\n",d+="  src.y=-direction.z/direction.y;\n",d+="  cf.x=3.0;cf.y=1.0;\n",d+="}\n",d+="texc.x=(cf.x+src.x*srcScale.x) / 6.0;\n",d+=
"texc.y=(cf.y+src.y*srcScale.y) / 4.0;\n",d+="gl_FragColor = texture2D(tileTexture, texc);\n");return d+="}\n"};e.prototype.Fk=function(b){var a="";switch(b){case 4:a+="direction.x=dst.x*rectDstDistance;\ndirection.y=dst.y*rectDstDistance;\ndirection.z=-1.0;\n";break;case 12:a+="float r,ph,ro;\nr=length(dst.xy)*0.5;\nro=atan(float(dst.x),float(-dst.y));\nph=r / fisheyeDistance;\ndirection.x= sin(ph) * sin(ro);\ndirection.y=-sin(ph) * cos(ro);\ndirection.z=-cos(ph);\n";break;case 9:a+="float n;\nvec2 ind;\nind=dst*stereoDistance;\nn=1.0 + ind.x*ind.x + ind.y*ind.y;\ndirection.x=2.0*ind.x/n;\ndirection.y=2.0*ind.y/n;\ndirection.z=(n-2.0)/n;\n"}return a+
"direction.w=0.0;\ndirection=normalize(direction);\n"};e.prototype.Pk=function(b){var a,d,c,f,h=this.g,l=this.g.H;this.Ei=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,this.Ei);var g=[-1,-1,1,1,-1,1,1,1,1,-1,1,1];for(a=0;12>a;a++)2>a%3&&(g[a]*=b);l.bufferData(l.ARRAY_BUFFER,new Float32Array(g),l.STATIC_DRAW);this.ge=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,this.ge);var t=[1,0,0,0,0,1,1,1];l.bufferData(l.ARRAY_BUFFER,new Float32Array(t),l.STATIC_DRAW);this.Wc=l.createBuffer();l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,
this.Wc);var e=[0,1,2,0,2,3];l.bufferData(l.ELEMENT_ARRAY_BUFFER,new Uint16Array(e),l.STATIC_DRAW);var g=[],e=[],t=[],v=new p.ta;for(b=0;6>b;b++){c=b%3;f=3>b?1:0;for(d=0;4>d;d++){v.x=-1;v.y=-1;v.z=1;for(a=0;a<d;a++)v.Gl();t.push((0>v.x?.33:0)+.33*c,(0>v.y?0:.5)+.5*f);if(4>b)for(a=0;a<b;a++)v.So();else 5==b?v.Ro():v.Qo();g.push(v.x,v.y,v.z)}a=4*b;e.push(0+a,1+a,2+a,0+a,2+a,3+a)}h.s.Nj=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,h.s.Nj);l.bufferData(l.ARRAY_BUFFER,new Float32Array(g),l.STATIC_DRAW);
h.s.ci=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,h.s.ci);l.bufferData(l.ARRAY_BUFFER,new Float32Array(t),l.STATIC_DRAW);h.s.Yi=l.createBuffer();l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,h.s.Yi);l.bufferData(l.ELEMENT_ARRAY_BUFFER,new Uint16Array(e),l.STATIC_DRAW);this.fo=l.createBuffer();this.eo=l.createBuffer()};e.prototype.Ui=function(b){var a=this;return function(){try{if(b.xo)return;var d=a.g.H;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,1);var c=!1;null!=b.te&&b.te.complete?b.Kk||(d.bindTexture(d.TEXTURE_2D,
b),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,b.te),c=b.Kk=!0):null!=b.lf&&b.lf.complete&&(d.bindTexture(d.TEXTURE_2D,b),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,b.lf),c=!0);c&&(b.loaded=!0);d.bindTexture(d.TEXTURE_2D,null);d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,0)}catch(f){a.g.L(f)}a.g.update(2)}};e.prototype.Qk=function(){var b,a,d=this.g,c=d.H;if(this.Ua)for(;0<this.Ua.length;)c.deleteTexture(this.Ua.pop());this.Ua=[];for(var f=0;6>f;f++)a=c.createTexture(),this.cd++,
a.lf=null,a.te=null,a.Kk=!1,c.bindTexture(c.TEXTURE_2D,a),c.texImage2D(c.TEXTURE_2D,0,c.RGB,1,1,0,c.RGB,c.UNSIGNED_BYTE,null),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),d.Ue[f]&&(b=new Image,b.crossOrigin=d.crossOrigin,b.src=d.hc(d.Ue[f]),a.lf=b,b.addEventListener&&b.addEventListener("load",this.Ui(a),!1),d.Mb.push(b)),this.Ua.push(a);for(f=0;6>f;f++)d.jh[f]&&
(b=new Image,b.crossOrigin=d.crossOrigin,b.src=d.hc(d.jh[f]),b.addEventListener?b.addEventListener("load",this.Ui(this.Ua[f]),!1):b.onload=this.Ui(this.Ua[f]),this.Ua[f].te=b,d.Mb.push(b));for(f=0;f<d.J.length;f++)d.J[f].hd||(d.J[f].nc=c.createTexture(),d.cd++,c.bindTexture(c.TEXTURE_2D,d.J[f].nc),c.texImage2D(c.TEXTURE_2D,0,c.RGB,1,1,0,c.RGB,c.UNSIGNED_BYTE,null),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,
c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE));d.s.nc=c.createTexture();d.cd++;c.bindTexture(c.TEXTURE_2D,d.s.nc);c.texImage2D(c.TEXTURE_2D,0,c.RGB,1,1,0,c.RGB,c.UNSIGNED_BYTE,null);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.bindTexture(c.TEXTURE_2D,null)};e.prototype.$p=function(){var b=this.g;if(b.m.width!=b.D.offsetWidth||b.m.height!=b.D.offsetHeight)b.m.width=b.D.offsetWidth,
b.m.height=b.D.offsetHeight;b.le&&(b.Gc(0),b.Oc());if(b.H){var a=b.H;this.hi();a.clear(a.DEPTH_BUFFER_BIT);a.useProgram(this.F);this.vf(0);a.uniform1i(this.F.sf,0);a.enableVertexAttribArray(this.F.Z);a.enableVertexAttribArray(this.F.ya);a.bindBuffer(a.ARRAY_BUFFER,this.ge);a.vertexAttribPointer(this.F.ya,2,a.FLOAT,!1,0,0);a.activeTexture(a.TEXTURE0);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.Wc);a.uniform1f(this.F.oi,1E-4);a.vertexAttribPointer(this.F.Z,3,a.FLOAT,!1,0,0);p.$.re(this.nb);p.$.perspective(b.Qb(),
b.mb.width/b.mb.height,.1,100,this.nb);a.uniformMatrix4fv(this.F.Sd,!1,this.nb);for(b=0;6>b;b++)this.vf(b),a.bindBuffer(a.ARRAY_BUFFER,this.Ei),a.vertexAttribPointer(this.F.Z,3,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,this.ge),a.vertexAttribPointer(this.F.ya,2,a.FLOAT,!1,0,0),6<=this.Ua.length&&this.Ua[b].loaded&&(a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,this.Ua[b]),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.Wc),a.uniform1i(this.F.sf,0),a.uniformMatrix4fv(this.F.ug,!1,this.la),a.uniformMatrix4fv(this.F.Sd,
!1,this.nb),a.drawElements(a.TRIANGLES,6,a.UNSIGNED_SHORT,0))}};e.prototype.hi=function(){var b=this.g;if(b.h.nf&&6<b.h.nf.length){var a=parseInt(b.h.nf);b.H.clearColor((a>>16&255)/255,(a>>8&255)/255,(a>>0&255)/255,1)}};e.prototype.vf=function(b,a){void 0===a&&(a=1);var d=this.g;p.$.re(this.la);p.$.rotate(this.la,a*-d.O.c*Math.PI/180,[0,0,1]);p.$.rotate(this.la,a*-d.i.c*Math.PI/180,[1,0,0]);-1==a?p.$.rotate(this.la,-d.pan.c*Math.PI/180,[0,1,0]):p.$.rotate(this.la,(180-d.pan.c)*Math.PI/180,[0,1,0]);
d.$a&&(p.$.rotate(this.la,-d.$a.pitch*Math.PI/180,[1,0,0]),p.$.rotate(this.la,d.$a.O*Math.PI/180,[0,0,1]));4>b?p.$.rotate(this.la,-Math.PI/2*b,[0,1,0]):p.$.rotate(this.la,Math.PI/2*(5==b?1:-1),[1,0,0])};e.prototype.Dp=function(b){var a=this;return function(){a.Ji.push(b)}};e.prototype.Zm=function(b){this.g.Da=!0;this.g.Yc=!0;b.loaded=!0;b.rj=0;b.Ud=0;var a=this.g.H;this.ik();a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,1);if(null!=b.h&&b.h.complete){b.eb=a.createTexture();this.g.cd++;a.bindTexture(a.TEXTURE_2D,
b.eb);try{a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,b.h)}catch(d){a.texImage2D(a.TEXTURE_2D,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,new Uint8Array([128,128,128,250])),this.g.L(d)}}this.g.update(2)};e.prototype.ik=function(){this.g.Kb&&this.g.Kb--};e.prototype.$m=function(){if(0<this.Ji.length){var b=this.Ji.shift();this.Zm(b)}};e.prototype.vo=function(b){var a=this;return function(){a.g.Da=!0;a.g.Yc=!0;var d=a.g.h;try{if(null!=b&&b.complete){var c=d.I[d.I.length-1],f=d.Ia;c.height=c.width=
b.width-2*f;c.M=c.da=1;for(var h=0;6>h;h++){var l=new p.Od;l.K=document.createElement("canvas");a.g.Y?(l.K.width=c.width+2*f,l.K.height=c.height+2*f):(l.K.width=d.G+2*f,l.K.height=d.G+2*f);l.Pa=l.K.getContext("2d");l.K.style[a.g.Va+"Origin"]="0% 0%";l.K.style.overflow="hidden";l.K.style.position="absolute";l.h=b;var g=c.width+2*f,t=c.height+2*f;l.Pa&&l.Pa.drawImage(b,0,h*t,g,t,0,0,g,t);if(a.g.Y&&a.g.H){var e=a.g.H;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1);l.eb=e.createTexture();a.g.cd++;e.bindTexture(e.TEXTURE_2D,
l.eb);try{e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,l.K)}catch(v){a.g.L(v)}e.bindTexture(e.TEXTURE_2D,null);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0)}a.g.Pc&&(l.K.Nd=-1,a.g.D.insertBefore(l.K,a.g.D.firstChild));c.U[h]=l}c.loaded=!0}}catch(v){a.g.L(v)}a.g.update(2)}};e.prototype.am=function(b){var a=this;return function(){a.g.Da=!0;a.g.Yc=!0;a.ik();b.h=null}};e.prototype.Yp=function(){var b=this.g,a=b.h,d=b.h.I;b.le&&(b.Gc(0),b.Oc());if(b.H){var c=b.H;c.useProgram(this.F);this.hi();c.clear(c.DEPTH_BUFFER_BIT);
c.enable(c.DEPTH_TEST);p.$.re(this.nb);p.$.perspective(b.Qb(),b.mb.width/b.mb.height,.1,100,this.nb);c.uniformMatrix4fv(this.F.Sd,!1,this.nb);b.gm();b.ej();var f=b.Mi(),h;h=d.length-1;for(b.oc=0;h>=f;){var l=d[h],g=1;h==d.length-1&&0==a.Ia&&(g=a.G/(a.G-.5));for(var e=0;6>e;e++){var m;m=b.kb.cb[e];var v=m.jf;if(m.wc&&0<v.Df&&0<v.Wg&&0<v.scale||l.cache){m.Da=!1;var k;m.Pe[h]||(m.Pe[h]={Xa:0,vb:0,xb:0,yb:0});k=m.Pe[h];l.cache?(k.Xa=0,k.vb=0,k.xb=l.M-1,k.yb=l.da-1):b.Gk(l,v,k);for(var v=!0,q=k.vb;q<=
k.yb;q++)for(var u=k.Xa;u<=k.xb;u++){var r=u+q*l.M+e*l.M*l.da,x=l.U[r];x||(x=l.U[r]=new p.Od);this.nh()?x.h||(x.Ud?x.Ud--:(this.Gh(x,l,b.Ee(e,h,u,q)),b.Da=!0)):b.oc++;if(x.eb){if(!x.Ze){r=.5*h+1;x.Ze=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,x.Ze);var z=[-1,-1,1,1,-1,1,1,1,1,-1,1,1];z[3]=u*a.G-a.Ia;z[0]=Math.min((u+1)*a.G,l.width)+a.Ia;z[7]=q*a.G-a.Ia;z[1]=Math.min((q+1)*a.G,l.height)+a.Ia;z[4]=z[1];z[6]=z[3];z[9]=z[0];z[10]=z[7];for(var n=0;12>n;n++)z[n]=0==n%3?g*r*(-2*z[n]/l.width+1):1==n%3?
g*r*(-2*z[n]/l.height+1):r;c.bufferData(c.ARRAY_BUFFER,new Float32Array(z),c.STATIC_DRAW)}}else v=!1;x.visible=m.wc}k.cj=v}}h--}for(e=0;6>e;e++)if(m=b.kb.cb[e],m.wc)for(v=m.jf,this.vf(e),c.uniform1i(this.F.sf,0),c.uniformMatrix4fv(this.F.Sd,!1,this.nb),c.uniformMatrix4fv(this.F.ug,!1,this.la),c.enableVertexAttribArray(this.F.Z),c.enableVertexAttribArray(this.F.ya),c.bindBuffer(c.ARRAY_BUFFER,this.ge),c.vertexAttribPointer(this.F.ya,2,c.FLOAT,!1,0,0),c.activeTexture(c.TEXTURE0),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,
this.Wc),c.useProgram(this.F),h=f;h<=d.length-1;){l=d[h];if(m.wc&&0<v.Df&&m.Pe[h]&&0<=m.Pe[h].Xa){k=m.Pe[h];for(q=k.vb;q<=k.yb;q++)for(u=k.Xa;u<=k.xb;u++)r=u+q*l.M+e*l.M*l.da,(x=l.U[r])&&x.eb&&(c.uniform1f(this.F.oi,1E-4*(u%2+q%2*2)),c.bindBuffer(c.ARRAY_BUFFER,x.Ze),c.vertexAttribPointer(this.F.Z,3,c.FLOAT,!1,0,0),c.bindTexture(c.TEXTURE_2D,x.eb),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,
c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0)),x.visible=m.wc;k.cj&&(h=d.length)}h++}this.sj();b.Yc=!1}};e.prototype.nh=function(){return this.g.Kb<this.g.Ng};e.prototype.Gh=function(b,a,d){var c=this.g;c.Xi++;b.h=new Image;b.rj++;b.Ud=1<<b.rj;b.h.onload=this.Dp(b);b.h.onerror=this.am(b);b.h.onabort=this.am(b);b.h.crossOrigin=c.crossOrigin;b.h.setAttribute("src",d);c.L("load "+d);a.cache&&c.Mb.push(b.h);c.Kb++};e.prototype.om=
function(){var b=this.g,a=b.h;b.le&&(b.Gc(0),b.Oc());if(b.H){var d=b.H;this.hi();O&&d.clearColor(.2,0,0,1);d.clear(d.DEPTH_BUFFER_BIT);d.disable(d.DEPTH_TEST);d.disable(d.CULL_FACE);d.bindBuffer(d.ARRAY_BUFFER,this.Th);var c=[0,0];c[2]=b.m.width;c[3]=0;c[4]=b.m.width;c[5]=b.m.height;c[6]=0;c[7]=b.m.height;d.bufferData(d.ARRAY_BUFFER,new Float32Array(c),d.STATIC_DRAW);this.g.oc=0;if(!this.xc||this.hg)0<a.I.length?this.Xm():this.Ym();b.s.fd?this.Eo():(d.enable(d.DEPTH_TEST),d.depthRange(0,1),d.depthFunc(d.LESS),
this.ai=!1,0<a.I.length&&this.Zp(),this.xc&&!this.ai&&this.Do())}};e.prototype.pp=function(b,a,d,c,f,h,l){var g=this.g,e=g.h,m=g.m,v=d*e.G/a.width,k=(d+1)*e.G/a.width;d=c*e.G/a.height;a=(c+1)*e.G/a.height;1<k&&(f*=2,k=1);1<a&&(f*=2,a=1);f=Math.min(this.Rj,f);var k=(k-v)/f,q=(a-d)/f;c=a=0;var u,r,e={x:0,y:0},x={x:0,y:0},z=0;b.wh=0;var n=g.vg,C=new p.ta,A=this.no;A.Kl();4>h?A.Ae(-90*h):A.Cd(5==h?90:-90);g.$a&&(A.Be(g.$a.O),A.Cd(-g.$a.pitch));A.Ae(-g.pan.c);A.Cd(g.i.c);A.Be(g.O.c);for(h=0;h<=f;h++)for(var y=
0;y<=f;y++)u=2*(v+y*k)-1,r=2*(d+h*q)-1,C.x=1*u,C.y=1*r,C.z=-1,C.normalize(),A.uo(C),u=this.Dk(C,e,g.qa()),0!=g.lc&&1>n&&(u=u&&this.Dk(C,x,g.lc),e.x=e.x*n+x.x*(1-n),e.y=e.y*n+x.y*(1-n)),u?-1E10<e.x&&1E10>e.x&&-1E10<e.y&&1E10>e.y?-2<e.x&&2>e.x&&-2<e.y&&2>e.y&&(a+=e.x,c+=e.y,z++):e.x=NaN:e.x=NaN,b.dd[b.wh++]=e.x,b.dd[b.wh++]=e.y;0<z?(a/=z,c/=z):l=0;for(d=0;d<b.wh;d+=2)e.x=b.dd[d],e.y=b.dd[d+1],g=e.x-a,v=e.y-c,e.x+=g*l,e.y+=v*l,b.dd[d]=m.width/2+e.x*m.width/2,b.dd[d+1]=m.height/2-e.y*m.width/2;this.qp(b,
f)};e.prototype.Dk=function(b,a,d){var c=!0;switch(d){case 0:case 4:d=1/(b.z*this.qj);a.x=-b.x*d;a.y=b.y*d;0<b.z&&(c=!1);break;case 9:1==b.z&&(c=!1);d=1/((1-b.z)*this.Bj);a.x=b.x*d;a.y=-b.y*d;break;case 12:if(d=Math.sqrt(b.x*b.x+b.y*b.y),0==d)a.x=0,a.y=0;else{var f=2*this.Oi*Math.acos(-b.z)/d;if(2<d)return!1;a.x=f*b.x;a.y=-f*b.y}}return c};e.prototype.qp=function(b,a){for(var d=this.g,c=[],f,h=b.sd=0;h<a;h++)for(var l=0;l<a;l++){c[0]=h+l*(a+1);c[1]=h+1+l*(a+1);c[2]=h+(l+1)*(a+1);c[3]=h+1+(l+1)*(a+
1);f=!0;for(var g=0;4>g;g++)isNaN(b.dd[2*c[0]])&&(f=!1);if(f){for(var e=!1,m=!1,v=!1,k=!1,g=0;4>g;g++){var p=b.dd[2*c[g]];p<d.m.width&&(m=!0);0<=p&&(e=!0);p=b.dd[2*c[g]+1];p<d.m.height&&(v=!0);0<=p&&(k=!0)}if(f=f&&m&&e&&v&&k)b.qe[b.sd++]=c[0],b.qe[b.sd++]=c[3],b.qe[b.sd++]=c[2],b.qe[b.sd++]=c[0],b.qe[b.sd++]=c[1],b.qe[b.sd++]=c[3]}}};e.prototype.Zp=function(){var b=this.g,a=b.h,d=b.h.I;b.le&&(b.Gc(0),b.Oc());if(b.H){var c=b.H,f=this.Bl;c.useProgram(f);this.Ij(f);c.enable(c.CULL_FACE);c.cullFace(c.FRONT);
c.enable(c.DEPTH_TEST);p.$.re(this.nb);p.$.perspective(b.Qb(),b.mb.width/b.mb.height,.1,100,this.nb);c.uniformMatrix4fv(c.getUniformLocation(f,"uPMatrix"),!1,this.nb);this.g.oc=0;b.ej();var h=b.Mi(),l,g=0;l=d.length-1;for(var e={},m=d[l];m.mf&&0<l;)l--,m=d[l];for(var v=l,k=v,q=0;6>q;q++)for(var u=0;u<m.da;u++)for(var r=0;r<m.M;r++){var x=r+u*m.M+q*m.M*m.da;e[x]=1}for(;l>=h;){var z={},m=d[l],n=null;0<l&&(n=d[l-1]);var C;C=!0;for(var A in e)if(e.hasOwnProperty(A)){var x=Number(A),y=m.U[x],q=Number(Math.floor(x/
(m.M*m.da))),u=Math.floor((x-q*m.M*m.da)/m.M),r=Math.floor(x-(u*m.M+q*m.M*m.da)),B;if(6<=q)console.log("Grrr...");else if(B=this.g.kb.cb[q],B.Da=!1,y||(y=m.U[x]=new p.Od,b.L("create "+x)),this.pp(y,m,r,u,Math.max(1,this.Rj>>v-l),q,-(0!=b.lc)?.3:.1),y.visible=0<y.sd||m.cache,y.Dh=3,y.mg=Date.now(),y.visible&&!y.eb&&(C=!1,this.nh()?y.h||(y.Ud?y.Ud--:(this.Gh(y,m,b.Ee(q,l,r,u)),b.Da=!0)):this.g.oc++),n&&(y.visible||n.cache)){var y=(r*a.G+1)/m.width,r=Math.min(1,(r+1)*a.G-1/m.width),D=(u*a.G+1)/m.height,
u=Math.min(1,(u+1)*a.G-1/m.height),x=a.G/n.width;B=a.G/n.height;var E=D,D=Math.floor(D*n.height/a.G);do{var F=y,H=Math.floor(y*n.width/a.G);do{var I=H+D*n.M+q*n.M*n.da;H<n.M&&D<n.da?z[I]=1:b.L("Grrrr");H++;F+=x}while(F<r);D++;E+=B}while(E<u)}}C&&(k=l,20>b.f.c&&l<this.Te&&(this.ai=!0));e=z;l--}this.sj();c.uniform1i(c.getUniformLocation(f,"tileTexture"),0);c.activeTexture(c.TEXTURE0);l=h;for(h=-1;l<=Math.min(k,this.Te-1);){m=d[l];for(A in m.U)if(m.U.hasOwnProperty(A)){e=Number(A);y=m.U[e];q=Math.floor(e/
(m.M*m.da));u=Math.floor((e-q*m.M*m.da)/m.M);r=Math.floor(e-(u*m.M+q*m.M*m.da));h!=q&&(h=q,this.ii(q,f));if(g>b.ue){b.L("Excided painted tiles");this.ai=!1;break}y.eb&&(e=q=a.G,r==m.M-1&&(q=m.width-a.G*r),u==m.da-1&&(e=m.height-a.G*u),q=(q+2*a.Ia)/a.G,e=(e+2*a.Ia)/a.G,c.bindTexture(c.TEXTURE_2D,y.eb),c.uniform2f(c.getUniformLocation(f,"uCanvasDimensions"),b.m.width,b.m.height),v=c.getUniformLocation(f,"srcScale"),c.uniform2f(v,.5*m.width/a.G/q,.5*m.height/a.G/e),v=c.getUniformLocation(f,"srcOffset"),
c.uniform2f(v,(.5*m.width+a.Ia-a.G*r)/a.G/q,-(.5*m.height+a.Ia-a.G*u)/a.G/e+1),v=c.getUniformLocation(f,"zOffset"),c.uniform1f(v,(l+1)/(d.length+5)),q=c.getAttribLocation(f,"aVertexPosition"),c.disableVertexAttribArray(0),c.disableVertexAttribArray(1),c.disableVertexAttribArray(2),c.enableVertexAttribArray(q),c.activeTexture(c.TEXTURE0),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,
c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.bindBuffer(c.ARRAY_BUFFER,this.fo),c.vertexAttribPointer(q,2,c.FLOAT,!1,0,0),c.bufferData(c.ARRAY_BUFFER,new Float32Array(y.dd),c.DYNAMIC_DRAW),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.eo),c.bufferData(c.ELEMENT_ARRAY_BUFFER,new Uint16Array(y.qe),c.DYNAMIC_DRAW),c.drawElements(c.TRIANGLES,y.sd,c.UNSIGNED_SHORT,0),g++)}l++}c.disable(c.CULL_FACE);c.cullFace(c.FRONT_AND_BACK);b.Yc=!1}};e.prototype.ii=function(b,a){var d=
this.g.H;p.$.re(this.la);this.vf(b,-1);d.uniformMatrix4fv(d.getUniformLocation(a,"matRotate"),!1,this.la)};e.prototype.Eo=function(){var b=this.g;if(b.H){var a=b.H,d,c=this.Cl;a.useProgram(c);this.ii(0,c);a.uniform2f(a.getUniformLocation(c,"uCanvasDimensions"),b.m.width,b.m.height);1==b.s.format&&(d=a.getUniformLocation(c,"srcScale"),a.uniform2f(d,-.5/Math.PI,(b.s.Qi?-1:1)/Math.PI));14==b.s.format&&(d=a.getUniformLocation(c,"srcScale"),a.uniform2f(d,1-2*b.s.Ne/(b.s.width/3),1-2*b.s.Ne/(b.s.height/
2)));d=a.getUniformLocation(c,"srcOffset");a.uniform2f(d,.5,.5);this.Ij(c);d=a.getUniformLocation(c,"cubeTexture");a.uniform1i(d,0);d=a.getAttribLocation(c,"aVertexPosition");a.disableVertexAttribArray(0);a.disableVertexAttribArray(1);a.disableVertexAttribArray(2);a.enableVertexAttribArray(d);a.bindBuffer(a.ARRAY_BUFFER,this.Th);a.vertexAttribPointer(d,2,a.FLOAT,!1,0,0);a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,b.s.nc);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.Wc);a.drawElements(a.TRIANGLES,6,a.UNSIGNED_SHORT,0)}};e.prototype.Ij=function(b){var a=this.g,d=a.H,c=this.g.m,f=c.width/c.height;switch(a.f.mode){case 1:f=1;break;case 2:f=c.width/Math.sqrt(c.width*c.width+c.height*c.height);break;case 3:4*c.height/3<c.width&&(f=4/3)}c=d.getUniformLocation(b,"rectDstDistance");
this.qj=Math.tan(Math.min(a.f.c,179)/2*Math.PI/180)*f;d.uniform1f(c,this.qj);c=d.getUniformLocation(b,"fisheyeDistance");this.Oi=180/(a.f.c*Math.PI*f);d.uniform1f(c,this.Oi);c=d.getUniformLocation(b,"stereoDistance");this.Bj=Math.tan(Math.min(a.f.c,359)/4*Math.PI/180)*f;d.uniform1f(c,this.Bj);c=d.getUniformLocation(b,"directionBlend");d.uniform1f(c,a.vg)};e.prototype.Do=function(){var b=this.g,a=b.H,d=this.Al;a.useProgram(d);a.enable(a.DEPTH_TEST);this.ii(0,d);a.uniform2f(a.getUniformLocation(d,"uCanvasDimensions"),
b.m.width,b.m.height);b=a.getUniformLocation(d,"srcScale");a.uniform2f(b,1,1);b=a.getUniformLocation(d,"srcOffset");a.uniform2f(b,0,0);b=a.getUniformLocation(d,"zOffset");a.uniform1f(b,.9999);this.Ij(d);this.ii(0,d);b=a.getUniformLocation(d,"cubeTexture");a.uniform1i(b,0);d=a.getAttribLocation(d,"aVertexPosition");a.disableVertexAttribArray(0);a.disableVertexAttribArray(1);a.disableVertexAttribArray(2);a.enableVertexAttribArray(d);a.bindBuffer(a.ARRAY_BUFFER,this.Th);a.vertexAttribPointer(d,2,a.FLOAT,
!1,0,0);a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_CUBE_MAP,this.xc);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MAG_FILTER,a.LINEAR);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.Wc);a.drawElements(a.TRIANGLES,6,a.UNSIGNED_SHORT,0)};e.prototype.Ym=function(){for(var b=this.g,a=b.H,d=[1,3,5,
4,0,2],c=!0,f=!0,h=!1,l=0;6>l;l++)this.Ua[l].te.complete?this.ih[l]||(h=!0):c=!1,this.Ua[l].lf.complete||(f=!1);if(f||c)if(!f||c||!this.xc||h){l=Math.round(b.pc/b.xf);f=(b.pc-l)/2;b.L("paint cube single - isMain: "+c+" overlap: "+f);this.Te=0;this.xc||(this.xc=a.createTexture());b.cd++;a.bindTexture(a.TEXTURE_CUBE_MAP,this.xc);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,
1);h=document.createElement("canvas");h.width=l;h.height=l;for(var g=h.getContext("2d"),l=0;6>l;l++){var e=d[l];this.Ua[e].te.complete?this.ih[e]||(g.drawImage(this.Ua[e].te,-f,-f),a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+l,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,h),this.ih[e]=!0):(g.drawImage(this.Ua[e].lf,-f,-f,b.pc,b.pc),a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+l,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,h))}this.hg=!c}};e.prototype.Xm=function(){var b=this.g,a=this.g.h,d=b.h.I,c=b.H,f,h;f=d.length-1;if(!(0>
f)){d[f].mf&&f--;var l=512;b.gg&&(l=256);!b.rf&&2<=b.devicePixelRatio&&(l=512);for((h=c.getParameter(c.MAX_CUBE_MAP_TEXTURE_SIZE))&&h<l&&(l=h);0<f&&d[f-1].width<=l;)f--;var g,l=d[f];if(0!=l.M&&(h=f,g=this.Um(f),this.hg&&g&&(this.hg=!1),g||(f=d.length-1,l=d[f],g||(l.mf?(g=l.loaded,this.dj(f-1)&&(--f,g=!0)):g=this.dj(f)),this.hg=!0),this.dj(h),g&&this.Te>f)){l=d[f];b.L("paint cube level "+f);this.Te=f;d=b.h.Ia;f=0<d||1<l.M||1<l.da;var e,m;f&&(m=document.createElement("canvas"),m.width=l.width,m.height=
l.height,2048>l.width&&(1500<l.width?(m.width=2048,m.height=2048):700<l.width?(m.width=1024,m.height=1024):(m.width=512,m.height=512)),e=m.getContext("2d"));this.xc=c.createTexture();b.cd++;c.bindTexture(c.TEXTURE_CUBE_MAP,this.xc);c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,1);h=[1,3,5,4,0,2];a=a.G;for(g=0;6>g;g++){for(var v=0;v<l.da;v++)for(var k=0;k<l.M;k++){var p=k+
v*l.M+h[g]*l.M*l.da,u=l.U[p],r=u.h;u.K&&(r=u.K);r?f?(p=m.width/l.width,e.drawImage(r,p*(k*a-d),p*(v*a-d),p*r.width,p*r.height)):c.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+g,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,r):(b.L("WTF?!"),b.L(p),b.L(u))}f&&c.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+g,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,m)}}}};e.prototype.dj=function(b){var a=this.g,d=a.h.I[b];if(0==d.M)return!1;var c=!0;d.cache=!0;for(var f=0;6>f;f++)for(var h=0;h<d.da;h++)for(var l=0;l<d.M;l++){var g=l+h*d.M+f*d.M*d.da,
e=d.U[g];e||(e=d.U[g]=new p.Od);this.nh()?e.h||(e.Ud?e.Ud--:(this.Gh(e,d,a.Ee(f,b,l,h)),a.Da=!0)):this.g.oc++;e.eb||(c=!1,a.Da=!0)}c&&(d.loaded=!0);return c};e.prototype.Um=function(b){b=this.g.h.I[b];if(0==b.M)return!1;for(var a=0;6>a;a++)for(var d=0;d<b.da;d++)for(var c=0;c<b.M;c++){var f=b.U[c+d*b.M+a*b.M*b.da];if(!f||!f.eb)return!1}return b.loaded=!0};e.prototype.ready=function(){return null!=this.xc};e.prototype.sj=function(){for(var b=this.g,a=b.h.I,d=b.H,c=Date.now(),f=a.length-1;0<=f;f--){var h=
a[f];if(!h.cache)for(var l in h.U)if(h.U.hasOwnProperty(l)){var g=h.U[l];0<g.Dh&&g.Dh--;g.visible||0<g.Dh?(g.visible&&(g.mg=c),g=this.Md.indexOf(g),-1!==g&&this.Md.splice(g,1)):-1===this.Md.indexOf(g)&&(g.level=h,this.Md.push(g))}}if(this.Md.length>1.1*b.Zl)for(this.Md.sort(function(a,c){return c.mg-a.mg});this.Md.length>b.Zl;)g=this.Md.pop(),g.eb&&(d.deleteTexture(g.eb),b.cd--,g.eb=0),g.h=null,g.Ze&&(d.deleteBuffer(g.Ze),g.Ze=0),l=g.level.U.indexOf(g),b.L("delete "+l+" "+(c-g.mg)),delete g.level.U[l]};
e.prototype.Sp=function(){var b=this.g;if(b.H){var a=this.g.H;a.disable(a.DEPTH_TEST);var d;for(d=0;d<b.J.length;d++){var c=b.J[d];if(!c.hd){p.$.re(this.la);p.$.rotate(this.la,-b.O.c*Math.PI/180,[0,0,1]);p.$.rotate(this.la,-b.i.c*Math.PI/180,[1,0,0]);p.$.rotate(this.la,(180-b.pan.c)*Math.PI/180,[0,1,0]);p.$.rotate(this.la,c.pan*Math.PI/180,[0,1,0]);p.$.rotate(this.la,-c.i*Math.PI/180,[1,0,0]);p.$.translate(this.la,[0,0,1]);p.$.rotate(this.la,c.Cb*Math.PI/180,[0,0,1]);p.$.rotate(this.la,-c.Ka*Math.PI/
180,[0,1,0]);p.$.rotate(this.la,c.Ba*Math.PI/180,[1,0,0]);var f=Math.tan(c.f/2*Math.PI/180),h=c.be;h||(h=16/9);p.$.scale(this.la,[f,f/h,1]);p.$.translate(this.la,[0,0,-1]);a.bindBuffer(a.ARRAY_BUFFER,this.Ei);a.vertexAttribPointer(this.F.Z,3,a.FLOAT,!1,0,0);a.bindBuffer(a.ARRAY_BUFFER,this.ge);a.vertexAttribPointer(this.F.ya,2,a.FLOAT,!1,0,0);a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,c.nc);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,
a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.Wc);a.uniform1i(this.F.sf,0);a.uniformMatrix4fv(this.F.ug,!1,this.la);a.uniformMatrix4fv(this.F.Sd,!1,this.nb);a.drawElements(a.TRIANGLES,6,a.UNSIGNED_SHORT,0)}}a.enable(a.DEPTH_TEST)}};e.prototype.Rp=function(){var b=this.g,a;if(b.m.width!=b.D.offsetWidth||b.m.height!=b.D.offsetHeight)b.m.width=b.D.offsetWidth,b.m.height=
b.D.offsetHeight;b.le&&(b.Gc(0),b.Oc());if(b.H){var d=b.H;d.useProgram(this.F);p.$.re(this.nb);p.$.perspective(b.Qb(),b.mb.width/b.mb.height,.1,100,this.nb);d.uniformMatrix4fv(this.F.Sd,!1,this.nb);this.vf(0);d.uniform1i(this.F.sf,0);d.uniformMatrix4fv(this.F.Sd,!1,this.nb);d.uniformMatrix4fv(this.F.ug,!1,this.la);d.enableVertexAttribArray(this.F.Z);d.enableVertexAttribArray(this.F.ya);d.bindBuffer(d.ARRAY_BUFFER,this.ge);d.vertexAttribPointer(this.F.ya,2,d.FLOAT,!1,0,0);d.activeTexture(d.TEXTURE0);
d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,this.Wc);d.uniform1f(this.F.oi,1E-4);d.vertexAttribPointer(this.F.Z,3,d.FLOAT,!1,0,0);d.bindTexture(d.TEXTURE_2D,b.s.nc);for(a=0;1>a;a++)this.vf(0),d.bindBuffer(d.ARRAY_BUFFER,b.s.Nj),d.vertexAttribPointer(this.F.Z,3,d.FLOAT,!1,0,0),d.bindBuffer(d.ARRAY_BUFFER,b.s.ci),d.vertexAttribPointer(this.F.ya,2,d.FLOAT,!1,0,0),d.activeTexture(d.TEXTURE0),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,b.s.Yi),d.uniform1i(this.F.sf,0),d.uniformMatrix4fv(this.F.ug,!1,this.la),d.uniformMatrix4fv(this.F.Sd,
!1,this.nb),d.drawElements(d.TRIANGLES,36,d.UNSIGNED_SHORT,0)}};e.prototype.Qp=function(){var b=this.g,a=b.H,d=b.s;if(0<b.J.length)for(var c=0;c<b.J.length;c++){var f=b.J[c];if(!f.hd&&f.Xk&&f.vh!=f.b.currentTime&&(f.vh=f.b.currentTime,!f.be&&0<f.b.videoHeight&&(f.be=f.b.videoWidth/f.b.videoHeight),b.Ug))try{f.nc&&(a.bindTexture(a.TEXTURE_2D,f.nc),a.texImage2D(a.TEXTURE_2D,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,f.b),b.update())}catch(l){b.L(l)}}if(d.b&&(c=Number(d.b.currentTime),d.vh!=c)){d.vh=c;try{var h=
0<d.b.readyState;b.cf&&d.fd&&(h=h&&0<d.b.currentTime);d.nc&&d.Ah&&h&&(d.fd=!0,d.width=d.b.videoWidth,d.height=d.b.videoHeight,a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,b.s.Qi),a.bindTexture(a.TEXTURE_2D,d.nc),a.texImage2D(a.TEXTURE_2D,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,d.b),d.Yl=!0,b.update())}catch(l){b.L(l)}}};e.prototype.rl=function(){var b,a,d=this.g,c=this.g.H;d.ua.style.visibility="hidden";d.w.kg!=d.w.mode&&(d.w.kg=d.w.mode);if((0<=d.w.mode||0<d.w.hb.length)&&!d.C.Og){var f=1;0>=d.w.mode&&(f=0);3==d.w.mode&&
(f=d.w.oa);for(b=0;b<d.P.length;b++){var h=d.P[b];if("poly"==h.type){var l=h.Td,g=f;2==d.w.mode&&(g=h.oa);var e=d.w.hb.indexOf(h.id);-1!=e&&(g=d.w.Jb[e]);if(0<l.length){e=[];for(a=0;a<l.length;a++)e.push(l[a].mc),e.push(l[a].Hb),e.push(0);c.useProgram(this.yd);c.enable(c.BLEND);c.blendFuncSeparate(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,c.SRC_ALPHA,c.ONE);c.disable(c.DEPTH_TEST);l=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,l);c.bufferData(c.ARRAY_BUFFER,new Float32Array(e),c.STATIC_DRAW);c.uniform2f(c.getUniformLocation(this.yd,
"uCanvasDimensions"),d.m.width,d.m.height);l=c.getUniformLocation(this.yd,"uColor");a=h.ec;c.uniform3f(l,(a>>16&255)/255,(a>>8&255)/255,(a&255)/255);var m=c.getUniformLocation(this.yd,"uAlpha");c.uniform1f(m,h.dc*g);c.vertexAttribPointer(this.yd.Z,3,c.FLOAT,!1,0,0);c.drawArrays(c.LINE_LOOP,0,e.length/3);a=h.bc;c.uniform3f(l,(a>>16&255)/255,(a>>8&255)/255,(a&255)/255);c.uniform1f(m,h.ac*g);c.enable(c.STENCIL_TEST);c.clearStencil(0);c.clear(c.STENCIL_BUFFER_BIT);c.colorMask(!1,!1,!1,!1);c.stencilFunc(c.ALWAYS,
1,1);c.stencilOp(c.INCR,c.INCR,c.INCR);c.drawArrays(c.TRIANGLE_FAN,0,e.length/3);c.colorMask(!0,!0,!0,!0);c.stencilFunc(c.EQUAL,1,1);c.stencilOp(c.ZERO,c.ZERO,c.ZERO);c.drawArrays(c.TRIANGLE_FAN,0,e.length/3);c.disable(c.BLEND);c.enable(c.DEPTH_TEST);c.disable(c.STENCIL_TEST);c.useProgram(this.F)}}}}};e.prototype.Hj=function(){var b=this.g,a=b.h;if(b.m.width!=b.D.offsetWidth||b.m.height!=b.D.offsetHeight)b.m.width=b.D.offsetWidth,b.m.height=b.D.offsetHeight;b.le&&(b.Gc(0),b.Oc());if(b.H){var d=b.H;
this.hi();d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT);d.disable(d.DEPTH_TEST);d.disable(d.CULL_FACE);d.useProgram(this.Sf);var c=d.getUniformLocation(this.Sf,"uRect");d.uniform2f(d.getUniformLocation(this.Sf,"uCanvasDimensions"),b.m.width,b.m.height);d.activeTexture(d.TEXTURE0);var f;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,this.Wc);f=d.getAttribLocation(this.Sf,"aVertexPosition");d.disableVertexAttribArray(0);d.disableVertexAttribArray(1);d.disableVertexAttribArray(2);d.enableVertexAttribArray(f);
d.bindBuffer(d.ARRAY_BUFFER,this.ge);d.vertexAttribPointer(f,2,d.FLOAT,!1,0,0);b.oc=0;var h,l;l=100/b.f.c;h=a.width/a.height;f=b.m.height*l*h;l*=b.m.height;h=(b.pan.c/100/h-.5)*f+b.m.width/2;for(var g=(b.i.c/100-.5)*l+b.m.height/2,e,m,k,w=0;a.I.length>=w+2&&a.I[w+1].width>f;)w++;var q,u;u=[];for(q=a.I.length-1;q>=w;){var r=a.I[q],x;r.cache?(x={Xa:0,vb:0},x.xb=r.M-1,x.yb=r.da-1):(x={},e=-g/l*(r.height/b.h.G),m=(-h+b.m.width)/f*(r.width/b.h.G),k=(-g+b.m.height)/l*(r.height/b.h.G),x.Xa=Math.min(Math.max(0,
Math.floor(-h/f*(r.width/b.h.G))),r.M-1),x.vb=Math.min(Math.max(0,Math.floor(e)),r.da-1),x.xb=Math.min(Math.max(0,Math.floor(m)),r.M-1),x.yb=Math.min(Math.max(0,Math.floor(k)),r.da-1));u[q]=x;var z=!0;for(m=x.vb;m<=x.yb;m++)for(e=x.Xa;e<=x.xb;e++){k=e+m*r.M;var n=r.U[k];n||(n=new p.Od,r.U[k]=n);this.nh()?n.h||(this.Gh(n,r,b.Ee(0,q,e,m)),b.Da=!0):this.g.oc++;n.h&&n.h.complete||(z=!1);n.visible=!0}x.cj=z;q--}for(q=a.I.length-1;q>=w;){r=a.I[q];if(u[q]&&0<=u[q].Xa)for(x=u[q],m=x.vb;m<=x.yb;m++)for(e=
x.Xa;e<=x.xb;e++)k=e+m*r.M,(n=r.U[k])&&n.h&&n.h.complete&&(d.uniform4f(c,h+(-a.Ia+a.G*e)*f/r.width,g+(-a.Ia+a.G*m)*l/r.height,n.h.width*f/r.width,n.h.height*l/r.height),n&&n.eb&&(d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,this.Wc),d.bindTexture(d.TEXTURE_2D,n.eb),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),
d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0)));q--}this.sj()}};e.prototype.Uh=function(){var b=this.g.H;if(b&&this.Ua)for(;0<this.Ua.length;){var a=this.Ua.pop();a.xo=!0;b.deleteTexture(a)}this.xc&&(b.deleteTexture(this.xc),this.xc=null);this.Te=1E6;this.ih=[!1,!1,!1,!1,!1,!1]};return e}();p.Bm=e})(ggP2VR||(ggP2VR={}));
(function(p){var e=function(){return function(){this.jf={Tf:1,Uf:1,og:0,pg:0,Df:0,Wg:0,scale:1};this.wc=!0;this.Pe=[]}}(),k=function(){function b(){var a;this.cb=Array(6);for(a=0;6>a;a++)this.cb[a]=new e}b.prototype.Vm=function(a,d,c,b){for(var h=0;6>h;h++){var l;if(l=this.cb[h]){var g;g=[];g.push(new p.ta(-1,-1,-1,0,0));g.push(new p.ta(1,-1,-1,1,0));g.push(new p.ta(1,1,-1,1,1));g.push(new p.ta(-1,1,-1,0,1));for(var e=0;e<g.length;e++)4>h?g[e].Ka(-Math.PI/2*h):g[e].Ba(Math.PI/2*(4===h?-1:1)),b&&(g[e].Cb(b.O*
Math.PI/180),g[e].Ba(-b.pitch*Math.PI/180)),g[e].Ka(-a*Math.PI/180),g[e].Ba(d*Math.PI/180),g[e].Cb(c*Math.PI/180);l.wc=0<g.length}}};return b}();p.xm=k})(ggP2VR||(ggP2VR={}));
(function(p){p.wm=function(){return function(){this.I=[];this.nf="0x000000";this.wl=!1;this.jl=this.il=.4;this.G=512;this.Ia=1;this.bj=0;this.kl="";this.El=this.height=this.width=0}}();p.Il=function(){return function(){this.height=this.width=0;this.mf=this.cache=!1;this.da=this.M=0;this.loaded=!1;this.U=[]}}();p.Od=function(){return function(){this.loaded=this.visible=!1;this.Ud=this.rj=0;this.dd=[];this.wh=0;this.qe=[];this.Dh=this.mg=this.sd=0}}()})(ggP2VR||(ggP2VR={}));
(function(p){p.sm=function(){return function(e,k){this.g=e;this.Aa=k;var b,a,d=this.__div=document.createElement("div");b=document.createElement("img");b.setAttribute("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA5xJREFUeNqclmlIVFEUx997TjrplFQW2WKBBSYtRFlpWUILSSsRZRQIBdGHCFqIoKIvQRsUFRJC9LEgaSFbMMpcWi1pLzOLsjItKms0U5t5/c/wH7nc5o2jF374xrv87z33nHOPaRsRtbFgDpgJxoD+wATfwDNQDK6CyrCr5OcbhgiGIRsUAZt4QTWoIFXgp9JfAhY7rgdBl8NeBoLDYBloA+dBOagFTcDHcVEgDgwBGWA+OAcugvXgvb5wKMGJoAAMp9BpUA96EBf/Btsf8BI8AWfAErAcpHHDZeriliY2AVwDg8AucAQ0Ag+I4XhTm2Oxz8PT46KMbTx5EZjuJDgAnAVusJUm9DhYwalFcc59sIXXIaceFkowDySBPTRPL20xm+b7zYXa+N3CPrWJ6GuwGySA40HLBHc/GywFhbS5R1lEBrZy7FQwiSaX9pmnqeAYt+KUcew7BVZw/QKTq0ocpYPVvDOXItZCk2xgDIZqL8BR8Ab0VDbr4yZOgLeIwzQx6WiQxcCt1+6sld66L4yYtFSwF4yg2dU7/cEwGW9YVkAwmycp1dzdpvgm0DcCh4kHmxWzBls0uBX4qqmZJ4KzePm1IeJLgjmlC16aDKZpp5Q168B3o6wsSwTHgU+MIUs74RSj6y1d+212HKimJlUE+tFRfJpYtOKNXWmJTASqWf2Bu/R6+4TKHOrOzG4IhptjWgHbGkZvepQ6SQK7oRuCXzjX1DJavBEX1ygfT8FgBqpfm1zRDcEKbR2bsZlkJCdXieB1ZhZ5YtqVgXIPN+m9kbY6hpdb+d9fPncJRmZmqQheZkemJmgxyxykl3XWJEkcAl7N21s7PDcl5ZJ0PAa3wVwmWtVbZafPwQ7wLozYB7ATPNJO56d/LAikP9u+66KNJS1d4IOZp7wU0hfLukUyzgwm70T2N/DOxIy/eFdqawa5DL2NEGwP5k15Ja4woz9glvcomd9NzyvkFcQo5gomaLfm5c0svnKZ2k7q7+FauvR2MJKZR3+sY5WgtvkdG6JyELGhNHMTXyGfLviRJ5Tcd4Dlhle7086Sgp8CqVxDkn4OqHaqacr5ekjy3Q/W0FRNNGmoMtamdzdxsytZC0lqXKhEgWPVVgImg2NgFT1MHOoOk3yLEtgWN5TEOYvoIFI1rGM19//2wpAD7imF7lfwENwAxaASNCj90pcLLKdC2Iyw1M9gnEplMEp5kOU1f8WwKGJm8oUr9f8JMAAVMDM6HSDa9QAAAABJRU5ErkJggg%3D%3D");
b.setAttribute("style","position: absolute;width: 28px; height: 28px;top: -14px;left: -14px; "+e.Ha+"user-select: none;");b.ondragstart=function(){return!1};d.appendChild(b);b="position:absolute;"+(e.Ha+"user-select: none;");b+=e.Ha+"touch-callout: none;";b+=e.Ha+"tap-highlight-color: rgba(0,0,0,0);";e.ed&&!e.Y&&(b+=e.Ha+"transform: translateZ(9999999px);");d.setAttribute("style",b);d.onclick=function(){e.tf(k);e.jj(k.url,k.target)};var c=e.w.Fj;c.enabled&&(a=document.createElement("div"),b="position:absolute;top:\t 20px;",
b=c.ni?b+"white-space: pre-wrap;":b+"white-space: nowrap;",b+=e.Ha+"transform-origin: 50% 50%;",a.setAttribute("style",b+"visibility: hidden;overflow: hidden;padding: 0px 1px 0px 1px;font-size: 13px;"),a.style.color=this.g.ea(c.Gj,c.Ej),c.background?a.style.backgroundColor=this.g.ea(c.bc,c.ac):a.style.backgroundColor="transparent",a.style.border="solid "+this.g.ea(c.ec,c.dc)+" "+c.vi+"px",a.style.borderRadius=c.ui+"px",a.style.textAlign="center",0<c.width?(a.style.left=-c.width/2+"px",a.style.width=
c.width+"px"):a.style.width="auto",a.style.height=0<c.height?c.height+"px":"auto",a.style.overflow="hidden",a.innerHTML=k.title,d.onmouseover=function(){0==c.width&&(a.style.left=-a.offsetWidth/2+"px");a.style.visibility="inherit"},d.onmouseout=function(){a.style.visibility="hidden"},d.appendChild(a))}}()})(ggP2VR||(ggP2VR={}));
(function(p){p.Dc=function(){return function(){this.value=this.time=0;this.Mj="";this.fe=this.ee=this.Sc=this.de=this.pb=this.type=this.rb=0;this.bh=""}}();p.ll=function(){return function(){this.Kp=this.Fm=this.length=0}}();p.$k=function(){return function(){}}()})(ggP2VR||(ggP2VR={}));
(function(p){var e=function(){function e(b){this.g=b;this.enabled=!1;this.Jf=1;this.Oe=0;this.type="crossdissolve";this.Zb=this.Oa=this.zc=0;this.Ef=5;this.ae=1;this.Ff=!1;this.De=this.Ce=this.Aj=0;this.Gd=70;this.rm=0;this.sb=this.qm=1;this.$g=this.Zg=.5;this.ce=this.mi=this.Ih=this.Ch=!1;this.Hi=1}e.prototype.fg=function(){var b=this.g.H,a=b.createShader(b.VERTEX_SHADER);b.shaderSource(a,"attribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nvarying vec2 vTextureCoord;\nuniform bool uZoomIn;\nuniform float uZoomFactor;\nuniform vec2 uZoomCenter;\nvoid main(void) {\n\t gl_Position = vec4(aVertexPosition, 1.0);\n\t if(!uZoomIn) {\n\t \n\t   vTextureCoord = aTextureCoord;\n\t }\n\t else {\n\t   vTextureCoord = (aTextureCoord - vec2(0.5, 0.5)) * (1.0/uZoomFactor) + uZoomCenter;\n\t }\n}\n");
b.compileShader(a);b.getShaderParameter(a,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(a)),a=null);var d=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform float uAlpha;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, uAlpha);\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);this.na=b.createProgram();b.attachShader(this.na,a);b.attachShader(this.na,d);b.linkProgram(this.na);b.getProgramParameter(this.na,b.LINK_STATUS)||alert("Could not initialise shaders");this.na.Z=b.getAttribLocation(this.na,"aVertexPosition");b.enableVertexAttribArray(this.na.Z);this.na.ya=b.getAttribLocation(this.na,"aTextureCoord");b.enableVertexAttribArray(this.na.ya);d=b.createShader(b.FRAGMENT_SHADER);
b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform float uColorPercent;\nuniform float uAlpha;\nuniform vec3 uDipColor;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n gl_FragColor = vec4(textureColor.x * (1.0 - uColorPercent) + uDipColor.x * uColorPercent, textureColor.y * (1.0 - uColorPercent) + uDipColor.y * uColorPercent, textureColor.z * (1.0 - uColorPercent) + uDipColor.z * uColorPercent, uAlpha);\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);this.Ra=b.createProgram();b.attachShader(this.Ra,a);b.attachShader(this.Ra,d);b.linkProgram(this.Ra);b.getProgramParameter(this.Ra,b.LINK_STATUS)||alert("Could not initialise shaders");this.Ra.Z=b.getAttribLocation(this.Ra,"aVertexPosition");b.enableVertexAttribArray(this.Ra.Z);this.Ra.ya=b.getAttribLocation(this.Ra,"aTextureCoord");b.enableVertexAttribArray(this.Ra.ya);d=b.createShader(b.FRAGMENT_SHADER);
b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform bool uRound;\nuniform float uRadius;\nuniform vec2 uRectDim;\nuniform vec2 uIrisCenter;\nuniform float uSoftEdge;\nuniform sampler2D uSampler;\nvoid main(void) {\n float alpha = 0.0;\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n if (uRound) {\n\t  vec2 diff = uIrisCenter - gl_FragCoord.xy;\n\t   float distFromCenter = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n\t   if (distFromCenter > uRadius) {\n      alpha = 1.0;\n    } else {\n      alpha = 1.0 - ((uRadius - distFromCenter) / uSoftEdge);\n    };\n }\n else {\n    float alphaFromLeft = 1.0 - ((gl_FragCoord.x -(uIrisCenter.x - uRectDim.x)) / uSoftEdge);\n    float alphaFromRight = 1.0 - (((uIrisCenter.x + uRectDim.x) - gl_FragCoord.x) / uSoftEdge);\n    float alphaFromTop = 1.0 - ((gl_FragCoord.y -(uIrisCenter.y - uRectDim.y)) / uSoftEdge);\n    float alphaFromBottom = 1.0 - (((uIrisCenter.y + uRectDim.y) - gl_FragCoord.y) / uSoftEdge);\n    alpha = max(max(alphaFromLeft, alphaFromRight), max(alphaFromTop, alphaFromBottom));\n }\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, alpha);\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);this.Ga=b.createProgram();b.attachShader(this.Ga,a);b.attachShader(this.Ga,d);b.linkProgram(this.Ga);b.getProgramParameter(this.Ga,b.LINK_STATUS)||alert("Could not initialise shaders");this.Ga.Z=b.getAttribLocation(this.Ga,"aVertexPosition");b.enableVertexAttribArray(this.Ga.Z);this.Ga.ya=b.getAttribLocation(this.Ga,"aTextureCoord");b.enableVertexAttribArray(this.Ga.ya);d=b.createShader(b.FRAGMENT_SHADER);
b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform float uPercent;\nuniform int uDirection;\nuniform vec2 uCanvasDimensions;\nuniform float uSoftEdge;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n float alpha = 0.0;\n if (uDirection == 1) {\n\t if (gl_FragCoord.x > uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((uPercent - gl_FragCoord.x) / uSoftEdge);\n  }\n }\n if (uDirection == 2) {\n\t if (gl_FragCoord.x < uCanvasDimensions.x - uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((gl_FragCoord.x - (uCanvasDimensions.x - uPercent)) / uSoftEdge);\n  }\n }\n if (uDirection == 3) {\n\t if (gl_FragCoord.y < uCanvasDimensions.y - uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((gl_FragCoord.y - (uCanvasDimensions.y - uPercent)) / uSoftEdge);\n  }\n }\n if (uDirection == 4) {\n\t if (gl_FragCoord.y > uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((uPercent - gl_FragCoord.y) / uSoftEdge);\n  }\n }\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, alpha);\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);this.Na=b.createProgram();b.attachShader(this.Na,a);b.attachShader(this.Na,d);b.linkProgram(this.Na);b.getProgramParameter(this.Na,b.LINK_STATUS)||alert("Could not initialise shaders");this.Na.Z=b.getAttribLocation(this.Na,"aVertexPosition");b.enableVertexAttribArray(this.Na.Z);this.Na.ya=b.getAttribLocation(this.Na,"aTextureCoord");b.enableVertexAttribArray(this.Na.ya)};e.prototype.Gc=function(){var b=
this.g.H;if(!b)return!1;if(this.Xb=b.createFramebuffer()){b.bindFramebuffer(b.FRAMEBUFFER,this.Xb);this.Xb.width=1024;this.Xb.height=1024;this.He=b.createTexture();b.bindTexture(b.TEXTURE_2D,this.He);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,this.Xb.width,this.Xb.height,0,b.RGBA,b.UNSIGNED_BYTE,null);var a=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,a);b.renderbufferStorage(b.RENDERBUFFER,
b.DEPTH_COMPONENT16,this.Xb.width,this.Xb.height);b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,this.He,0);b.framebufferRenderbuffer(b.FRAMEBUFFER,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,a);b.bindTexture(b.TEXTURE_2D,null);b.bindRenderbuffer(b.RENDERBUFFER,null);b.bindFramebuffer(b.FRAMEBUFFER,null);this.gb=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,this.gb);b.bufferData(b.ARRAY_BUFFER,new Float32Array([-1,-1,0,1,-1,0,-1,1,0,1,1,0]),b.STATIC_DRAW);this.gb.Jc=3;this.gb.Rd=4;this.pf=
b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,this.pf);b.bufferData(b.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,1,1]),b.STATIC_DRAW);return!0}return!1};e.prototype.sl=function(b){var a=this.g.H,d=this.g.mb;if(this.Hd){a.useProgram(this.na);a.bindBuffer(a.ARRAY_BUFFER,this.gb);a.vertexAttribPointer(this.na.Z,this.gb.Jc,a.FLOAT,!1,0,0);a.bindBuffer(a.ARRAY_BUFFER,this.pf);a.vertexAttribPointer(this.na.ya,2,a.FLOAT,!1,0,0);a.enableVertexAttribArray(this.na.Z);a.enableVertexAttribArray(this.na.ya);a.activeTexture(a.TEXTURE0);
a.bindTexture(a.TEXTURE_2D,this.He);var d=1+(this.sb-1)*b,c=a.getUniformLocation(this.na,"uAlpha");a.uniform1f(c,1);c=a.getUniformLocation(this.na,"uZoomIn");a.uniform1i(c,1);var c=a.getUniformLocation(this.na,"uZoomCenter"),f=.5+(this.Zg-.5)*Math.sqrt(b),h=.5+(this.$g-.5)*Math.sqrt(b);0>f-.5/d&&(f=.5/d);0>h-.5/d&&(h=.5/d);1<f+.5/d&&(f=1-.5/d);1<h+.5/d&&(h=1-.5/d);a.uniform2f(c,f,h);f=a.getUniformLocation(this.na,"uZoomFactor");a.uniform1f(f,d);a.uniform1i(a.getUniformLocation(this.na,"uSampler"),
0);a.drawArrays(a.TRIANGLE_STRIP,0,this.gb.Rd);a.useProgram(this.g.ma.F)}else{this.g.Rg();a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.SRC_ALPHA,a.ONE);a.enable(a.BLEND);a.disable(a.DEPTH_TEST);f=.5+(this.Zg-.5);h=.5+(this.$g-.5);0>f-.5/this.sb&&(f=.5/this.sb);0>h-.5/this.sb&&(h=.5/this.sb);1<f+.5/this.sb&&(f=1-.5/this.sb);1<h+.5/this.sb&&(h=1-.5/this.sb);if("crossdissolve"==this.type)a.useProgram(this.na),a.bindBuffer(a.ARRAY_BUFFER,this.gb),a.vertexAttribPointer(this.na.Z,this.gb.Jc,
a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,this.pf),a.vertexAttribPointer(this.na.ya,2,a.FLOAT,!1,0,0),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,this.He),c=a.getUniformLocation(this.na,"uAlpha"),a.uniform1f(c,1-b),c=a.getUniformLocation(this.na,"uZoomIn"),a.uniform1i(c,1==this.Oa||2==this.Oa?1:0),c=a.getUniformLocation(this.na,"uZoomCenter"),a.uniform2f(c,f,h),f=a.getUniformLocation(this.na,"uZoomFactor"),a.uniform1f(f,this.sb),a.uniform1i(a.getUniformLocation(this.na,"uSampler"),0);
else if("diptocolor"==this.type)a.useProgram(this.Ra),a.bindBuffer(a.ARRAY_BUFFER,this.gb),a.vertexAttribPointer(this.Ra.Z,this.gb.Jc,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,this.pf),a.vertexAttribPointer(this.Ra.ya,2,a.FLOAT,!1,0,0),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,this.He),a.uniform1f(a.getUniformLocation(this.Ra,"uColorPercent"),Math.min(2*b,1)),c=a.getUniformLocation(this.Ra,"uAlpha"),a.uniform1f(c,1-Math.max(2*(b-.5),0)),a.uniform3f(a.getUniformLocation(this.Ra,"uDipColor"),
(this.Oe>>16&255)/255,(this.Oe>>8&255)/255,(this.Oe&255)/255),c=a.getUniformLocation(this.Ra,"uZoomIn"),a.uniform1i(c,1==this.Oa||2==this.Oa?1:0),c=a.getUniformLocation(this.Ra,"uZoomCenter"),a.uniform2f(c,f,h),f=a.getUniformLocation(this.Ra,"uZoomFactor"),a.uniform1f(f,this.sb),a.uniform1i(a.getUniformLocation(this.Ra,"uSampler"),0);else if("irisround"==this.type||"irisroundcenter"==this.type||"irisrectangular"==this.type||"irisrectangularcenter"==this.type){a.useProgram(this.Ga);a.bindBuffer(a.ARRAY_BUFFER,
this.gb);a.vertexAttribPointer(this.Ga.Z,this.gb.Jc,a.FLOAT,!1,0,0);a.bindBuffer(a.ARRAY_BUFFER,this.pf);a.vertexAttribPointer(this.Ga.ya,2,a.FLOAT,!1,0,0);a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,this.He);var l;1==this.Oa||2==this.Oa||"irisroundcenter"==this.type||"irisrectangularcenter"==this.type?l=c=.5:(c=this.Zg,l=this.$g);var g=c*d.width,e=l*d.height,g=Math.max(g,d.width-g),e=Math.max(e,d.height-e);"irisround"==this.type||"irisroundcenter"==this.type?a.uniform1f(a.getUniformLocation(this.Ga,
"uRadius"),(Math.sqrt(g*g+e*e)+this.zc)*b):(g>e?(e=d.height/d.width*g+this.zc,g+=this.zc):(g=d.width/d.height*e+this.zc,e+=this.zc),a.uniform2f(a.getUniformLocation(this.Ga,"uRectDim"),g*b,e*b));b=a.getUniformLocation(this.Ga,"uSoftEdge");a.uniform1f(b,this.zc);a.uniform1i(a.getUniformLocation(this.Ga,"uRound"),"irisround"==this.type||"irisroundcenter"==this.type?1:0);a.uniform2f(a.getUniformLocation(this.Ga,"uIrisCenter"),c*d.width,l*d.height);c=a.getUniformLocation(this.Ga,"uZoomIn");a.uniform1i(c,
1==this.Oa||2==this.Oa?1:0);c=a.getUniformLocation(this.Ga,"uZoomCenter");a.uniform2f(c,f,h);f=a.getUniformLocation(this.Ga,"uZoomFactor");a.uniform1f(f,this.sb);a.uniform1i(a.getUniformLocation(this.Ga,"uSampler"),0)}else if("wipeleftright"==this.type||"wiperightleft"==this.type||"wipetopbottom"==this.type||"wipebottomtop"==this.type||"wiperandom"==this.type)a.useProgram(this.Na),a.bindBuffer(a.ARRAY_BUFFER,this.gb),a.vertexAttribPointer(this.Na.Z,this.gb.Jc,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,
this.pf),a.vertexAttribPointer(this.Na.ya,2,a.FLOAT,!1,0,0),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,this.He),a.uniform1f(a.getUniformLocation(this.Na,"uPercent"),3>this.Hi?b*(d.width+this.zc):b*(d.height+this.zc)),b=a.getUniformLocation(this.Na,"uSoftEdge"),a.uniform1f(b,this.zc),a.uniform1i(a.getUniformLocation(this.Na,"uDirection"),this.Hi),a.uniform2f(a.getUniformLocation(this.Na,"uCanvasDimensions"),d.width,d.height),c=a.getUniformLocation(this.Na,"uZoomIn"),a.uniform1i(c,1==this.Oa||
2==this.Oa?1:0),c=a.getUniformLocation(this.Na,"uZoomCenter"),a.uniform2f(c,f,h),f=a.getUniformLocation(this.Na,"uZoomFactor"),a.uniform1f(f,this.sb),a.uniform1i(a.getUniformLocation(this.Na,"uSampler"),0);a.drawArrays(a.TRIANGLE_STRIP,0,this.gb.Rd);a.useProgram(this.g.ma.F);a.disable(a.BLEND);a.enable(a.DEPTH_TEST)}};return e}();p.um=e})(ggP2VR||(ggP2VR={}));
(function(p){var e=function(){function e(b){this.Pg=[];this.g=b;this.enabled=!1;this.rb=2;this.fk=!1}e.prototype.lk=function(b){if(2==b.mode||3==b.mode||5==b.mode){var a=this.g.za.currentTime,d=b.vc.gain.value,c=b.tc.gain.value,f=b.uc.gain.value;b.sc.gain.linearRampToValueAtTime(b.sc.gain.value,a);b.sc.gain.linearRampToValueAtTime(0,a+this.rb);b.vc.gain.linearRampToValueAtTime(d,a);b.vc.gain.linearRampToValueAtTime(0,a+this.rb);b.tc.gain.linearRampToValueAtTime(c,a);b.tc.gain.linearRampToValueAtTime(0,
a+this.rb);b.uc.gain.linearRampToValueAtTime(f,a);b.uc.gain.linearRampToValueAtTime(0,a+this.rb)}else a=this.g.za.currentTime,b.ad.gain.linearRampToValueAtTime(b.ad.gain.value,a),b.ad.gain.linearRampToValueAtTime(0,a+this.rb);b.oh=!0;setTimeout(function(){b.Bd()},1E3*this.rb+5)};e.prototype.zp=function(){for(var b=0;b<this.g.N.length;b++){var a=this.g.N[b];-1==this.g.Nc.indexOf(a.id)&&(-1==this.g.Nc.indexOf("_main")||-1!=this.g.$d.indexOf(a.id))&&!this.g.ic(a.id)&&-1<a.loop&&4!=a.mode&&6!=a.mode&&
(a.ha?a.Uc():(a.b.play(),a.b.currentTime=0))}};e.prototype.fn=function(){for(var b=(this.g.za.currentTime-this.wp)/this.rb,b=Math.min(1,b),a=0;a<this.g.N.length;a++){var d=this.g.N[a];this.g.ic(d.id)&&1>d.ja&&(d.ja=b)}1==b&&clearInterval(this.vp)};return e}();p.vm=e})(ggP2VR||(ggP2VR={}));
(function(p){var e=function(){function e(b){this.ng=[];this.Vc=null;this.Vb=[];this.Nb=[];this.Wb=[];this.xj=!0;this.g=b;this.Wm()}e.prototype.fg=function(){var b=this.g.H,a=b.createShader(b.VERTEX_SHADER);b.shaderSource(a,"attribute vec3 aVertexPosition;\nvoid main(void) {\n gl_Position = vec4(aVertexPosition, 1.0);\n}\n");b.compileShader(a);b.getShaderParameter(a,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(a)),a=null);var d=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec4 vColor;\nuniform vec2 uCanvasDimensions;\nuniform vec2 uFlareCenterPosition;\nuniform float uBlindingValue;\nuniform float uAspectRatio;\nvoid main(void) {\n float canvasDiag = sqrt( (uCanvasDimensions.x * uCanvasDimensions.x) + (uCanvasDimensions.y * uCanvasDimensions.y) );\n vec2 diff = uFlareCenterPosition - gl_FragCoord.xy;\n diff.y = diff.y * uAspectRatio;\n float distFromFlarePoint = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n float factor = (distFromFlarePoint / canvasDiag) / 10.0;\n gl_FragColor = vec4(1.0, 1.0, 1.0, pow(((1.0 - factor) * 0.8) * uBlindingValue, 2.0));\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);this.cc=b.createProgram();b.attachShader(this.cc,a);b.attachShader(this.cc,d);b.linkProgram(this.cc);b.getProgramParameter(this.cc,b.LINK_STATUS)||alert("Could not initialise shaders");this.cc.Z=b.getAttribLocation(this.cc,"aVertexPosition");b.enableVertexAttribArray(this.cc.Z);d=b.createShader(b.VERTEX_SHADER);a=b.createShader(b.VERTEX_SHADER);b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\nvarying vec4 vColor;\nuniform vec2 uCirclePosition;\nuniform float uCircleRadius;\nuniform vec2 uCanvasDimensions2;\nuniform float uAspectRatio;\nvoid main(void) {\n vec2 circleOnScreen = aVertexPosition.xy * uCircleRadius + uCirclePosition;\n circleOnScreen.y = circleOnScreen.y / uAspectRatio;\n vec2 circleNorm = (circleOnScreen / uCanvasDimensions2) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(circleNorm.x, circleNorm.y, 0.0, 1.0);\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);b.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\nvarying vec4 vColor;\nuniform vec2 uCirclePosition;\nuniform float uCircleRadius;\nuniform vec2 uCanvasDimensions2;\nuniform float uAspectRatio;\nvoid main(void) {\n vec2 circleOnScreen = aVertexPosition.xy * uCircleRadius + uCirclePosition;\n circleOnScreen.y = circleOnScreen.y / uAspectRatio;\n vec2 circleNorm = (circleOnScreen / uCanvasDimensions2) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(circleNorm.x, circleNorm.y, 0.0, 1.0);\n}\n");
b.compileShader(a);b.getShaderParameter(a,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(a)),d=null);var c=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(c,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec4 vColor;\nuniform vec2 uCircleTexturePosition;\nuniform vec3 uCircleColor;\nuniform float uCircleRadius;\nuniform float uCircleAlpha;\nuniform float uCircleSoftness;\nuniform float uAspectRatio;\nvoid main(void) {\n vec2 diff = uCircleTexturePosition - gl_FragCoord.xy;\n diff.y = diff.y * uAspectRatio;\n float distFromCircleCenter = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n float softnessDistance = uCircleRadius * (1.0 - uCircleSoftness);\n if (distFromCircleCenter > uCircleRadius)\n {\n\t  gl_FragColor = vec4(uCircleColor, 0.0);\n }\n else if (distFromCircleCenter <= (softnessDistance))\n {\n\t  float factor = distFromCircleCenter / softnessDistance;\n\t  gl_FragColor = vec4(uCircleColor, pow((1.0 - (0.2 * factor)) * uCircleAlpha, 1.8));\n }\n else\n {\n\t  float factor = (distFromCircleCenter - softnessDistance) / (uCircleRadius - softnessDistance);\n\t  gl_FragColor = vec4(uCircleColor, pow((0.8 - (0.8 * factor)) * uCircleAlpha, 1.8));\n }\n}\n");
b.compileShader(c);b.getShaderParameter(c,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(c)),c=null);this.pa=b.createProgram();b.attachShader(this.pa,d);b.attachShader(this.pa,c);b.linkProgram(this.pa);b.getProgramParameter(this.pa,b.LINK_STATUS)||alert("Could not initialise shaders");this.pa.Z=b.getAttribLocation(this.pa,"aVertexPosition");b.enableVertexAttribArray(this.pa.Z);d=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec4 vColor;\nuniform vec2 uRingTexturePosition;\nuniform float uRingRadius;\nuniform float uRingAlpha;\nuniform float uAspectRatio;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec2 diff = uRingTexturePosition - gl_FragCoord.xy;\n diff.y = diff.y * uAspectRatio;\n float distFromRingCenter = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n float factor = distFromRingCenter / uRingRadius;\n if (distFromRingCenter > uRingRadius)\n {\n\t gl_FragColor = vec4(1.0, 1.0, 1.0, 0.0);\n }\n else\n {\n vec4 textureColor = texture2D(uSampler, vec2(factor / uAspectRatio, 0.5));\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, uRingAlpha);\n }\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);this.qb=b.createProgram();b.attachShader(this.qb,a);b.attachShader(this.qb,d);b.linkProgram(this.qb);b.getProgramParameter(this.qb,b.LINK_STATUS)||alert("Could not initialise shaders");this.qb.Z=b.getAttribLocation(this.qb,"aVertexPosition")};e.prototype.Gc=function(){var b=this.g.H;this.qd=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,this.qd);b.bufferData(b.ARRAY_BUFFER,new Float32Array([-1,-1,0,1,
-1,0,1,1,0,-1,1,0]),b.STATIC_DRAW);this.qd.Jc=3;this.qd.Rd=4;this.Xe=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,this.Xe);for(var a=[0,0,0],d=2*Math.PI/6,c=Math.PI/180*35,f=1,h=c;h<=c+2*Math.PI;h+=d)a.push(Math.sin(h)),a.push(-Math.cos(h)),a.push(0),f++;b.bufferData(b.ARRAY_BUFFER,new Float32Array(a),b.STATIC_DRAW);this.Xe.Jc=3;this.Xe.Rd=f;this.Fl=b.createTexture();b.bindTexture(b.TEXTURE_2D,this.Fl);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,
b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);a=document.createElement("canvas");a.width=100;a.height=1;d=a.getContext("2d");d.width=100;d.height=1;c=d.createLinearGradient(0,0,100,0);c.addColorStop(0,this.g.ea(16777215,0));c.addColorStop(.88,this.g.ea(0,0));c.addColorStop(.9,this.g.ea(16654848,1));c.addColorStop(.92,this.g.ea(16776448,1));c.addColorStop(.94,this.g.ea(4849466,1));c.addColorStop(.96,this.g.ea(131071,
1));c.addColorStop(.98,this.g.ea(8190,1));c.addColorStop(1,this.g.ea(0,0));d.fillStyle=c;d.fillRect(0,0,100,1);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,a)};e.prototype.Po=function(){for(;0<this.ng.length;)this.ng.pop()};e.prototype.Wm=function(){var b=[],a=[],d=[],c;c={l:14,alpha:.2,color:11390415,j:.27};b.push(c);c={l:20,alpha:.25,color:11390415,j:.4};b.push(c);c={l:10,alpha:.2,color:12442332,j:.6};b.push(c);c={l:15,alpha:.2,color:11390415,j:.8};b.push(c);c={l:10,alpha:.2,color:12442332,
j:1.5};b.push(c);c={l:15,alpha:.2,color:11390415,j:1.8};b.push(c);c={l:8,alpha:.2,color:12575203,v:.8,j:.7};a.push(c);c={l:7,alpha:.4,color:12575203,v:.5,j:1.6};a.push(c);c={l:5,alpha:.4,color:12575203,v:.6,j:.9};a.push(c);c={l:8,alpha:.3,color:12575203,v:.4,j:1.1};a.push(c);this.Vb.push(b);this.Nb.push(a);this.Wb.push(d);b=[];a=[];d=[];c={l:30,alpha:.3,color:11390415,j:.5};b.push(c);c={l:10,alpha:.3,color:11390415,j:1};b.push(c);c={l:20,alpha:.3,color:11390415,j:1.3};b.push(c);c={l:10,alpha:.3,color:11390415,
j:1.5};b.push(c);c={l:15,alpha:.3,color:11390415,j:1.8};b.push(c);c={l:10,alpha:.3,color:15506856,v:.8,j:.7};a.push(c);c={l:20,alpha:.5,color:15506856,v:.5,j:1.6};a.push(c);c={l:5,alpha:.5,color:15506856,v:.6,j:.9};a.push(c);c={l:60,alpha:.4,color:15506856,v:.2,j:1.1};a.push(c);d.push({l:220,alpha:.035,j:2});this.Vb.push(b);this.Nb.push(a);this.Wb.push(d);b=[];a=[];d=[];c={l:30,alpha:.5,color:15465727,j:.5};b.push(c);c={l:40,alpha:.28,color:15726842,j:.8};b.push(c);c={l:25,alpha:.32,color:15726842,
j:1.1};b.push(c);c={l:15,alpha:.25,color:15726842,j:1.35};b.push(c);c={l:10,alpha:.28,color:15465727,j:1.65};b.push(c);c={l:10,alpha:.45,color:15465727,v:.8,j:.7};a.push(c);c={l:7,alpha:.5,color:15465727,v:.4,j:.9};a.push(c);c={l:40,alpha:.4,color:15465727,v:.3,j:.38};a.push(c);c={l:50,alpha:.4,color:15465727,v:.5,j:1.25};a.push(c);c={l:18,alpha:.2,color:15465727,v:.5,j:1.25};a.push(c);c={l:10,alpha:.34,color:15726842,v:.8,j:1.5};a.push(c);c={l:38,alpha:.37,color:15465727,v:.3,j:-.5};a.push(c);this.Vb.push(b);
this.Nb.push(a);this.Wb.push(d);b=[];a=[];d=[];c={l:16,alpha:.5,color:16363159,j:.1};b.push(c);c={l:26,alpha:.3,color:16091819,j:.32};b.push(c);c={l:29,alpha:.2,color:16091819,j:1.32};b.push(c);c={l:20,alpha:.18,color:16363159,j:1.53};b.push(c);c={l:27,alpha:.13,color:16425092,j:1.6};b.push(c);c={l:20,alpha:.1,color:16091819,j:1.75};b.push(c);c={l:12,alpha:.45,color:16312238,v:.45,j:.2};a.push(c);c={l:8,alpha:.25,color:16434209,v:.7,j:.33};a.push(c);c={l:9,alpha:.25,color:16091819,v:.4,j:.7};a.push(c);
c={l:7,alpha:.2,color:16091819,v:.4,j:.85};a.push(c);c={l:60,alpha:.23,color:16091819,v:.55,j:1.05};a.push(c);c={l:37,alpha:.1,color:16091819,v:.55,j:1.22};a.push(c);c={l:10,alpha:.25,color:16363159,v:.65,j:1.38};a.push(c);c={l:7,alpha:.2,color:16434209,v:.5,j:1.45};a.push(c);c={l:3,alpha:.2,color:16416033,v:.5,j:1.78};a.push(c);c={l:6,alpha:.18,color:16434209,v:.45,j:1.9};a.push(c);c={l:4,alpha:.14,color:16766514,v:.45,j:2.04};a.push(c);c={l:30,alpha:.14,color:16766514,v:.8,j:.04};a.push(c);this.Vb.push(b);
this.Nb.push(a);this.Wb.push(d);b=[];a=[];d=[];c={l:9,alpha:.3,color:14346999,v:.3,j:.3};a.push(c);c={l:5,alpha:.5,color:14148072,v:.8,j:.6};a.push(c);c={l:3,alpha:.37,color:14346999,v:.66,j:.8};a.push(c);c={l:45,alpha:.2,color:14346999,v:.36,j:1.2};a.push(c);c={l:13,alpha:.2,color:14346999,v:.36,j:1.23};a.push(c);c={l:11,alpha:.2,color:14148072,v:.36,j:1.28};a.push(c);c={l:27,alpha:.16,color:14346999,v:.36,j:1.55};a.push(c);c={l:6,alpha:.36,color:14148072,v:.8,j:1.7};a.push(c);this.Vb.push(b);this.Nb.push(a);
this.Wb.push(d);b=[];a=[];d=[];c={l:24,alpha:.2,color:15186464,j:.2};b.push(c);c={l:7,alpha:.26,color:15186464,j:.35};b.push(c);c={l:23,alpha:.18,color:15186464,j:.65};b.push(c);c={l:13,alpha:.2,color:15186464,j:.8};b.push(c);c={l:11,alpha:.15,color:15186464,j:1.4};b.push(c);c={l:15,alpha:.11,color:15451904,j:1.6};b.push(c);c={l:6,alpha:.45,color:15579138,v:.45,j:.22};a.push(c);c={l:3,alpha:.3,color:15451904,v:.25,j:.4};a.push(c);c={l:4,alpha:.2,color:15451904,v:.25,j:.45};a.push(c);c={l:65,alpha:.17,
color:15186464,v:.25,j:.5};a.push(c);c={l:5,alpha:.45,color:15579138,v:.45,j:.88};a.push(c);c={l:140,alpha:.18,color:15579138,v:.32,j:.95};a.push(c);c={l:12,alpha:.22,color:15579138,v:.32,j:1.1};a.push(c);c={l:8,alpha:.32,color:15451904,v:.72,j:1.2};a.push(c);c={l:55,alpha:.2,color:15451904,v:.45,j:1.33};a.push(c);c={l:4,alpha:.3,color:15451904,v:.25,j:1.42};a.push(c);this.Vb.push(b);this.Nb.push(a);this.Wb.push(d);b=[];a=[];d=[];c={l:16,alpha:.4,color:10933495,j:.32};b.push(c);c={l:14,alpha:.3,color:11007484,
j:.36};b.push(c);c={l:10,alpha:.3,color:4037331,j:.58};b.push(c);c={l:14,alpha:.22,color:8835068,j:.68};b.push(c);c={l:10,alpha:.27,color:11007484,j:.82};b.push(c);c={l:11,alpha:.27,color:10867450,j:1};b.push(c);c={l:9,alpha:.2,color:6158332,j:1.05};b.push(c);c={l:10,alpha:.17,color:10867450,j:1.78};b.push(c);c={l:10,alpha:.3,color:4037331,j:-.23};b.push(c);c={l:8,alpha:.45,color:8835068,v:.45,j:.175};a.push(c);c={l:7,alpha:.4,color:12574715,v:.55,j:.46};a.push(c);c={l:3,alpha:.3,color:10867450,v:.35,
j:.5};a.push(c);c={l:60,alpha:.37,color:4031699,v:.75,j:.75};a.push(c);c={l:3,alpha:.25,color:4031699,v:.25,j:.75};a.push(c);c={l:3,alpha:.2,color:6158332,v:.25,j:.9};a.push(c);c={l:7,alpha:.45,color:8835068,v:.45,j:1.3};a.push(c);c={l:32,alpha:.22,color:8835068,v:.75,j:1.62};a.push(c);c={l:9,alpha:.45,color:4031699,v:.65,j:1.6};a.push(c);c={l:8,alpha:.25,color:4031699,v:.65,j:1.83};a.push(c);c={l:7,alpha:.4,color:12574715,v:.55,j:-.18};a.push(c);this.Vb.push(b);this.Nb.push(a);this.Wb.push(d);b=
[];a=[];d=[];c={l:16,alpha:.4,color:16389120,j:.32};b.push(c);c={l:26,alpha:.22,color:16389120,j:.4};b.push(c);c={l:26,alpha:.25,color:16389120,j:.65};b.push(c);c={l:18,alpha:.3,color:16389120,j:1.23};b.push(c);c={l:14,alpha:.26,color:16389120,j:1.33};b.push(c);c={l:17,alpha:.18,color:16389120,j:1.7};b.push(c);c={l:30,alpha:.16,color:16389120,j:2.15};b.push(c);c={l:100,alpha:.25,color:16389120,v:.22,j:1.45};a.push(c);c={l:7,alpha:.5,color:15628151,v:.3,j:1.5};a.push(c);c={l:3,alpha:.5,color:15628151,
v:.3,j:1.52};a.push(c);c={l:4,alpha:.5,color:16389120,v:.3,j:1.745};a.push(c);c={l:9,alpha:.22,color:16389120,v:.3,j:1.8};a.push(c);this.Vb.push(b);this.Nb.push(a);this.Wb.push(d);b=[];a=[];d=[];c={l:16,alpha:.4,color:10933495,j:.32};b.push(c);c={l:14,alpha:.3,color:11007484,j:.36};b.push(c);c={l:10,alpha:.3,color:4037331,j:.58};b.push(c);c={l:14,alpha:.22,color:8835068,j:.68};b.push(c);c={l:10,alpha:.27,color:11007484,j:.82};b.push(c);c={l:11,alpha:.27,color:10867450,j:1};b.push(c);c={l:9,alpha:.2,
color:6158332,j:1.05};b.push(c);c={l:10,alpha:.17,color:10867450,j:1.78};b.push(c);c={l:10,alpha:.3,color:4037331,j:-.23};b.push(c);c={l:8,alpha:.45,color:8835068,v:.45,j:.175};a.push(c);c={l:7,alpha:.4,color:12574715,v:.55,j:.46};a.push(c);c={l:3,alpha:.3,color:10867450,v:.35,j:.5};a.push(c);c={l:60,alpha:.37,color:4031699,v:.75,j:.75};a.push(c);c={l:3,alpha:.25,color:4031699,v:.25,j:.75};a.push(c);c={l:3,alpha:.2,color:6158332,v:.25,j:.9};a.push(c);c={l:7,alpha:.45,color:8835068,v:.45,j:1.3};a.push(c);
c={l:32,alpha:.22,color:8835068,v:.75,j:1.62};a.push(c);c={l:9,alpha:.45,color:4031699,v:.65,j:1.6};a.push(c);c={l:8,alpha:.25,color:4031699,v:.65,j:1.83};a.push(c);c={l:7,alpha:.4,color:12574715,v:.55,j:-.18};a.push(c);this.Vb.push(b);this.Nb.push(a);this.Wb.push(d);b=[];a=[];d=[];c={l:16,alpha:.4,color:16389120,j:.32};b.push(c);c={l:26,alpha:.22,color:16389120,j:.4};b.push(c);c={l:26,alpha:.25,color:16389120,j:.65};b.push(c);c={l:18,alpha:.3,color:16389120,j:1.23};b.push(c);c={l:14,alpha:.26,color:16389120,
j:1.33};b.push(c);c={l:17,alpha:.18,color:16389120,j:1.7};b.push(c);c={l:30,alpha:.16,color:16389120,j:2.15};b.push(c);c={l:100,alpha:.25,color:16389120,v:.22,j:1.45};a.push(c);c={l:7,alpha:.5,color:15628151,v:.3,j:1.5};a.push(c);c={l:3,alpha:.5,color:15628151,v:.3,j:1.52};a.push(c);c={l:4,alpha:.5,color:16389120,v:.3,j:1.745};a.push(c);c={l:9,alpha:.22,color:16389120,v:.3,j:1.8};a.push(c);this.Vb.push(b);this.Nb.push(a);this.Wb.push(d);b=[];a=[];d=[];c={l:24,alpha:.2,color:15186464,j:.2};b.push(c);
c={l:7,alpha:.26,color:15186464,j:.35};b.push(c);c={l:23,alpha:.18,color:15186464,j:.65};b.push(c);c={l:13,alpha:.2,color:15186464,j:.8};b.push(c);c={l:11,alpha:.15,color:15186464,j:1.4};b.push(c);c={l:15,alpha:.11,color:15451904,j:1.6};b.push(c);c={l:6,alpha:.45,color:15579138,v:.45,j:.22};a.push(c);c={l:3,alpha:.3,color:15451904,v:.25,j:.4};a.push(c);c={l:4,alpha:.2,color:15451904,v:.25,j:.45};a.push(c);c={l:65,alpha:.17,color:15186464,v:.25,j:.5};a.push(c);c={l:5,alpha:.45,color:15579138,v:.45,
j:.88};a.push(c);c={l:140,alpha:.18,color:15579138,v:.32,j:.95};a.push(c);c={l:12,alpha:.22,color:15579138,v:.32,j:1.1};a.push(c);c={l:8,alpha:.32,color:15451904,v:.72,j:1.2};a.push(c);c={l:55,alpha:.2,color:15451904,v:.45,j:1.33};a.push(c);c={l:4,alpha:.3,color:15451904,v:.25,j:1.42};a.push(c);this.Vb.push(b);this.Nb.push(a);this.Wb.push(d)};e.prototype.Bo=function(){if(this.xj){var b=this.g.H,a,d,c,f=new p.ta(0,0,-100),h=this.g.od(),e,g,t=0,m=0,k=!1;if(this.g.Y)e=this.g.mb.width,g=this.g.mb.height,
this.g.C.Og&&(e=this.g.C.Xb.width,g=this.g.C.Xb.height);else{this.S||(this.S=this.Vc.getContext("2d"));if(this.S.width!==this.g.m.width||this.S.height!==this.g.m.height)this.S.width=this.g.m.width,this.S.height=this.g.m.height;this.S.clear?this.S.clear():this.S.clearRect(0,0,this.Vc.width,this.Vc.height);e=this.S.width;g=this.S.height}var w=Math.sqrt(e*e+g*g),q=w/800;for(d=0;d<this.ng.length;d++){var u=this.ng[d];f.Za(0,0,-100);f.Ba(-u.i*Math.PI/180);f.Ka(u.pan*Math.PI/180);f.Ka(-this.g.pan.c*Math.PI/
180);f.Ba(this.g.i.c*Math.PI/180);f.Cb(this.g.O.c*Math.PI/180);-.01>f.z&&(m=-h/f.z,t=f.x*m,m*=f.y,Math.abs(t)<e/2+100&&Math.abs(m)<g/2+100&&(k=!0,t+=e/2,m+=g/2));if(k){this.g.Y&&(b.blendFunc(b.SRC_ALPHA,b.DST_ALPHA),b.enable(b.BLEND),b.disable(b.DEPTH_TEST));var r=e/2,x=g/2;c=Math.sqrt((r-t)*(r-t)+(x-m)*(x-m));var z=w/2,x=e>g?e:g,r=u.Yj/100*((z-c)/z);0>r&&(r=0);if(this.g.Y){b.useProgram(this.cc);b.bindBuffer(b.ARRAY_BUFFER,this.g.C.gb);b.vertexAttribPointer(this.cc.Z,this.g.C.gb.Jc,b.FLOAT,!1,0,0);
var n=b.getUniformLocation(this.cc,"uCanvasDimensions");b.uniform2f(n,b.drawingBufferWidth,b.drawingBufferHeight);b.uniform2f(b.getUniformLocation(this.cc,"uFlareCenterPosition"),b.drawingBufferWidth/e*t,g-b.drawingBufferHeight/g*m);b.uniform1f(b.getUniformLocation(this.cc,"uBlindingValue"),r);n=b.getUniformLocation(this.cc,"uAspectRatio");b.uniform1f(n,this.g.C.Og?b.drawingBufferWidth/b.drawingBufferHeight:b.drawingBufferWidth/b.drawingBufferHeight/(e/g));b.drawArrays(b.TRIANGLE_STRIP,0,this.g.C.gb.Rd)}else n=
this.S.createRadialGradient(t,m,1,t,m,x),n.addColorStop(0,"rgba(255, 255, 255, "+r+")"),n.addColorStop(.5,"rgba(255, 255, 255, "+.8*r+")"),n.addColorStop(1,"rgba(255, 255, 255, "+.6*r+")"),this.S.fillStyle=n,this.S.fillRect(0,0,this.S.width,this.S.height);if(0!=Number(u.type)&&!this.g.C.Og){var r=e/2-t,x=g/2-m,C=1,A=Number(u.type)-1;c<.35*z&&(C=c/(.35*z),C*=C);c>.7*z&&(C=(z-c)/(.3*z));C*=u.alpha/100;if(0<this.Vb[A].length)for(c=0;c<this.Vb[A].length;c++){var y=this.Vb[A][c],z=y.l*q;a=y.alpha*C;0>
a&&(a=0);var B=y.color;if(8==A||9==A||10==A)B=u.color;if(this.g.Y)b.useProgram(this.pa),b.bindBuffer(b.ARRAY_BUFFER,this.Xe),b.vertexAttribPointer(this.pa.Z,this.Xe.Jc,b.FLOAT,!1,0,0),n=b.getUniformLocation(this.pa,"uCanvasDimensions2"),b.uniform2f(n,b.drawingBufferWidth,b.drawingBufferHeight),b.uniform2f(b.getUniformLocation(this.pa,"uCirclePosition"),b.drawingBufferWidth/e*(t+r*y.j),b.drawingBufferWidth/e*(g-(m+x*y.j))),b.uniform2f(b.getUniformLocation(this.pa,"uCircleTexturePosition"),b.drawingBufferWidth/
e*(t+r*y.j),g-(m+x*y.j)),b.uniform1f(b.getUniformLocation(this.pa,"uCircleRadius"),z),b.uniform3f(b.getUniformLocation(this.pa,"uCircleColor"),(B>>16&255)/255,(B>>8&255)/255,(B&255)/255),b.uniform1f(b.getUniformLocation(this.pa,"uCircleAlpha"),a),b.uniform1f(b.getUniformLocation(this.pa,"uCircleSoftness"),.1),n=b.getUniformLocation(this.pa,"uAspectRatio"),b.uniform1f(n,b.drawingBufferWidth/b.drawingBufferHeight/(e/g)),b.drawArrays(b.TRIANGLE_FAN,0,this.Xe.Rd);else{this.S.save();this.S.translate(t+
r*y.j,m+x*y.j);n=this.S.createRadialGradient(0,0,1,0,0,1.1*z);n.addColorStop(0,this.g.ea(B,a));n.addColorStop(.65,this.g.ea(B,.9*a));n.addColorStop(.8,this.g.ea(B,.7*a));n.addColorStop(1,this.g.ea(B,.2*a));this.S.beginPath();var B=2*Math.PI/6,y=Math.PI/180*35,D=!0;for(a=y;a<=y+2*Math.PI;a+=B)D?(this.S.moveTo(z*Math.sin(a),z*Math.cos(a)),D=!1):this.S.lineTo(z*Math.sin(a),z*Math.cos(a));this.S.closePath();this.S.fillStyle=n;this.S.fill();this.S.restore()}}if(0<this.Nb[A].length)for(c=0;c<this.Nb[A].length;c++){y=
this.Nb[A][c];z=y.l*q;a=y.alpha*C;0>a&&(a=0);B=y.color;if(8==A||9==A||10==A)B=u.color;this.g.Y?(b.useProgram(this.pa),b.bindBuffer(b.ARRAY_BUFFER,this.qd),b.vertexAttribPointer(this.pa.Z,this.qd.Jc,b.FLOAT,!1,0,0),n=b.getUniformLocation(this.pa,"uCanvasDimensions2"),b.uniform2f(n,b.drawingBufferWidth,b.drawingBufferHeight),n=b.getUniformLocation(this.pa,"uCirclePosition"),b.uniform2f(n,b.drawingBufferWidth/e*(t+r*y.j),b.drawingBufferWidth/e*(g-(m+x*y.j))),n=b.getUniformLocation(this.pa,"uCircleTexturePosition"),
b.uniform2f(n,b.drawingBufferWidth/e*(t+r*y.j),g-(m+x*y.j)),n=b.getUniformLocation(this.pa,"uCircleRadius"),b.uniform1f(n,z),b.uniform3f(b.getUniformLocation(this.pa,"uCircleColor"),(B>>16&255)/255,(B>>8&255)/255,(B&255)/255),b.uniform1f(b.getUniformLocation(this.pa,"uCircleAlpha"),a),b.uniform1f(b.getUniformLocation(this.pa,"uCircleSoftness"),y.v),n=b.getUniformLocation(this.pa,"uAspectRatio"),b.uniform1f(n,b.drawingBufferWidth/b.drawingBufferHeight/(e/g)),b.drawArrays(b.TRIANGLE_FAN,0,this.qd.Rd)):
(this.S.save(),this.S.translate(t+r*y.j,m+x*y.j),n=this.S.createRadialGradient(0,0,1,0,0,z),n.addColorStop(0,this.g.ea(B,a)),n.addColorStop(1-y.v,this.g.ea(B,.8*a)),n.addColorStop(1,this.g.ea(B,0)),this.S.beginPath(),this.S.arc(0,0,z,0,2*Math.PI,!1),this.S.closePath(),this.S.fillStyle=n,this.S.fill(),this.S.restore())}if(0<this.Wb[A].length)for(c=0;c<this.Wb[A].length;c++)u=this.Wb[A][c],z=u.l*q,a=u.alpha*C,0>a&&(a=0),this.g.Y?(b.useProgram(this.qb),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,
this.Fl),b.bindBuffer(b.ARRAY_BUFFER,this.qd),b.vertexAttribPointer(this.qb.Z,this.qd.Jc,b.FLOAT,!1,0,0),n=b.getUniformLocation(this.qb,"uCanvasDimensions2"),b.uniform2f(n,e,g),n=b.getUniformLocation(this.qb,"uCirclePosition"),b.uniform2f(n,t+r*u.j,g-(m+x*u.j)),n=b.getUniformLocation(this.qb,"uRingTexturePosition"),b.uniform2f(n,b.drawingBufferWidth/e*(t+r*u.j),g-(m+x*u.j)),n=b.getUniformLocation(this.qb,"uCircleRadius"),b.uniform1f(n,z),b.uniform2f(b.getUniformLocation(this.qb,"uRingPosition"),t+
r*u.j,g-(m+x*u.j)),b.uniform1f(b.getUniformLocation(this.qb,"uRingRadius"),z),b.uniform1f(b.getUniformLocation(this.qb,"uRingAlpha"),a),n=b.getUniformLocation(this.qb,"uAspectRatio"),b.uniform1f(n,b.drawingBufferWidth/b.drawingBufferHeight/(e/g)),b.uniform1i(b.getUniformLocation(this.qb,"uSampler"),0),b.drawArrays(b.TRIANGLE_FAN,0,this.qd.Rd)):(this.S.save(),this.S.translate(t+r*u.j,m+x*u.j),n=this.S.createRadialGradient(0,0,0,0,0,z),n.addColorStop(0,this.g.ea(16777215,0)),n.addColorStop(.88,this.g.ea(0,
0)),n.addColorStop(.9,this.g.ea(16654848,a)),n.addColorStop(.92,this.g.ea(16776448,a)),n.addColorStop(.94,this.g.ea(4849466,a)),n.addColorStop(.96,this.g.ea(131071,a)),n.addColorStop(.98,this.g.ea(8190,a)),n.addColorStop(1,this.g.ea(0,0)),this.S.beginPath(),this.S.arc(0,0,z,0,2*Math.PI,!1),this.S.closePath(),this.S.fillStyle=n,this.S.fill(),this.S.restore())}this.g.Y&&(b.useProgram(this.g.ma.F),b.disable(b.BLEND),b.enable(b.DEPTH_TEST))}}}};return e}();p.tm=e})(ggP2VR||(ggP2VR={}));var O=!1;
(function(p){var e=function(){return function(){this.f=this.i=this.pan=0}}(),k=function(){function b(a,d){this.pan={c:0,Qa:0,min:0,max:360,d:0,ij:0,Cc:0};this.i={c:0,Qa:0,min:-90,max:90,d:0,Cc:0};this.O={c:0,Qa:0,min:-180,max:180,d:0};this.rc={pan:0,i:-90,O:0,f:170,Bb:9};this.f={c:70,Qa:70,min:1,sg:0,max:170,fj:360,gj:270,kf:0,d:0,mode:0,Vl:0,hk:0};this.$a={O:0,pitch:0};this.m={width:10,height:10};this.fb=0;this.Fi=new p.ta;this.crossOrigin="anonymous";this.Ja=this.Ph=4;this.cd=this.Yg=this.vg=this.lc=
0;this.X={start:{x:0,y:0},ca:{x:0,y:0},xd:{x:0,y:0},c:{x:0,y:0},ba:{x:0,y:0}};this.R={Wa:!1,nk:0,startTime:0,start:{x:0,y:0},ca:{x:0,y:0},xd:{x:0,y:0},c:{x:0,y:0},ba:{x:0,y:0}};this.Rf=!0;this.xa={enabled:!0,ca:{x:0,y:0},ba:{x:0,y:0},tj:0,f:{active:!1,gc:0}};this.td={alpha:0,beta:0,gamma:0,orientation:0,tl:0};this.bg={alpha:0,beta:0,gamma:0,orientation:0};this.s={src:[],Ne:4,width:640,height:480,fd:!1,Ah:!1,Wl:!1,je:"loop",b:HTMLVideoElement=null,Yl:!1,nc:WebGLTexture=null,Nj:WebGLBuffer=null,ci:WebGLBuffer=
null,Yi:WebGLBuffer=null,format:1,vh:0,Qi:1};this.ig=0;this.ga=this.ua=this.Ea=this.T=this.fc=this.ab=this.D=null;this.me="pano";this.Pi="flashcontainer";this.Gi="";this.control=null;this.Mb=[];this.Da=!1;this.Of=1;this.ia=null;this.Id=this.Le=this.af=!1;this.Gf=0;this.nd=.02;this.ri=0;this.si=!1;this.pi=this.dh=this.Hf=this.Ke=this.Wj=0;this.Vj=-1;this.Ab="";this.qf=this.yc=!1;this.Qh=0;this.jh=[];this.Ue=[];this.xf=this.pc=1;this.Kf=1024;this.rf=!1;this.ue=200;this.Kb=0;this.Ng=5;this.oc=0;this.Zl=
50;this.Xi=this.$l=0;this.o={enabled:!1,timeout:5,active:!1,Mg:!1,speed:.4,ei:0,Nh:0,hj:!0,Lj:!1,Yb:!1,eh:"",Xj:!1,Jh:!1,Dj:!1,startTime:0,wd:0,qh:!1,kh:!1,Fh:0};this.u={active:!1,Je:!1,speed:.1,pan:0,i:0,O:0,f:70,Gd:70,fl:0,hl:0,gl:0,el:0,Bb:0,yg:0,aj:0,Kj:!1,tg:!1,Uj:0,Tj:0};this.Ld="Animation01";this.ff={pan:-1,i:-1,f:-1};this.cl=0;this.Ca=null;this.Cf={};this.li={};this.lh=[];this.Hh={};this.hf={};this.qg={};this.w={mode:1,kg:-1,oa:0,jb:0,Tc:.05,ec:255,dc:1,bc:255,ac:.3,$e:!0,Fj:{enabled:!0,width:180,
height:20,Gj:0,Ej:1,background:!0,bc:16777215,ac:1,ec:0,dc:1,ui:3,vi:1,ni:!0},hb:[],Jb:[],Mc:[],Zh:[]};this.wa=null;this.P=[];this.N=[];this.J=[];this.Ya=[];this.Fe=[];this.Ma=[];this.va=[];this.Nc=[];this.$d=[];this.Wd=[];this.V=1;this.ma=this.zd=this.Ob=this.Kd=null;this.Pf={};this.kd={};this.$h={};this.h=new p.wm;this.Ao={target:0,current:0,Tc:.01,an:2,Ki:0,mh:!1,Jm:!1};this.margin={left:0,top:0,right:0,bottom:0};this.B={se:!1,mo:!1,wb:!1,gd:!1,vd:!0,Rk:!1,Tl:1,Hl:!1,Ii:!0,Nf:!0,hh:!1,eg:!1,Jl:!0,
sensitivity:8};this.rg=[];this.Yc=!0;this.sa={x:0,y:0};this.Ug=this.Db=this.Sg=this.Pc=this.Y=!1;this.ki=this.km=!0;this.Wi=!1;this.le=!0;this.Bf=this.Vi=!1;this.Ha=this.Jd="";this.$c="transition";this.Va="transform";this.pd="perspective";this.kk="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYBgeACDAAADIAAE3iTbkAAAAAElFTkSuQmCC";this.mb={width:0,height:0};this.sk=new p.ta;this.rk=new p.ta;this.tk=new p.ta;this.uk=
new p.ta;this.qk=new p.ta;this.df=!1;this.dl=this.bb="";this.Oj=[];this.gi=[];this.gg=this.Tk=this.Pd=this.Uk=this.Ic=this.Zi=this.uj=this.ed=this.cf=this.Sk=this.$i=this.Vk=this.Wk=this.Zk=!1;this.Tg=!0;this.Vh=this.yh=!1;this.Nk=[];this.devicePixelRatio=1;this.fa=this.C=null;this.fh=!1;this.La=null;this.ub={enabled:!1,speed:1,Dd:!1,Ni:!0};this.pl=!1;this.kb=new p.xm;this.Jj=!1;this.Mf=function(a,d){if(0==a.length)return a;var b,e,g,t,m,k,w,q;q=[];b=d.Rh(a[0])-0;for(t=0;t<a.length;t++){k=t;w=t+1;
w==a.length&&(w=0);e=d.Rh(a[w])-0;if(0<=b&&0<=e)q.push(a[k]);else if(0<=b||0<=e)g=e/(e-b),0>g&&(g=0),1<g&&(g=1),m=new p.ta,m.ud(a[k],a[w],g),0>b||q.push(a[k]),q.push(m);b=e}return q};this.yj=0;this.Eh=-1;this.Yf=function(a){return a?a.pageX||a.pageY?{x:a.pageX,y:a.pageY}:a.clientX||a.clientY?{x:a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,y:a.clientY+document.body.scrollTop+document.documentElement.scrollTop}:a.touches&&a.touches[0]?{x:a.touches[0].pageX,y:a.touches[0].pageY}:
{x:0,y:0}:{x:0,y:0}};this.Lh=1;this.gn=this.sh=this.al=this.Li=this.pj=this.Sh=0;this.bl=!1;this.ke=!0;this.tb=new p.Bh(this);this.tb.$e=!1;this.jk();this.tf(this.tb);this.checkLoaded=this.Mb;this.isLoaded=!1;d&&d.hasOwnProperty("useFlash")&&d.useFlash&&(this.Db=!0,this.Y=this.Pc=!1,d.hasOwnProperty("flashPlayerId")?this.me=d.flashPlayerId:this.me="pano",d.hasOwnProperty("flashContainerId")?this.Pi=d.flashContainerId:this.Pi=a+"flash");this.ra();this.Db||(this.Fa=new p.tm(this));this.ek(a);this.Im();
this.userdata=this.Cf=this.Qf();this.emptyHotspot=this.tb;this.mouse=this.sa;this.C=new p.um(this);this.La=new p.vm(this);this.ma=new p.Bm(this);this.Oc()}b.prototype.Hk=function(){return"6.0 beta/16757"};b.prototype.Di=function(){this.C.enabled=this.fa.enabled;this.C.type=this.fa.type;this.C.Oa=this.fa.zoomin;this.C.Zb=this.fa.zoomout;this.C.Jf=this.fa.blendtime;this.C.Ff=this.fa.zoomoutpause;this.C.Ef=this.fa.zoomfov;this.C.ae=this.fa.zoomspeed;this.C.Oe=this.fa.blendcolor;this.C.zc=this.fa.softedge;
this.fa=null};b.prototype.kp=function(a){this.fa={};this.fa.enabled=!0;this.fa.type=this.C.type;this.fa.zoomin=this.C.Oa;this.fa.zoomout=this.C.Zb;this.fa.blendtime=this.C.Jf;this.fa.zoomoutpause=this.C.Ff;this.fa.zoomfov=this.C.Ef;this.fa.zoomspeed=this.C.ae;this.fa.blendcolor=this.C.Oe;this.fa.softedge=this.C.zc;if(a.hasOwnProperty("type")){var d=a.type;if("cut"==d||"crossdissolve"==d||"diptocolor"==d||"irisround"==d||"irisrectangular"==d||"wipeleftright"==d||"wiperightleft"==d||"wipetopbottom"==
d||"wipebottomtop"==d||"wiperandom"==d)this.fa.type=d}a.hasOwnProperty("before")&&(d=Number(a.before),0==d||2==d)&&(this.fa.zoomin=d);a.hasOwnProperty("after")&&(d=Number(a.after),0==d||2==d||3==d||4==d)&&(this.fa.zoomout=d);a.hasOwnProperty("transitiontime")&&(d=Number(a.transitiontime),0<=d&&50>=d&&(this.fa.blendtime=d));a.hasOwnProperty("waitfortransition")&&(this.fa.zoomoutpause=1==a.waitfortransition);a.hasOwnProperty("zoomedfov")&&(d=Number(a.zoomedfov),.01<=d&&50>=d&&(this.fa.zoomfov=d));a.hasOwnProperty("zoomspeed")&&
(d=Number(a.zoomspeed),.01<=d&&99>=d&&(this.fa.zoomspeed=d));a.hasOwnProperty("dipcolor")&&(this.fa.blendcolor=a.dipcolor);a.hasOwnProperty("softedge")&&(a=Number(a.softedge),0<=a&&1E3>=a&&(this.fa.softedge=a));this.fh||this.Di()};b.prototype.jd=function(a,d,c){var b=d?Number(d):0;if(0!=a&&4!=a&&12!=a&&9!=a)this.Kc("Unsupported projection type: "+a);else if(d&&0!==b&&4!==b&&12!==b&&9!==b)this.Kc("Unsupported projection2 type: "+b);else if(a==b&&(b=0),this.vg=c?Number(c):1,this.Ja!=a||this.lc!=b)this.Ja=
a,this.lc=b,this.ma.xh()};b.prototype.qa=function(){return 0==this.Ja?4:this.Ja};b.prototype.zi=function(a,d){if(0!=a&&4!=a&&12!=a&&9!=a)this.Kc("Unsupported projection type: "+a);else if(this.Y||0==a||4==a||this.Kc("Projection changes require WebGL!"),this.qa()!=a){var c={};c.pan=this.pan.c;c.tilt=this.i.c;c.fov=this.f.c;c.projection=a;c.timingFunction=3;c.speed=d;var b=this.Xf(a);c.fov=Math.min(b,c.fov);this.Kh(c)}};b.prototype.addListener=function(a,d){(this.Pf[a]=this.Pf[a]||[]).push(d)};b.prototype.ka=
function(a,d){var c=this.Pf[a];if(c)for(var b=c.length,h=0;h<b;h++)try{c[h].apply(null,[d])}catch(e){this.Kc(e)}};b.prototype.removeEventListener=function(a,d){var c=this.Pf[a];if(c){var b,h;h=0;for(b=c.length;h<b;h++)if(c[h]===d){1===b?delete this.Pf[a]:c.splice(h,1);break}}};b.prototype.Em=function(a,d){return this.kd.hasOwnProperty(a)?!1:(this.kd[a]=d,!0)};b.prototype.Yh=function(a,d){return this.kd.hasOwnProperty(a)&&(0==this.kd[a]&&"string"===typeof d||1==this.kd[a]&&"number"===typeof d||2==
this.kd[a]&&"boolean"===typeof d)?(this.$h[a]!=d&&(this.$h[a]=d,this.ka("varchanged_"+a,{value:d})),!0):!1};b.prototype.Xn=function(a){if(this.$h.hasOwnProperty(a))return this.$h[a]};b.prototype.jk=function(){var a;this.devicePixelRatio=window.devicePixelRatio||1;this.Zk=!!navigator.userAgent.match(/(Windows|Win)/g);this.Wk=!!navigator.userAgent.match(/(Mac|Macintosh|Mac_powerpc)/g);this.Vk=!!navigator.userAgent.match(/(Linux|Ubuntu)/g);this.$i=!!navigator.userAgent.match(/(MSIE)/g);this.Sk=!!navigator.userAgent.match(/(Edge|EdgA)/g);
this.cf=!!navigator.userAgent.match(/(Firefox)/g);if(this.ed=!!navigator.userAgent.match(/(Safari)/g))a=navigator.userAgent.indexOf("Safari"),this.Ed=navigator.userAgent.substring(a+7),a=navigator.userAgent.indexOf("Version"),-1!=a&&(this.Ed=navigator.userAgent.substring(a+8)),this.Ed=this.Ed.substring(0,this.Ed.indexOf(" ")),this.Ed=this.Ed.substring(0,this.Ed.indexOf(".")),this.uj=!0;if(this.Zi=!!navigator.userAgent.match(/(Chrome)/g))this.ed=!1;this.Ic=!!navigator.userAgent.match(/(iPad|iPhone|iPod)/g);
this.Uk=!!navigator.userAgent.match(/(iPhone|iPod)/g);this.Pd=!!navigator.userAgent.match(/(android)/i);this.Tk=!!navigator.userAgent.match(/(IEMobile)/i);this.gg=this.Ic||this.Pd||this.Tk;/iP(hone|od|ad)/.test(navigator.platform)&&(a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),this.Nk=[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||"0",10)]);this.yh=!window.requestAnimationFrame;a=["Webkit","Moz","O","ms","Ms"];this.Ha="";this.$c="transition";this.Va="transform";this.pd="perspective";
for(var d=0;d<a.length;d++)"undefined"!==typeof document.documentElement.style[a[d]+"Transform"]&&(this.Ha="-"+a[d].toLowerCase()+"-",this.$c=a[d]+"Transition",this.Va=a[d]+"Transform",this.pd=a[d]+"Perspective");this.Wi=G();this.Y=N();this.Pc=this.Wi;this.Y&&(this.Pc=!1);this.yc=!0;this.qf=!1;if(this.Ic||this.Pd)this.Ll(80),this.Ng=2;this.Kc("Pano2VR player "+this.Hk()+" - Prefix:"+this.Ha+", "+(this.Wi?"CSS 3D available":"CSS 3D not available")+", "+(this.Y?"WebGL available":"WebGL not available"));
O&&this.L("Pano2VR Debug version!");try{window.AudioContext=window.AudioContext||window.webkitAudioContext,this.za=new AudioContext}catch(c){this.za=null}this.ed&&(!this.uj||9>Number(this.Ed))&&(this.za=null);this.Tg=this.Uk?this.ed&&this.uj&&10<=Number(this.Ed)?!0:!1:!0};b.prototype.L=function(a){if(O){var d=document.getElementById("gg_debug");d&&(d.innerHTML=a.toString()+"<br />");window.console&&window.console.log(a)}};b.prototype.Kc=function(a){var d=document.getElementById("gg_debug");d&&(d.innerHTML=
a+"<br />");window.console&&window.console.log(a)};b.prototype.Ll=function(a){this.ue=a};b.prototype.Uo=function(a){this.crossOrigin=a};b.prototype.Wo=function(a){this.bf=a};b.prototype.On=function(){return this.Qh};b.prototype.To=function(a){this.Jd=a};b.prototype.mn=function(){return this.Jd};b.prototype.wn=function(){return this.gg};b.prototype.xn=function(){return this.df};b.prototype.tn=function(){return this.o.active};b.prototype.Xo=function(a){this.gg=!!a};b.prototype.th=function(){return this.isLoaded};
b.prototype.vn=function(){return!this.isLoaded};b.prototype.od=function(){return Number(this.m.height)/(2*Math.tan(Math.PI/180*(this.Qb()/2)))};b.prototype.Ol=function(a,d){this.isFullscreen&&(a=window.innerWidth,d=window.innerHeight);var c=a-this.margin.left-this.margin.right,b=d-this.margin.top-this.margin.bottom;if(!(10>c||10>b)){var h=window.devicePixelRatio||1;this.rf&&(h=1);this.D.style.width=c+"px";this.D.style.height=b+"px";this.D.style.left=this.margin.left+"px";this.D.style.top=this.margin.top+
"px";if(this.Y)try{this.ab&&(this.ab.style.position="absolute",this.ab.style.display="inline",this.ab.style.width=c+"px",this.ab.style.height=b+"px",this.ab.width=c*h,this.ab.height=b*h),this.H&&(this.mb.width=c*h,this.mb.height=b*h,this.H.viewport(0,0,this.H.drawingBufferWidth,this.H.drawingBufferHeight))}catch(e){alert(e)}this.fc&&(this.fc.style.width=a+"px",this.fc.style.height=d+"px",this.fc.width=a,this.fc.height=d);this.Ea&&(this.Ea.style.width=a+"px",this.Ea.style.height=d+"px",this.ua.style.width=
a+"px",this.ua.style.height=d+"px",this.ua.width=a,this.ua.height=d,this.ua.style.left=this.margin.left+"px",this.ua.style.top=this.margin.top+"px",this.ia&&this.ia!=this.Ea&&(this.ia.style.width=a+"px",this.ia.style.height=d+"px"));this.Fa&&(c=this.Fa.Vc,c.style.width=a+"px",c.style.height=d+"px",c.width=a,c.height=d,c.style.left=this.margin.left+"px",c.style.top=this.margin.top+"px");this.af&&(this.Da=!0);c=this.D.offsetWidth;b=this.D.offsetHeight;if(this.m.width!=c||this.m.height!=b)this.m.width=
c,this.m.height=b;this.Tp();this.ia&&this.ia.ggUpdateSize&&this.ia.ggUpdateSize(a,d);this.ka("sizechanged",{Xg:a,cg:d})}};b.prototype.Ie=function(){this.Jj=!0};b.prototype.Oc=function(){this.Ol(this.Kd.offsetWidth,this.Kd.offsetHeight)};b.prototype.bo=function(){var a={width:0,height:0};a.width=this.m.width;a.height=this.m.height;return a};b.prototype.oe=function(){var a={x:0,y:0},d=this.D;if(d.offsetParent){do a.x+=d.offsetLeft,a.y+=d.offsetTop,d=d.offsetParent;while(d)}return a};b.prototype.ip=
function(a){this.Ca=a};b.prototype.Zo=function(a,d,c,b){this.margin.left=a;this.margin.top=d;this.margin.right=c;this.margin.bottom=b;this.Ca=this.skinObj;this.Ie()};b.prototype.Rm=function(a){0==a&&(this.B.vd=!1);1==a&&(this.B.vd=!0);2==a&&(this.B.vd=!this.B.vd);this.ka("viewmodechanged",{})};b.prototype.$n=function(){return 1==this.B.vd?1:0};b.prototype.ak=function(a,d){this.w.mode=1==d&&0<this.w.mode?0:Math.round(a);this.update();this.ga&&(this.ga.changePolygonMode(a,d),this.ga.update());this.ka("polymodechanged",
{})};b.prototype.Ql=function(a){var d=this.w.hb.indexOf(a);-1==d?(this.w.hb.push(a),this.w.Jb.push(0),this.w.Mc.push(1)):this.w.Mc[d]=1;this.update()};b.prototype.Lk=function(a){var d=this.w.hb.indexOf(a);-1!=d&&(this.w.Mc[d]=0,this.w.Zh.push(a),this.update())};b.prototype.Fp=function(a){var d=this.w.hb.indexOf(a);-1==d||-1!=d&&0==this.w.Mc[d]?this.Ql(a):this.Lk(a);this.update()};b.prototype.Pm=function(a,d,c,b,h){for(var e=0;e<this.P.length;e++){var g=this.P[e];"poly"!=g.type||g.id!=a&&""!=a||(g.bc=
d,g.ac=c,g.ec=b,g.dc=h)}""==a&&(this.w.bc=d,this.w.ac=c,this.w.ec=b,this.w.dc=h);this.update()};b.prototype.Nm=function(a){this.Fa&&(this.Fa.xj=0==a?!0:1==a?!1:!this.Fa.xj,this.update())};b.prototype.Qn=function(){return this.w.mode};b.prototype.Sm=function(){this.ka("viewstatechanged",{})};b.prototype.ao=function(){return 0};b.prototype.Dn=function(a){return(a=this.Hh[a])?a.type:"web"};b.prototype.Cn=function(a){return(a=this.Hh[a])?a:{}};b.prototype.In=function(a,d){var c=[];a||(a=this.bb);this.hf[a]&&
this.hf[a][d]&&(c.push(this.hf[a][d].y),c.push(this.hf[a][d].x));return c};b.prototype.Jn=function(a,d){var c=[];a||(a=this.bb);this.qg[a]&&this.qg[a][d]&&(c.push(this.qg[a][d].x),c.push(this.qg[a][d].y));return c};b.prototype.Bn=function(a){var d=[],c;for(c in this.Hh)d.push(c);for(c=0;c<d.length;c++)if(this.hf[a][d[c]])return d[c];return""};b.prototype.Ok=function(a,d,c){a=Math.atan2(a+1,c);var b=Math.atan2(d+1,c);d=Math.sin(a);c=Math.sin(b);a=Math.cos(a);b=Math.cos(b);this.sk.Za(0,0,-1);this.rk.Za(a,
0,-d);this.tk.Za(-a,0,-d);this.uk.Za(0,b,-c);this.qk.Za(0,-b,-c)};b.prototype.Ci=function(a){a=this.Mf(a,this.sk);a=this.Mf(a,this.rk);a=this.Mf(a,this.tk);a=this.Mf(a,this.uk);return a=this.Mf(a,this.qk)};b.prototype.dm=function(a){if(!this.yc&&this.lo!=a){this.lo=a;var d;d=this.margin.left+this.m.width/2+"px ";d+=this.margin.top+this.m.height/2+"px ";this.Ea.style[this.pd]=a+"px";this.Ea.style[this.pd+"Origin"]=d;this.D.style[this.pd]=a+"px";this.D.style[this.pd+"Origin"]=d}};b.prototype.sp=function(){return this.C.Ge||
this.C.Hd||this.Y&&(4!=this.Ja||0!=this.lc)?!1:!0};b.prototype.Qg=function(){var a,d=new p.ta(0,0,-100),c=this.od(),b,h,e;h=100/this.f.c;e=this.h.width/this.h.height;b=this.m.height*h*e;h*=this.m.height;for(var g=this.sp(),t=0;t<this.P.length;t++){var m=this.P[t],k,w;"point"==m.type&&(a=!1,2==this.fb?(k=(this.pan.c-m.pan)/100/e*b,w=(this.i.c-m.i)/100*h,Math.abs(k)<this.m.width/2+500&&Math.abs(w)<this.m.height/2+500&&(a=!0)):(d.Za(0,0,-100),d.Ba(-m.i*Math.PI/180),d.Ka(m.pan*Math.PI/180),d.Ka(-this.pan.c*
Math.PI/180),d.Ba(this.i.c*Math.PI/180),d.Cb(this.O.c*Math.PI/180),.01>d.z?(w=-c/d.z,k=d.x*w,w*=d.y,Math.abs(k)<this.m.width/2+500&&Math.abs(w)<this.m.height/2+500&&(a=!0)):w=k=0),m.mc=k+this.m.width/2,m.Hb=w+this.m.height/2,m.b&&m.b.__div&&("none"!=m.b.__div.style[this.$c]&&(m.b.__div.style[this.$c]="none"),m.b.ggUse3d?(this.yc||this.dm(c),m.b.__div.style.width="1px",m.b.__div.style.height="1px",a="",this.yc&&(a+="perspective("+c+"px) "),a+="translate3d(0px,0px,"+c+"px) ",a+="rotateZ("+this.O.c.toFixed(10)+
"deg) ",a+="rotateX("+this.i.c.toFixed(10)+"deg) ",a+="rotateY("+(-this.pan.c).toFixed(10)+"deg) ",a+="rotateY("+m.pan.toFixed(10)+"deg) ",a+="rotateX("+(-m.i).toFixed(10)+"deg) ",a+="translate3d(0px,0px,"+(-1*m.b.gg3dDistance).toFixed(10)+"px) ",m.b.__div.style[this.Va+"Origin"]="0% 0%",m.b.__div.style[this.Va]=a,m.b.__div.style.left=this.margin.left+this.m.width/2+"px",m.b.__div.style.top=this.margin.top+this.m.height/2+"px"):a&&g?(m.b.__div.style.left=this.margin.left+k+this.m.width/2+"px",m.b.__div.style.top=
this.margin.top+w+this.m.height/2+"px"):(m.b.__div.style.left="-1000px",m.b.__div.style.top="-1000px")));if("poly"==m.type){var q=[];if(2==this.fb)for(m.Td=[],a=0;a<m.Vg.length;a++)k=m.Vg[a],q=(this.pan.c-k.pan)/100/e*b,k=(this.i.c-k.i)/100*h,q+=this.margin.left+this.m.width/2,k+=this.margin.top+this.m.height/2,m.Td.push({mc:q,Hb:k});else{for(a=0;a<m.Vg.length;a++)k=m.Vg[a],d.Za(0,0,-100),d.Ba(-k.i*Math.PI/180),d.Ka(k.pan*Math.PI/180),d.Ka(-this.pan.c*Math.PI/180),d.Ba(this.i.c*Math.PI/180),d.Cb(this.O.c*
Math.PI/180),q.push(d.clone());q=this.Ci(q);if(0<q.length)for(a=0;a<q.length;a++)d=q[a],.1>d.z?(w=-c/d.z,k=this.m.width/2+d.x*w,w=this.m.height/2+d.y*w):w=k=0,d.mc=k,d.Hb=w;m.Td=q}}}};b.prototype.pn=function(){for(var a=[],d=0;d<this.P.length;d++){var c=this.P[d];"point"==c.type&&c.b&&c.b.__div&&a.push(c.b.__div)}return a};b.prototype.ea=function(a,d){a=Number(a);isNaN(d)&&(d=0);0>d&&(d=0);1<d&&(d=1);return"rgba("+(a>>16&255)+","+(a>>8&255)+","+(a&255)+","+d+")"};b.prototype.Co=function(){var a,d;
if(this.ua&&(this.w.kg!=this.w.mode&&(this.w.kg=this.w.mode,this.ua.style.visibility=0<this.w.mode?"inherit":"hidden"),0<=this.w.mode||0<this.w.hb.length)){this.aa||(this.aa=this.ua.getContext("2d"));if(this.aa.width!=this.m.width||this.aa.height!=this.m.height)this.aa.width=this.m.width,this.aa.height=this.m.height;this.aa.clear?this.aa.clear():this.aa.clearRect(0,0,this.ua.width,this.ua.height);var c=1;0>=this.w.mode&&(c=0);3==this.w.mode&&(c=this.w.oa);for(a=0;a<this.P.length;a++){d=this.P[a];
var b=c;if("poly"==d.type){var h=d.Td;2==this.w.mode&&(b=d.oa);var e=this.w.hb.indexOf(d.id);-1!=e&&(b=this.w.Jb[e]);this.aa.fillStyle=this.ea(d.bc,d.ac*b);this.aa.strokeStyle=this.ea(d.ec,d.dc*b);if(0<h.length){this.aa.beginPath();for(d=0;d<h.length;d++)b=h[d],0==d?this.aa.moveTo(b.mc,b.Hb):this.aa.lineTo(b.mc,b.Hb);this.aa.closePath();this.aa.stroke();this.aa.fill()}}}}};b.prototype.Mk=function(a,d,c){var b,h,e=!1;b=0;for(h=a.length-1;b<a.length;h=b++){var g=a[b];h=a[h];g.Hb>c!=h.Hb>c&&d<(h.mc-
g.mc)*(c-g.Hb)/(h.Hb-g.Hb)+g.mc&&(e=!e)}return e};b.prototype.Bi=function(a,d){var c=-1;if((0<=this.w.mode||0<this.w.hb.length)&&this.io())for(var b=0;b<this.P.length;b++){var h=this.P[b];"poly"==h.type&&h.Td&&0<h.Td.length&&(-1!=this.w.mode||-1!=this.w.hb.indexOf(h.id))&&this.Mk(h.Td,a,d)&&(c=b,h.mc=a,h.Hb=d)}return 0<=c?this.P[c]:!1};b.prototype.io=function(){return 4==this.qa()&&0==this.lc};b.prototype.Qb=function(){var a=0,d=this.qa(),c=this.m;switch(this.f.mode){case 0:a=this.f.c/2;break;case 1:a=
4==d?180*Math.atan(c.height/c.width*Math.tan(this.f.c/2*Math.PI/180))/Math.PI:c.height/c.width*this.f.c/2;break;case 2:a=Math.sqrt(c.width*c.width+c.height*c.height);a=4==d?180*Math.atan(c.height/a*Math.tan(this.f.c/2*Math.PI/180))/Math.PI:c.height/a*this.f.c/2;break;case 3:a=4*c.height/3>c.width?this.f.c/2:4==d?180*Math.atan(4*c.height/(3*c.width)*Math.tan(this.f.c/2*Math.PI/180))/Math.PI:4*c.height/(3*c.width)*(this.f.c/2)}return 2*a};b.prototype.rn=function(a,d){a||(a=this.Qb());d||(d=this.qa());
return 4==d?180*Math.atan(this.be()*Math.tan(a/2*Math.PI/180))/Math.PI:a*this.be()};b.prototype.be=function(){return this.m.width/this.m.height};b.prototype.Hg=function(a){a/=2;var d,c=this.qa();switch(this.f.mode){case 0:this.f.c=2*a;break;case 1:a=4==c?180*Math.atan(this.m.width/this.m.height*Math.tan(a*Math.PI/180))/Math.PI:this.m.width/this.m.height*a;this.f.c=2*a;break;case 2:d=Math.sqrt(this.m.width*this.m.width+this.m.height*this.m.height);a=4==c?180*Math.atan(d/this.m.height*Math.tan(a*Math.PI/
180))/Math.PI:d/this.m.height*a;this.f.c=2*a;break;case 3:4*this.m.height/3>this.m.width||(d=3*this.m.width/(4*this.m.height),a=4==c?180*Math.atan(d*Math.tan(a*Math.PI/180))/Math.PI:d*a),this.f.c=2*a}};b.prototype.gh=function(){var a=new e;a.pan=this.pan.c;a.i=this.i.c;a.f=this.f.c;this.Se(a);this.Se(a);this.Se(a);this.Bf&&0==this.fb||(this.pan.c=a.pan,this.i.c=a.i);this.f.c=a.f};b.prototype.Se=function(a){var d,c,b=this.m.width/this.m.height;if(2==this.fb){0<this.f.sg&&(d=this.pc,this.h.I&&0<this.h.I.length&&
(d=this.h.I[0].height),this.f.min=100*this.m.height/(d*this.f.sg));c=a.f/2;d=c*b;var h=this.h.width/this.h.height*50,b=this.B.Jl?2*Math.min(50,h/b):2*Math.max(50,h/b);a.f<this.f.min&&(a.f=this.f.min);a.f>b&&(a.f=b);50<c?a.i=0:(50<a.i+c&&(a.i=50-c),-50>a.i-c&&(a.i=-50+c));d>h?a.pan=0:(a.pan+d>h&&(a.pan=h-d,this.o.active&&(this.o.speed=-this.o.speed,this.pan.d=0)),a.pan-d<-h&&(a.pan=-h+d,this.o.active&&(this.o.speed=-this.o.speed,this.pan.d=0)))}else{0<this.f.sg&&(d=this.pc,this.h.I&&0<this.h.I.length&&
(d=this.h.I[0].height),this.f.min=360*Math.atan2(this.m.height/2,d/2*this.f.sg)/Math.PI);a.f<this.f.min&&(a.f=this.f.min);var h=this.f.max,e=179;c=this.Qb()/2;d=b*c;4==this.qa()?d=180*Math.atan(b*Math.tan(c*Math.PI/180))/Math.PI:9==this.qa()?(h=this.f.gj,e=355):12==this.qa()&&(h=this.f.fj,e=360);this.Y||(h=Math.max(160,h));a.f>h&&(a.f=h);12==this.qa()&&(2*d>e&&(a.f=e/b),c=this.Qb()/2,2*c>e&&(a.f=e),c=this.Qb()/2,d=b*c);2*c>this.i.max-this.i.min&&180>this.i.max-this.i.min&&(c=(this.i.max-this.i.min)/
2,this.Hg(2*c));90>this.i.max?a.i+c>this.i.max&&(a.i=this.i.max-c):a.i>this.i.max&&(a.i=this.i.max);-90<this.i.min?a.i-c<this.i.min&&(a.i=this.i.min+c):a.i<this.i.min&&(a.i=this.i.min);b=this.pan.max-this.pan.min;if(359.99>b){var h=90,e=Math.tan(c*Math.PI/180),g=Math.tan((Math.abs(a.i)+c)*Math.PI/180),g=Math.sqrt(g*g+1)/Math.sqrt(e*e+1);c=180*Math.atan(g*Math.tan(d*Math.PI/180))/Math.PI;2*c>b&&(g=Math.tan(b*Math.PI/360)/Math.tan(d*Math.PI/180),b=g*Math.sqrt(e*e+1),g=Math.sqrt(b*b-1),h=180/Math.PI*
Math.atan(g));a.pan+c>this.pan.max&&(a.pan=this.pan.max-c,this.o.active&&(this.o.speed=-this.o.speed,this.pan.d=0));a.pan-c<this.pan.min&&(a.pan=this.pan.min+c,this.o.active&&(this.o.speed=-this.o.speed,this.pan.d=0));a.i+d>h&&(a.i=h-d);a.i-d<-h&&(a.i=-h+d)}}};b.prototype.update=function(a){void 0===a&&(a=0);this.Da=!0;a&&(this.Of=Math.max(1*a,this.Of))};b.prototype.zk=function(){return this.ga?!!this.ga.isTileLoading:0<this.Kb||0<this.oc};b.prototype.Rg=function(){var a=Date.now(),d;this.Db?this.ga&&
(this.Mp(),2===this.fb?(this.gh(),this.Qg()):0===this.fb&&(d=this.od(),this.Ok(this.m.width/2,this.m.height/2,d),this.Qg())):2===this.fb?(this.Qg(),this.Y?(this.ma.Hj(),this.ma.rl()):this.Hj()):0===this.fb&&(!this.Y||4==this.Ja&&0==this.lc?(d=this.od(),this.Ok(this.m.width/2,this.m.height/2,d),this.Qg(),this.Ug?this.ma.Sp():this.km&&this.jm(),this.em(),this.Y?(this.s.fd?14==this.s.format?this.ma.Rp():this.ma.om():0<this.h.I.length?this.ma.Yp():this.ma.$p(),this.ma.rl()):(this.Pc?0<this.h.I.length?
this.Pp():this.Op():this.Sg&&this.Lp(),this.Co()),this.Fa&&this.Fa.Bo()):(this.ma.om(),this.Qg(),this.ho()));d=Date.now();50<d-a?(this.L("Time between frames: "+(d-a)),this.rf||(2<this.yj?(this.rf=!0,this.L("disabling HighDPI rendering"),this.Oc()):this.yj++)):this.yj=0;this.af&&this.h.El++};b.prototype.Op=function(){var a=!1;if(this.m.width!=this.D.offsetWidth||this.m.height!=this.D.offsetHeight)this.m.width=this.D.offsetWidth,this.m.height=this.D.offsetHeight,this.D.style[this.Va+"OriginX"]=this.m.width/
2+"px",this.D.style[this.Va+"OriginY"]=this.m.height/2+"px",a=!0;var d=Math.round(this.od());this.lg==d&&!a||this.yc||(this.lg=d,this.D.style[this.pd]=d+"px");this.kb.Vm(this.pan.c,this.i.c,this.O.c,this.$a);for(a=0;6>a;a++){var c,b;if(c=this.kb.cb[a])b="",this.yc?(b+="translate3d("+this.m.width/2+"px,"+this.m.height/2+"px,0px) ",b+="perspective("+d+"px) ",b+="translate3d(0px,0px,"+d+"px) "):b+="translate3d("+this.m.width/2+"px,"+this.m.height/2+"px,"+d+"px) ",b+="rotateZ("+Number(this.O.c).toFixed(10)+
"deg) ",b+="rotateX("+Number(this.i.c).toFixed(10)+"deg) ",b+="rotateY("+Number(-this.pan.c).toFixed(10)+"deg) ",c.Ik&&(b+=c.Ik,c.wc||(b="translate3d(-10px,-10px,0px) scale(0.001,0.001)"),c.K.style[this.Va]=b)}};b.prototype.Lp=function(){this.gh();var a;this.fc&&(a=this.fc.getContext("2d"));if(this.m.width!==this.D.offsetWidth||this.m.height!==this.D.offsetHeight)this.m.width=this.D.offsetWidth,this.m.height=this.D.offsetHeight;if(a){var d=a.canvas.width/2,c=a.canvas.height/2,b=a.createRadialGradient(d,
c,5,d,c,Math.max(d,c));b.addColorStop(0,"#333");b.addColorStop(1,"#fff");a.rect(0,0,a.canvas.width,a.canvas.height);a.fillStyle=b;a.fill();a.fillStyle="#f00";a.font="20px Helvetica";a.textAlign="center";a.fillText("Pan: "+this.pan.c.toFixed(1),d,c-60);a.fillText("Tilt: "+this.i.c.toFixed(1),d,c-30);a.fillText("Fov: "+this.f.c.toFixed(1),d,c+0);a.fillText("Node: "+this.yk(),d,c+30);a.fillText("Title: "+this.Cf.title,d,c+60)}};b.prototype.Mp=function(){this.gh();if(this.m.width!==this.D.offsetWidth||
this.m.height!==this.D.offsetHeight)this.m.width=this.D.offsetWidth,this.m.height=this.D.offsetHeight;this.ga&&this.ga.setPan&&(this.ga.setPan(this.pan.c),this.ga.setTilt(this.i.c),this.ga.setFov(this.f.c))};b.prototype.Hj=function(){this.ua.style.visibility="inherit";this.aa||(this.aa=this.ua.getContext("2d"));if(this.aa.width!=this.m.width||this.aa.height!=this.m.height)this.aa.width=this.m.width,this.aa.height=this.m.height;this.aa.clear?this.aa.clear():this.aa.clearRect(0,0,this.ua.width,this.ua.height);
this.oc=0;var a,d,c;d=100/this.f.c;c=this.h.width/this.h.height;var b=this.m.height*d*c;d*=this.m.height;a=(this.pan.c/100/c-.5)*b+this.m.width/2;for(var h=(this.i.c/100-.5)*d+this.m.height/2,e,g,t,m,k=0;this.h.I.length>=k+2&&this.h.I[k+1].width>b;)k++;var w,q;q=[];for(w=this.h.I.length-1;w>=k;){c=this.h.I[w];var u;if(c.cache)u={Xa:0,vb:0},u.xb=c.M-1,u.yb=c.da-1;else{u={};var r=-h/d*(c.height/this.h.G);e=(-a+this.m.width)/b*(c.width/this.h.G);g=(-h+this.m.height)/d*(c.height/this.h.G);u.Xa=Math.min(Math.max(0,
Math.floor(-a/b*(c.width/this.h.G))),c.M-1);u.vb=Math.min(Math.max(0,Math.floor(r)),c.da-1);u.xb=Math.min(Math.max(0,Math.floor(e)),c.M-1);u.yb=Math.min(Math.max(0,Math.floor(g)),c.da-1)}q[w]=u;var x=!0;for(g=u.vb;g<=u.yb;g++)for(e=u.Xa;e<=u.xb;e++)m=e+g*c.M,r=c.U[m],r||(r=new p.Od,c.U[m]=r),this.Kb<this.Ng?r.h||(this.Xi++,r.h=new Image,r.h.onload=this.Cp(),r.h.onerror=this.di(r),r.h.onabort=this.di(r),r.h.crossOrigin=this.crossOrigin,r.h.setAttribute("src",this.Ee(0,w,e,g)),c.cache&&this.Mb.push(r.h),
this.Kb++,this.Da=!0):this.oc++,r.h&&r.h.complete||(x=!1),r.visible=!0;u.cj=x;w--}for(w=this.h.I.length-1;w>=k;){c=this.h.I[w];if(q[w]&&0<=q[w].Xa)for(u=q[w],g=u.vb;g<=u.yb;g++)for(e=u.Xa;e<=u.xb;e++)m=e+g*c.M,(r=c.U[m])||(r=c.U[m]=new p.Od),r.h&&r.h.complete&&this.aa.drawImage(r.h,a+(-this.h.Ia+this.h.G*e)*b/c.width,h+(-this.h.Ia+this.h.G*g)*d/c.height,r.h.width*b/c.width,r.h.height*d/c.height),r.visible=!0;w--}for(b=0;b<this.h.I.length;b++)if(c=this.h.I[b],!c.cache)for(t in c.U)c.U.hasOwnProperty(t)&&
(r=c.U[t],r.visible||(r.h=null,delete c.U[t]));if(0<=this.w.mode||0<this.w.hb.length)for(b=1,0>=this.w.mode&&(b=0),3==this.w.mode&&(b=this.w.oa),t=0;t<this.P.length;t++)if(c=this.P[t],a=b,"poly"==c.type&&(d=c.Td,2==this.w.mode&&(a=c.oa),h=this.w.hb.indexOf(c.id),-1!=h&&(a=this.w.Jb[h]),0<d.length)){this.aa.fillStyle=this.ea(c.bc,c.ac*a);this.aa.strokeStyle=this.ea(c.ec,c.dc*a);this.aa.beginPath();for(c=0;c<d.length;c++)a=d[c],0==c?this.aa.moveTo(a.mc,a.Hb):this.aa.lineTo(a.mc,a.Hb);this.aa.closePath();
this.aa.stroke();this.aa.fill()}this.Yc=!1};b.prototype.Bp=function(a){var d=this;return function(){d.update();d.Yc=!0;a.loaded=!0;a.h&&!a.K&&d.D.appendChild(a.h);d.Kb&&d.Kb--;a.h&&a.Pa&&(a.Pa.drawImage(a.h,0,0),a.h=null)}};b.prototype.Cp=function(){var a=this;return function(){a.Da=!0;a.Yc=!0;a.Kb&&a.Kb--}};b.prototype.di=function(a){var d=this;return function(){d.Da=!0;d.Yc=!0;d.Kb&&d.Kb--;a.h=null}};b.prototype.Gk=function(a,d,c){c.Xa=a.width/this.h.G*d.Tf;c.vb=a.height/this.h.G*d.Uf;c.xb=a.width/
this.h.G*d.og;c.yb=a.height/this.h.G*d.pg;c.Xa=Math.min(Math.max(0,Math.floor(c.Xa)),a.M-1);c.vb=Math.min(Math.max(0,Math.floor(c.vb)),a.da-1);c.xb=Math.min(Math.max(0,Math.floor(c.xb)),a.M-1);c.yb=Math.min(Math.max(0,Math.floor(c.yb)),a.da-1)};b.prototype.ap=function(a){a=Math.round(a);this.yc=0<(a&1);this.qf=0<(a&2);this.ki=0<(a&4);this.rf=0<(a&8);4096<=a&&(this.Pc=0<(a&4096),this.Y=0<(a&8192),this.Sg=0<(a&32768))};b.prototype.Tn=function(){var a=0;this.yc&&(a|=1);this.qf&&(a|=2);this.ki&&(a|=4);
this.Pc&&(a|=4096);this.Y&&(a|=8192);this.Sg&&(a|=32768);return a};b.prototype.gm=function(){if(!(6>this.kb.cb.length))for(var a=0;6>a;a++){var d;d=this.kb.cb[a];var c;c=[];c.push(new p.ta(-1,-1,-1,0,0));c.push(new p.ta(1,-1,-1,1,0));c.push(new p.ta(1,1,-1,1,1));c.push(new p.ta(-1,1,-1,0,1));for(var b=0;4>b;b++)4>a?c[b].Ka(-Math.PI/2*a):c[b].Ba(Math.PI/2*(4==a?-1:1)),this.$a&&(c[b].Cb(this.$a.O*Math.PI/180),c[b].Ba(-this.$a.pitch*Math.PI/180)),c[b].Ae(-this.pan.c),c[b].Cd(this.i.c),c[b].Be(this.O.c);
c=this.Ci(c);d.wc=0<c.length;if(d.wc){d=d.jf;d.Tf=c[0].md;d.og=c[0].md;d.Uf=c[0].Lb;d.pg=c[0].Lb;for(b=1;b<c.length;b++)d.Tf=Math.min(d.Tf,c[b].md),d.og=Math.max(d.og,c[b].md),d.Uf=Math.min(d.Uf,c[b].Lb),d.pg=Math.max(d.pg,c[b].Lb);d.Df=d.og-d.Tf;d.Wg=d.pg-d.Uf;d.scale=Math.max(d.Df,d.Wg)}else d.jf.Df=-1,d.jf.Wg=-1}};b.prototype.ej=function(){for(var a=0;a<this.h.I.length;a++){var d=this.h.I[a],c;for(c in d.U)d.U.hasOwnProperty(c)&&(d.U[c].visible=!1)}};b.prototype.Mi=function(){for(var a=0,d=Math.tan(Math.min(this.Qb(),
175)*Math.PI/360),c=this.m.height/(2*d),c=c*(1+this.m.width/this.m.height*d/2),c=c*Math.pow(2,1<this.devicePixelRatio?this.h.jl:this.h.il);this.h.I.length>=a+2&&!this.h.I[a+1].mf&&this.h.I[a+1].width>c;)a++;return a};b.prototype.Pp=function(){var a=!1,d,c,b;if(this.m.width!==this.D.offsetWidth||this.m.height!==this.D.offsetHeight)this.m.width=this.D.offsetWidth,this.m.height=this.D.offsetHeight,this.D.style[this.Va+"OriginX"]=this.m.width/2+"px",this.D.style[this.Va+"OriginY"]=this.m.height/2+"px",
a=!0;var h=Math.round(this.od());if(this.lg!=h||a)this.lg=h,this.yc||(this.D.style[this.pd]=h+"px",this.D.style[this.pd+"Origin"]="50% 50%");this.oc=0;if(0<this.h.I.length){this.gm();this.ej();var e;e="";for(d=0;6>d;d++){var g;g=this.kb.cb[d];g.wc&&(e=e+d+",")}e=this.Mi();var t;for(t=this.h.I.length-1;t>=e;){var a=this.h.I[t],m=1;t==this.h.I.length-1&&0==this.h.Ia&&(m=this.h.G/(this.h.G-2));for(d=0;6>d;d++){g=this.kb.cb[d];var k=g.jf;if(g.wc&&0<k.Df&&0<k.Wg&&0<k.scale||a.cache){g.Da=!1;var w;w={};
a.cache?(w.Xa=0,w.vb=0,w.xb=a.M-1,w.yb=a.da-1):this.Gk(a,k,w);for(b=w.vb;b<=w.yb;b++)for(c=w.Xa;c<=w.xb;c++){var q=c+b*a.M+d*a.M*a.da;(k=a.U[q])||(k=a.U[q]=new p.Od);if(!k.K&&this.Kb<this.Ng){if(0<this.gi.length){k.K=this.gi.shift();for(q=this.D.firstChild;q&&q.Nd&&(-1==q.Nd||q.Nd>=t);)q=q.nextSibling;this.D.insertBefore(k.K,q);k.Pa=k.K.getContext("2d")}else if(this.$l<this.ue){this.$l++;k.K=document.createElement("canvas");k.K.width=this.h.G+2*this.h.Ia;k.K.height=this.h.G+2*this.h.Ia;k.Pa=k.K.getContext("2d");
k.K.style[this.Va+"Origin"]="0% 0%";k.K.style.overflow="hidden";k.K.style.position="absolute";for(q=this.D.firstChild;q&&q.Nd&&(-1==q.Nd||q.Nd>=t);)q=q.nextSibling;this.D.insertBefore(k.K,q)}k.K&&(this.Xi++,k.h=new Image,k.h.crossOrigin=this.crossOrigin,k.h.style[this.Va+"Origin"]="0% 0%",k.h.style.position="absolute",k.h.style.overflow="hidden",k.K.Nd=t,k.h.onload=this.Bp(k),k.h.onerror=this.di(k),k.h.onabort=this.di(k),k.h.setAttribute("src",this.Ee(d,t,c,b)),a.cache&&this.Mb.push(k.h),this.Kb++,
this.Da=!0)}else this.oc++;if(k.K){q="";this.yc?(q+="translate3d("+this.m.width/2+"px,"+this.m.height/2+"px,0px) ",q+=" perspective("+h+"px) ",q+="translate3d(0px,0px,"+h+"px) "):q+="translate3d("+this.m.width/2+"px,"+this.m.height/2+"px,"+h+"px) ";q+="rotateZ("+Number(this.O.c).toFixed(10)+"deg) ";q+="rotateX("+Number(this.i.c).toFixed(10)+"deg) ";q+="rotateY("+Number(-this.pan.c).toFixed(10)+"deg) ";this.$a&&(q+="rotateX("+Number(-this.$a.pitch).toFixed(10)+"deg) ",q+="rotateZ("+Number(this.$a.O).toFixed(10)+
"deg) ");var q=4>d?q+("rotateY("+-90*d+"deg) "):q+("rotateX("+(4==d?-90:90)+"deg) "),u;this.qf?(u=this.Kf/this.h.G*(this.h.G/a.width)*(2*t+1),u=this.ed?2/Math.tan(this.f.c*Math.PI/360)*u:2*u,q+=" scale("+u*m*m+")"):u=1/(m*m);q+=" translate3d("+(1/m*c*this.h.G-this.h.Ia-a.width/2)+"px,";q+=1/m*b*this.h.G-this.h.Ia-a.width/2+"px,";q+=-a.width*u/2+"px)";g.wc&&(k.visible=!0,k.K?k.K.style[this.Va]=q:k.h&&(k.h.style[this.Va]=q))}}}}t--}for(h=0;h<this.h.I.length;h++){var a=this.h.I[h],r;for(r in a.U)a.U.hasOwnProperty(r)&&
(k=a.U[r],!k.visible&&k.K&&(a.cache?k.K?k.K.style[this.Va]="translate3d(-10px,-10px,0px) scale(0.001,0.001)":k.h&&(k.h.style[this.Va]=""):(k.Pa&&k.Pa.clearRect(0,0,k.Pa.canvas.width,k.Pa.canvas.height),this.gi.push(k.K),k.K?(e="translate3d(-10px,-10px,0px) scale(0.001,0.001)",k.K.style[this.Va]=e,k.K.Nd=-1):k.loaded&&this.D.removeChild(k.h),k.K=null,k.h=null,k.Pa=null,delete a.U[r])))}this.Yc=!1}};b.prototype.em=function(){var a=Math.round(this.od());this.yc||this.dm(a);for(var d=0;d<this.Ya.length;d++){var c;
c=this.Ya[d];c.im(a);c.b.hidden=!1}};b.prototype.jm=function(){for(var a=Math.round(this.od()),d=0;d<this.J.length;d++){var c;c=this.J[d];c.hd||(c.im(a),c.b.hidden=!1)}};b.prototype.ho=function(){for(var a=0;a<this.Ya.length;a++){var d;d=this.Ya[a];d.Pl()}for(a=0;a<this.J.length;a++)d=this.J[a],d.hd||d.Pl()};b.prototype.Tp=function(){for(var a=0;a<this.J.length;a++){var d;d=this.J[a];d.hd||d.Ie()}for(a=0;a<this.Ya.length;a++)d=this.Ya[a],d.Ie()};b.prototype.Gc=function(a){this.le=!1;try{a?this.ab=
a:this.ab=document.createElement("canvas");var d=this.Kd.offsetWidth-this.margin.left-this.margin.right,c=this.Kd.offsetHeight-this.margin.top-this.margin.bottom;if(100>d||100>c)c=d=100;var b=window.devicePixelRatio||1;this.rf&&(b=1);this.D.style.width=d+"px";this.D.style.height=c+"px";this.ab.style.width=d+"px";this.ab.style.height=c+"px";this.ab.width=d*b;this.ab.height=c*b;this.ab.style.display="none";this.ab.style.hq="none";this.D.insertBefore(this.ab,this.D.firstChild);a={stencil:!0,depth:!0};
a.alpha=this.ed?!0:!1;this.Ic&&10<=this.Nk[0]&&(a.antialias=!1,a.alpha=!1);this.H=this.ab.getContext("webgl",a);this.H||(this.H=this.ab.getContext("experimental-webgl",a));if(this.H){var h=this.H;this.mb.width=d*b;this.mb.height=c*b;h.clearColor(0,0,0,0);h.enable(this.H.DEPTH_TEST);h.viewport(0,0,500,500);h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT);4096<=h.getParameter(h.MAX_TEXTURE_SIZE)&&!this.gg&&(this.ue=1<b?4*this.ue:2*this.ue);this.L("Max tile cnt: "+this.ue);this.ma.fg();this.ma.xh();this.ma.Pk(this.xf);
this.ma.Qk();this.C&&(this.C.fg(),this.C.Gc());this.Fa&&(this.Fa.fg(),this.Fa.Gc())}}catch(e){this.L(e)}this.H?this.Y=!0:alert("Could not initialise WebGL!")};b.prototype.hc=function(a){return a?"{"==a.charAt(0)||"/"==a.charAt(0)||0<a.indexOf("://")||0==a.indexOf("javascript:")?a:this.Jd+a:this.Jd};b.prototype.Vd=function(a,d,c){var b=(new RegExp("%0*"+d,"i")).exec(a.toString());if(b){var b=b.toString(),h=c.toString();for(b.charAt(b.length-1)!=d&&(h=(1+c).toString());h.length<b.length-1;)h="0"+h;
a=a.replace(b,h)}return a};b.prototype.Ee=function(a,d,c,b){var h=this.h.bj-1-d,e=this.h.kl,g="x";switch(a){case 0:g="f";break;case 1:g="r";break;case 2:g="b";break;case 3:g="l";break;case 4:g="u";break;case 5:g="d"}for(var k=0;3>k;k++)e=this.Vd(e,"c",a),e=this.Vd(e,"s",g),e=this.Vd(e,"r",d),e=this.Vd(e,"l",h),e=this.Vd(e,"x",c),e=this.Vd(e,"y",b),e=this.Vd(e,"v",b),e=this.Vd(e,"h",c);return this.hc(e)};b.prototype.uh=function(){return this.pan.c};b.prototype.Mn=function(){return this.u.pan};b.prototype.Nn=
function(){for(var a=this.pan.c;-180>a;)a+=360;for(;180<a;)a-=360;return a};b.prototype.ne=function(){for(var a=this.pan.c-this.pan.ij;-180>a;)a+=360;for(;180<a;)a-=360;return a};b.prototype.Dg=function(a){this.ra();isNaN(a)||(this.pan.c=Number(a));this.update()};b.prototype.vj=function(a){this.ra();isNaN(a)||(this.pan.c=Number(a)+this.pan.ij);this.update()};b.prototype.$j=function(a,d){isNaN(a)||(this.Dg(this.uh()+a),d&&(this.pan.d=a))};b.prototype.Om=function(a,d){this.$j(a*this.rh(),d)};b.prototype.Ti=
function(){return this.i.c};b.prototype.Vn=function(){return this.u.i};b.prototype.Gg=function(a){this.ra();isNaN(a)||(this.i.c=Number(a));this.update()};b.prototype.bk=function(a,d){this.Gg(this.Ti()+a);d&&(this.i.d=a)};b.prototype.Qm=function(a,d){this.bk(a*this.rh(),d)};b.prototype.Ml=function(a){this.ra();isNaN(a)||(this.O.c=Number(a));this.update()};b.prototype.Un=function(){return this.O.c};b.prototype.Wf=function(){return this.f.c};b.prototype.qn=function(){return this.u.Gd};b.prototype.zg=
function(a){this.ra();var d;switch(this.qa()){case 4:d=170;break;case 12:d=360;break;case 9:d=355;break;default:d=170}2==this.fb&&(d=9999999999);!isNaN(a)&&0<a&&a<d&&(d=this.f.c,this.f.c=Number(a),d!=this.f.c&&this.update())};b.prototype.Zj=function(a,d){this.zg(this.Wf()+a);d&&(this.f.d=a)};b.prototype.yi=function(a,d){if(!isNaN(a)){var c;c=a/90*Math.cos(Math.min(this.f.c,90)*Math.PI/360);c=this.f.c*Math.exp(c);this.zg(c);d&&(this.f.d=a)}};b.prototype.$o=function(a,d){this.ra();isNaN(a)||(this.pan.c=
a);isNaN(d)||(this.i.c=d);this.update()};b.prototype.Eg=function(a,d,c){this.ra();isNaN(a)||(this.pan.c=a);isNaN(d)||(this.i.c=d);isNaN(c)||this.zg(c);this.update()};b.prototype.Vo=function(){this.Eg(this.pan.Qa,this.i.Qa,this.f.Qa)};b.prototype.Yo=function(a){this.Bg(a);this.Cg(a);this.Ag(a)};b.prototype.Bg=function(a){this.B.wb=a};b.prototype.Ag=function(a){this.B.se=a};b.prototype.An=function(){return this.B.se};b.prototype.Cg=function(a){this.B.gd=a};b.prototype.lp=function(a){this.Bf==!a&&(this.Bf=
!!a,this.Bf||(this.O.c=0),this.ka("gyrochanged",{}))};b.prototype.Wn=function(){return this.Bf};b.prototype.Ln=function(){return this.Pd?5:this.Ic?4:this.Zk?1:this.Wk?2:this.Vk?3:0};b.prototype.nn=function(){return this.$i?5:this.Sk?4:this.cf?2:this.ed?3:this.Zi?1:0};b.prototype.moveTo=function(a,d,c,b,h,e){this.ra();if("_blank"!==a&&""!==a){this.u.active=!0;this.u.Je=!1;this.u.Kj=!1;var g=a.toString().split("/");1<g.length&&(a=Number(g[0]),b=Number(d),d=Number(g[1]),2<g.length&&(c=Number(g[2])));
isNaN(a)?this.u.pan=this.pan.c:this.u.pan=Number(a);isNaN(d)?this.u.i=this.i.c:this.u.i=Number(d);!isNaN(c)&&0<c&&180>c?this.u.f=Number(c):this.u.f=this.f.c;this.u.speed=!isNaN(b)&&0<b?Number(b):1;isNaN(h)?this.u.O=this.O.c:this.u.O=Number(h);void 0!==e?!a||4!=e&&12!=e&&9!=e||(this.u.Bb=e):this.u.Bb=this.Ja}};b.prototype.Kh=function(a){this.ra();var d=0,c=0,b=70,h=4,e=0,g=1;a.hasOwnProperty("pan")&&(d=Number(a.pan),this.u.pan=d);a.hasOwnProperty("tilt")&&(c=Number(a.tilt),this.u.i=c);a.hasOwnProperty("fov")&&
(b=Number(a.fov),this.u.f=b);a.hasOwnProperty("projection")&&(h=Number(a.projection),this.u.Bb=h);a.hasOwnProperty("timingFunction")&&(e=Number(a.timingFunction));a.hasOwnProperty("speed")&&(g=Number(a.speed));0>=g?(this.Eg(d,c,b),this.jd(h)):(a=new p.$k,a.Ta="__AutoMove",a.Ig=this.pan.c,a.Kg=this.i.c,a.Fd=this.f.c,a.Jg=this.Ja,a.Xd=d,a.Yd=c,a.wf=b,a.ld=h,a.Ve=!1,a.he=!1,a.ie=!1,0==e&&(a.he=!0),1==e&&(a.Ve=!0,a.he=!0),2==e&&(a.ie=!0),a.speed=g,this.u.Tj=this.A,this.A=this.vk(a),this.u.Uj=(new Date).getTime(),
this.u.Kj=!0,this.u.active=!0,this.u.Je=!1,this.u.pan=d,this.u.i=c,this.u.f=b,this.Id=!1)};b.prototype.ro=function(a){this.moveTo(this.pan.Qa,this.i.Qa,this.f.Qa,a)};b.prototype.so=function(a,d){var c={};c.pan=this.pan.Qa;c.tilt=this.i.Qa;c.fov=this.f.Qa;c.projection=this.Ph;c.timingFunction=d;c.speed=a;this.Kh(c)};b.prototype.Dm=function(a,d,c,b){var h=new p.Bh(this);h.type="point";h.pan=d;h.i=c;h.id=a;h.b={};h.b.player=this;h.We();h.b.hotspot=h;h.b.__div=document.createElement("div");h.b.__div.appendChild(b);
this.P.push(h);h.b.__div.style.position="absolute";h.b.__div.style.left="-1000px";h.b.__div.style.top="-1000px";this.Ea.insertBefore(h.b.__div,this.Ea.firstChild);this.Da=!0};b.prototype.Np=function(a,d,c){for(var b=0;b<this.P.length;b++){var h=this.P[b];h.id==a&&(h.pan=d,h.i=c,h.We())}this.Da=!0};b.prototype.Oo=function(a){for(var d=-1,c,b=0;b<this.P.length;b++)c=this.P[b],c.id==a&&(d=b);-1<d&&(c=this.P.splice(d,1).pop(),c.b&&c.b.__div&&this.Ea.removeChild(c.b.__div))};b.prototype.Pn=function(){for(var a=
[],d=0;d<this.P.length;d++){var c=this.P[d];"point"==c.type&&a.push(String(c.id))}return a};b.prototype.sn=function(a){for(var d=0;d<this.P.length;d++){var c=this.P[d];if(c.id==a)return d={},d.id=a,d.pan=c.pan,d.tilt=c.i,c.b&&c.b.__div&&(d.div=c.b.__div),d}};b.prototype.nm=function(a,d){this.X.start.x=a;this.X.start.y=d;this.X.ca.x=a;this.X.ca.y=d;this.xa.ca.x=a;this.xa.ca.y=d;this.pj++;this.pan.Cc=this.pan.c;this.i.Cc=this.i.c};b.prototype.lm=function(a,d){var c=this.Qb();this.pan.Cc+=a*c/this.m.height;
this.i.Cc+=d*c/this.m.height;this.pan.c=this.pan.Cc;this.i.c=this.i.Cc};b.prototype.mm=function(a,d){this.X.c.x=a;this.X.c.y=d;this.X.ba.x=this.X.c.x-this.X.ca.x;this.X.ba.y=this.X.c.y-this.X.ca.y;this.B.vd&&(this.X.ca.x=this.X.c.x,this.X.ca.y=this.X.c.y,this.update())};b.prototype.ra=function(){this.o.active&&(this.o.active=!1,this.ka("autorotatechanged",{}),this.pan.d=0,this.i.d=0,this.f.d=0);this.u.active&&(this.u.active=!1,this.pan.d=0,this.i.d=0,this.f.d=0);this.Le=this.u.Je=!1;this.o.Jh=!1;
this.nd=.02;this.Gf=0;this.o.Yb&&(this.o.Yb=!1,this.o.enabled=this.o.Xj);this.ef=(new Date).getTime()};b.prototype.yn=function(){return this.ef};b.prototype.Ck=function(a,d){a||(a=this.sa.x,d=this.sa.y);var c=this.m.height/(2*Math.tan(this.f.c*Math.PI/360)),b=a-this.m.width/2,h=d-this.m.height/2,e={};e.pan=180*Math.atan(b/c)/Math.PI;e.tilt=180*Math.atan(-h/Math.sqrt(b*b+c*c))/Math.PI;return e};b.prototype.Rn=function(a,d){var c,b;a||(a=this.sa.x,d=this.sa.y);if(2===this.fb)b=this.f.c/this.m.height,
c=-(a-this.m.width/2)*b+this.pan.c,b=-(d-this.m.height/2)*b+this.i.c;else{b=new p.ta(0,0,1);c=this.Ck(a,d);b.Cd(-c.tilt);b.Ae(c.pan);b.Cd(-this.i.c);b.Ae(-this.pan.c);b.Cd(-this.$a.pitch);b.Be(this.$a.O);for(c=b.Gm()-180;-180>c;)c+=360;b=b.Hm()}var h={};h.pan=c;h.tilt=b;return h};b.prototype.Hc=function(a){return a==this.control?!0:a&&void 0!==a.ggPermeable&&0==a.ggPermeable?!1:a&&a.ggType&&("container"==a.ggType||"cloner"==a.ggType||"timer"==a.ggType)?!0:!1};b.prototype.Ai=function(a,b){var c=this.od(),
f,h,e;for(f=0;f<this.J.length+this.Ya.length;f++){var g;g=f<this.J.length?this.J[f]:this.Ya[f-this.J.length];if(g.lb)return g}for(f=0;f<this.J.length+this.Ya.length;f++)if(g=f<this.J.length?this.J[f]:this.Ya[f-this.J.length],!g.hd){var k=[],m=new p.ta,v;e=h=void 0;0<g.f&&(h=Math.tan(g.f/2*Math.PI/180),e=0<g.Fc?h*g.bd/g.Fc:h,g.rd&&1!=g.rd&&(e*=g.rd));for(v=0;4>v;v++){switch(v){case 0:m.Za(-h,-e,-1);break;case 1:m.Za(h,-e,-1);break;case 2:m.Za(h,e,-1);break;case 3:m.Za(-h,e,-1)}m.Ba(-g.i*Math.PI/180);
m.Ka(g.pan*Math.PI/180);m.Ka(-this.pan.c*Math.PI/180);m.Ba(this.i.c*Math.PI/180);m.Cb(this.O.c*Math.PI/180);k.push(m.clone())}k=this.Ci(k);if(0<k.length){for(v=0;v<k.length;v++)m=k[v],.1>m.z?(e=-c/m.z,h=this.m.width/2+m.x*e,e=this.m.height/2+m.y*e):e=h=0,m.mc=h,m.Hb=e;if(this.Mk(k,a,b))return g}}return null};b.prototype.zh=function(){return document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement&&null!=document.msFullscreenElement||document.fullScreen};b.prototype.qo=function(a){this.fm(a);
if(this.Zc)this.Zc.onclick();this.Ob=null;if(!this.B.wb){a=a?a:window.event;if(a.which||0==a.which||1==a.which){var b=(new Date).getTime();if(this.zd){this.Ob=this.zd;this.R.Wa=!0;this.R.startTime=b;a.stopPropagation();return}if(this.Hc(a.target)){var c;(c=this.Ai(this.sa.x,this.sa.y))&&c.pe&&(this.Ob=c);this.nm(a.pageX,a.pageY);this.R.Wa=!0;this.R.startTime=b;a.preventDefault();this.ra()}}this.X.ba.x=0;this.X.ba.y=0}};b.prototype.Af=function(a,b){var c=this.w.Fj;c.enabled&&(this.Aa!=this.tb&&0<=
a&&0<=b&&""!=this.Aa.title?(this.wa.innerHTML=this.Aa.title,this.wa.style.color=this.ea(c.Gj,c.Ej),c.background?this.wa.style.backgroundColor=this.ea(c.bc,c.ac):this.wa.style.backgroundColor="transparent",this.wa.style.border="solid "+this.ea(c.ec,c.dc)+" "+c.vi+"px",this.wa.style.borderRadius=c.ui+"px",this.wa.style.textAlign="center",0<c.width?(this.wa.style.left=a-c.width/2+this.margin.left+"px",this.wa.style.width=c.width+"px"):(this.wa.style.width="auto",this.wa.style.left=a-this.wa.offsetWidth/
2+this.margin.left+"px"),this.wa.style.height=0<c.height?c.height+"px":"auto",this.wa.style.top=b+25+ +this.margin.top+"px",this.wa.style.visibility="inherit",this.wa.style.overflow="hidden"):(this.wa.style.visibility="hidden",this.wa.innerHTML=""))};b.prototype.fm=function(a){var b=this.oe();this.zh()?(this.sa.x=a.pageX-this.margin.left,this.sa.y=a.pageY-this.margin.top):(this.sa.x=a.pageX-b.x,this.sa.y=a.pageY-b.y);return b};b.prototype.tf=function(a){a&&null!==a&&"object"==typeof a?this.Aa=a:this.Aa=
this.tb;this.Aa.We&&this.Aa.We();this.hotspot=this.Aa};b.prototype.po=function(a){a=a?a:window.event;var b=this.fm(a);if(!this.B.wb&&!this.zd){this.o.active&&(this.o.Fh=(new Date).getTime());this.R.Wa&&(a.preventDefault(),(a.which||0==a.which||1==a.which)&&this.mm(a.pageX,a.pageY),this.ra());var c=!1;if(this.Aa==this.tb||"poly"==this.Aa.type){var f=this.tb;0<this.P.length&&this.Hc(a.target)&&(f=this.Bi(this.sa.x,this.sa.y));this.Wh(f);this.Af(a.pageX-b.x,a.pageY-b.y);0!=f&&(c=!0)}a=null;c||(a=this.Ai(this.sa.x,
this.sa.y));this.o.kh&&(this.o.kh=!1);this.Ea.style.cursor=this.Aa!=this.tb&&this.Aa.$e&&c||a&&a.dg?"pointer":"default"}};b.prototype.Wh=function(a){!1===a&&(a=this.tb);this.Aa!=a&&(this.Aa!=this.tb&&(0<this.w.mode&&(this.Aa.jb=0),this.Ca&&this.Ca.hotspotProxyOut&&this.Ca.hotspotProxyOut(this.Aa.id)),a!=this.tb?(this.tf(a),this.Ca&&this.Ca.hotspotProxyOver&&this.Ca.hotspotProxyOver(this.Aa.id),0<this.w.mode&&(this.w.jb=1,this.Aa.jb=1)):(this.tf(this.tb),0<this.w.mode&&(this.w.jb=0)),this.ga&&this.ga.changeCurrentHotspot(this.Aa.id))};
b.prototype.oo=function(a){a=a?a:window.event;this.Eh=-1;if(!this.B.wb&&(this.Ob&&(this.Ob.pe(),this.Ob.lb?this.zd=this.Ob:this.zd=null),this.R.Wa)){this.ra();a.preventDefault();this.R.Wa=!1;a=(new Date).getTime();var b;b=Math.abs(this.X.start.x-this.X.ca.x)+Math.abs(this.X.start.y-this.X.ca.y);if(400>a-this.R.startTime&&0<=b&&20>b){var c=this.Bi(this.sa.x,this.sa.y);c&&this.bm(c);b=Math.abs(this.X.xd.x-this.X.ca.x)+Math.abs(this.X.xd.y-this.X.ca.y);700>a-this.jg&&0<=b&&20>b?(c?this.cm(c):this.B.Ii&&
this.fi(),this.jg=0):this.jg=a;this.X.xd.x=this.X.ca.x;this.X.xd.y=this.X.ca.y}}};b.prototype.ml=function(a){if(!this.B.gd&&(a=a?a:window.event,this.Hc(a.target))){var b=a.detail?-1*a.detail:a.wheelDelta/40;this.B.Rk&&(b=-b);a.axis&&(-1==this.Eh?this.Eh=a.axis:this.Eh!=a.axis&&(b=0));var c=0<b?1:-1;a.wheelDeltaX&&a.wheelDeltaY&&Math.abs(a.wheelDeltaX)>Math.abs(a.wheelDeltaY)&&(b=0);0!=b&&(this.yi(c*this.B.Tl,!0),this.update());a.preventDefault();this.ra()}};b.prototype.Jp=function(a){a||(a=window.event);
var b=a.touches,c=this.oe();this.sa.x=b[0].pageX-c.x;this.sa.y=b[0].pageY-c.y;this.Zd=this.Ob=null;this.Rf&&(this.Rf=!1,this.hn());if(!this.B.wb){var f=(new Date).getTime();if(this.zd)this.Ob=this.zd,this.R.Wa=!0,this.R.startTime=f,a.preventDefault();else{if(!this.R.Wa&&b[0]){this.R.startTime=f;this.R.start.x=b[0].pageX;this.R.start.y=b[0].pageY;this.R.ca.x=b[0].pageX;this.R.ca.y=b[0].pageY;this.ib=b[0].target;if(this.Hc(this.ib)){(f=this.Ai(this.sa.x,this.sa.y))&&f.pe&&(this.Ob=f);if(f=this.Bi(this.sa.x,
this.sa.y))this.L(f),this.Zd=f,this.Wh(f),f=this.Yf(a),this.Af(f.x-c.x,f.y-c.y);this.nm(b[0].pageX,b[0].pageY);this.R.nk=b[0].identifier;this.R.Wa=!0;a.preventDefault();this.ra()}if(this.ib){c=this.ib;for(f=!1;c&&c!=this.control;){if(c.onmouseover)c.onmouseover();c.onmousedown&&!f&&(c.onmousedown(),f=!0);c=c.parentNode}f&&a.preventDefault()}}1<b.length&&(this.R.Wa=!1);!this.Vi&&2==b.length&&b[0]&&b[1]&&this.Hc(this.ib)&&(a=b[0].pageX-b[1].pageX,b=b[0].pageY-b[1].pageY,this.f.Vl=Math.sqrt(a*a+b*b),
this.f.kf=this.f.c);this.X.ba.x=0;this.X.ba.y=0}}};b.prototype.hn=function(){this.Tg&&this.s.b&&(this.s.fd||this.s.b.play(),this.s.b.muted=!1);if(this.Ic&&this.za&&this.za.createOscillator){var a=this.za.createOscillator(),b=this.za.createGain();a.frequency.value=30;a.type="sine";a.connect(b);b.connect(this.za.destination);b.gain.value=.01;a.start(0);setTimeout(function(){a.stop()},1E4)}for(b=0;b<this.N.length;b++){var c=this.N[b];(!this.ic(c.id)||c.ha)&&0<=c.loop&&c.autoplay&&(c.ha&&c.Qe(),this.ye(c.id,
c.loop))}for(b=0;b<this.J.length;b++)c=this.J[b],!this.ic(c.id)&&c.autoplay&&this.Tg&&this.ye(c.id,c.loop),this.ic(c.id)&&c.autoplay&&this.Tg&&(c.ah(),c.b.muted=!1)};b.prototype.Ip=function(a){a||(a=window.event);var b=a.touches,c=this.oe();this.sa.x=b[0].pageX-c.x;this.sa.y=b[0].pageY-c.y;if(!this.B.wb){b[0]&&(this.R.ca.x=b[0].pageX,this.R.ca.y=b[0].pageY);if(this.ib){for(var f=this.ib,h=!1;f&&f!=this.control&&!h;)"scrollarea"==f.ggType&&(h=!0),"map"==f.ggType&&(h=!0),"text"==f.ggType&&(h=!0),f=
f.parentNode;h||a.preventDefault()}if(this.R.Wa){a.preventDefault();for(f=0;f<b.length;f++)if(b[f].identifier==this.R.nk){this.mm(b[f].pageX,b[f].pageY);break}this.Zd&&(f=this.Yf(a),this.Af(f.x-c.x,f.y-c.y));this.ra()}2==b.length&&b[0]&&b[1]&&(this.R.Wa=!1,!this.Vi&&this.Hc(this.ib)&&(this.B.gd||(c=b[0].pageX-b[1].pageX,b=b[0].pageY-b[1].pageY,this.f.hk=Math.sqrt(c*c+b*b),this.xa.f.active=!0,this.xa.f.gc=this.f.kf*Math.sqrt(this.f.Vl/this.f.hk),4==this.qa()&&this.xa.f.gc>this.f.max&&(this.xa.f.gc=
this.f.max),this.xa.f.gc<this.f.min&&(this.xa.f.gc=this.f.min)),this.ra(),a.preventDefault()))}};b.prototype.Hp=function(a){var b,c=this.oe(),f=!1;if(!this.B.wb){this.R.Wa&&(a.preventDefault(),this.ra());var h=(new Date).getTime(),e=!1;b=Math.abs(this.R.start.x-this.R.ca.x)+Math.abs(this.R.start.y-this.R.ca.y);if(0<=b&&20>b){f=!0;if(this.Hc(this.ib)&&(a.preventDefault(),this.Ob))if(this.Ob.pe(),this.Ob.lb)this.zd=this.Ob;else{this.zd=null;return}if(this.ib){for(b=this.ib;b&&b!=this.control;)b.onclick&&
(b.onclick(),e=!0,f=!1),b=b.parentNode;e&&a.preventDefault()}b=Math.abs(this.R.xd.x-this.R.ca.x)+Math.abs(this.R.xd.y-this.R.ca.y);if(700>h-this.jg&&0<=b&&20>b){if(this.Hc(this.ib))if(a.preventDefault(),this.Zd)this.cm(this.Zd);else if(this.B.Ii){var g=this;setTimeout(function(){g.fi()},1)}if(this.ib){for(b=this.ib;b&&b!=this.control;)b.ondblclick&&(b.ondblclick(),e=!0,f=!1),b=b.parentNode;e&&a.preventDefault()}this.jg=0}else this.jg=h;this.R.xd.x=this.R.ca.x;this.R.xd.y=this.R.ca.y}if(this.ib)for(b=
this.ib;b&&b!=this.control;){if(b.onmouseout)b.onmouseout();if(b.onmouseup)b.onmouseup();b=b.parentNode}a=this.Yf(a);this.Af(a.x-c.x,a.y-c.y);this.Zd&&f&&this.bm(this.Zd);this.ib=null;this.R.Wa=!1;this.Wh(this.tb);this.Zd=null}};b.prototype.Gp=function(a){var b=this.oe();this.B.wb||(this.R.Wa=!1);this.Zd=null;this.Wh(this.tb);a=this.Yf(a);this.Af(a.x-b.x,a.y-b.y)};b.prototype.Yk=function(){return null!=this.ib||this.R.Wa};b.prototype.nl=function(a){!this.ve&&window.MSGesture&&(this.L("setup gesture"),
this.ve=new MSGesture,this.ve.target=this.control);this.ve&&this.ve.addPointer(a.pointerId)};b.prototype.xk=function(a){this.Vi=!0;this.Lh=1;this.B.wb||this.B.gd||(a.touches?(this.ib=a.touches.target,this.Hc(a.target)&&(a.preventDefault(),this.f.kf=this.f.c,this.ra())):(a.preventDefault(),this.f.kf=this.f.c,this.ra()))};b.prototype.kn=function(a){this.B.wb||this.B.gd||!this.Hc(a.target)||(a.preventDefault(),this.xa.f.active=!0,this.xa.f.gc=this.f.kf/Math.sqrt(a.scale),4==this.qa()&&this.xa.f.gc>this.f.max&&
(this.xa.f.gc=this.f.max),this.update(),this.ra())};b.prototype.to=function(a){this.B.wb||this.B.gd||(a.preventDefault(),1!=a.scale&&(this.xa.f.active=!0,this.Lh*=a.scale,this.xa.f.gc=this.f.kf/Math.sqrt(this.Lh),4==this.qa()&&this.xa.f.gc>this.f.max&&(this.xa.f.gc=this.f.max),this.update(),this.ra()))};b.prototype.wk=function(a){this.B.wb||this.B.gd||(this.xa.f.active=!1,a.preventDefault(),this.ra(),this.ve&&this.ve.reset&&this.ve.reset())};b.prototype.jo=function(a){this.B.se||(this.isFullscreen&&
a.preventDefault(),this.ig=a.keyCode,this.ra())};b.prototype.ko=function(a){this.ig&&(this.ig=0,a.preventDefault(),this.ra())};b.prototype.yo=function(){this.ig=0};b.prototype.Oh=function(){this.isFullscreen&&(this.zh()||this.exitFullscreen(),this.zh()&&(this.T.style.left="0px",this.T.style.top="0px"))};b.prototype.zo=function(a,b,c,f){f?(this.bg.alpha=a,this.bg.beta=b,this.bg.gamma=c,this.bg.gamma+=90):(this.td.alpha=a,this.td.beta=b,this.td.gamma=c,this.td.gamma+=90);this.td.orientation=window.orientation?
1*parseInt(""+window.orientation,10):0;a=new p.ql;b=this.td;a.Ae(-b.alpha);a.Be(-b.beta);a.Cd(-b.gamma);a.Be(90-b.orientation);1>a.zb?-1<a.zb?(c=180/Math.PI*Math.asin(-a.zb),b=180/Math.PI*Math.atan2(a.Ub,a.Tb),a=180/Math.PI*Math.atan2(a.Sb,a.Rb)):(c=0,b=90,a=-180/Math.PI*Math.atan2(-a.Fb,a.Gb)):(c=0,b=-90,a=180/Math.PI*Math.atan2(-a.Fb,a.Gb));this.Bf&&(this.Yk()?this.td.tl=this.uh()+a:(this.Dg(-a+this.td.tl),this.Gg(b),this.Ml(c)))};b.prototype.bm=function(a){this.Ca&&this.Ca.hotspotProxyClick&&this.Ca.hotspotProxyClick(a.id);
""!=a.url&&(this.jj(a.url,a.target),this.Af(-1,-1))};b.prototype.cm=function(a){this.Ca&&this.Ca.hotspotProxyDoubleClick&&this.Ca.hotspotProxyDoubleClick(a.id)};b.prototype.rh=function(){return Math.min(1,2*Math.tan(Math.PI*Math.min(this.f.c,90)/360))};b.prototype.ul=function(){var a=this;setTimeout(function(){a.ul()},100);9!=a.Sh||a.yh||window.requestAnimationFrame(function(){a.wg();a.Kc("restart recover timer")});10<a.Sh&&1<a.pj&&(a.Kc("recover timer - disabling requestAnimationFrame"),a.yh=!0,
a.wg());a.Sh++};b.prototype.Nl=function(a){var b={cq:{value:0,name:"pan"},eq:{value:1,name:"tilt"},aq:{value:2,name:"fov"}},c=0,f=0,h=0,e;for(e in b){var g=b[e],k;for(k=Math.floor(a);!this.Ye(k,g.value)&&0<k;)k--;var m=this.Ye(k,g.value),v=this.Fn(m);if(v){k=new p.qc(m.time,m.value);var w=new p.qc(v.time,v.value),q=(a-m.time)/(v.time-m.time);if(0!=m.type||0!=v.type&&3!=v.type)if(3==m.type)k=m.value;else{var q=new p.qc,u=new p.qc,r=v.time-m.time;0==m.type?u.Za(m.time+.3*r,m.value):u.Za(m.ee,m.fe);
0==v.type||3==v.type?q.Za(v.time-.3*r,v.value):q.Za(v.de,v.Sc);m=new p.qc;m.ti(k,w,u,q,a);k=m.y}else m=new p.qc,m.ud(k,w,q),k=m.y}else k=m.value;switch(g.value){case 0:g=this.pan.c;if(this.Id){if(2!=this.fb){for(;360<k;)k-=360;for(;-360>k;)k+=360}c=k-g;2!=this.fb&&(180<c&&(c-=360),-180>c&&(c+=360));this.pan.c=this.pan.c+c*this.nd}else this.pan.c=k;break;case 1:g=this.i.c;this.Id?(f=k-g,this.i.c=this.i.c+f*this.nd):this.i.c=k;break;case 2:g=this.f.c,this.Id?(h=k-g,this.f.c=this.f.c+h*this.nd):this.f.c=
k}}b=this.qa();for(e=Math.floor(a);!this.Ye(e,3)&&0<e;)e--;e=this.Ye(e,3);g=a-e.time;this.Id&&-1!=this.Hf&&this.dh+this.pi>a?(b=this.Xf(this.Hf),this.f.c>b?this.dh=a:(g=(a-this.dh)/this.pi,g=Math.min(1,g),this.jd(this.Ja,this.Hf,1-g))):0==e.rb||g>e.rb-.3?this.jd(e.value):(g/=e.rb,this.jd(b,e.value,1-g));this.Id&&(c=Math.sqrt(c*c+f*f+h*h),.3>c&&(this.Id=!1,this.nd=.02,this.Gf=0),0<this.Gf&&c>this.Gf&&(this.nd+=.01,this.nd=Math.min(this.nd,1)),this.Gf=c);e=Math.floor(a);if(e!=this.Vj)for(this.Vj=e,
a=this.ln(e),c=0;c<a.length;c++)f=a[c],h=f.bh,this.kd.hasOwnProperty(h)&&(0==this.kd[h]?this.Yh(h,f.Mj):1==this.kd[h]?this.Yh(h,f.value):2==this.kd[h]&&this.Yh(h,"true"==f.Mj));this.update()};b.prototype.Fo=function(a){var b,c=this.u.speed;this.u.aj&&(c=c*(a.getTime()-this.u.aj)/60,5<c&&(c=5),.2>c&&(c=.2));this.u.aj=a.getTime();this.o.qh&&(this.ma.ready()||4==this.Ja)&&this.th()&&(this.o.qh=!1,this.o.active=!0,this.ub.Dd=!0,this.ub.Ni=!1);if(this.u.active||0!=this.u.Bb&&this.ma.ready()){if(this.u.Kj&&
"__AutoMove"==this.A.Ta)if(b=a.getTime()-this.u.Uj,c=b/100,c>=this.A.length){if(this.va.splice(this.va.indexOf(this.A),1),this.u.active=!1,this.A=this.u.Tj,this.u.Bb=0,b=this.o.Yb,this.Eg(this.u.pan,this.u.i,this.u.f),this.pan.Cc=this.u.pan,this.i.Cc=this.u.i,this.u.tg&&(this.u.tg=!1,this.o.Jh=!0,this.o.active=!0,this.ka("autorotatechanged",{}),this.o.Yb=b),this.onMoveComplete)this.onMoveComplete()}else this.Nl(c);else{this.pan.d=this.u.pan-this.pan.c;if(360==this.pan.max-this.pan.min){for(;-180>
this.pan.d;)this.pan.d+=360;for(;180<this.pan.d;)this.pan.d-=360}this.i.d=this.u.i-this.i.c;this.O.d=this.u.O-this.O.c;this.f.d=this.u.f-this.f.c;b=c*this.rh();var f=Math.sqrt(this.pan.d*this.pan.d+this.i.d*this.i.d+this.O.d*this.O.d+this.f.d*this.f.d),h=this.pan.c-this.u.fl,e=this.i.c-this.u.hl,g=this.O.c-this.u.gl,k=this.f.c-this.u.el;100*Math.sqrt(h*h+e*e+g*g+k*k)<b&&0==this.u.Bb&&(this.u.Je=!0);this.u.fl=this.pan.c;this.u.hl=this.i.c;this.u.gl=this.O.c;this.u.el=this.f.c;if(100*f<b||this.u.Je){if(this.pan.d=
0,this.i.d=0,this.O.d=0,this.f.d=0,this.u.active&&(this.u.active=!1,this.pan.c=this.u.pan,this.i.c=this.u.i,this.O.c=this.u.O,this.f.c=this.u.f,this.onMoveComplete))this.onMoveComplete()}else f=f>5*b?b/f:.2,this.pan.d*=f,this.i.d*=f,this.f.d*=f;this.pan.c+=this.pan.d;this.i.c+=this.i.d;this.O.c+=this.O.d;this.f.c+=this.f.d;0!=this.u.Bb&&(this.u.Bb!=this.Ja?(c=this.Xf(this.u.Bb),this.Wf()>c?(this.f.c+=-Math.max((2.5-1.7*Math.min(Math.sqrt(this.pan.d*this.pan.d+this.i.d*this.i.d+this.O.d*this.O.d)/
b,1))*b,this.f.d)-this.f.d,this.u.f=this.f.c):(this.lc=this.Ja,this.Ja=this.u.Bb,this.L("New projection from Target:"+this.Ja),this.vg=this.u.yg=0,this.ma.xh())):1>this.u.yg?(this.u.yg=Math.min(1,this.u.yg+.05*c),this.vg=this.u.yg):(this.lc=0,this.u.Bb=0,this.ma.xh()))}this.ef=a.getTime();this.update()}else if(this.o.active){b=a.getTime()-this.o.startTime;this.o.Fh<this.o.startTime&&(this.o.Fh=this.o.startTime);if((this.o.Lj||this.o.Yb||this.ub.Dd)&&0<this.va.length){c=b/100;f=!1;if(this.Ab!=this.A.Ta||
""!=this.A.Me&&this.Ld!=this.A.Me){for(b=0;b<this.va.length;b++)if(""==this.Ab&&this.va[b].Me==this.Ld||""!=this.Ab&&this.va[b].Ta==this.Ab&&this.va[b].Me==this.Ld){f=!0;this.A=this.va[b];this.Ab=this.A.Ta;break}!f&&0<this.va.length&&this.va[0].Me==this.Ld&&(f=!0,this.A=this.va[0],this.Ab=this.A.Ta)}else f=!0;if(f)if(b=(h=this.s.b&&this.s.fd)&&this.o.Dj&&!this.ub.Dd,this.Le){f=c;if(b)for(this.s.b.currentTime<this.Wj&&this.si&&(this.ri++,this.si=!1),f=10*(this.ri*this.s.b.duration+this.s.b.currentTime),
this.Wj=this.s.b.currentTime,.05>this.s.b.duration-this.s.b.currentTime&&(this.si=!0);f>=10*this.Ke;)f-=10*this.Ke;if(!h&&c>=this.A.length||h&&!b&&c>=this.A.length||h&&b&&(this.A.Ta!=this.A.ol||this.A.Mh!=this.bb)&&c>=this.A.length){this.Le=!1;if(this.ub.Dd){this.ub.Dd=!1;this.ub.Ni=!0;this.o.active=this.C.ce;this.va.splice(this.va.indexOf(this.A),1);0<this.va.length&&(this.A=this.va[0]);this.Ab="";this.Bg(this.C.Ih);this.Cg(this.C.mi);this.Ag(this.C.Ch);this.C.ce=!1;this.ef=a.getTime();return}this.Ab=
this.A.ol;if(this.Ab==this.A.Ta&&this.bb==this.A.Mh){if(1<this.Ma.length&&0<this.o.Nh){if(this.o.hj){b=1E3;do c=this.Ma[Math.floor(Math.random()*this.Ma.length)];while(b--&&c==this.bb)}else c=this.Bk();this.we("{"+c+"}");this.o.startTime=a.getTime();this.Le=!1;this.o.active=!0;this.C.ce=!0}}else this.df&&this.A.Mh!=this.bb&&(b=this.o.Yb,this.we("{"+this.A.Mh+"}"),this.o.Yb=b,this.C.enabled?(this.o.active=!1,this.C.ce=!0):(this.Ab==this.A.Ta&&(b=this.A.W,this.Eg(b[0].value,b[1].value,b[2].value)),
this.o.active=!0)),this.o.startTime=a.getTime()}else this.Nl(f)}else if(c=this.A.W[0],f=this.A.W[1],h=this.A.W[2],e=this.A.W[3],3!=e.pb&&(e=0),this.o.Jh||this.u.Je||this.ub.Dd||b){if(this.Le=!0,this.o.startTime=a.getTime(),this.Id=b){for(this.Ke=this.ri=0;this.Ke<this.A.length/10;)this.Ke+=this.s.b.duration;f=10*this.s.b.currentTime;for(b=Math.floor(f);!this.Ye(b,3)&&0<b;)b--;b=this.Ye(b,3);b.value==this.Ja?this.Hf=-1:(this.Hf=b.value,this.dh=f,this.pi=Math.max(5,b.time+b.rb-f))}}else{b=this.o.Yb;
g={};for(g.pan=c.value;360<g.pan;)g.pan-=360;for(;-360>g.pan;)g.pan+=360;g.tilt=f.value;g.fov=h.value;g.projection=e?e.value:4;g.timingFunction=3;g.speed=1;this.u.tg=!0;this.Kh(g);this.o.active=!0;this.o.Yb=b}}else if(0<this.o.Nh&&this.df&&b>=1E3*this.o.Nh){if(1<this.Ma.length){if(this.o.hj){b=1E3;do c=this.Ma[Math.floor(Math.random()*this.Ma.length)];while(b--&&c==this.bb)}else b=this.Ma.indexOf(this.bb),b++,b>=this.Ma.length&&(b=0),c=this.Ma[b];this.o.startTime=a.getTime();this.o.wd=a.getTime();
this.o.timeout=0;this.we("{"+c+"}");this.o.active=!0;this.C.ce=!0}}else b=a.getTime(),f=c=1E3/60,0!=this.o.wd&&(f=b-this.o.wd),this.i.d=this.o.ei*(0-this.i.c)/100,this.f.d=this.o.ei*(this.f.Qa-this.f.c)/100,this.pan.d=.95*this.pan.d+-this.o.speed*this.rh()*.05,c=f/c,this.pan.c+=this.pan.d*c,this.i.c+=this.i.d*c,this.f.c+=this.f.d*c,this.o.wd=b,this.update();3E3<a.getTime()-this.o.Fh&&!this.o.kh&&(this.Ea.style.cursor="none",this.o.kh=!0)}else!this.ub.Ni&&1E3<a.getTime()-this.ef&&(this.va.splice(this.va.indexOf(this.A),
1),this.A=this.Vf(!1),this.Ab=this.A.Ta,this.o.active=!1,this.o.qh=!0),this.o.enabled&&!this.R.Wa&&a.getTime()-this.ef>1E3*this.o.timeout&&(this.o.Mg&&this.th()||!this.o.Mg)&&(this.o.active=!0,this.Ld=this.o.eh,this.o.startTime=a.getTime(),this.o.wd=0,this.ka("autorotatechanged",{}),this.pan.d=0,this.i.d=0,this.f.d=0),!this.xa.enabled||0!=this.ig||this.R.Wa||0==this.pan.d&&0==this.i.d&&0==this.f.d||(this.pan.d*=.9,this.i.d*=.9,this.f.d*=.9,this.pan.c+=this.pan.d,this.i.c+=this.i.d,this.yi(this.f.d),
1E-4>this.pan.d*this.pan.d+this.i.d*this.i.d+this.f.d*this.f.d&&(this.pan.d=0,this.i.d=0,this.f.d=0),this.update())};b.prototype.Ho=function(a){var b=this.C;if(b.Hd){var c=a.getTime()-b.rm,c=c/(1E3*b.qm);1<=c?(b.Hd=!1,this.mk(),b.Aj=a.getTime(),this.Xl(),b.Ge=!0,0==b.Zb||b.Ff||(4==b.Zb?(this.A=this.Vf(!0,b.Ce,b.De,b.Gd),this.Ab=this.A.Ta,this.o.active=!0,this.ub.Dd=!0):this.moveTo(b.Ce,b.De,b.Gd,b.ae,0,b.ld))):b.sl(c)}else b.Ge&&(c=a.getTime()-b.Aj,c/=1E3*b.Jf,1<=c?(b.Ge=!1,this.ef=a.getTime(),this.update(),
0!=b.Zb&&b.Ff&&(4==b.Zb?(this.A=this.Vf(!0,b.Ce,b.De,b.Gd),this.Ab=this.A.Ta,this.o.active=!0,this.ub.Dd=!0):this.moveTo(b.Ce,b.De,b.Gd,b.ae,0,b.ld)),4!=b.Zb&&(this.Bg(b.Ih),this.Cg(b.mi),this.Ag(b.Ch),this.o.active=b.ce,b.ce=!1),this.o.wd=0,this.fa&&this.Di(),this.fh=!1):b.sl(c));b=this.Ao;b.Jm&&(b.mh?a.getTime()-b.Ki>=1E3*b.an&&(b.mh=!1):(b.current+=b.Tc,0>b.current&&(b.current=0,b.Tc=-b.Tc,b.mh=!0,b.Ki=a.getTime()),1<b.current&&(b.current=1,b.Tc=-b.Tc,b.mh=!0,b.Ki=a.getTime())))};b.prototype.Ko=
function(){var a,b=this.w;if(0<b.hb.length){for(a=0;a<b.hb.length;a++)b.Mc[a]!=b.Jb[a]&&(b.Mc[a]>b.Jb[a]?(b.Jb[a]+=.05,b.Mc[a]<b.Jb[a]&&(b.Jb[a]=b.Mc[a])):(b.Jb[a]-=.05,b.Mc[a]>b.Jb[a]&&(b.Jb[a]=b.Mc[a],-1!=b.Zh.indexOf(b.hb[a])&&(b.Zh.splice(b.Zh.indexOf(b.hb[a]),1),b.hb.splice(a,1),b.Mc.splice(a,1),b.Jb.splice(a,1)))));this.update()}if(2==b.mode)for(a=0;a<this.P.length;a++){var c=this.P[a];"poly"==c.type&&c.jb!=c.oa&&(c.jb>c.oa?(c.oa+=b.Tc,c.jb<c.oa&&(c.oa=c.jb)):(c.oa-=b.Tc,c.jb>c.oa&&(c.oa=c.jb)),
this.update())}3==b.mode&&b.jb!=b.oa&&(b.jb>b.oa?(b.oa+=b.Tc,b.jb<b.oa&&(b.oa=b.jb)):(b.oa-=b.Tc,b.jb>b.oa&&(b.oa=b.jb)),this.update())};b.prototype.Jo=function(){var a=this.xa;this.R.Wa&&(this.B.vd?(a.ba.x=.4*(this.X.ca.x-a.ca.x),a.ba.y=.4*(this.X.ca.y-a.ca.y),a.ca.x+=a.ba.x,a.ca.y+=a.ba.y):(a.ba.x=.1*-this.X.ba.x*this.B.sensitivity/8,a.ba.y=.1*-this.X.ba.y*this.B.sensitivity/8),this.lm(a.ba.x,a.ba.y),this.update());a.f.active&&(this.Zj(.4*(a.f.gc-this.f.c)),.001>Math.abs(a.f.gc-this.f.c)/this.f.c&&
(a.f.active=!1),this.update());if(a.enabled&&(0!=a.ba.x||0!=a.ba.y)&&!this.R.Wa){var b=.9*(1-a.tj);a.ba.x=b*a.ba.x;a.ba.y=b*a.ba.y;.01>a.ba.x*a.ba.x+a.ba.y*a.ba.y?(a.ba.x=0,a.ba.y=0):(this.lm(a.ba.x,a.ba.y),this.update())}};b.prototype.Go=function(){if(this.B.Hl&&this.B.vd){var a=new e;a.pan=this.pan.c;a.i=this.i.c;a.f=this.f.c;this.Se(a);this.Se(a);this.Se(a);var b=a.pan-this.pan.c,c=a.i-this.i.c,a=a.f-this.f.c;if(0!=b||0!=c||0!=a){var f;f=.2+.9*Math.min((Math.abs(b)+Math.abs(c)+Math.abs(a))/Math.abs(Math.min(this.f.c,
90))*.3,1);this.pan.c+=b*f;this.i.c+=c*f;this.f.c+=a*f;this.xa.tj=.3;this.update()}else this.xa.tj=0}else this.gh();if(2!=this.fb){for(;360<this.pan.c;)this.pan.c-=360;for(;-360>this.pan.c;)this.pan.c+=360}};b.prototype.Io=function(){if(!this.th()&&this.af&&5<this.h.El){var a,b=0,c=this.Mb.length;if(this.Sg)c=50,this.Li<c&&this.Li++,b=this.Li;else for(a=0;a<c;a++)(this.Mb[a].complete&&this.Mb[a].src!=this.kk||""==this.Mb[a].src)&&b++;b==c?(this.Qh=1,this.isLoaded=!0,this.ia&&this.ia.ggLoaded&&this.ia.ggLoaded(),
this.ka("imagesready",{}),this.o.Mg&&this.o.enabled&&!this.u.active&&!this.C.Hd&&(this.o.active=!0,this.o.startTime=(new Date).getTime(),this.o.wd=0)):this.Qh=b/(1*c)}};b.prototype.wg=function(){var a=this;a.Vh||(a.yh?setTimeout(function(){a.Vh=!1;a.wg()},1E3/60):window.requestAnimationFrame(function(){a.Vh=!1;a.wg()}));a.Vh=!0;this.pj=this.Sh=0;var b=new Date;this.sh++;120<=this.sh&&(this.L("F/s: "+Math.round(1E3*this.sh/(b.getTime()-this.al))),this.al=b.getTime(),this.sh=0);this.ka("timer",{});
this.Y&&this.ma.$m();this.Db&&""!==this.me&&!this.ga&&document.hasOwnProperty(this.me)&&document[this.me].setPan&&0==this.gn--&&(this.ga=document[this.me],this.Pc=this.Y=!1,this.ua&&(this.ua.style.visibility="hidden"),this.ga.setLocked(!0),this.ga.setSlaveMode(!0),this.ga.readConfigString(this.Gi),this.Kc("Flash player '"+this.me+"' connected."));this.Jj&&(this.Oc(),this.Jj=!1);this.Jo();this.Io();this.Fo(b);this.Go();this.Ho(b);this.ma.Qp();(0<=this.w.mode||0<this.w.hb.length)&&this.Ko();this.ji();
if(this.ff.pan!=this.pan.c||this.ff.i!=this.i.c||this.ff.f!=this.f.c)this.ff.pan=this.pan.c,this.ff.i=this.i.c,this.ff.f=this.f.c,this.ka("positionchanged",{});this.cl!=this.Ja&&(this.cl=this.Ja,this.ka("projectionchanged",{}));this.Da&&(0<this.Of?this.Of--:(this.Da=!1,this.Of=0),this.C.Ge||this.C.Hd||this.Rg(),this.ka("repaint",{}));b=this.zk();b!=this.bl&&(b?(this.ia&&this.ia.ggReLoadedLevels&&this.ia.ggReLoadedLevels(),this.ka("tilesrequested",{})):(a.ia&&a.ia.ggLoadedLevels&&a.ia.ggLoadedLevels(),
this.ka("tilesready",{})),this.bl=b)};b.prototype.Xf=function(a){switch(a){case 4:a=Math.min(110,this.f.max);break;case 12:a=Math.min(270,this.f.fj);a=Math.min(360*this.be(),a);a=Math.min(360/this.be(),a);break;case 9:a=Math.min(270,this.f.gj);break;default:a=90}return a};b.prototype.hm=function(){var a=this;setTimeout(function(){a.uf(!1)},10);setTimeout(function(){a.uf(!1)},100)};b.prototype.ji=function(){this.Fi.pk(this.pan.c,this.i.c);for(var a=0;a<this.N.length+this.J.length;a++){var b;if(a<this.N.length)b=
this.N[a];else if(b=this.J[a-this.N.length],b.hd)continue;b.ji()}};b.a=function(a){var b="",c,f,h,e,g,k=0;a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");do c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),
c=c<<2|f>>4,f=(f&15)<<4|e>>2,h=(e&3)<<6|g,b+=String.fromCharCode(c),64!=e&&(b+=String.fromCharCode(f)),64!=g&&(b+=String.fromCharCode(h));while(k<a.length);return b};b.prototype.rp=function(a,d){var c,f,e=this;if(0!=e.rg.length||!e.B.eg||e.B.Nf||e.B.hh)if(e.Zc)e.T.removeChild(e.Zc),e.Zc=null;else{e.Zc=document.createElement("div");var l=e.Zc;c="left: "+a+"px;"+("top:\t "+d+"px;")+"z-index: 32000;";c+="position:relative;";c+="display: table;";c+="background-color: white;";c+="border: 1px solid lightgray;";
c+="box-shadow: 1px 1px 3px #333;";c+="font-family: Verdana, Arial, Helvetica, sans-serif;";c+="font-size: 9pt;";c+="opacity : 0.95;";l.setAttribute("style",c);l.setAttribute("class","gg_contextmenu");c=document.createElement("style");f=document.createTextNode(".gg_context_row:hover { background-color: #3399FF }");c.type="text/css";c.styleSheet?c.styleSheet.cssText=f.nodeValue:c.appendChild(f);l.appendChild(c);for(f=0;f<e.rg.length;f++){var g=e.rg[f],k=document.createElement("div");c="text-align: left;";
c+="margin: 0;";c+="padding: 5px 20px;";c+="vertical-align: left;";k.setAttribute("style",c);k.setAttribute("class","gg_context_row");c=document.createElement("a");c.href=g.url;c.target="_blank";c.innerHTML=g.text;c.setAttribute("style","color: black; text-decoration: none;");k.appendChild(c);l.appendChild(k)}0<e.rg.length&&(!e.B.eg||e.B.Nf||e.B.hh)&&l.appendChild(document.createElement("hr"));if(e.B.hh&&e.Y){g=[];g.push({text:"Rectilinear Projection",xg:4});g.push({text:"Stereographic Projection",
xg:9});g.push({text:"Fisheye Projection",xg:12});for(f=0;f<g.length;f++){var k=g[f],m=document.createElement("div");m.setAttribute("class","gg_context_row");c="text-align: left;";c+="margin: 0;";c=e.Ja==k.xg?c+"padding: 5px 20px 5px 7px;":c+"padding: 5px 20px;";c+="vertical-align: left;";c+="cursor: pointer;";m.setAttribute("style",c);m.onclick=function(a){return function(){e.zi(a,1);e.update()}}(k.xg);e.Ja==k.xg?m.innerHTML="&#10687; "+k.text:m.innerHTML=k.text;l.appendChild(m)}e.B.eg&&!e.B.Nf||
l.appendChild(document.createElement("hr"))}e.B.Nf&&(f=document.createElement("div"),f.setAttribute("class","gg_context_row"),c="text-align: left;margin: 0;padding: 5px 20px;",c+="vertical-align: left;",c+="cursor: pointer;",f.setAttribute("style",c),f.onclick=function(){e.fi()},f.innerHTML=e.zh()?"Exit Fullscreen":"Enter Fullscreen",l.appendChild(f));c="<<U>>"+String(e.Ha);c=c.toUpperCase();e.B.eg&&"U"==c.charAt(2)||(f=document.createElement("div"),c="text-align: left;margin: 0;padding: 5px 20px;",
c+="vertical-align: left;",f.setAttribute("style",c),f.setAttribute("class","gg_context_row"),c=document.createElement("a"),c.href=b.a("aHR0cDovL3Bhbm8ydnIuY29tLw=="),c.target="_blank",c.innerHTML=b.a("Q3JlYXRlZCB3aXRoIFBhbm8yVlI="),c.setAttribute("style","color: black; text-decoration: none;"),f.appendChild(c),l.appendChild(f));e.T.insertBefore(e.Zc,e.T.firstChild);l.onclick=function(){e.Zc&&(e.T.removeChild(e.Zc),e.Zc=null)};l.oncontextmenu=l.onclick}};b.prototype.Im=function(){var a=this,b;b=a.Ea;
a.control=b;a.control=b;a.hm();setTimeout(function(){a.wg()},10);setTimeout(function(){a.ul()},200);setTimeout(function(){a.Ie();a.Rg()},10);b.addEventListener&&(b.addEventListener("touchstart",function(b){a.Jp(b)},!1),b.addEventListener("touchmove",function(b){a.Ip(b)},!1),b.addEventListener("touchend",function(b){a.Hp(b)},!1),b.addEventListener("touchcancel",function(b){a.Gp(b)},!1),b.addEventListener("pointerdown",function(b){a.nl(b)},!1),b.addEventListener("MSPointerDown",function(b){a.nl(b)},
!1),b.addEventListener("MSGestureStart",function(b){a.xk(b)},!1),b.addEventListener("MSGestureEnd",function(b){a.wk(b)},!1),b.addEventListener("MSGestureChange",function(b){a.to(b)},!1),b.addEventListener("gesturestart",function(b){a.xk(b)},!1),b.addEventListener("gesturechange",function(b){a.kn(b)},!1),b.addEventListener("gestureend",function(b){a.wk(b)},!1),b.addEventListener("mousedown",function(b){a.qo(b)},!1),b.addEventListener("mousemove",function(b){a.po(b)},!1),document.addEventListener("mouseup",
function(b){a.oo(b)},!1),b.addEventListener("mousewheel",function(b){a.ml(b)},!1),b.addEventListener("DOMMouseScroll",function(b){a.ml(b)},!1),document.addEventListener("keydown",function(b){a.jo(b)},!1),document.addEventListener("keyup",function(b){a.ko(b)},!1),window.addEventListener("orientationchange",function(){a.hm()},!1),window.addEventListener("resize",function(){a.Ie()},!1),window.addEventListener("blur",function(){a.yo()},!1),a.T.addEventListener("webkitfullscreenchange",function(){a.Oh()},
!1),document.addEventListener("mozfullscreenchange",function(){a.Oh()},!1),window.addEventListener("webkitfullscreenchange",function(){a.Oh()},!1),document.addEventListener("MSFullscreenChange",function(){a.Oh()},!1));b.oncontextmenu=function(b){void 0===b&&(b=window.event);if(b.target&&!a.Hc(b.target))return!0;if(!b.ctrlKey){b=a.Yf(b);var d=a.oe();a.rp(b.x-d.x,b.y-d.y);return!1}return!0};window.addEventListener("deviceorientation",function(b){a.zo(b.alpha,b.beta,b.gamma,b.absolute)})};b.prototype.Sj=
function(){for(var a=0;a<this.P.length;a++)if("point"==this.P[a].type&&(this.Ca&&this.Ca.addSkinHotspot?(this.P[a].We(),this.P[a].b=new this.Ca.addSkinHotspot(this.P[a])):this.P[a].b=new p.sm(this,this.P[a]),this.P[a].b.__div.style.left="-1000px",this.P[a].b.__div.style.top="-1000px",this.P[a].b&&this.P[a].b.__div)){var b=this.Ea.firstChild;b?this.Ea.insertBefore(this.P[a].b.__div,b):this.Ea.appendChild(this.P[a].b.__div)}};b.prototype.pm=function(){var a,b=document.createElement("fakeelement"),c=
{OTransition:"oTransitionEnd",MSTransition:"msTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",transition:"transitionEnd"};for(a in c)if(void 0!==b.style[a])return c[a]};b.prototype.Pb=function(a){var b=[];"#"==a.substr(0,1)&&(a=a.substr(1));a=new RegExp(a,"");for(var c=0;c<this.N.length;c++)a.test(this.N[c].id)&&b.push(this.N[c]);for(c=0;c<this.J.length;c++)a.test(this.J[c].id)&&b.push(this.J[c]);for(c=0;c<this.Ya.length;c++)a.test(this.Ya[c].id)&&b.push(this.Ya[c]);
return b};b.prototype.En=function(a){if("_videopanorama"==a)return this.s.b;a=this.Pb(a);return 0<a.length?a[0].b:null};b.prototype.zl=function(a,b){var c=this;b.addEventListener("ended",function(a){c.ka("videoended",{video:a.target})});b.addEventListener("pause",function(a){c.ka("videopaused",{video:a.target})});b.addEventListener("play",function(a){c.ka("videostarted",{video:a.target})});for(var f=0;f<this.J.length;f++)if(this.J[f].id==a)return this.J[f].b=b,this.J[f];f=new p.Qj(this);f.registerElement(a,
b);return f};b.prototype.ic=function(a){if(this.Db){var b=this.ga;if(b)return b.isPlaying(a)}else{if("_main"===a)return!0;a=this.Pb(a);if(0<a.length)return a[0].ha?a[0].ze:!a[0].b.ended&&!a[0].b.paused}return!1};b.prototype.ye=function(a,b){if(this.Db){var c=this.ga;c&&c.playSound(a,b)}else try{for(var c=this.Pb(a),f=0;f<c.length;f++){var e=c[f];this.jp(e.id);e.Xc=b&&!isNaN(Number(b))?Number(b)-1:e.loop-1;-1==e.Xc&&(e.Xc=1E7);this.L(e.b);this.ic(a)&&this.Cj(a);e.ha?e.Uc():e.b.play()}}catch(l){this.L(l)}};
b.prototype.vl=function(a,b){for(var c=this.Pb(a),f=0;f<c.length;f++){var e=c[f];this.ic(e.id)?this.kj(e.id):this.ye(e.id,b)}};b.prototype.Lo=function(a,b){for(var c=this.Pb(a),f=0;f<c.length;f++){var e=c[f];this.ic(e.id)?this.Cj(e.id):this.ye(e.id,b)}};b.prototype.kj=function(a){if(this.Db){var b=this.ga;b&&b.pauseSound(a)}else try{if("_main"==a){this.Xh(a);for(b=0;b<this.N.length;b++)this.N[b].ha?this.N[b].wi():this.N[b].b.pause();for(b=0;b<this.J.length;b++)this.J[b].b.pause()}else for(var c=this.Pb(a),
b=0;b<c.length;b++){var f=c[b];this.Xh(f.id);f.ha?f.wi():f.b.pause()}}catch(e){this.L(e)}};b.prototype.Cm=function(a,b){for(var c=this.Pb(a),f=0;f<c.length;f++){var e=c[f];0==b||1==b?e.$f&&e.$f(1==b):2==b&&e.pe&&e.pe()}};b.prototype.Cj=function(a){var b;if(this.Db)(b=this.ga)&&b.stopSound(a);else try{if("_main"===a){this.Xh(a);for(b=0;b<this.N.length;b++)this.N[b].ha?this.N[b].Qe():(this.N[b].b.pause(),this.N[b].b.currentTime=0);for(b=0;b<this.J.length;b++)this.J[b].b.pause(),this.J[b].b.currentTime=
0}else{var c=this.Pb(a);for(b=0;b<c.length;b++){var f=c[b];this.Xh(f.id);f.ha?f.Qe():f.b&&f.b.pause&&(f.b.pause(),f.b.currentTime=0,this.cf&&(f.Bd(),f.addElement()))}}}catch(e){this.L(e)}};b.prototype.Xh=function(a){-1==this.Nc.indexOf(a)&&this.Nc.push(a);var b=this.$d.indexOf(a);-1!=b&&this.$d.splice(b,1);"_main"==a&&(this.$d=[])};b.prototype.jp=function(a){-1!=this.Nc.indexOf("_main")&&-1==this.$d.indexOf(a)&&this.$d.push(a);a=this.Nc.indexOf(a);-1!=a&&this.Nc.splice(a,1)};b.prototype.tp=function(a){a=
this.Pb(a);return 0<a.length?(a=a[0],a.ha?a.Lm():a.b?a.b.currentTime:0):0};b.prototype.up=function(a,b){var c=this.Pb(a);0<c.length&&(c=c[0],c.ha?(0>b&&(b=0),b>c.If.duration&&(b=c.If.duration-.1),c.Mm(b)):c.b&&(0>b&&(b=0),b>c.b.duration&&(b=c.b.duration-.1),c.b.currentTime=b))};b.prototype.op=function(a,b){if(this.Db){var c=this.ga;c&&c.setVolume(a,b)}else try{var f=Number(b);1<f&&(f=1);0>f&&(f=0);"_videopanorama"===a&&this.s.b&&(this.s.b.volume=f);if("_main"===a){this.V=f;for(c=0;c<this.N.length;c++)this.N[c].b.volume=
this.N[c].level*this.V;for(c=0;c<this.J.length;c++)this.J[c].b.volume=this.J[c].level*this.V;this.s.b&&(this.s.b.volume=this.V)}else{var e=this.Pb(a);this.L(e);for(c=0;c<e.length;c++){var l=e[c];l.b&&null!=l.b.volume&&(l.b.volume=f*this.V);l.level=f}}}catch(g){this.L(g)}};b.prototype.Tm=function(a,b){if(this.Db){var c=this.ga;c&&c.changeVolume(a,b)}else try{var f;"_videopanorama"===a&&this.s.b&&(this.s.b.volume=this.s.b.volume+Number(b));if("_main"===a){c=this.V;c+=Number(b);1<c&&(c=1);0>c&&(c=0);
this.V=c;for(f=0;f<this.N.length;f++)this.N[f].b.volume=this.N[f].level*this.V;for(f=0;f<this.J.length;f++)this.J[f].b.volume=this.J[f].level*this.V;this.s.b&&(this.s.b.volume=this.V)}else{var e=this.Pb(a);for(f=0;f<e.length;f++){var l=e[f],c=l.level,c=c+Number(b);1<c&&(c=1);0>c&&(c=0);l.level=c;l.b&&null!=l.b.volume&&(l.b.volume=c*this.V)}}}catch(g){this.L(g)}};b.prototype.Xl=function(){try{for(var a=this,b=!1,c=!1,f=0;f<this.N.length;f++){var e=this.N[f];-1==e.loop||this.ic(e.id)||-1!=this.Nc.indexOf(e.id)||
-1!=this.Nc.indexOf("_main")&&-1==this.$d.indexOf(e.id)||(this.za&&this.La.enabled&&4!=e.mode&&6!=e.mode?this.La.fk?(e.ha?e.Uc():(e.b.play(),e.b.currentTime=0),e.ja=0,c=!0):b=!0:4==e.mode||6==e.mode||"_background"==e.id&&this.ic(e.id)||(e.ha?e.Uc():(e.b.play(),e.b.currentTime&&(e.b.currentTime=0))))}b&&setTimeout(function(){a.La.zp()},1E3*this.La.rb);c&&(this.La.wp=this.za.currentTime,this.La.vp=setInterval(function(){a.La.fn()},10))}catch(l){this.L(l)}};b.prototype.mk=function(){for(var a=0;a<this.La.Pg.length;a++)this.La.lk(this.La.Pg[a])};
b.prototype.Dl=function(){for(var a;0<this.P.length;)a=this.P.pop(),a.b&&(this.Ea.removeChild(a.b.__div),delete a.b),a.b=null;this.ka("hotspotsremoved",{})};b.prototype.wj=function(a){this.Yg=a;0!=a?this.T.style.zIndex=a.toString():this.T.style.zIndex="auto";this.Fa&&this.Fa.Vc&&(this.Fa.Vc.zIndex=(a+4).toString());this.Ea.style.zIndex=(a+4).toString();this.ua.style.zIndex=(a+3).toString();this.wa.style.zIndex=(a+5).toString();for(var b=0;b<this.J.length+this.Ya.length;b++){var c;c=b<this.J.length?
this.J[b]:this.Ya[b-this.J.length];c.b&&(c.b.style.zIndex=(a+(c.lb?8E4:0)).toString())}};b.prototype.uf=function(a){var b=this.isFullscreen!==a;this.isFullscreen!==a&&(this.isFullscreen=a,this.update(100));if(this.isFullscreen){if(this.ki)try{this.T.webkitRequestFullScreen?this.T.webkitRequestFullScreen():this.T.mozRequestFullScreen?this.T.mozRequestFullScreen():this.T.msRequestFullscreen?this.T.msRequestFullscreen():this.T.requestFullScreen?this.T.requestFullScreen():this.T.requestFullscreen&&this.T.requestFullscreen()}catch(c){this.L(c)}this.T.style.position=
"absolute";a=this.oe();this.T.style.left=window.pageXOffset-a.x+this.margin.left+"px";this.T.style.top=window.pageYOffset-a.y+this.margin.top+"px";this.wj(10);document.body.style.overflow="hidden";b&&(this.ia&&this.ia.ggEnterFullscreen&&this.ia.ggEnterFullscreen(),this.ka("fullscreenenter",{}))}else{if(this.ki)try{document.webkitIsFullScreen?document.webkitCancelFullScreen():document.mozFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.fullScreen&&
(document.cancelFullScreen?document.cancelFullScreen():document.exitFullscreen&&document.exitFullscreen())}catch(c){this.L(c)}this.T.style.position="relative";this.T.style.left="0px";this.T.style.top="0px";this.wj(0);document.body.style.overflow="";b&&(this.ia&&this.ia.ggExitFullscreen&&this.ia.ggExitFullscreen(),this.ka("fullscreenexit",{}))}this.Ie()};b.prototype.fi=function(){this.uf(!this.isFullscreen)};b.prototype.cn=function(){this.uf(!0)};b.prototype.exitFullscreen=function(){this.uf(!1)};
b.prototype.un=function(){return this.isFullscreen};b.prototype.Ul=function(a,b,c){this.o.Yb||(this.Ld=this.o.eh);this.o.enabled=!0;this.o.active=!0;this.o.wd=0;this.o.startTime=(new Date).getTime();a&&0!=a&&(this.o.speed=a);b&&(this.o.timeout=b);c&&(this.o.ei=c);this.ka("autorotatechanged",{})};b.prototype.Ap=function(){this.o.active=!1;this.o.enabled=!1;this.o.Yb=!1;this.Le=this.o.Jh=!1;this.u.active&&this.u.tg&&(this.u.active=!1,this.u.tg=!1,this.u.Bb=0);this.ka("autorotatechanged",{})};b.prototype.Ep=
function(){this.o.enabled=!this.o.active;this.o.active=this.o.enabled;this.o.wd=0;this.o.enabled&&(this.o.startTime=(new Date).getTime(),this.o.Yb||(this.Ld=this.o.eh));this.ka("autorotatechanged",{})};b.prototype.xp=function(a){this.Ab="";a&&""!=a&&(this.Ld=a);this.o.Yb||(this.o.Yb=!0,this.o.Xj=this.o.enabled,this.Ul())};b.prototype.ek=function(a){if(this.Kd=document.getElementById(a)){this.Kd.innerHTML="";this.T=document.createElement("div");this.T.onselectstart=function(){return!1};O&&this.T.setAttribute("id",
"viewport");a="top:\t0px;left: 0px;position:relative;-ms-touch-action: none;touch-action: none;text-align: left;"+(this.Ha+"user-select: none;");this.T.setAttribute("style",a);this.Kd.appendChild(this.T);this.D=document.createElement("div");a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;-ms-touch-action: none;touch-action: none;"+(this.Ha+"user-select: none;");O&&this.D.setAttribute("id","viewer");this.D.setAttribute("style",a);this.T.appendChild(this.D);if(this.Db){var b=
document.createElement("div");a="top:\t0px;left: 0px;width:  100%;height: 100%;overflow: hidden;position:absolute;-ms-touch-action: none;touch-action: none;"+(this.Ha+"user-select: none;");b.setAttribute("id",this.Pi);b.setAttribute("style",a);this.D.appendChild(b)}this.Fa&&(this.Fa.Vc=document.createElement("canvas"),O&&this.Fa.Vc.setAttribute("id","lensflarecanvas"),a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;"+(this.Ha+"user-select: none;"),a+=this.Ha+
"pointer-events: none;",this.Fa.Vc.setAttribute("style",a),this.T.appendChild(this.Fa.Vc));this.Ea=document.createElement("div");O&&this.Ea.setAttribute("id","hotspots");a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;";this.$i&&(a+="background-image: url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7);");this.ed&&!this.Y&&(a+=this.Ha+"transform: translateZ(9999999px);");a+=this.Ha+"user-select: none;";this.Ea.setAttribute("style",
a);this.T.appendChild(this.Ea);this.ua=document.createElement("canvas");O&&this.ua.setAttribute("id","hotspotcanvas");a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;"+(this.Ha+"user-select: none;");a+=this.Ha+"pointer-events: none;";this.ua.setAttribute("style",a);this.T.appendChild(this.ua);this.wa=document.createElement("div");O&&this.wa.setAttribute("id","hotspottext");this.wa.setAttribute("style","top:\t0px;left: 0px;position:absolute;padding: 3px;visibility: hidden;");
this.wa.innerHTML=" Hotspot text!";this.T.appendChild(this.wa);this.divSkin=this.ia=this.Ea;this.wj(0)}else alert("container not found!")};b.prototype.gk=function(a){this.Da=!0;return function(){a.Pa&&(a.h&&a.h.complete?(a.loaded=!0,a.Pa.drawImage(a.h,0,0,a.width,a.height),a.h=null,a.Ad=null):a.Ad&&a.Ad.complete&&!a.loaded&&(a.Pa.drawImage(a.Ad,0,0,a.width,a.height),a.Ad=null))}};b.prototype.dk=function(a){var b,c,f,e=128;this.h.nf&&(this.D.style.backgroundColor=this.h.nf.replace("0x","#"));a?(e=
this.Kf,this.xf=1):this.pc>e&&(e=this.pc);for(f=0;6>f;f++){c=this.kb.cb[f];a?(c.width=this.Kf,c.height=this.Kf):(c.K=document.createElement("canvas"),c.K.width=this.pc,c.K.height=this.pc,c.width=this.pc,c.height=this.pc,c.Pa=c.K.getContext("2d"));b="position:absolute;";b+="left: 0px;";b+="top: 0px;";b+="width: "+e+"px;";b+="height: "+e+"px;";a&&(b+="outline: 1px solid transparent;");b+=this.Ha+"transform-origin: 0% 0%;";b+="-webkit-user-select: none;";b+=this.Ha+"transform: ";var l;l="";var g=1;this.qf&&
(g=100);l=4>f?l+("rotateY("+-90*f+"deg)"):l+("rotateX("+(4==f?-90:90)+"deg)");this.qf&&(l+=" scale("+g+")");l+=" translate3d("+-e/2+"px,"+-e/2+"px,"+-e*g/(2*this.xf)+"px)";b+=l+";";c.Ik=l;a||(c.K.setAttribute("style",b),this.D.insertBefore(c.K,this.D.firstChild))}if(!a){for(f=0;6>f;f++)c=this.kb.cb[f],""!=this.Ue[f]&&(c.Ad=new Image,c.Ad.crossOrigin=this.crossOrigin,c.Ad.onload=this.gk(c),c.Ad.setAttribute("src",this.hc(this.Ue[f])),this.Mb.push(c.Ad));for(f=0;6>f;f++)c=this.kb.cb[f],c.loaded=!1,
c.h=new Image,c.h.crossOrigin=this.crossOrigin,c.h.onload=this.gk(c),c.h.setAttribute("src",this.hc(this.jh[f])),this.Mb.push(c.h)}};b.prototype.Uh=function(){var a;this.xa.ba.x=0;this.xa.ba.y=0;if(this.Pc){for(a=0;a<this.kb.cb.length;a++)this.kb.cb[a].K&&this.kb.cb[a].K.setAttribute&&(this.kb.cb[a].K.setAttribute("src",this.kk),this.D.removeChild(this.kb.cb[a].K));if(this.h.I){for(a=0;a<this.h.I.length;a++){var b=this.h.I[a],c;for(c in b.U)if(b.U.hasOwnProperty(c)){var f=b.U[c];f.visible=!1;f.K&&
(f.Pa&&f.Pa.clearRect(0,0,f.Pa.canvas.width,f.Pa.canvas.height),this.gi.push(f.K));f.h&&delete f.h;f.eb&&(this.H.deleteTexture(f.eb),this.cd--);f.Pa=null;f.K=null;f.h=null}delete b.U}delete this.h.I;this.h.I=null}}this.ma.Uh();c=[];for(a=0;a<this.J.length;a++)b=this.J[a],b.hd?c.push(b):b.Bd();for(a=0;a<this.Ya.length;a++)this.Ya[a].Bd();this.w.kg=-1;this.ua.style.visibility="hidden";this.fb=0;b=[];this.Wd=[];this.La.Pg=[];for(a=0;a<this.N.length;a++)f=this.N[a],4!=f.mode&&6!=f.mode?(b.push(f),this.L("Keep in list "+
f.id),0!=f.mode&&this.Wd.push(f)):this.Wd.push(f);this.N=b;this.J=c;this.Ya=[];this.s.b&&(this.T.removeChild(this.s.b),this.s.b=null,a=this.Pb("_videopanorama"),0<a.length&&(a[0].b=null));this.s.fd=!1;this.s.Ah=!1};b.prototype.Ek=function(){var a=1,b=-1!=navigator.userAgent.indexOf("Mac");window.devicePixelRatio&&b&&(a=window.devicePixelRatio);return{Xg:screen.width*a,cg:screen.height*a}};b.prototype.Ak=function(){var a=this.Ek();return a.Xg>a.cg?a.Xg:a.cg};b.prototype.oj=function(a,b){var c=(new DOMParser).parseFromString(a,
"text/xml");this.Gi=a;this.yl(c,b);this.ga&&(this.L("Apply to Flash player"),this.ga.readConfigString(this.Gi),this.ga.setLocked(!0),this.ga.setSlaveMode(!0))};b.prototype.xl=function(a,b,c){try{var f;f=new XMLHttpRequest;f.open("GET",a,!1);f.send(null);if(f.responseXML){var e=a.lastIndexOf("/");0<=e&&(this.Jd=a.substr(0,e+1));2<=arguments.length&&null!=b&&(this.Jd=b);this.oj(f.responseText,c)}else alert("Error loading panorama XML")}catch(l){alert("Error:"+l)}};b.prototype.No=function(a,b,c,f){var e;
e=new XMLHttpRequest;var l=this;e.onload=function(g){if(4<=e.readyState)if(e.responseXML){var k=a.lastIndexOf("/");0<=k&&(l.Jd=a.substr(0,k+1));3<=arguments.length&&null!=c&&(l.Jd=c);l.oj(e.responseText,f);b&&b()}else alert("Error loading panorama XML");else console.error("Wrong state loading XML:"+e.statusText)};e.onerror=function(){console.error("Error loading XML:"+e.statusText)};e.open("GET",a,!0);e.send(null)};b.prototype.xi=function(a){var b="";"{"==a.charAt(0)&&(b=a.substr(1,a.length-2));a=
{oldNodeId:this.bb,nodeId:b};this.ka("beforechangenodeid",a);""!=this.bb&&-1==this.Oj.indexOf(this.bb)&&this.Oj.push(this.bb);this.dl=this.bb;this.bb=b;this.L("change active node: "+b);this.Ca&&this.Ca.changeActiveNode&&this.Ca.changeActiveNode("{"+b+"}");this.ka("changenodeid",a)};b.prototype.yk=function(){return this.bb};b.prototype.Bk=function(){if(0<this.Ma.length){var a;a=this.Ma.indexOf(this.bb);a++;a>=this.Ma.length&&(a=0);return this.Ma[a]}return""};b.prototype.Sn=function(){if(0<this.Ma.length){var a;
a=this.Ma.indexOf(this.bb);a--;0>a&&(a=this.Ma.length-1);return this.Ma[a]}return""};b.prototype.zn=function(){return this.dl};b.prototype.wo=function(a){return-1!=this.Oj.indexOf(a)};b.prototype.yl=function(a,b){var c=a.firstChild;this.Fe=[];this.Ma=[];this.lh=[];for(var f=c.firstChild;f;){if("map"==f.nodeName){var e=[],l=f.getAttributeNode("title");l&&(e.title=l.nodeValue.toString());l=f.getAttributeNode("type");e.type=l.nodeValue.toString();"web"==e.type?(l=f.getAttributeNode("mapprovider"),e.mapprovider=
l.nodeValue.toString(),l=f.getAttributeNode("mapstyle"),e.mapstyle=l.nodeValue.toString(),(l=f.getAttributeNode("mapurltemplate"))&&(e.mapurltemplate=l.nodeValue.toString()),(l=f.getAttributeNode("mapmaxzoom"))&&(e.mapmaxzoom=Number(l.nodeValue)),(l=f.getAttributeNode("mapkey"))&&(e.mapkey=l.nodeValue.toString())):(l=f.getAttributeNode("width"),e.width=Number(l.nodeValue),l=f.getAttributeNode("height"),e.height=Number(l.nodeValue),l=f.getAttributeNode("zoomlevels"),e.zoomlevels=Number(l.nodeValue),
l=f.getAttributeNode("tileformat"),e.tileformat=l.nodeValue.toString(),l=f.getAttributeNode("bgcolor"),e.bgcolor=l.nodeValue.toString(),l=f.getAttributeNode("floorplannorth"),e.floorplannorth=Number(l.nodeValue));l=f.getAttributeNode("id");this.Hh[l.nodeValue.toString()]=e}f=f.nextSibling}if("tour"==c.nodeName){this.df=!0;f="";(l=c.getAttributeNode("start"))&&(f=l.nodeValue.toString());this.hasOwnProperty("startNode")&&this.startNode&&(f=String(this.startNode),this.startNode="");for(var e=c.firstChild,
g="",c="";e;){if("panorama"==e.nodeName){if(l=e.getAttributeNode("id"))g=l.nodeValue.toString(),""==f&&(f=g),""==c&&(c=g),this.Fe[g]=e,this.Ma.push(g);for(l=e.firstChild;l;){if("userdata"==l.nodeName){var k=this.Qf(l);this.li[g]=k;k.customnodeid&&(this.lh[k.customnodeid]=g);this.hf[g]=this.dn(l);this.qg[g]=this.en(l)}l=l.nextSibling}}if("masternode"==e.nodeName)for(l=e.firstChild;l;)"userdata"==l.nodeName&&(k=this.Qf(l),this.li._master=k),l=l.nextSibling;e=e.nextSibling}this.Fe.hasOwnProperty(f)||
(l=this.lh[f])&&(f=l);this.Fe.hasOwnProperty(f)||(this.Kc("Start node "+f+" not found!"),f=c);this.bb=f;this.nj(this.Fe[f],b);this.xi("{"+f+"}")}else this.df=!1,this.nj(c,b),this.xi(""),this.Ma.push("")};b.prototype.nj=function(a,b){this.Dl();this.Fa&&this.Fa.Po();this.tf(this.tb);this.Uh();this.lg=0;for(var c=a.firstChild,f,e,l=0;c;){if("view"==c.nodeName){if(f=c.getAttributeNode("fovmode"))this.f.mode=Number(f.nodeValue);f=c.getAttributeNode("pannorth");this.pan.ij=1*(f?f.nodeValue:0);for(var g=
c.firstChild;g;){"start"==g.nodeName&&(f=g.getAttributeNode("pan"),this.pan.c=Number(f?f.nodeValue:0),this.pan.Qa=this.pan.c,f=g.getAttributeNode("tilt"),this.i.c=Number(f?f.nodeValue:0),this.i.Qa=this.i.c,f=g.getAttributeNode("roll"),this.O.c=Number(f?f.nodeValue:0),this.O.Qa=this.O.c,f=g.getAttributeNode("fov"),this.f.c=Number(f?f.nodeValue:70),this.f.Qa=this.f.c,f=g.getAttributeNode("projection"),this.Ph=Number(f?f.nodeValue:4),this.jd(this.Ph));"min"==g.nodeName&&(f=g.getAttributeNode("pan"),
this.pan.min=1*(f?f.nodeValue:0),f=g.getAttributeNode("tilt"),this.i.min=1*(f?f.nodeValue:-90),f=g.getAttributeNode("fov"),this.f.min=1*(f?f.nodeValue:5),1E-20>this.f.min&&(this.f.min=1E-20),f=g.getAttributeNode("fovpixel"),this.f.sg=1*(f?f.nodeValue:0));if("max"==g.nodeName){f=g.getAttributeNode("pan");this.pan.max=1*(f?f.nodeValue:0);f=g.getAttributeNode("tilt");this.i.max=1*(f?f.nodeValue:90);f=g.getAttributeNode("fov");this.f.max=1*(f?f.nodeValue:120);180<=this.f.max&&(this.f.max=179.9);if(f=
g.getAttributeNode("fovstereographic"))this.f.gj=1*f.nodeValue;if(f=g.getAttributeNode("fovfisheye"))this.f.fj=1*f.nodeValue;if(f=g.getAttributeNode("scaletofit"))this.B.Jl=1==f.nodeValue}if("flyin"==g.nodeName){if(f=g.getAttributeNode("projection"))this.rc.Bb=Number(f.nodeValue);if(f=g.getAttributeNode("pan"))this.rc.pan=parseFloat(f.nodeValue);if(f=g.getAttributeNode("tilt"))this.rc.i=parseFloat(f.nodeValue);if(f=g.getAttributeNode("fov"))this.rc.f=parseFloat(f.nodeValue)}g=g.nextSibling}}if("autorotate"==
c.nodeName){if(f=c.getAttributeNode("speed"))this.o.speed=1*f.nodeValue;if(f=c.getAttributeNode("delay"))this.o.timeout=1*f.nodeValue;if(f=c.getAttributeNode("returntohorizon"))this.o.ei=1*f.nodeValue;if(f=c.getAttributeNode("nodedelay"))this.o.Nh=1*f.nodeValue;if(f=c.getAttributeNode("noderandom"))this.o.hj=1==f.nodeValue;this.ke&&(this.o.enabled=!0,this.o.active=!1);if(f=c.getAttributeNode("startloaded"))this.o.Mg=1==f.nodeValue,this.o.Mg&&(this.o.active=!1);if(f=c.getAttributeNode("useanimation"))this.o.Lj=
1==f.nodeValue;if(f=c.getAttributeNode("syncanimationwithvideo"))this.o.Dj=1==f.nodeValue}if("animation"==c.nodeName){if(f=c.getAttributeNode("syncanimationwithvideo"))this.o.Dj=1==f.nodeValue;if(f=c.getAttributeNode("useinautorotation"))this.o.Lj=1==f.nodeValue;if(f=c.getAttributeNode("animsequence"))this.o.eh=f.nodeValue;this.va=[];for(g=c.firstChild;g;){if("clip"==g.nodeName){this.A=new p.ll;if(f=g.getAttributeNode("animtitle"))this.A.Me=f.nodeValue.toString();if(f=g.getAttributeNode("cliptitle"))this.A.Ta=
f.nodeValue.toString();if(f=g.getAttributeNode("nodeid"))this.A.fq=f.nodeValue.toString();if(f=g.getAttributeNode("length"))this.A.length=Number(f.nodeValue);if(f=g.getAttributeNode("animtype"))this.A.Fm=Number(f.nodeValue);if(f=g.getAttributeNode("nextcliptitle"))this.A.ol=f.nodeValue.toString();if(f=g.getAttributeNode("nextclipnodeid"))this.A.Mh=f.nodeValue.toString();if(f=g.getAttributeNode("transitiontype"))this.A.Kp=Number(f.nodeValue);var k=g.firstChild;for(this.A.W=[];k;){if("keyframe"==k.nodeName){var m=
new p.Dc;if(f=k.getAttributeNode("time"))m.time=Number(f.nodeValue);if(f=k.getAttributeNode("value"))m.value=Number(f.nodeValue);if(f=k.getAttributeNode("valuestring"))m.Mj=f.nodeValue.toString();if(f=k.getAttributeNode("transitiontime"))m.rb=Number(f.nodeValue);f=k.getAttributeNode("type");var v=0;f&&(m.type=Number(f.nodeValue),v=Number(f.nodeValue));if(f=k.getAttributeNode("property"))m.pb=Number(f.nodeValue);if(f=k.getAttributeNode("additionaltrackid"))m.bh=f.nodeValue.toString();if(1==v||2==v){if(f=
k.getAttributeNode("bezierintime"))m.de=Number(f.nodeValue);if(f=k.getAttributeNode("bezierinvalue"))m.Sc=Number(f.nodeValue);if(f=k.getAttributeNode("bezierouttime"))m.ee=Number(f.nodeValue);if(f=k.getAttributeNode("bezieroutvalue"))m.fe=Number(f.nodeValue)}this.A.W.push(m)}k=k.nextSibling}this.va.push(this.A)}g=g.nextSibling}}"input"==c.nodeName&&(e||(e=c));if(e)for(k=0;6>k;k++)f=e.getAttributeNode("prev"+k+"url"),this.Ue[k]=f?String(f.nodeValue):"";"altinput"==c.nodeName&&(g=0,(f=c.getAttributeNode("screensize"))&&
(g=1*f.nodeValue),0<g&&g<=this.Ak()&&g>l&&(l=g,e=c));if("control"==c.nodeName&&this.ke){if(f=c.getAttributeNode("simulatemass"))this.xa.enabled=1==f.nodeValue;if(f=c.getAttributeNode("rubberband"))this.B.Hl=1==f.nodeValue;if(f=c.getAttributeNode("locked"))this.B.wb=1==f.nodeValue;f&&(this.B.se=1==f.nodeValue);if(f=c.getAttributeNode("lockedmouse"))this.B.wb=1==f.nodeValue;if(f=c.getAttributeNode("lockedkeyboard"))this.B.se=1==f.nodeValue;if(f=c.getAttributeNode("lockedkeyboardzoom"))this.B.mo=1==
f.nodeValue;if(f=c.getAttributeNode("lockedwheel"))this.B.gd=1==f.nodeValue;if(f=c.getAttributeNode("invertwheel"))this.B.Rk=1==f.nodeValue;if(f=c.getAttributeNode("speedwheel"))this.B.Tl=1*f.nodeValue;if(f=c.getAttributeNode("invertcontrol"))this.B.vd=1==f.nodeValue;if(f=c.getAttributeNode("sensitivity"))this.B.sensitivity=1*f.nodeValue,1>this.B.sensitivity&&(this.B.sensitivity=1);if(f=c.getAttributeNode("dblclickfullscreen"))this.B.Ii=1==f.nodeValue;if(f=c.getAttributeNode("contextfullscreen"))this.B.Nf=
1==f.nodeValue;if(f=c.getAttributeNode("contextprojections"))this.B.hh=1==f.nodeValue;if(f=c.getAttributeNode("hideabout"))this.B.eg=1==f.nodeValue;for(g=c.firstChild;g;)"menulink"==g.nodeName&&(k={text:"",url:""},f=g.getAttributeNode("text"),k.text=f.nodeValue,f=g.getAttributeNode("url"),k.url=f.nodeValue,this.rg.push(k)),g=g.nextSibling}if("transition"==c.nodeName&&this.ke){if(f=c.getAttributeNode("enabled"))this.C.enabled=1==f.nodeValue;if(f=c.getAttributeNode("blendtime"))this.C.Jf=f.nodeValue;
if(f=c.getAttributeNode("blendcolor"))this.C.Oe=f.nodeValue.toString();if(f=c.getAttributeNode("type"))this.C.type=f.nodeValue.toString();if(f=c.getAttributeNode("softedge"))this.C.zc=1*f.nodeValue;if(f=c.getAttributeNode("zoomin"))this.C.Oa=f.nodeValue;if(f=c.getAttributeNode("zoomout"))this.C.Zb=f.nodeValue;if(f=c.getAttributeNode("zoomfov"))this.C.Ef=f.nodeValue;if(f=c.getAttributeNode("zoomspeed"))this.C.ae=f.nodeValue;if(f=c.getAttributeNode("zoomoutpause"))this.C.Ff=1==f.nodeValue;"cut"==this.C.type&&
(this.C.Jf=0)}if("soundstransition"==c.nodeName){if(f=c.getAttributeNode("enabled"))this.La.enabled=1==f.nodeValue;if(f=c.getAttributeNode("transitiontime"))this.La.rb=1*f.nodeValue;if(f=c.getAttributeNode("crossfade"))this.La.fk=1==f.nodeValue}if("flyintransition"==c.nodeName){if(f=c.getAttributeNode("enabled"))this.ub.enabled=1==f.nodeValue&&this.Y;if(f=c.getAttributeNode("speed"))this.ub.speed=1*f.nodeValue}"userdata"==c.nodeName&&(this.userdata=this.Cf=this.Qf(c));if("hotspots"==c.nodeName)for(g=
c.firstChild;g;){if("label"==g.nodeName&&this.ke){k=this.w.Fj;if(f=g.getAttributeNode("enabled"))k.enabled=1==f.nodeValue;if(f=g.getAttributeNode("width"))k.width=1*f.nodeValue;if(f=g.getAttributeNode("height"))k.height=1*f.nodeValue;if(f=g.getAttributeNode("textcolor"))k.Gj=1*f.nodeValue;if(f=g.getAttributeNode("textalpha"))k.Ej=1*f.nodeValue;if(f=g.getAttributeNode("background"))k.background=1==f.nodeValue;if(f=g.getAttributeNode("backgroundalpha"))k.ac=1*f.nodeValue;if(f=g.getAttributeNode("backgroundcolor"))k.bc=
1*f.nodeValue;if(f=g.getAttributeNode("border"))k.vi=1*f.nodeValue;if(f=g.getAttributeNode("bordercolor"))k.ec=1*f.nodeValue;if(f=g.getAttributeNode("borderalpha"))k.dc=1*f.nodeValue;if(f=g.getAttributeNode("borderradius"))k.ui=1*f.nodeValue;if(f=g.getAttributeNode("wordwrap"))k.ni=1==f.nodeValue}if("polystyle"==g.nodeName&&this.ke){if(f=g.getAttributeNode("mode"))this.w.mode=1*f.nodeValue;if(f=g.getAttributeNode("bordercolor"))this.w.ec=1*f.nodeValue;if(f=g.getAttributeNode("backgroundcolor"))this.w.bc=
1*f.nodeValue;if(f=g.getAttributeNode("borderalpha"))this.w.dc=1*f.nodeValue;if(f=g.getAttributeNode("backgroundalpha"))this.w.ac=1*f.nodeValue;if(f=g.getAttributeNode("handcursor"))this.w.$e=1==f.nodeValue}f=void 0;"hotspot"==g.nodeName&&(f=new p.Bh(this),f.type="point",f.Ib(g),this.P.push(f));"polyhotspot"==g.nodeName&&(f=new p.Bh(this),f.type="poly",f.Ib(g),this.P.push(f));g=g.nextSibling}if("sounds"==c.nodeName||"media"==c.nodeName)for(g=c.firstChild;g;){if("sound"==g.nodeName&&!this.pl)for(f=
new p.Am(this),f.Ib(g),this.Db||f.addElement(),k=0;k<this.Wd.length;k++)m=this.Wd[k],f.id==m.id&&f.url.join()==m.url.join()&&f.loop==m.loop&&f.mode==m.mode&&(this.Wd.splice(k,1),k--);"video"==g.nodeName&&(f=new p.Qj(this),f.Ib(g),this.Db||f.addElement());"image"==g.nodeName&&(f=new p.ym(this),f.Ib(g),this.Db||f.addElement());"lensflare"==g.nodeName&&this.Fa&&(f=new p.zm(this),f.Ib(g),this.Fa.ng.push(f));g=g.nextSibling}c=c.nextSibling}for(k=0;k<this.Wd.length;k++){c=this.Wd[k];if(this.za&&this.La.enabled&&
this.ic(c.id))this.La.Pg.push(c);else{try{c.ha?c.Qe():c.b.pause()}catch(q){this.L(q)}c.Bd()}this.N.splice(this.N.indexOf(c))}1!=this.C.Oa&&2!=this.C.Oa&&this.mk();b&&""!=b&&(c=b.toString().split("/"),4<c.length&&this.jd(Number(c[4])),0<c.length&&(f=String(c[0]),"N"==f.charAt(0)?this.vj(Number(f.substr(1))):"S"==f.charAt(0)?this.vj(-180+Number(f.substr(1))):this.Dg(Number(f))),1<c.length&&this.Gg(Number(c[1])),2<c.length&&this.zg(Number(c[2])));if(e){for(k=0;6>k;k++)(f=e.getAttributeNode("tile"+k+
"url"))&&(this.jh[k]=String(f.nodeValue)),f=e.getAttributeNode("tile"+k+"url1");for(k=0;6>k;k++)(f=e.getAttributeNode("prev"+k+"url"))&&(this.Ue[k]=String(f.nodeValue));if(f=e.getAttributeNode("tilesize"))this.pc=1*f.nodeValue;if(f=e.getAttributeNode("canvassize"))this.Kf=Number(f.nodeValue);if(f=e.getAttributeNode("tilescale"))this.xf=1*f.nodeValue;if(f=e.getAttributeNode("leveltileurl"))this.h.kl=f.nodeValue;if(f=e.getAttributeNode("leveltilesize"))this.h.G=Number(f.nodeValue);if(f=e.getAttributeNode("levelbias"))this.h.il=
Number(f.nodeValue);if(f=e.getAttributeNode("levelbiashidpi"))this.h.jl=Number(f.nodeValue);f=e.getAttributeNode("overlap");this.$a.O=0;this.$a.pitch=0;f&&(this.h.Ia=Number(f.nodeValue));if(f=e.getAttributeNode("levelingroll"))this.$a.O=Number(f.nodeValue);if(f=e.getAttributeNode("levelingpitch"))this.$a.pitch=Number(f.nodeValue);this.fb=0;(f=e.getAttributeNode("flat"))&&1==f.nodeValue&&(this.fb=2);f=e.getAttributeNode("width");this.h.width=1*(f?f.nodeValue:1);f=e.getAttributeNode("height");this.h.height=
1*(f?f.nodeValue:this.h.width);this.s.src=[];this.h.I=[];for(g=e.firstChild;g;){if("preview"==g.nodeName){if(f=g.getAttributeNode("color"))this.h.nf=f.nodeValue;if(f=g.getAttributeNode("strip"))this.h.wl=1==f.nodeValue}if("video"==g.nodeName){if(f=g.getAttributeNode("format"))"3x2"==f.nodeValue&&(this.s.format=14),"equirectangular"==f.nodeValue&&(this.s.format=1);if(f=g.getAttributeNode("flipy"))this.s.Qi=Number(f.nodeValue);if(f=g.getAttributeNode("startmutedmobile"))this.s.Wl=1==f.nodeValue;if(f=
g.getAttributeNode("bleed"))this.s.Ne=Number(f.nodeValue);if(f=g.getAttributeNode("endaction"))this.s.je=String(f.nodeValue);if(f=g.getAttributeNode("width"))this.s.width=Number(f.nodeValue);if(f=g.getAttributeNode("height"))this.s.height=Number(f.nodeValue);for(k=g.firstChild;k;)"source"==k.nodeName&&(f=k.getAttributeNode("url"))&&this.s.src.push(f.nodeValue.toString()),k=k.nextSibling}if("level"==g.nodeName){e=new p.Il;f=g.getAttributeNode("width");e.width=1*(f?f.nodeValue:1);f=g.getAttributeNode("height");
e.height=1*(f?f.nodeValue:e.width);if(f=g.getAttributeNode("preload"))e.cache=1==f.nodeValue;if(f=g.getAttributeNode("preview"))e.mf=1==f.nodeValue;e.M=Math.floor((e.width+this.h.G-1)/this.h.G);e.da=Math.floor((e.height+this.h.G-1)/this.h.G);this.h.I.push(e)}g=g.nextSibling}this.h.bj=this.h.I.length}this.af=!0;this.Sg&&(this.Y=this.Pc=!1,this.fc||(this.L("dummy rendering"),this.fc=document.createElement("canvas"),this.fc.width=100,this.fc.height=100,this.fc.id="dummycanvas",this.D.appendChild(this.fc)),
this.Oc());this.Y&&this.H&&(this.ma.Pk(this.xf),this.ma.Qk());this.Pc&&(0<this.h.I.length?this.dk(!0):this.dk(!1),this.lg=0);var w=this;0<this.h.I.length&&this.h.wl&&0==this.fb&&(c=new Image,e=new p.Il,e.mf=!0,e.cache=!0,e.M=e.da=0,e.height=e.width=0,this.h.I.push(e),c.crossOrigin=this.crossOrigin,c.onload=this.ma.vo(c),c.setAttribute("src",this.Ee(6,this.h.bj-1,0,0)));if(0<this.s.src.length&&this.Y)if(this.Tg){this.s.b=document.createElement("video");this.s.b.crossOrigin=this.crossOrigin;this.s.b.setAttribute("style",
"display:none; max-width:none;");this.s.b.setAttribute("playsinline","playsinline");(this.Ic||this.Pd)&&this.Rf&&this.s.Wl&&this.s.b.setAttribute("muted","muted");this.s.b.a=!0;this.s.b.volume=this.V;this.T.appendChild(this.s.b);this.s.fd=!1;this.s.Yl=!1;this.s.b.oncanplay=function(){if(!w.s.fd){w.s.Ah=!0;var a,b,c,d,f,e,g=[],h=new p.ta,k=w.H,l=w.s.b.videoWidth/3;w.s.width=w.s.b.videoWidth;w.s.height=w.s.b.videoHeight;for(a=0;6>a;a++)for(c=a%3*l+w.s.Ne,f=c+l-2*w.s.Ne,e=4,3>a&&(e+=l),d=e+l-2*w.s.Ne,
b=0;4>b;b++){h.x=-1;h.y=-1;h.z=1;for(var m=0;m<b;m++)h.Gl();g.push((0<h.x?c:f)/(3*l),(0<h.y?d:e)/(2*l))}k.bindBuffer(k.ARRAY_BUFFER,w.s.ci);k.bufferData(k.ARRAY_BUFFER,new Float32Array(g),k.STATIC_DRAW)}};"exit"==this.s.je?this.s.b.onended=function(){w.s.Ah=!1;w.s.fd=!1;w.T.removeChild(w.s.b);w.s.b=null;w.update()}:"stop"==this.s.je?w.s.b.onended=function(){w.update()}:"{"==this.s.je.charAt(0)?this.s.b.onended=function(){w.we(w.s.je,"$fwd")}:this.s.b.loop=!0;for(k=0;k<this.s.src.length;k++)e=document.createElement("source"),
e.setAttribute("src",this.hc(this.s.src[k])),this.s.b.appendChild(e);e=this.Pb("_videopanorama");0<e.length?e[0].b=this.s.b:this.zl("_videopanorama",this.s.b);this.s.b.play()}else"{"==this.s.je.charAt(0)&&w.we(w.s.je,"$fwd");this.Sj();this.C.Hd||this.Xl();this.update();this.ke&&(this.ia&&this.ia.ggViewerInit&&this.ia.ggViewerInit(),this.ka("configloaded",{}),this.ub.enabled&&0==this.fb&&this.Y&&(this.jd(9),this.pan.c=this.rc.pan,this.i.c=this.rc.i,this.f.c=this.rc.f,this.Ja=this.rc.Bb,this.A=this.Vf(!1),
this.pan.c=this.A.W[0].value,this.i.c=this.A.W[1].value,this.f.c=this.A.W[2].value,3==this.A.W[3].pb&&this.jd(this.A.W[3].value),this.Ab=this.A.Ta,this.C.Ih=this.B.wb,this.C.mi=this.B.gd,this.C.Ch=this.B.se,this.o.active=!1,this.o.qh=!0));this.ke=!1;this.Oc()};b.prototype.jj=function(a,b){0<a.length&&(".xml"==a.substr(a.length-4)||".swf"==a.substr(a.length-4)||"{"==a.charAt(0)?this.we(this.hc(a),b):window.open(this.hc(a),b))};b.prototype.yp=function(){this.af=this.isLoaded=!1;this.checkLoaded=this.Mb=
[];this.Qh=0;this.ia&&this.ia.ggReLoaded&&this.ia.ggReLoaded();this.ka("beforechangenode",{})};b.prototype.we=function(a,b){if(""!=a&&"{}"!=a){this.yp();this.Ca&&this.Ca.hotspotProxyOut&&this.Ca.hotspotProxyOut(this.Aa.id);".swf"==a.substr(a.length-4)&&(a=a.substr(0,a.length-4)+".xml");var c="";b&&(c=b.toString());c=c.replace("$cur",this.pan.c+"/"+this.i.c+"/"+this.f.c+"//"+this.qa());c=c.replace("$(cur)",this.pan.c+"/"+this.i.c+"/"+this.f.c+"//"+this.qa());c=c.replace("$fwd","N"+this.ne()+"/"+this.i.c+
"/"+this.f.c+"//"+this.qa());c=c.replace("$(fwd)","N"+this.ne()+"/"+this.i.c+"/"+this.f.c+"//"+this.qa());c=c.replace("$bwd","S"+this.ne()+"/"+this.i.c+"/"+this.f.c+"//"+this.qa());c=c.replace("$(bwd)","S"+this.ne()+"/"+this.i.c+"/"+this.f.c+"//"+this.qa());c=c.replace("$ap",String(this.pan.c));c=c.replace("$(ap)",String(this.pan.c));c=c.replace("$an",String(this.ne()));c=c.replace("$(an)",String(this.ne()));c=c.replace("$at",String(this.i.c));c=c.replace("$(at)",String(this.i.c));c=c.replace("$af",
String(this.f.c));c=c.replace("$(af)",String(this.f.c));c=c.replace("$ar",String(this.qa()));c=c.replace("$(ar)",String(this.qa()));if(""!=c){var e=c.split("/");3<e.length&&""!=e[3]&&(this.startNode=e[3])}this.ra();if("{"==a.charAt(0)){var e=a.substr(1,a.length-2),h=this.lh[e];h&&(e=h);var h=this.C,k=this.H;if(this.Fe[e]){this.fh=!0;if(this.C.enabled&&this.Y&&this.C.Xb){h.Ge||h.Hd||(h.Ih=this.B.wb,h.mi=this.B.gd,h.Ch=this.B.se,this.Bg(!0),this.Cg(!0),this.Ag(!0));var g;"wipeleftright"==h.type?g=1:
"wiperightleft"==h.type?g=2:"wipetopbottom"==h.type?g=3:"wipebottomtop"==h.type?g=4:"wiperandom"==h.type&&(g=Math.ceil(4*Math.random()));h.Hi=g;k.bindFramebuffer(k.FRAMEBUFFER,h.Xb);k.viewport(0,0,h.Xb.width,h.Xb.height);k.clear(k.COLOR_BUFFER_BIT|k.DEPTH_BUFFER_BIT);h.Og=!0;this.Rg();h.Og=!1;k.bindFramebuffer(k.FRAMEBUFFER,null);k.viewport(0,0,this.mb.width,this.mb.height);g=new Date;this.Aa!=this.tb?(h.Zg=this.Aa.mc/this.m.width,h.$g=1-this.Aa.Hb/this.m.height):(h.Zg=.5,h.$g=.5);1!=h.Oa&&2!=h.Oa?
(h.Aj=g.getTime(),h.Ge=!0):(h.rm=g.getTime(),h.Hd=!0,h.sb=Math.sin(this.Qb()/2*Math.PI/180)/Math.sin(h.Ef/2*Math.PI/180),h.sb=Math.max(h.sb,1),h.qm=1/h.ae*h.sb*.3)}this.nj(this.Fe[e],c);this.xi(a);h.enabled&&this.Y&&0!=h.Zb&&(h.Ce=this.uh(),h.De=this.Ti(),h.Gd=this.Qb(),h.ld=this.qa(),1==h.Zb||3==h.Zb?this.Hg(h.Ef):2==h.Zb?this.Hg(this.Wf()+(this.Wf()-h.Ef)):4==h.Zb&&(this.jd(this.rc.Bb),this.Dg(this.rc.pan),this.Gg(this.rc.i),this.Hg(this.rc.f)),h.Ff||1==h.Oa||2==h.Oa||(4==h.Zb?(this.A=this.Vf(!0,
h.Ce,h.De,h.Gd),this.Ab=this.A.Ta,this.o.active=!0,this.ub.Dd=!0):this.moveTo(h.Ce,h.De,h.Gd,h.ae,0,h.ld)));this.ga&&this.ga.openNext(a,c);this.C.Hd||this.C.Ge||(this.fa&&this.Di(),this.fh=!1)}else{this.Kc("invalid node id: "+e);return}}else this.xl(a,null,c);this.ka("changenode",{});this.update(5)}};b.prototype.Gn=function(){return this.af?this.df?this.Ma.slice(0):[""]:[]};b.prototype.Qf=function(a){var b,c;c=[];c.title="";c.description="";c.author="";c.datetime="";c.copyright="";c.source="";c.information=
"";c.comment="";c.latitude=0;c.longitude=0;c.customnodeid="";c.tags=[];if(a&&((b=a.getAttributeNode("title"))&&(c.title=b.nodeValue.toString()),(b=a.getAttributeNode("description"))&&(c.description=b.nodeValue.toString()),(b=a.getAttributeNode("author"))&&(c.author=b.nodeValue.toString()),(b=a.getAttributeNode("datetime"))&&(c.datetime=b.nodeValue.toString()),(b=a.getAttributeNode("copyright"))&&(c.copyright=b.nodeValue.toString()),(b=a.getAttributeNode("source"))&&(c.source=b.nodeValue.toString()),
(b=a.getAttributeNode("info"))&&(c.information=b.nodeValue.toString()),(b=a.getAttributeNode("comment"))&&(c.comment=b.nodeValue.toString()),(b=a.getAttributeNode("latitude"))&&(c.latitude=Number(b.nodeValue)),(b=a.getAttributeNode("longitude"))&&(c.longitude=Number(b.nodeValue)),(b=a.getAttributeNode("customnodeid"))&&(c.customnodeid=b.nodeValue.toString()),b=a.getAttributeNode("tags"))){a=b.nodeValue.toString().split("|");for(b=0;b<a.length;b++)""==a[b]&&(a.splice(b,1),b--);c.tags=a}return c};b.prototype.dn=
function(a){for(var b={},c=a.firstChild;c;){if("mapcoords"==c.nodeName){var e={x:0,y:0};a=c.getAttributeNode("x");e.x=Number(a.nodeValue);a=c.getAttributeNode("y");e.y=Number(a.nodeValue);a=c.getAttributeNode("mapid");b[a.nodeValue.toString()]=e}c=c.nextSibling}return b};b.prototype.en=function(a){for(var b={},c=a.firstChild;c;){if("mapcoords"==c.nodeName){var e={x:0,y:0};a=c.getAttributeNode("x_floorplan_percent");e.x=Number(a.nodeValue);a=c.getAttributeNode("y_floorplan_percent");e.y=Number(a.nodeValue);
a=c.getAttributeNode("mapid");b[a.nodeValue.toString()]=e}c=c.nextSibling}return b};b.prototype.Ri=function(a){return a?this.li[a]?this.li[a]:this.Qf():this.Cf};b.prototype.Hn=function(a){a=this.Ri(a);var b=[];""!=a.latitude&&0!=a.latitude&&0!=a.longitude&&(b.push(a.latitude),b.push(a.longitude));return b};b.prototype.Kn=function(a){return this.Ri(a).title};b.prototype.Ye=function(a,b){var c;for(c=0;c<this.A.W.length;c++)if(this.A.W[c].time==a&&this.A.W[c].pb==b)return this.A.W[c];return!1};b.prototype.Fn=
function(a){var b,c=1E5,e=a,h=!1;for(b=0;b<this.A.W.length;b++)this.A.W[b].pb==a.pb&&this.A.W[b].time>a.time&&this.A.W[b].time<c&&(e=this.A.W[b],c=e.time,h=!0);return h?e:!1};b.prototype.ln=function(a){for(var b=[],c=0;c<this.A.W.length;c++)if(this.A.W[c].time<=a&&4==this.A.W[c].pb){for(var e=!1,h=0;h<b.length;h++)if(b[h].bh==this.A.W[c].bh){b[h].time<this.A.W[c].time?b.splice(h,1):e=!0;break}e||b.push(this.A.W[c])}return b};b.prototype.Vf=function(a,b,c,e){for(var h=0;h<this.va.length;h++)if(this.va[h].Ta&&
0==this.va[h].Ta.indexOf("__FlyIn"))return this.va[h];h=new p.$k;h.Ta="__FlyIn";h.Ig=this.pan.c;h.Kg=this.i.c;h.Fd=this.f.c;h.Jg=this.Ja;h.ld=this.Ph;a?(h.Ve=!1,h.he=!1,h.speed=this.C.ae,h.Xd=b,h.Yd=c,h.wf=e):(h.Ve=!0,h.he=!0,h.speed=this.ub.speed,h.Xd=this.pan.Qa,h.Yd=this.i.Qa,h.wf=this.f.Qa);return this.vk(h)};b.prototype.vk=function(a){var b=new p.ll;b.Ta=a.Ta;b.Me="";b.W=[];var c=a.Jg!=a.ld&&-1!=a.ld,e=a.Xd-a.Ig;if(360==this.pan.max-this.pan.min){for(;-360>e;)e+=360;for(;360<e;)e-=360}var h=
a.Yd-a.Kg,k=a.wf-a.Fd,g=Math.round(Math.sqrt(e*e+h*h+k*k)/a.speed*.33);c&&(g=Math.max(10,g));b.length=g;var t,m;a.ie&&(t=Math.ceil(.7*g),t=Math.min(15,t),t=Math.max(5,t),b.length=g+t,m=.33*t);var v=a.wf,w=g,q=0,u=g-1;if(c){var r=a.Fd,x;4==a.ld?x=120:x=this.Xf(a.ld);var z=a.wf,k=z-a.Fd,n=new p.qc(0,a.Fd),C=new p.qc(g,z),A=new p.qc,y=new p.qc;y.Za(g/3,a.Fd+k/3);A.Za(2*g/3,z-k/3);if(r>x)for(;q<=g&&r>x;)r=new p.qc,r.ti(n,C,y,A,q),r=r.y,q++;else q=1;q>=.8*g&&(w=q=Math.round(.8*g));0==q&&(q=1);var B;4==
a.Jg?B=120:B=this.Xf(a.Jg);x=a.wf;if(x>B)for(;u>q&&x>B;)r=new p.qc,r.ti(n,C,y,A,u),x=r.y,u--}n=new p.Dc;n.time=0;n.pb=0;n.value=a.Ig;n.type=1;n.ee=g/3;n.fe=a.Ve?a.Ig:a.Ig+e/3;b.W.push(n);n=new p.Dc;n.time=0;n.pb=1;n.value=a.Kg;n.type=1;n.ee=g/3;n.fe=a.Ve?a.Kg:a.Kg+h/3;b.W.push(n);n=new p.Dc;n.time=0;n.pb=2;n.value=a.Fd;n.type=1;n.ee=g/3;n.fe=a.Ve?a.Fd:a.Fd+k/3;b.W.push(n);n=new p.Dc;n.time=0;n.pb=3;n.value=a.Jg;n.type=0;n.rb=0;b.W.push(n);c&&(n=new p.Dc,n.time=q,n.pb=3,n.value=a.ld,n.type=0,n.rb=
u-q,b.W.push(n));n=new p.Dc;n.time=g;n.pb=0;n.value=a.Xd;n.type=1;n.de=2*g/3;a.he&&!a.ie?n.Sc=a.Xd:n.Sc=a.Xd-e/3;a.ie&&(n.ee=g+m,n.fe=n.value+m/g*e);b.W.push(n);n=new p.Dc;n.time=g;n.pb=1;n.value=a.Yd;n.type=1;n.de=2*g/3;a.he&&!a.ie?n.Sc=a.Yd:n.Sc=a.Yd-h/3;a.ie&&(n.ee=g+m,n.fe=n.value+m/g*h);b.W.push(n);n=new p.Dc;n.time=w;n.pb=2;n.value=v;n.type=1;n.de=2*w/3;a.he?n.Sc=v:n.Sc=v-k/3;b.W.push(n);a.ie&&(n=new p.Dc,n.time=g+t,n.pb=0,n.value=a.Xd,n.type=1,n.de=g+t-m,n.Sc=a.Xd,b.W.push(n),n=new p.Dc,n.time=
g+t,n.pb=1,n.value=a.Yd,n.type=1,n.de=g+t-m,n.Sc=a.Yd,b.W.push(n));this.va.push(b);return b};b.prototype.Wp=function(){this.s.b&&this.s.b.play()};b.prototype.Xp=function(){this.s.b&&(this.s.b.pause(),this.s.b.currentTime=0)};b.prototype.Vp=function(){this.s.b&&this.s.b.pause()};b.prototype.np=function(a){this.s.b&&(0>a&&(a=0),a>this.s.b.duration&&(a=this.s.b.duration-.1),this.s.b.currentTime=a,this.update())};b.prototype.Zn=function(){return this.s.b?this.s.b.currentTime:0};b.prototype.Yn=function(){if(this.s.b)return this.s.b};
b.prototype.mp=function(a){if(this.s.b){var b=!this.s.b.paused&&!this.s.b.ended,c=this.s.b.currentTime;this.s.b.pause();isNaN(parseInt(a,10))?this.s.b.src=String(a):this.s.b.src=this.s.src[parseInt(a,10)];b&&(this.s.b.onloadedmetadata=function(){this.currentTime=c;this.play();this.onloadedmetadata=null});this.s.b.currentTime=c}};b.prototype.bn=function(){this.pl=!0};return b}();p.a=k})(ggP2VR||(ggP2VR={}));window.ggHasHtml5Css3D=G;window.ggHasWebGL=N;window.pano2vrPlayer=ggP2VR.a;
ggP2VR.a.prototype.getVersion=ggP2VR.a.prototype.Hk;ggP2VR.a.prototype.readConfigString=ggP2VR.a.prototype.oj;ggP2VR.a.prototype.readConfigUrl=ggP2VR.a.prototype.xl;ggP2VR.a.prototype.readConfigUrlAsync=ggP2VR.a.prototype.No;ggP2VR.a.prototype.readConfigXml=ggP2VR.a.prototype.yl;ggP2VR.a.prototype.openUrl=ggP2VR.a.prototype.jj;ggP2VR.a.prototype.openNext=ggP2VR.a.prototype.we;ggP2VR.a.prototype.setMargins=ggP2VR.a.prototype.Zo;ggP2VR.a.prototype.addListener=ggP2VR.a.prototype.addListener;
ggP2VR.a.prototype.on=ggP2VR.a.prototype.addListener;ggP2VR.a.prototype.removeEventListener=ggP2VR.a.prototype.removeEventListener;ggP2VR.a.prototype.detectBrowser=ggP2VR.a.prototype.jk;ggP2VR.a.prototype.initWebGL=ggP2VR.a.prototype.Gc;ggP2VR.a.prototype.getPercentLoaded=ggP2VR.a.prototype.On;ggP2VR.a.prototype.setBasePath=ggP2VR.a.prototype.To;ggP2VR.a.prototype.getBasePath=ggP2VR.a.prototype.mn;ggP2VR.a.prototype.setViewerSize=ggP2VR.a.prototype.Ol;ggP2VR.a.prototype.getViewerSize=ggP2VR.a.prototype.bo;
ggP2VR.a.prototype.setSkinObject=ggP2VR.a.prototype.ip;ggP2VR.a.prototype.changeViewMode=ggP2VR.a.prototype.Rm;ggP2VR.a.prototype.getViewMode=ggP2VR.a.prototype.$n;ggP2VR.a.prototype.changePolygonMode=ggP2VR.a.prototype.ak;ggP2VR.a.prototype.setPolygonMode=ggP2VR.a.prototype.ak;ggP2VR.a.prototype.getPolygonMode=ggP2VR.a.prototype.Qn;ggP2VR.a.prototype.showOnePolyHotspot=ggP2VR.a.prototype.Ql;ggP2VR.a.prototype.hideOnePolyHotspot=ggP2VR.a.prototype.Lk;ggP2VR.a.prototype.changePolyHotspotColor=ggP2VR.a.prototype.Pm;
ggP2VR.a.prototype.toggleOnePolyHotspot=ggP2VR.a.prototype.Fp;ggP2VR.a.prototype.changeViewState=ggP2VR.a.prototype.Sm;ggP2VR.a.prototype.getViewState=ggP2VR.a.prototype.ao;ggP2VR.a.prototype.setRenderFlags=ggP2VR.a.prototype.ap;ggP2VR.a.prototype.getRenderFlags=ggP2VR.a.prototype.Tn;ggP2VR.a.prototype.setMaxTileCount=ggP2VR.a.prototype.Ll;ggP2VR.a.prototype.getVFov=ggP2VR.a.prototype.Qb;ggP2VR.a.prototype.setVFov=ggP2VR.a.prototype.Hg;ggP2VR.a.prototype.getHFov=ggP2VR.a.prototype.rn;
ggP2VR.a.prototype.updatePanorama=ggP2VR.a.prototype.Rg;ggP2VR.a.prototype.isTouching=ggP2VR.a.prototype.Yk;ggP2VR.a.prototype.getIsMobile=ggP2VR.a.prototype.wn;ggP2VR.a.prototype.setIsMobile=ggP2VR.a.prototype.Xo;ggP2VR.a.prototype.getIsTour=ggP2VR.a.prototype.xn;ggP2VR.a.prototype.getIsAutorotating=ggP2VR.a.prototype.tn;ggP2VR.a.prototype.getIsLoading=ggP2VR.a.prototype.vn;ggP2VR.a.prototype.getIsLoaded=ggP2VR.a.prototype.th;ggP2VR.a.prototype.getIsTileLoading=ggP2VR.a.prototype.zk;
ggP2VR.a.prototype.getLastActivity=ggP2VR.a.prototype.yn;ggP2VR.a.prototype.getPan=ggP2VR.a.prototype.uh;ggP2VR.a.prototype.getPanNorth=ggP2VR.a.prototype.ne;ggP2VR.a.prototype.getPanDest=ggP2VR.a.prototype.Mn;ggP2VR.a.prototype.getPanN=ggP2VR.a.prototype.Nn;ggP2VR.a.prototype.setPan=ggP2VR.a.prototype.Dg;ggP2VR.a.prototype.setPanNorth=ggP2VR.a.prototype.vj;ggP2VR.a.prototype.changePan=ggP2VR.a.prototype.$j;ggP2VR.a.prototype.changePanLog=ggP2VR.a.prototype.Om;ggP2VR.a.prototype.getTilt=ggP2VR.a.prototype.Ti;
ggP2VR.a.prototype.getTiltDest=ggP2VR.a.prototype.Vn;ggP2VR.a.prototype.setTilt=ggP2VR.a.prototype.Gg;ggP2VR.a.prototype.changeTilt=ggP2VR.a.prototype.bk;ggP2VR.a.prototype.changeTiltLog=ggP2VR.a.prototype.Qm;ggP2VR.a.prototype.getFov=ggP2VR.a.prototype.Wf;ggP2VR.a.prototype.getFovDest=ggP2VR.a.prototype.qn;ggP2VR.a.prototype.setFov=ggP2VR.a.prototype.zg;ggP2VR.a.prototype.changeFov=ggP2VR.a.prototype.Zj;ggP2VR.a.prototype.changeFovLog=ggP2VR.a.prototype.yi;ggP2VR.a.prototype.getRoll=ggP2VR.a.prototype.Un;
ggP2VR.a.prototype.setRoll=ggP2VR.a.prototype.Ml;ggP2VR.a.prototype.setPanTilt=ggP2VR.a.prototype.$o;ggP2VR.a.prototype.setPanTiltFov=ggP2VR.a.prototype.Eg;ggP2VR.a.prototype.setDefaultView=ggP2VR.a.prototype.Vo;ggP2VR.a.prototype.setLocked=ggP2VR.a.prototype.Yo;ggP2VR.a.prototype.setLockedMouse=ggP2VR.a.prototype.Bg;ggP2VR.a.prototype.setLockedKeyboard=ggP2VR.a.prototype.Ag;ggP2VR.a.prototype.getLockedKeyboard=ggP2VR.a.prototype.An;ggP2VR.a.prototype.setLockedWheel=ggP2VR.a.prototype.Cg;
ggP2VR.a.prototype.moveTo=ggP2VR.a.prototype.moveTo;ggP2VR.a.prototype.moveToEx=ggP2VR.a.prototype.Kh;ggP2VR.a.prototype.moveToDefaultView=ggP2VR.a.prototype.ro;ggP2VR.a.prototype.moveToDefaultViewEx=ggP2VR.a.prototype.so;ggP2VR.a.prototype.addHotspotElements=ggP2VR.a.prototype.Sj;ggP2VR.a.prototype.playSound=ggP2VR.a.prototype.ye;ggP2VR.a.prototype.playPauseSound=ggP2VR.a.prototype.vl;ggP2VR.a.prototype.playStopSound=ggP2VR.a.prototype.Lo;ggP2VR.a.prototype.pauseSound=ggP2VR.a.prototype.kj;
ggP2VR.a.prototype.activateSound=ggP2VR.a.prototype.Cm;ggP2VR.a.prototype.soundGetTime=ggP2VR.a.prototype.tp;ggP2VR.a.prototype.soundSetTime=ggP2VR.a.prototype.up;ggP2VR.a.prototype.isPlaying=ggP2VR.a.prototype.ic;ggP2VR.a.prototype.stopSound=ggP2VR.a.prototype.Cj;ggP2VR.a.prototype.setVolume=ggP2VR.a.prototype.op;ggP2VR.a.prototype.changeVolume=ggP2VR.a.prototype.Tm;ggP2VR.a.prototype.removeHotspots=ggP2VR.a.prototype.Dl;ggP2VR.a.prototype.addHotspot=ggP2VR.a.prototype.Dm;
ggP2VR.a.prototype.updateHotspot=ggP2VR.a.prototype.Np;ggP2VR.a.prototype.removeHotspot=ggP2VR.a.prototype.Oo;ggP2VR.a.prototype.setActiveHotspot=ggP2VR.a.prototype.tf;ggP2VR.a.prototype.getPointHotspotIds=ggP2VR.a.prototype.Pn;ggP2VR.a.prototype.getHotspot=ggP2VR.a.prototype.sn;ggP2VR.a.prototype.setFullscreen=ggP2VR.a.prototype.uf;ggP2VR.a.prototype.toggleFullscreen=ggP2VR.a.prototype.fi;ggP2VR.a.prototype.enterFullscreen=ggP2VR.a.prototype.cn;ggP2VR.a.prototype.exitFullscreen=ggP2VR.a.prototype.exitFullscreen;
ggP2VR.a.prototype.getIsFullscreen=ggP2VR.a.prototype.un;ggP2VR.a.prototype.startAutorotate=ggP2VR.a.prototype.Ul;ggP2VR.a.prototype.stopAutorotate=ggP2VR.a.prototype.Ap;ggP2VR.a.prototype.toggleAutorotate=ggP2VR.a.prototype.Ep;ggP2VR.a.prototype.startAnimation=ggP2VR.a.prototype.xp;ggP2VR.a.prototype.createLayers=ggP2VR.a.prototype.ek;ggP2VR.a.prototype.removePanorama=ggP2VR.a.prototype.Uh;ggP2VR.a.prototype.getScreenResolution=ggP2VR.a.prototype.Ek;ggP2VR.a.prototype.getMaxScreenResolution=ggP2VR.a.prototype.Ak;
ggP2VR.a.prototype.getNodeIds=ggP2VR.a.prototype.Gn;ggP2VR.a.prototype.getNodeUserdata=ggP2VR.a.prototype.Ri;ggP2VR.a.prototype.getNodeLatLng=ggP2VR.a.prototype.Hn;ggP2VR.a.prototype.getNodeTitle=ggP2VR.a.prototype.Kn;ggP2VR.a.prototype.getCurrentNode=ggP2VR.a.prototype.yk;ggP2VR.a.prototype.getNextNode=ggP2VR.a.prototype.Bk;ggP2VR.a.prototype.getPrevNode=ggP2VR.a.prototype.Sn;ggP2VR.a.prototype.getLastVisitedNode=ggP2VR.a.prototype.zn;ggP2VR.a.prototype.getCurrentPointHotspots=ggP2VR.a.prototype.pn;
ggP2VR.a.prototype.getPositionAngles=ggP2VR.a.prototype.Rn;ggP2VR.a.prototype.getPositionRawAngles=ggP2VR.a.prototype.Ck;ggP2VR.a.prototype.nodeVisited=ggP2VR.a.prototype.wo;ggP2VR.a.prototype.setElementIdPrefix=ggP2VR.a.prototype.Wo;ggP2VR.a.prototype.videoPanoPlay=ggP2VR.a.prototype.Wp;ggP2VR.a.prototype.videoPanoStop=ggP2VR.a.prototype.Xp;ggP2VR.a.prototype.videoPanoPause=ggP2VR.a.prototype.Vp;ggP2VR.a.prototype.getVideoPanoTime=ggP2VR.a.prototype.Zn;ggP2VR.a.prototype.setVideoPanoTime=ggP2VR.a.prototype.np;
ggP2VR.a.prototype.getVideoPanoObject=ggP2VR.a.prototype.Yn;ggP2VR.a.prototype.setVideoPanoSource=ggP2VR.a.prototype.mp;ggP2VR.a.prototype.getMediaObject=ggP2VR.a.prototype.En;ggP2VR.a.prototype.registerVideoElement=ggP2VR.a.prototype.zl;ggP2VR.a.prototype.disableSoundLoading=ggP2VR.a.prototype.bn;ggP2VR.a.prototype.setCrossOrigin=ggP2VR.a.prototype.Uo;ggP2VR.a.prototype.setProjection=ggP2VR.a.prototype.jd;ggP2VR.a.prototype.getProjection=ggP2VR.a.prototype.qa;
ggP2VR.a.prototype.changeProjection=ggP2VR.a.prototype.zi;ggP2VR.a.prototype.changeProjectionEx=ggP2VR.a.prototype.zi;ggP2VR.a.prototype.changeLensflares=ggP2VR.a.prototype.Nm;ggP2VR.a.prototype.setTransition=ggP2VR.a.prototype.kp;ggP2VR.a.prototype.getMapType=ggP2VR.a.prototype.Dn;ggP2VR.a.prototype.getMapDetails=ggP2VR.a.prototype.Cn;ggP2VR.a.prototype.getNodeMapCoords=ggP2VR.a.prototype.In;ggP2VR.a.prototype.getNodeMapCoordsInPercent=ggP2VR.a.prototype.Jn;
ggP2VR.a.prototype.getMapContainingNode=ggP2VR.a.prototype.Bn;ggP2VR.a.prototype.addVariable=ggP2VR.a.prototype.Em;ggP2VR.a.prototype.setVariableValue=ggP2VR.a.prototype.Yh;ggP2VR.a.prototype.getVariableValue=ggP2VR.a.prototype.Xn;ggP2VR.a.prototype.setUseGyro=ggP2VR.a.prototype.lp;ggP2VR.a.prototype.getUseGyro=ggP2VR.a.prototype.Wn;ggP2VR.a.prototype.getOS=ggP2VR.a.prototype.Ln;ggP2VR.a.prototype.getBrowser=ggP2VR.a.prototype.nn;
